# A set of predefined MULTILIB which can be used for different ARM targets.
# Via the configure option --with-multilib-list, user can customize the
# final MULTILIB implementation.

comma := ,
space :=
space +=

MULTILIB_OPTIONS   = mthumb/marm
MULTILIB_DIRNAMES  = thumb arm
MULTILIB_OPTIONS  += march=armv6s-m/march=armv7-m/march=armv7e-m/march=armv7-r/march=armv7-a
MULTILIB_DIRNAMES += armv6-m armv7-m armv7e-m armv7-r armv7-a 
MULTILIB_OPTIONS  += mfloat-abi=softfp/mfloat-abi=hard
MULTILIB_DIRNAMES += softfp fpu
MULTILIB_OPTIONS  += mfpu=fpv4-sp-d16/mfpu=vfpv3-d16/mfpu=neon
MULTILIB_DIRNAMES += fpv4-sp-d16 vfpv3-d16 neon

MULTILIB_MATCHES   = march?armv6s-m=mcpu?cortex-m0
MULTILIB_MATCHES  += march?armv6s-m=mcpu?cortex-m0plus
MULTILIB_MATCHES  += march?armv6s-m=mcpu?cortex-m1
MULTILIB_MATCHES  += march?armv6s-m=march?armv6-m
MULTILIB_MATCHES  += march?armv7-m=mcpu?cortex-m3
MULTILIB_MATCHES  += march?armv7e-m=mcpu?cortex-m4
MULTILIB_MATCHES  += march?armv7-r=mcpu?cortex-r4
MULTILIB_MATCHES  += march?armv7-r=mcpu?cortex-r4f
MULTILIB_MATCHES  += march?armv7-r=mcpu?cortex-r5
MULTILIB_MATCHES  += march?armv7-a=mcpu?cortex-a8
MULTILIB_MATCHES  += march?armv7-a=mcpu?cortex-a8

MULTILIB_EXCEPTIONS =

MULTILIB_REQUIRED  = mthumb
MULTILIB_REQUIRED += marm
MULTILIB_REQUIRED += mfloat-abi=hard

MULTILIB_OSDIRNAMES  = mthumb=!thumb
MULTILIB_OSDIRNAMES += marm=!arm
MULTILIB_OSDIRNAMES += mfloat-abi.hard=!fpu

ifneq (,$(findstring armv6-m,$(subst $(comma),$(space),$(with_multilib_list))))
MULTILIB_REQUIRED   += mthumb/march=armv6s-m
MULTILIB_OSDIRNAMES += mthumb/march.armv6s-m=!armv6-m
endif

ifneq (,$(findstring armv7-m,$(subst $(comma),$(space),$(with_multilib_list))))
MULTILIB_REQUIRED   += mthumb/march=armv7-m
MULTILIB_OSDIRNAMES += mthumb/march.armv7-m=!armv7-m
endif

ifneq (,$(findstring armv7e-m,$(subst $(comma),$(space),$(with_multilib_list))))
MULTILIB_REQUIRED   += mthumb/march=armv7e-m
MULTILIB_REQUIRED   += mthumb/march=armv7e-m/mfloat-abi=softfp/mfpu=fpv4-sp-d16
MULTILIB_REQUIRED   += mthumb/march=armv7e-m/mfloat-abi=hard/mfpu=fpv4-sp-d16
MULTILIB_OSDIRNAMES += mthumb/march.armv7e-m=!armv7e-m
MULTILIB_OSDIRNAMES += mthumb/march.armv7e-m/mfloat-abi.hard/mfpu.fpv4-sp-d16=!armv7e-m/fpu
MULTILIB_OSDIRNAMES += mthumb/march.armv7e-m/mfloat-abi.softfp/mfpu.fpv4-sp-d16=!armv7e-m/softfp
endif

ifneq (,$(findstring armv7-r,$(subst $(comma),$(space),$(with_multilib_list))))
MULTILIB_REQUIRED   += mthumb/march=armv7-r
MULTILIB_REQUIRED   += mthumb/march=armv7-r/mfloat-abi=softfp/mfpu=vfpv3-d16
MULTILIB_REQUIRED   += mthumb/march=armv7-r/mfloat-abi=hard/mfpu=vfpv3-d16
MULTILIB_OSDIRNAMES += mthumb/march.armv7-r=!armv7-r/thumb
MULTILIB_OSDIRNAMES += mthumb/march.armv7-r/mfloat-abi.hard/mfpu.vfpv3-d16=!armv7-r/thumb/fpu
MULTILIB_OSDIRNAMES += mthumb/march.armv7-r/mfloat-abi.softfp/mfpu.vfpv3-d16=!armv7-r/thumb/softfp
endif

ifneq (,$(findstring armv7-a,$(subst $(comma),$(space),$(with_multilib_list))))
MULTILIB_REQUIRED   += mthumb/march=armv7-a
MULTILIB_REQUIRED   += mthumb/march=armv7-a/mfloat-abi=softfp/mfpu=neon
MULTILIB_REQUIRED   += mthumb/march=armv7-a/mfloat-abi=hard/mfpu=neon
MULTILIB_OSDIRNAMES += mthumb/march.armv7-a=!armv7-a/thumb
MULTILIB_OSDIRNAMES += mthumb/march.armv7-a/mfloat-abi.hard/mfpu.neon=!armv7-a/thumb/fpu
MULTILIB_OSDIRNAMES += mthumb/march.armv7-a/mfloat-abi.softfp/mfpu.neon=!armv7-a/thumb/softfp
endif
