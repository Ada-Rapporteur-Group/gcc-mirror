2016-05-27  Michael Meissner  <meissner@linux.vnet.ibm.com>

	* config/rs6000/predicates.md (splat_input_operand): Make splat
	much stricter in what it accepts.

	* config/rs6000/rs6000.c (rs6000_expand_vector_init): Don't do
	force_reg, since gen_vsx_splat_v2di/gen_vsx_splat_v2df now does
	it.

	* config/rs6000/rs6000.md (VSX_SPLAT): New iterator for load/move
	with splat.
	(vsx_splat_<mode>): Add expanders for 64-bit load/move splat
	instructions, and rework the 32-bit load/move splat instructions.
	Don't allow cases that the hardware doesn't support.
	(splat peepholes): New peephole to convert a scalar offsettable
	load with a splat operation into a load with splat.
	(vsx_splat_<mode>_internal): Rename from vsx_splat_move.  Simplify
	alternatives.  Add ISA 3.0 mtvsrdd support.
	(vsx_splat_v4si_internal): Use splat_input_operand predicate.
	(vsx_splat_v4sf_internal): Likewise.

2016-05-27   Michael Meissner  <meissner@linux.vnet.ibm.com>

	Clone branch subversion id 236796

