#Build below library for ARM armv7e-m architecture.
#  armv7e-m/     -mthumb -march=armv7e-m

MULTILIB_OPTIONS      += march=armv7e-m mfpu=fpv4-sp-d16

MULTILIB_DIRNAMES     += armv7e-m fpv4-sp-d16

MULTILIB_EXCEPTIONS   += march=armv7e-m*
MULTILIB_EXCEPTIONS   += marm*/march=armv7e-m*
MULTILIB_EXCEPTIONS   += mfloat-abi*/march=armv7e-m*
MULTILIB_EXCEPTIONS   += mthumb/mfloat-abi*/march=armv7e-m

# Common exceptions.
MULTILIB_EXCEPTIONS   += *march=armv7e-m*/mfpu=vfpv3-d16*
MULTILIB_EXCEPTIONS   += *mfpu*/mfpu*
MULTILIB_EXCEPTIONS   += *march*/march*
MULTILIB_EXCEPTIONS   += march*/mfpu*
MULTILIB_EXCEPTIONS   += marm/mfpu*
MULTILIB_EXCEPTIONS   += mcpu*/mfpu*
MULTILIB_EXCEPTIONS   += mfloat-abi=hard/mfpu*
MULTILIB_EXCEPTIONS   += mfloat-abi=softfp/mfpu*
MULTILIB_EXCEPTIONS   += mfpu*
MULTILIB_EXCEPTIONS   += mthumb/march*/mfpu*
MULTILIB_EXCEPTIONS   += mthumb/mfloat-abi=hard/mfpu*
MULTILIB_EXCEPTIONS   += mthumb/mfloat-abi=softfp/mfpu*
MULTILIB_EXCEPTIONS   += mthumb/mfpu*

MULTILIB_MATCHES      += march?armv7e-m=mcpu?cortex-m4

MULTILIB_OSDIRNAMES   += mthumb/march.armv7e-m=!armv7e-m
MULTILIB_OSDIRNAMES   += mthumb/mfloat-abi.hard/march.armv7e-m/mfpu.fpv4-sp-d16=!armv7e-m/fpu
MULTILIB_OSDIRNAMES   += mthumb/mfloat-abi.softfp/march.armv7e-m/mfpu.fpv4-sp-d16=!armv7e-m/softfp
