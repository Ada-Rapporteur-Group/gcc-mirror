
2015-06-09   Basile Starynkevitch  <basile@starynkevitch.net>
	{{ The magic symbols are _MELT_FILE_ & _MELT_LINE_, mimicking the
	__FILE__ and __LINE__ C magical macros. }}
	* melt-runtime.cc (MELT_MAGICSYMB_FILE) is now "_MELT_FILE_"
	(MELT_MAGICSYMB_LINE) becomes "_MELT_LINE_".
	(meltgc_readmacrostringsequence, meltgc_readval): Update test for
	the _MELT_FILE_ & _MELT_LINE_ magical symbols.
	* melt/warmelt-base.melt: in comment inside macrostring,
	temporarily use % instead of $....
	* melt/warmelt-moremacro.melt (mexpand_quote): Handle variadic
	quote, but warns when outside of macro-string.

2015-06-09   Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/generated/*: Regenerate all.

2015-06-09   Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.cc (meltgc_readmacrostringsequence): Move warning
	about quoted macro string with $%s symbol.

	* melt/warmelt-moremacro.melt (mexpand_quote): More verbose
	messages when quote gets more than one argument, perhaps should
	handle it differently...

2015-06-09   Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/generated/*: Regenerate all.
2015-06-09   Basile Starynkevitch  <basile@starynkevitch.net>
	{{New feature: magic symbols MELT_SOURCE_FILE & MELT_SOURCE_LINE
	are expanded at parse time to the file name and the line number.
	Garbage collection threshold are increased.}}
	* melt-predef.list (UNKNOWN_LOCATION): new predefined.
	* melt-runtime.cc
	(MELT_MIN_MINORSIZE_KW, MELT_MAX_MINORSIZE_KW)
	(MELT_MIN_FULLTHRESHOLD_KW, MELT_DEFAULT_FULLTHRESHOLD_KW)
	(MELT_MIN_PERIODFULL, MELT_DEFAULT_PERIODFULL): Increase GC
	thresholds.
	(meltgc_readmacrostringsequence, meltgc_readval): Magic processing
	for MELT_SOURCE_FILE and MELT_SOURCE_LINE symbols, always parsed
	magically!
	* melt/warmelt-first.melt: Predefine :UNKNOWN_LOCATION keyword.
	* melt-module.mk: Pass -DMELTBUILD_BASE=$(basename $<)...

2015-05-27   Basile Starynkevitch  <basile@starynkevitch.net>
	{{ensure that MELT can be compiled with --enable-checks=release}}
	* melt-runtime.h (MELT_LOCATION_HERE,MELT_LOCATION_HERE_PRINTF):
	Are no-op when MELT_HAVE_DEBUG is false.
	* melt-runtime.cc (meltgc_send, melt_compile_source)
	(meltgc_readsexpr, meltgc_readmacrostringsequence)
	(meltgc_readval): Clear the first byte of curlocbuf...

2015-05-27   Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/generated/*: Regenerate all.

2015-05-27   Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.h: #include "gcc-plugin.h" & "plugin-version.h" &
	"diagnostic-core.h"
	* melt-runtime.cc (melt_ggcstart_callback, melt_garbcoll)
	(melt_load_module_index): More precise melt_fatal_error message.

2015-05-27   Basile Starynkevitch  <basile@starynkevitch.net>
	{{merged with GCC 5, so}}
	* melt-runtime.h (melt_fatal_error, melt_fatal_error_at_line):
	Pass UNKNOWN_LOCATION for GCC 5. Re-indented with command:
	   astyle --style=gnu -s2

	* melt-runtime.cc:  Re-indented with command:
	   astyle --style=gnu -s2
	(melt_branch_process_arguments, melt_ggcstart_callback)
	(melt_reserved_allocation_failure): Use melt_fatal_error instead
	of fatal_error.

	* melt/generated/meltrunsup-inc.cc: Manually edited for fatal_error.
	* melt/generated/warmelt-first.cc: Ditto.

	* melt/warmelt-first.melt (melt_assert_failure_fun): Ditto.
	* melt/warmelt-modes.melt (generate_runtypesupport_scanning):
	Ditto, in the emitted code.

	* Makefile.in: mention s-gtype instead of gt-melt-runtime.h in
	dependencies.
	(TEXI_GCCINT_FILES): Add meltgendoc.texi.


2015-01-23   Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/libmelt-ana-gimple.melt: Adding all static_casts. Compiles
	ok.

2015-01-22   Basile Starynkevitch  <basile@starynkevitch.net>
	{{@@ STILL UNSTABLE and not fully building, but with progress...}}
	* melt/libmelt-ana-gimple.melt: Adding more static_casts. Incomplete.

2015-01-21   Basile Starynkevitch  <basile@starynkevitch.net>
	{{@@ STILL UNSTABLE and not fully building, but with progress...}}
	* melt/libmelt-ana-gimple.melt: Adding static_casts. Incomplete.

2015-01-21   Basile Starynkevitch  <basile@starynkevitch.net>
	{{@@ STILL UNSTABLE and not fully building, but with progress...}}
	* melt/libmelt-ana-base.melt (melthk_gimple_gate)
	(melthk_gimple_execute): Remove debugeprintf-s.

	* melt/libmelt-ana-gimple.melt: Use gimple_build_assign instead of
	gimple_build_assign_with_ops for GCC 5.0, but still incomplete so
	the generated C++ does not compile yet...

2015-01-21   Basile Starynkevitch  <basile@starynkevitch.net>
	{{merged with trunk -i.e. GCC5.0 in stage4- using
	svn merge -r209216:219879 svn+ssh://bstarynk@gcc.gnu.org/svn/gcc/trunk
	but should probably have used
	svn merge -r209216:219879 ^/trunk

	@@@ UNSTABLE since libmelt-ana-gimple.melt not compiling, but
	translator painfully bootstrapping!!@@@@ }}

	* toplev.c: Merged manually by keeping MELT extra stuff.
	* toplev.h: Likewise.
	* gengtype.c: Add "melt-runtime.h" in list, but merged with trunk.

	* melt-runtime.h (MELT_VERSION_STRING): Bump to "1.2-pre-merged".
	(meltgc_walk_gimple_seq): Remove.
	(gt_ggc_mx_gimple_statement_d): Same for GCC 4.9 & 5.0

	* melt-runtime.cc: Update copyright year.
	(ggc_alloc_cleared_melt_valuevector_st, melt_resize_scangcvect):
	Call ggc_internal_cleared_alloc.
	(melt_val2passflag): Skip TODO_verify_ssa, TODO_verify_flow,
	TODO_verify_stmts, TODO_verify_rtl_sharing for GCC 5.0.
	(meltgc_walkstmt_cb, meltgc_walktree_cb)
	(melt_tree_walk_frame_size, meltgc_walk_gimple_seq): Remove.
	(melt_gt_ggc_mx_gimple_seq_d): Call
	gt_ggc_mx_gimple_statement_base.
	* melt-build-script.tpl: Update copyright year. Don't symlink
	meltrunsup.h anymore.
	* melt-build-script.sh: Regenerate.

	* melt/warmelt-base.melt: Update copyright year.
	(valdesc_object, valdesc_mapobjects, valdesc_mapstrings)
	(valdesc_multiple, valdesc_closure, valdesc_routine, valdesc_hook)
	(valdesc_bucketlongs, valdesc_jsonobject, valdesc_string)
	(valdesc_strbuf, valdesc_pair, valdesc_list, valdesc_int)
	(valdesc_double, valdesc_mixint, valdesc_mixloc)
	(valdesc_mixbigint, valdesc_real, valdesc_special_data): Use
	ggc_internal_alloc & ggc_internal_cleared_alloc for GCC 5.0.
	(json_canonical_name): Use ISUPPER, ISALPHA, TOUPPER instead of
	their standard <ctype.h> lowercase macros.
	* melt/warmelt-modes.melt: Update copyright year.
	(generate_runtypesupport_forwcopy_fun): Emit both GCC 4.9 & 5.0
	compatible code.
	* melt/libmelt-ana-base.melt: Update copyright year.
	* melt/libmelt-ana-gimple.melt: TO BE IMPROVED
	* melt/generated/*: Painfully regenerated several times thru GCC
	4.9 MELT plugin.


2015-01-20   Basile Starynkevitch  <basile@starynkevitch.net>
	Move previous gcc/ChangeLog.MELT to gcc/ChangeLog.MELT.2012-2014


Copyright (C) 2015 Free Software Foundation, Inc.

Copying and distribution of this file, with or without modification,
are permitted in any medium without royalty provided the copyright
notice and this notice are preserved.

/// Local Variables:
/// mode: change-log
/// End:
