
2014-10-10  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/libmelt-ana-tree.melt: Adding second load of
	_libmelt-treecode.melt generated file.

2014-10-06  Basile Starynkevitch  <basile@starynkevitch.net>
	* Makefile.in (_libmelt-treecode.melt): Generate it correctly.

	* melt/libmelt-ana-tree.melt (mexpand_gcc_tree_code_define):
	Improve it.

2014-10-06  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/libmelt-ana-tree.melt: Successfully loading once
	_libmelt-treecode.melt, invoking mexpand_gcc_tree_code_define, to
	make instances of class_gcc_tree_code.

2014-10-06  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/generated/*: Regenerate.

2014-10-06  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.h (MELT_VERSION_STRING): Bump to 1.1.3pre4.

2014-10-06  Basile Starynkevitch  <basile@starynkevitch.net>
	{{tletmacro-3 is successful}}
	* melt/warmelt-macro.melt: expand_pairlist_as_tuple should be used
	much more systematically to expand a list of operands.
	(mexpand_load, pairlist_to_progn, mexpand_and, mexpand_or)
	(mexpand_let, mexpand_letrec, mexpand_lambda, mexpand_variadic)
	(mexpand_multicall, pairlist_to_return, mexpand_forever)
	(mexpand_exit, mexpand_export_values, mexpand_export_class): Use
	expand_pairlist_as_tuple.
	* testsuite/melt/tletmacro-3.melt: Improved, missing quote!

2014-10-05  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-macro.melt
	(melt_invoke_translator_runner_macroexpansions): Don't invoke any
	closure if we had errors.

2014-10-05  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-macro.melt (expand_apply, expand_msend)
	(macroexpand_1, melt_invoke_translator_runner_macroexpansions)
	(mexpand_defmacro): More debug.

	* melt/warmelt-normal.melt (normalize_tuple, normexp_symbol): More
	debug.

	* testsuite/melt/tletmacro-3.melt: Improved, since it was wrong...

2014-10-03  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/generated/*: Regenerate.

2014-10-03  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-debug.melt (melt_debug_fun): Wrong periodic test,
	also emit a newline once every 512 times with the cpu & current
	time.
	* melt/warmelt-outobj.melt (give_normalized_macroexpanded_list):
	More debug.
2014-10-03  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-macro.melt (hook_macro_installer): More debug.
	* melt/warmelt-normal.melt (normexp_update_current_module_environment_reference): More debug.
	* melt/warmelt-outobj.melt (melt_translate_run_macroexpansions_list): More debug.

2014-10-03  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-debug.melt (melt_debug_fun): Wrong snprintf
	arguments, corrected for showing the current time every 512
	messages.
2014-10-02  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/libmelt-ana-tree.melt (tree_va_list_type_node): New.

2014-10-02  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/generated/*: Regenerate.
2014-10-02  Basile Starynkevitch  <basile@starynkevitch.net>
	{{tletmacro-3 still fails}}
	* melt/warmelt-macro.melt (melt_delayed_macro_expander)
	(mexpand_let): More debug.
	* melt/warmelt-debug.melt (melt_debug_fun): Emit once in a while
	-every 512 time- the clock & cputime.

	* melt/warmelt-outobj.melt (give_normalized_macroexpanded_list):
	Avoid prepending several times the instance of
	class_source_update_current_module_environment_reference...

	* testsuite/melt/tletmacro-3.melt: Improved...

2014-10-02  Basile Starynkevitch  <basile@starynkevitch.net>
	{{tletmacro-3 fails and has an infinite recursion; the macro
	expander does not seems to be updated in place in its binder...}}
	* testsuite/melt/tletmacro-2.melt: Improved...
	* testsuite/melt/tletmacro-3.melt: Improved...

	* melt/warmelt-macro.melt (mexpand_let): Remove test in mexpanser
	lambda....

2014-10-02  Basile Starynkevitch  <basile@starynkevitch.net>

	* testsuite/melt/tletmacro-3.melt: New file.
	* testsuite/melt/tletmacro-3-loaded.melt: New file.

	* melt/warmelt-macro.melt (mexpand_load): More debug.

2014-10-01  Basile Starynkevitch  <basile@starynkevitch.net>

	* Makefile.in (melt.encap): Add dependency on generated
	_libmelt-treecode.melt.

2014-10-01  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/generated/*: Regenerate.

2014-10-01  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (MELT_VERSION_STRING): Bump to 1.1.3pre3.

	* melt/warmelt-macro.melt (lambda_arg_bindings): Accept an
	argmode. Maybe extend it to also accept a :macro argmode?

2014-10-01  Basile Starynkevitch  <basile@starynkevitch.net>

	* testsuite/melt/tletmacro-2.melt: New file.
	* testsuite/melt/tletmacro-0.melt: More.
	* melt/warmelt-normal.melt (normexp_symbol): More debug.
	(normexp_let): Bind the good symbol -macsymb not macsym- for
	:macro binding.


2014-10-01  Basile Starynkevitch  <basile@starynkevitch.net>

	{{current tletmacro-0 runs correctly}}
	* melt/warmelt-normal.melt (normexp_let): For :macro binding, call
	normalize_lambda in the newenv with its own newmacenv ...
	(normexp_defun_defmacro): More debug.

2014-09-30  Basile Starynkevitch  <basile@starynkevitch.net>

	{{in current tletmacro-0, the add2out is incorrectly considered as
	a routine constant.  So compare with an equivalent test binding a
	lambda instead of a macro}}
	* melt/warmelt-genobj.melt (compile2obj_initproc): More debug.

	* melt/warmelt-normal.melt (normexp_symbol): More debug.

2014-09-30  Basile Starynkevitch  <basile@starynkevitch.net>

	{{tletmacro-0 compiles ok but crash at runtime}}
	* melt/warmelt-normal.melt (normexp_let): For macro letbinding
	don't restore the :nctx_proclist field, e.g. partly revert to svn
	rev.215500.

	* melt/warmelt-genobj.melt (compile2obj_procedure): More debug.

2014-09-30  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.cc (meltgc_new_mapobjects, meltgc_new_mapstrings):
	Initialize the hash.

	* melt/wamelt-genobj.melt (compile2obj_initproc): More debug.

	* testsuite/melt/tletmacro-0.melt: simplified.

2014-09-30  Basile Starynkevitch  <basile@starynkevitch.net>

	* testsuite/melt/tletmacro-0.melt: simplified.

	* melt/wamelt-macro.melt: More debug.
	* melt/warmelt-normal.melt: More debug.
	* melt/warmelt-outobj.melt: More debug.

2014-09-28  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-genobj.melt (compile2obj_initproc): Make a
	listrestrout and return its secondarily, which is currently
	useless.

	* melt/warmelt-outobj.melt (outpucod_initialmoduleroutine): Emit a
	#warning when a module does not claim GPL compatibility.

2014-09-28  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/generated/*: Regenerate.

2014-09-28  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-outobj.melt (translate_macroexpanded_list): The
	iniproctransl argument can be a closure returning secondarily a
	tuple or list of quasiroutines...

2014-09-28  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/generated/*: Regenerate.

2014-09-28  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-build-script.tpl (meltbuild_do_an_extra): Typo in emitted
	if condition.

	* melt-build-script.sh: Regenerate.

	* melt/warmelt-genobj.melt (class_protoroutineobj): New class with
	fields oprout_loc & oprout_filenum moved from...
	(class_routineobj): Moved fields into class_protoroutineobj.


2014-09-27  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-outobj.melt (outpucod_initialmoduleroutine):
	Improve emitted comment.

2014-09-26  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/generated/*: Regenerate.

2014-09-26  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.cc (meltgc_new_mixbigint_mpz): Allocate one more
	byte.

	* melt/libmelt-ana-tree.melt (tree_integer_type): If min & max
	values are less than LONG_MAX/2 in absolute value, give them as
	boxed integers.

2014-09-26  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-base.melt (make_jsonobject): Accept mixints &
	mixbigints.

2014-09-26  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/libmelt-ana-tree.melt
	(foreach_chain_value_purpose_in_tree_list): Typo in emitted comment.

2014-09-26  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/libmelt-ana-base.melt (each_local_decl_cfun): Add a :doc
	string.

2014-09-26  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/libmelt-ana-tree.melt
	(foreach_chain_value_purpose_in_tree_list): New citerator.

2014-09-26  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/libmelt-ana-tree.melt (tree_method_type): Also extract
	trbasety & trargty.

2014-09-25  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.h (MELT_VERSION_STRING): Bump to 1.1.3pre2.
	* melt/libmelt-ana-tree.melt (tree_function_decl_full): New.

2014-09-25  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-first.melt (mapobject_hash, mapstring_hash): New
	primitives.

	* melt/warmelt-debug.melt (dbgout_mapobject_method)
	(dbgout_mapstring_method): Use them to display the hash.

2014-09-24  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/generated/*: Regenerate.

2014-09-24  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-first.melt (ctype_gimple_seq): Typo on its hashfun.

2014-09-24  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.h (melt_hash_mapobjects, melt_hash_mapstrings): New
	functions.
	* melt-runtime.cc (meltgc_raw_new_mappointers): Fill meltmap_hash.
	* melt/warmelt-first.melt (class_ctype_gty): Add ctypg_maphashfun
	field.
	(ctype_tree, ctype_gimple, ctype_gimple_seq, ctype_edge)
	(ctype_loop, ctype_rtx, ctype_bitmap): Fill it.

	* melt/warmelt-base.melt (valdesc_mapobjects, valdesc_mapstrings):
	Fill the meltmap_hash field.

	* melt/warmelt-modes.melt (generate_runtypesupport_forwcopy_fun)
	(generate_runtypesupport_mapfun): Fill the hash and generate the
	hash function.

2014-09-24  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/generated/*: Regenerate.
	* melt-runtime.cc (struct meltmappointers_st): Add meltmap_hash
	field.

2014-09-24  Basile Starynkevitch  <basile@starynkevitch.net>
	{{adding a meltmap_hash field in maps, to ease debugging; very
	unstable, would need an edit of meltmappointers_st just after
	upgrade-warmelt.....}}

	* melt-runtime.cc (struct meltmappointers_st): Should add
	meltmap_hash...

	* melt/warmelt-base.melt (valdesc_mapobjects, valdesc_mapstrings):
	Add meltmap_hash field.

	* melt/warmelt-normal.melt (normexp_let): More debug.

	* melt/warmelt-genobj.melt (compile2obj_initproc)
	(compilobj_dataroutine): More debug.

	* melt/warmelt-modes.melt (generate_runtypesupport_gty): Emit
	meltmap_hash.

2014-09-24  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-genobj.melt (compile2obj_hook)
	(compilobj_dataroutine): More debug.

2014-09-24  Basile Starynkevitch  <basile@starynkevitch.net>

	* testsuite/melt/tletmacro-0.melt: Improve comment.

2014-09-23  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-genobj.melt (compilobj_dataroutine): More debug.

2014-09-23  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/generated/*: Regenerate.

2014-09-23  Basile Starynkevitch  <basile@starynkevitch.net>
	{{tletmacro-0 does not crash in the generated code, but fails to run}}
	* melt/warmelt-base.melt (list_clone): New function.

	* melt/warmelt-normal.melt (normexp_symbol, normexp_apply): More
	debug.
	(normexp_let): Clone the :nctx_proclist list field to restore it
	later for :macro bindings.

	* melt/warmelt-genobj.melt (get_free_objlocptr)
	(compilobj_nrep_constocc): More debug.

2014-09-23  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-outobj.melt (outpucod_objcompute)
	(outpucod_objapply): More use of output_descriptive_comment.

2014-09-23  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/generated/*: Regenerate.

2014-09-23  Basile Starynkevitch  <basile@starynkevitch.net>
	{{when translating with -f[plugin-arg-]melt-out-descr-comment, the
	emitted C code contains descriptive comments giving class name and
	hash code of the C output AST.}}
	* melt/warmelt-outobj.melt (flagval_utput_descr_comment): New variable.
	(do_output_descriptive_comment): New function.
	(output_descriptive_comment): New macro using above function.

2014-09-23  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-normal.melt (wrap_normal_letseq, normalize_lambda):
	More debug.

2014-09-22  Basile Starynkevitch  <basile@starynkevitch.net>

	{{tletmacro-0 & tletmacro-1 tests still crashing}}
	* melt/warmelt-normal.melt (class_nrep_macrolambdaroutproc): New
	class.
	(normexp_let): More debug.
	(normalize_lambda): Some special treatement for :macro lambdas,
	and more debug.

2014-09-22  Basile Starynkevitch  <basile@starynkevitch.net>

        * testsuite/melt/tletmacro-0.melt: New file, simpler but still
	crashing, example.
	* testsuite/melt/tletmacro-1.melt: Slightly simplified, still
	crashing.

2014-09-22  Basile Starynkevitch  <basile@starynkevitch.net>

        * testsuite/melt/tletmacro-1.melt: Crashing, and added output to stdout.

2014-09-19  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/generated/*: Regenerate.
2014-09-19  Basile Starynkevitch  <basile@starynkevitch.net>
	{{tletmacro-1 test is compiled completely but then crashes; unstable!!}}
	* melt/warmelt-normal.melt (normexp_defun_defmacro): Special case
	with isletmacro... Remove normexp-defun-hack program argument.
	(normexp_macro_installation): More debug.

2014-09-19  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-normal.melt (normexp_let): More for :macro binding.
	Untested yet.

2014-09-19  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-normal.melt (normexp_let): More for :macro binding,
	but incomplete.
	* testsuite/melt/tletrec3.melt: Slighty updated.

2014-09-18  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-normal.melt (class_nrep_macrolambda): New class.
	(normexp_let): Start handling macro, but incomplete code.

2014-09-17  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-normal.melt (normexp_defun_defmacro): More debug.
2014-09-17  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-normal.melt (normexp_defun_defmacro): Temporarily
	use the -fmelt-normexp-defun-hack program argument -either
	"macro", or "env", or anything else to keep as before- to force
	the basenv ...

2014-09-17  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-macro.melt (install_initial_macro)
	(install_initial_patmacro): Comment-out the debug ...

2014-09-17  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/generated/*: Regenerate.

2014-09-17  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-normal.melt (normexp_macro_installation):
	Use srcenv as argument to normexp_defun_defmacro.

2014-09-17  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-normal.melt (normexp_macro_installation):
	Retrieve using :smacinst_env the srcenv. Check it.

2014-09-17  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/generated/*: Regenerate.

2014-09-17  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-macro.melt (class_source_macro_installation): Add
	smacinst_env field.
	(mexpand_defmacro, mexpand_let): Fill it.

2014-09-16  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-macro.melt (melt_delayed_macro_expander): More debug.
	(class_source_defmacro_in_let): New class, with field
	smacro_sourceletbinding.
	(mexpand_let): Create an instance of class_source_defmacro_in_let.

	* melt/warmelt-normal.melt (normexp_let, normexp_defun_defmacro):
	More debug...

2014-09-16  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-macro.melt (mexpand_let): Tentatively handling
	macros...

2014-09-16  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/generated/*: Regenerate.

2014-09-16  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-macro.melt (mexpand_let): Update newenv
	incrementally, but macro bindings not handled yet.

2014-09-16  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-macro.melt (mexpand_let): Should update newenv
	incrementally in one pass...

2014-09-15  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-macro.melt (macroexpand_1, mexpand_let): More
	debug...

2014-09-15  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-debug.melt (dbgout_environment_method): Compute the
	environment depth into envdepth variable, not into depth formal!
	Now, environments are better displayed!

2014-09-14  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/generated/*: Regenerate.

2014-09-14  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-build-script.tpl (melt_build_error): Better date command.

	* melt-build-script.sh: Regenerate.
	* melt/warmelt-debug.melt: Improve indentation.

	* melt/warmelt-macro.melt (diagnostic_expand_message): Comment all debug.
	(macroexpand_1, mexpand_let): More debug.

2014-09-14  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-build-script.tpl (melt_build_error): Redirect some error
	info to _meltbuild_error.log file...

	* melt-build-script.sh: Regenerate.

	* melt/warmelt-macro.melt (class_source_lambda_for_macro): New
	class with slam_origmacro field.
	(class_source_let_binding_for_macro): New class with
	sletfm_macroletbind field.
	(mexpand_let): More code to handle :macro binding, but probably
	not working yet.

	* melt/warmelt-normal.melt (normexp_let): Error when unexpected
	macro binding.

	* testsuite/melt/tletmacro-1.melt: Improve.
2014-09-13  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-macro.melt (mexpand_let): For macros, should also
	make a normal function binding, in the case the macro occurs as
	simple variable in the let ...

	* testsuite/melt/tletmacro-1.melt: More debug.

2014-09-12  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-build-script.sh: Regenerate.

2014-09-12  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-macro.melt (mexpand_let): Append to the module's
	macro list.

2014-09-12  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-macro.melt (mexpand_let): LET :macro binding
	handled but untested...

2014-09-12  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-macro.melt (mexpand_let): The :macro letbinding
	might need class_source_lazy_macro_expansion or
	class_source_macro_installation...

2014-09-12  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-macro.melt (mexpand_let): The :macro letbinding is
	not yet implemented!

2014-09-11  Basile Starynkevitch  <basile@starynkevitch.net>

	* testsuite/melt/tletmacro-1.melt: Typo.

	* melt/warmelt-macro.melt: Improve comment.

2014-09-11  Basile Starynkevitch  <basile@starynkevitch.net>

	* testsuite/melt/tletmacro-1.melt: New file.

	* libmelt-ana-tree.melt: Improve macro.
2014-09-11  Basile Starynkevitch  <basile@starynkevitch.net>

	* libmelt-ana-tree.melt: More, should include
	_libmelt-treecode.melt ...

	* melt-build-script.def: libmelt-ana-tree has includeload with
	_libmelt-treecode.melt...

	* melt-build-script.sh: Regenerate.

	* emit-libmelt-treecode.inc: New file.

2014-09-10  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Changing to _warmelt-predef.melt the generated file name}}
	* Makefile.in: Use _warmelt-predef.melt instead of
	warmelt-predef.melt

	* melt-predef.list: Improve comment to mention
	_warmelt-predef.melt

	* melt/warmelt-normal.melt: Load _warmelt-predef.melt instead of
	warmelt-predef.melt generated file...

	* melt-build-script.def: warmelt-normal element is including
	_warmelt-predef.melt now.
	* melt-build-script.sh: Regenerate.

	* melt/libmelt-ana-tree.melt: Add a comment explaining how the
	binary tree-codes could be automatically handled.

	* melt/generated/*: Regenerate.

2014-09-10  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-macro.melt (expand_restlist_as_tuple): Exported.

	* melt/libmelt-ana-tree.melt (define_gcc_binary_tree): New macro.

2014-09-10  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/libmelt-ana-tree.melt (tree_with_cleanup_expr)
	(tree_cleanup_point_expr, tree_placeholder_expr): New.

2014-09-10  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/libmelt-ana-tree.melt (tree_bind_expr): New.

2014-09-10  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/libmelt-ana-tree.melt (tree_cond_expr, tree_vec_cond_expr)
	(tree_vec_perm_expr): New.

2014-09-10  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/libmelt-ana-tree.melt (tree_compound_expr, tree_init_expr)
	(tree_modify_expr, tree_target_expr): New.

2014-09-10  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/libmelt-ana-tree.melt (foreach_element_in_tree_constructor)
	(foreach_argument_in_function_tree, foreach_maptree): Add :doc
	string.

2014-09-09  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/libmelt-ana-tree.melt
	(foreach_element_in_tree_constructor): New citerator.

2014-09-09  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/libmelt-ana-tree.melt (tree_constructor): New.

2014-09-09  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/libmelt-ana-tree.melt (tree_obj_type_ref): New.

2014-09-09  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/libmelt-ana-tree.melt (tree_array_range_ref_full)
	(tree_realpart_expr, tree_imagpart_expr, tree_view_convert_expr)
	(tree_bit_field_ref): New.

2014-09-09  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/libmelt-ana-tree.melt (tree_any_abstract_decl)
	(tree_any_ignored_decl, tree_any_external_decl)
	(tree_any_local_decl, tree_any_virtual_decl)
	(tree_any_nonabstract_decl, tree_any_nonartificial_decl)
	(tree_any_nonignored_decl, tree_any_nonexternal_decl)
	(tree_any_nonlocal_decl, tree_any_nonvirtual_decl): New.

2014-09-09  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/libmelt-ana-tree.melt (tree_any_decl_of_context)
	(tree_any_decl_of_initial)
	(tree_any_decl_of_origin, tree_any_decl_of_type_align_size):
	New.

2014-09-09  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/xtramelt-ana-simple.melt (justscan_tree): Correct use of
	tree_decl.

	* melt/libmelt-ana-tree.melt (tree_debug_expr_decl)
	(tree_namespace_decl, tree_imported_decl, tree_namelist_decl)
	(tree_translation_unit_decl): New.

2014-09-09  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/libmelt-ana-tree.melt (tree_lang_type): New
	(tree_any_type_of_size_mode): Change signature so rename as
	(tree_any_type_of_size): Renaming of above.
	(tree_vector_type): New.
	(tree_fixed_cst, tree_complex_cst, tree_vector_cst): New.

2014-09-09  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/libmelt-ana-tree.melt (tree_block): Change signature.
	(tree_any_type, tree_any_type_of_chain, tree_any_type_of_context)
	(tree_any_type_of_pointer_to, tree_any_type_of_size_mode)
	(tree_any_type_of_variant): New cmatchers.

2014-09-09  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/libmelt-ana-tree.melt (tree_error_mark): New cmatcher.
	(tree_chain_to_tuple): Accepts a third function argument, to be
	applied to boxed chain elements and their index.

2014-09-07  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/libmelt-ana-tree.melt (tree_function_type): Change
	signature of cmatcher, since also extracts the list of types of
	arguments.

2014-09-06  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (MELT_VERSION_STRING): Bump to 1.1.3pre1.

2014-09-06  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (melt_wait_for_probe): Remove temporary
	workaround.
	* melt/generated/*: Regenerate.

2014-09-06  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Removing the probe}}
	* melt-runtime.h (melt_default_probe, melt_wait_for_probe)
	(melt_probe_stop, melt_probe_start)
	(melt_send_command_strbuf_to_probe): Remove declarations.
	(melt_wait_for_probe): Provide a temporary workaround static
	inline function.
	* melt-runtime.cc: Don't include wordexp.h
	(melt_probe_pid, melt_probe_reqfrom_fd, melt_probe_cmdto_fd)
	(melt_wait_for_probe, melt_probe_start, melt_probe_stop)
	(melt_send_command_strbuf_to_probe): Remove.
	(melt_really_initialize): Don't print MELTGCCBUILTIN_PROBE.
	* melt-build-script.def: Remove xtramelt-probe.
	* melt-build-script.sh: Regenerate.
	* melt/warmelt-hooks.melt
	* melt/xtramelt-probe.melt: Moved to obsolete-melt/
	* obsolete-melt/xtramelt-probe.melt: Moved from above.

2014-09-05  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/generated/*: Regenerate.
	* melt/generated/warmelt-hooks+04.cc: New file.

2014-09-06  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/generated/warmelt-hooks+03.cc: temporary manual patch to
	add meltrout_107_WARMELTmiHOOKS_UNREGISTER_CHILD_PROCESS_HANDLER;
	previous regeneration went wrong!

2014-09-05  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/generated/*: Regenerate.

2014-09-05  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/libmelt-ana-tree.melt (tree_type_decl): Renamed as...
	(tree_type_decl_with_name): Was the tree_type_decl cmatcher.
	(tree_type_decl): New cmatcher, with different signature than the
	old one of same name...

	* melt-runtime.h (MELT_VERSION_STRING): Bump to 1.1.3pre0.

2014-09-05  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-debug.melt (dbgout_mapstring_method): Slighty
	improved again...

2014-09-05  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-debug.melt (dbgout_mapstring_method): Slighty
	improved...

2014-09-04  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-hooks.melt
	(register_paragraph_input_channel_handler)
	(register_raw_input_channel_handler): Returns the channel.
	(unregister_input_channel): New function.
	(do_blocking_jsonrpc2_call): Use it.

2014-09-02  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/generated/*: Regenerate.

2014-09-02  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-outobj.melt (outputcod_objapply): Avoid emitting
	address of NULL cleverly....

2014-09-02  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-outobj.melt (outputcod_objapply): Avoid emitting
	address of NULL by filling the meltbp_aptr conditionally, only if
	value is non-null..

2014-09-02  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-hooks.melt (do_blocking_jsonrpc2_call): For a large
	timeoutms, poll several times ...

2014-09-02  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.h (MELT_VERSION_STRING): Bump to 1.1.2post.
	* melt/libmelt-ana-base.melt (each_cgraph_fun_call_flow_graph):
	Test #if MELT_GCC_VERSION >= 4009, not == 4009....
	* melt/libmelt-ana-tree.melt (tree_type_canonical): New cmatcher.

2014-08-31  Basile Starynkevitch  <basile@starynkevitch.net>
	{{MELT 1.1.2 release for GCC 4.8 & 4.9}}
	* melt-runtime.h (MELT_VERSION_STRING): Bump to 1.1.2.

2014-08-31  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (MELT_VERSION_STRING): Bump to 1.1.2pre7.

	* melt/libmelt-ana-base.melt (each_cgraph_pushed_cfun): New.

2014-08-31  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-build-script.tpl (meltbuild_do_an_extra): New function.
	Call it for building the library.

	* melt-build-script.sh: Regenerate.

2014-08-29  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/generated/*: Regenerate.

2014-08-29  Basile Starynkevitch  <basile@starynkevitch.net>
	{{justcount test runs ok on MELT branch}}
	* melt/warmelt-hooks.melt (hook_all_passes_end): clear
	:sysdata_pass_dict...

	* melt/libmelt-ana-base.melt (install_melt_pass_in_gcc): Improve
	doc string.

2014-08-29  Basile Starynkevitch  <basile@starynkevitch.net>
	{{See https://gcc.gnu.org/ml/gcc/2014-08/msg00313.html}}
	* melt-runtime.cc (meltgc_raw_put_mappointers): Slightly lower the
	threshold above which the hash table is grown. Add more
	gcc_assert-s.

	* melt/xtramelt-ana-base.melt (justcountipa_docmd): Explicitly
	clear the :ggcpass_data to avoid having edge hanging around and
	later make the GGC marker crash.

2014-08-29  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/generated/*: Regenerate.

2014-08-29  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-hooks.melt (hook_melt_do_initial_mode): Make an
	error when a mode is unknown.

2014-08-29  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/libmelt-ana-base.melt (each_cgraph_fun_call_flow_graph):
	Keep the $EACHCGRAFUNCFG#_n_bb if no CFG available; somehow hacky,
	since we should not call it in that case...

2014-08-28  Basile Starynkevitch  <basile@starynkevitch.net>
	{{justcount test fails on MELT branch}}
	* melt-build-script.tpl: emit comments in modlis files.
	* melt-build-script.sh: Regenerate.

2014-08-28  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-build-script.tpl: Use melt-runtime.ii not melt-runtime.i

	* melt-build-script.sh: Regenerate.

	* Makefile.in: Use melt-runtime.ii not melt-runtime.i

2014-08-27  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/generated/*: Regenerate.

2014-08-27  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-build-script.tpl: The justcount test can simply compile
	melt-runtime.i...
	(meltbuild_error): Show some spaces before detailed environment
	info...

	* melt-build-script.sh: Regenerate.

	* melt/warmelt-macro.melt: Remove warning about very long DEBUG...

	* melt/warmelt-hooks.melt (hook_melt_do_initial_mode): Improve
	indentation in code chunk.

	* melt/xtramelt-ana-simple.melt: Commented experiments about pass
	insertion. See https://gcc.gnu.org/ml/gcc/2014-08/msg00281.html

2014-08-27  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-build-script.tpl: Remove extra xtramelt-ana-simple for
	runtime test.

	* melt-build-script.sh: Regenerate.

	* melt-runtime.h: Add date to comment about basename.

	* melt-runtime.cc: Add check for unicity of loaded modules.
	(Melt_Module::_mm_map_): New static member variable.
	(Melt_Module::module_of_name): New inline function.
	(Melt_Module::Melt_Module): Add this to _mm_map_.
	(Melt_Module::~Melt_Module): Remove this from _mm_map_.
	(melt_load_module_index): Check against duplicate modules.

2014-08-27  Basile Starynkevitch  <basile@starynkevitch.net>
	{{somehow instable, added justcountipa processing in the building}}
	* melt-build-script.tpl: Add a justcount test which does not work very well.

	* melt-build-script.sh: Regenerate.

	* melt-runtime.h: Add the somehow shameful basename hack.

	* melt-runtime.cc (melt_read_error): Remove, since renamed ...
	(melt_read_failure): Better name for melt_read_error exception.
	(meltppfilename): Only declared if needed.

	* melt-module.mk: Updated copyright year and comment about
	melt_compile_source routine.

	* melt/libmelt-ana-base.melt (each_cgraph_fun_call_flow_graph):
	Improve comment in assertion checking for CFG.

	* melt/xtramelt-ana-simple.melt (justcountipa_docmd): installed
	after visibility IPA pass. More notice messages.

2014-08-27  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/xtramelt-ana-simple.melt (justcountipa_exec): Always
	display a final message.

2014-08-27  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-outobj.melt (outpucod_procroutine)
	(outpucod_initialmoduleroutine): Emit some more empty lines.


2014-08-27  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/generated/*: Regenerate.

2014-08-27  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-hooks.melt (enable_pre_genericize): Uncomment the
	registration for PLUGIN_PRE_GENERICIZE..

2014-08-26  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-built-script.tpl: Give some more blank lines between
	stages.

	* melt-built-script.sh: Regenerate.

	* melt/warmelt-genobj.melt (compilobj_nrep_locsymocc): Give some
	error message when something is wrong...

	* melt/warmelt-outobj.melt
	(melt_translate_run_macroexpansions_list): Use the
	macrofreshenv...

2014-08-26  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/generated/*: Regenerate.

2014-08-26  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.h (MELT_VERSION_STRING): Bump to 1.1.2pre6.

2014-08-26  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-first.melt (melt_assert_failure_fun): Skip any
	misunderstood stuff argument...

2014-08-26  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-hooks.melt (connect_to_server): Improve code chunk.

2014-08-25  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-base.melt (output_json): Handle mixbigint case.

2014-08-25  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/libmelt-ana-tree.melt (tree_signed_size_type_node)
	(tree_uint16_type_node, tree_uint32_type_node)
	(tree_uint64_type_node): New cmatchers.

2014-08-25  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/generated/*: Regenerate.

2014-08-19  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-hooks.melt (do_blocking_jsonrpc2_call): Return the
	strictly positive request processing time in milliseconds as
	secondary result on success.

2014-08-18  Basile Starynkevitch  <basile@starynkevitch.net>

	{{test tattr-1 is working}}
	* melt/warmelt-hooks.melt (melt_attribute_handler_glue): Update
	*pnode only if the outnode is non-nil.
2014-08-18  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (MELT_VERSION_STRING): Bump to 1.1.2pre5.

2014-08-18  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/generated/*: Regenerate.

2014-08-18  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-hooks.melt (melt_register_gcc_attribute_at/lambda):
	More debug.. Changed the role of handler's result...

	* testsuite/melt/tattr-1.melt: Still crashing.

2014-08-18  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/libmelt-ana-tree.melt (tree_chain_to_tuple): New function.
	* testsuite/melt/tattr-1.melt: More in the handler, but still
	crashing.
	* testsuite/melt/tattrcode-1.c: More attribute arguments.

2014-08-15  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-hooks.melt (class_gcc_attribute): Improve
	documentation about handler.
	(hook_handle_attribute): Invoke the handler.

	* testsuite/melt/tattr-1.melt: More in the handler.

2014-08-15  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (MELT_VERSION_STRING): Bump to 1.1.2pre4.

	* melt/warmelt-hooks.melt (melt_attribute_handler_glue):
	Re-enable call to hook_handle_attribute.

2014-08-15  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/generated/*: Regenerate.

2014-08-15  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-hooks.melt (melt_attribute_handler_glue):
	Temporarily disable call to hook_handle_attribute, since...
	(hook_handle_attribute): Change its signature.

2014-08-15  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-hooks.melt (hook_handle_attribute): Compute the the
	attribute object.
2014-08-15  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-hooks.melt (hook_handle_attribute): Compute the name.

	* testsuite/melt/tattr-1.melt: Comment that it should be compiled
	with all the modules.

2014-08-15  Basile Starynkevitch  <basile@starynkevitch.net>

	{{tattr-1 is invoking unimplemented hook_handle_attribute}}
	* melt-runtime.cc (melt_attribute_callback): Call
	HOOK_INSTALL_ATTRIBUTES.
	* melt/warmelt-hooks.melt (melt_register_gcc_attribute_at): Make
	correctly the dictionnary.

2014-08-15  Basile Starynkevitch  <basile@starynkevitch.net>
	* testsuite/melt/tdefvar-4.melt: New file. Don't reproduce the
	possible buf in melt_register_gcc_attribute_at... Seems to work!
	Should be changed.

2014-08-14  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-hooks.melt (melt_register_gcc_attribute_at): More,
	but still buggy.

	* testsuite/melt/tattr-1.melt: More debug. Don't work.


2014-08-14  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/generated/*: Regenerate.

2014-08-14  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-hooks.melt (gcc_attribute_installer_list): New
	variable.
	(hook_install_attributes): More code, invoking closures in
	gcc_attribute_installer_list.
	(melt_gcc_register_gcc_attribute_at): Add closure to
	gcc_attribute_installer_list.

2014-08-14  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.h (MELT_VERSION_STRING): Bump to 1.1.2pre3.

2014-08-14  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/generated/*: Regenerate.

2014-08-14  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-predef.list (HOOK_MELT_ATTRIBUTE_DEFINER): Remove.

2014-08-14  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/generated/*: Regenerate.
	* melt/generated/warmelt-hooks+04.cc: Removed.

2014-08-14  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.cc (melt_handle_melt_attribute): Remove.

	* melt/warmelt-base.melt (add2out_double): Remove commented
	debugprintf.

2014-08-14  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Remove old melt attribute, replacing it by general attributes}}
	* melt-predef.list (HOOK_INSTALL_ATTRIBUTES): New.
	(HOOK_MELT_ATTRIBUTE_DEFINER): Poisoned.

	* melt-runtime.cc (handle_melt_attribute): Remove function.
	(melt_attr_spec): Remove variable.
	(melt_attribute_callback): Should call the hook_install_attributes.

	* melt/warmelt-hooks.melt (attribute_definer_delayed_queue)
	(hook_melt_attribute_definer, at_melt_attribute_first)
	(at_melt_attribute_last): Remove.
	(hook_install_attributes): New stub.

2014-08-14  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h: include "plugin.h".

	* melt/warmelt-hooks.melt (melt_register_gcc_attribute_at): Call
	register_attribute. This should be moved to some closure passed to
	at_melt_attribute_first or elsewhere....

	* testsuite/melt/tattrcode-1.c: Attribute moved to function declaration.

2014-08-14  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-normal.melt (normexp_mixed_location): Quote the
	filename.

2014-08-13  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/generated/*: Regenerate.

2014-08-13  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-normal.melt (normexp_mixed_location): Improved.

2014-08-13  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-normal.melt (normexp_mixed_location): New method
	for normal_exp on discr_mixed_location.

	* testsuite/melt/tattr-1.melt: Improve comment.

2014-08-13  Basile Starynkevitch  <basile@starynkevitch.net>

	* testsuite/melt/tattr-1.melt: New file.
	* testsuite/melt/tattrcode-1.c: New file.

2014-08-13  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.h (MELT_VERSION_STRING): Bump to 1.1.2pre2.

2014-08-13  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-hooks.melt (at_melt_attribute_first)
	(at_melt_attribute_last): Improve :doc with missing closing brace
	for @code...

2014-08-13  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/generated/*: Regenerate.

2014-08-13  Basile Starynkevitch  <basile@starynkevitch.net>

	{{start adding generic GCC attribute support}}
	* melt-runtime.h (MELT_VERSION_STRING): Bump to 1.1.2pre1.

	* melt-predef.list (HOOK_HANDLE_ATTRIBUTE): New.

	* melt/warmelt-hooks.melt: Adding cheader & cimplement -notably
	melt_attribute_handler_glue stub- for attributes.
	(hook_handle_attribute): New predefined hook stub.
	(melt_register_gcc_attribute_at): More but still incomplete.

	* melt/libmelt-ana-tree.melt: Improve comment in cheader.

2014-08-13  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.cc (melt_open_ppfile): Better error message on
	failure.

	* melt/warmelt-first.melt (non-null): New primitive.

	* melt/warmelt-hooks.melt (melt_register_gcc_attribute_at): New
	function.
	(register_gcc_attribute): Becomes a macro.

2014-08-13  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-base.melt (valdesc_double): The val should be
	declared GTY((skip)) double.

	* melt/generated/*: Regenerate all.

2014-08-13  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.h (melt_get_double): Typo!

2014-08-13  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.h (MELT_VERSION_STRING): Bump to 1.1.1+
	(melt_get_double): Commented debug.

	* melt/warmelt-base.melt (valdesc_double): The val should be
	declared double.

	* gcc/testsuite/melt/tjson-3.melt: New file.

2014-08-11  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (MELT_VERSION_STRING): Bump to 1.1.1

2014-08-11  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/generated/*: Regenerated.
	* melt/generated/warmelt-debug+03.cc: New file.

2014-08-11  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h: include <math.h>
	(melt_get_double): New unboxing function.

	* melt/warmelt-first.melt (discr_constant_double, discr_double):
	Exported.

	* melt/warmelt-base.melt (add2out_double): New.
	(add2out): Handle :double data.

	* melt/warmelt-debug.melt (dbgout_double_method): New method for
	dbg_output on discr_double.

2014-08-11  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (MELT_VERSION_STRING): Bump to 1.1.1rc1

	* melt/warmelt-first.melt (discr_double, discr_constant_double):
	Use MELTOBMAG_DOUBLE.

	* melt/warmelt-hooks.melt (json_lexer): More debug.

	* testsuite/melt/tjson-1.melt: add 3.14 to test parsing of double
	numbers.

2014-08-10  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-hooks.melt (do_blocking_jsonrpc2_call): More debug.

2014-08-09  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-hooks.melt (connect_to_server): Compute the length
	of an AF_UNIX socket address according to unix(7) man page.

2014-08-08  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/generated/*: Regenerated.

2014-08-08  Basile Starynkevitch  <basile@starynkevitch.net>

	{{tcalljsonrpc-1 works again}}
	* melt-runtime.h (MELT_VERSION_STRING): Bump to 1.1.1rc0

	* melt/warmelt-hooks.melt (connect_to_server): Improve handling
	for service like localhost:8880 ...

	* testsuite/melt/tcalljsonrpc-1.melt: More debugging.

	* testsuite/melt/tservjsonrpc-1.cc: More debugging.

2014-08-08  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-debug.melt (melt_debug_fun): Add final flush.

2014-08-05  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-outobj.melt (read_melt_expressions): Correct bad
	inform_at call...

2014-08-05  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-outobj.melt (read_melt_expressions): Improve
	diagnostic messages.

2014-08-05  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/libmelt-ana-tree.melt (tree_qual_union_type)
	(tree_qual_union_type_with_fields): Exported.
	(tree_union_type, tree_union_type_with_fields): New.

2014-08-05  Basile Starynkevitch  <basile@starynkevitch.net>

	{{tpragma-1 test is ok}}
	* testsuite/melt/tpragma-1.melt: Improve command in comment.

	* testsuite/melt/tpragmacode-1.c: Invoke the right pragma!

2014-07-30  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/libmelt-ana-tree.melt (real_pragma_processor): The space
	can be nil, even now the caller is setting it by default to
	:melt... Also, more debugging.

2014-07-30  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.cc (melt_cbreak_at, melt_sparebreakpoint_0_at)
	(melt_sparebreakpoint_1_at, melt_sparebreakpoint_2_at): Add
	comment.

	* melt/warmelt-hooks.melt (register_pragma_processor)
	(hook_process_pragma, hook_register_pragmas): More debug.

	* melt/libmelt-ana-tree.melt (pragma_lex): Improve documentation.
	(register_plain_pragma, register_expanded_pragma): Likewise.  Use
	interned strings as arguments to c_register_pragma_with_data &
	c_register_pragma_with_expansion_and_data.

	* testsuite/melt/tpragma-1.melt: Should compile with -Wall, and
	adding a chunk for melt_cbreak.

	* testsuite/melt/tpragmacode-1.c: Use twice the pragma.

2014-07-29  Basile Starynkevitch  <basile@starynkevitch.net>

	* testsuite/melt/tpragmacode-1.c: Add a zerofun function.

2014-07-29  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-hooks.melt: Improve comment.
	* melt/libmelt-ana-base.melt: Likewise.
	* melt/libmelt-ana-tree: Likewise, and ...
	(inside_c_frontend): New primitive.
	(real_pragma_processor): Retrieve directly the namestr. More
	debug.  Added final code to register PLUGIN_PRAGMAS when
	inside_c_frontend gives true.
	* testsuite/melt/tpragmacode-1.c: Use the #pragma ...

2014-07-29  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/generated/*: Regenerate all.

2014-07-29  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.cc (melt_really_initialize): Use a curmodstr, dont
	change modstr.

	* melt/warmelt-hooks.melt (register_pragma_processor)
	(hook_register_pragmas, remove_pragma_handler): More debug.
	(connect_to_server): Check the length of the service string.

	* melt/libmelt-ana-tree.melt (melt_register_pragmas_callback): Add
	counter & debug.
	(melt_pragma_process_callback): Add debug.
	(register_expanded_pragma, register_plain_pragma): Check name and
	correctly extract its namestr.
	(real_pragma_processor): More debug.

	* testsuite/melt/tpragma-1.melt: Improve command in comment.

2014-07-29  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/melt-macro.melt (class_source_compile_warning): Remove old
	scwarn_msg & scwarn_expr fields.
	(mexpand_compile_warning): Likewise.

	* testsuite/melt/tpragma-1.melt: New file.
	* testsuite/melt/tpragmacode-1.c: New file.

2014-07-29  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/generated/*: Regenerate all.

2014-07-29  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (MELT_VERSION_STRING): Bump to 1.1.0+

	* melt/melt-macro.melt (class_source_compile_diagnostic): New
	class with scdiag_msg & scdiag_expr fields.
	(class_source_compilewarning): Rename as...
	(class_source_compile_warning, class_source_compile_errors): New
	subclass of class_source_compile_diagnostic
	(mexpand_compile_warning): Use error_at.
	(mexpand_compile_error): New expander for ...
	(compile_error): New language macro.

	* melt/melt-normal.melt (normexp_compilewarning): Renamed as...
	(normexp_compile_warning): Use scdiag_msg & scdiag_expr.
	(normexp_compile_error): New method for normal_exp on
	class_source_compile_error

	* melt/warmelt-hooks.melt (add_pragma_handler): Mention
	@file{libmelt-ana-tree.melt} not @file{xtramelt-ana-tree.melt} in
	documentation.

	* melt/libmelt-ana-tree.melt (tree_function_decl_named_of_type)
	(tree_function_decl_of_type_and_result): New cmatchers.

2014-07-27  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (MELT_VERSION_STRING): Bump to 1.1

	* melt-build-script.tpl (meltbuild_error): Use printenv & pstree
	to help debugging.

	* melt-build-script.sh: Regenerate.

2014-07-27  Basile Starynkevitch  <basile@starynkevitch.net>

	* warmelt-modes.melt (runfile_docmd, rundebug_docmd)
	(makedoc_docmd, runtypesupport_docmd, translateinitmodule)
	(tranlateinitmodule_flavored): Use error_at & inform_at instead of
	older errormsg_plain etc etc...

2014-07-27  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/generated/*: Regenerate all.

2014-07-27  Basile Starynkevitch  <basile@starynkevitch.net>

	* warmelt-modes.melt (install_melt_mode): Improve error message
	for bad mode name.

2014-07-26  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (MELT_VERSION_STRING): Bump to 1.1-rc1

2014-07-26  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/generated/*: Regenerate all.

2014-07-25  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-module.mk (GCCMELT_COMMON_FLAGS): New variable, for -fno-rtti.
	Use it where needed, for every module compilation.

	* melt-runtime.cc (Melt_Module::Melt_Module): Better error message
	on dlopen failure. Also forces errno to be zero before.
	(melt_load_module_index): Force errno to be zero before dlopen.

2014-07-25  Basile Starynkevitch  <basile@starynkevitch.net>

	{{libmelt-ana-base.quicklybuilt not built or not found for MELT
	plugin, dlopen of libmelt-ana-base fails undefined symbol:
	_ZTI8opt_pass, i.e. typeinfo for opt_pass}}
	* melt-runtime.cc (melt_really_initialize): Improve debug message.

2014-07-25  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.cc (melt_really_initialize): Notice if locale is
	not UTF-8.

	* melt/generated/*: Regenerate all.

2014-07-25  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.h (MELT_VERSION_STRING): Bump to 1.1-rc1almost.

2014-07-25  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.h (melt_strbuf_unsafe_byte_address): New function.

	* melt/warmelt-hooks.melt (json_lexer): Use it.

2014-07-24  Basile Starynkevitch  <basile@starynkevitch.net>
	{{tcalljsonrpc-1 is working!}}
	* melt/warmelt-base.melt (json_canonical_name): Improved.

2014-07-24  Basile Starynkevitch  <basile@starynkevitch.net>
	{{json_canonical_name probably buggy}}
	* melt/warmelt-base.melt (json_canonical_name, json_name_less)
	(json_name_equal): Exported.

	* testsuite/melt/tjson-2.melt: Also testing json_canonical_name.

2014-07-24  Basile Starynkevitch  <basile@starynkevitch.net>
	{{incorrectly a JSON object name like "id" is not transformed to
	ID symbol at json parsing but it should.}}

	* melt/warmelt-debug.melt (dbgout_jsonobject_method): Display
	differently name & string JSONobject attribute...
	* testsuite/melt/tjson-0.melt: Improve.

2014-07-24  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-base.melt (jsonobject_get_named): Explicitly return
	nil on failure. But still buggy!

	* testsuite/melt/tjson-0.melt: Add jsob_get_named with debug.

2014-07-24  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-base.melt (jsonobject_get_named): Use curname not
	name in the last loop.

2014-07-24  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/generated/*: Regenerate all.

2014-07-24  Basile Starynkevitch  <basile@starynkevitch.net>
	{{jsonobject_get_named is buggy}}

	* melt-runtime.h (enum melt_coutput_mode_en): Remove last comma...
	* melt/warmelt-base.melt (valdesc_jsonobject): Improve
	cosmetically some generated inlined routines, e.g.
	melt_jsonobject_nth_name & melt_jsonobject_nth_value.
	(json_name_equal): Shortcut for identity of names.
	(jsonobject_get_named): Still buggy.

	* melt/warmelt-hooks.melt (do_blocking_jsonrpc2_call): Extract the
	result, handle JSON remote errors, etc...

2014-07-24  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h: Improve some comments.
	(enum melt_coutput_mode_en): New.
	(meltgc_add_out_cstr_len_mode): New function.
	(meltgc_add_out_cstr_len, meltgc_add_out_cstr)
	(meltgc_add_out_csubstr_len): Functions made inline..

	* melt-runtime.cc (meltgc_add_out_cstr_len): Remove and replace by....
	(meltgc_add_out_csubstr_len): ... generalized to take a mode.
	(meltgc_add_out_csubstr_len, meltgc_add_out_cstr): Remove, since
	inlined in header file.

	* melt/warmelt-base.melt (add2out_utf8json_encstring): New primitive.
	(output_json): Use it to output strings.

2014-07-23  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-base.melt (output_json): Should output JSON strings
	with UTF8....

2014-07-23  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/generated/*: Regenerate all.

2014-07-23  Basile Starynkevitch  <basile@starynkevitch.net>

	* testsuite/melt/tjson-2.melt: New file.

2014-07-23  Basile Starynkevitch  <basile@starynkevitch.net>

	{{caveat: the JSON output for JSONobjects with string values is wrong.}}
	* melt/warmelt-base.melt (json_canonical_name): Return the string
	if it is not a name.

	* melt/warmelt-hooks.melt (do_blocking_jsonrpc2_call): Generate an
	id. Should probably test it in the answer.

	* testsuite/melt/tcalljsonrpc-1.melt: New file.
	* testsuite/melt/tservjsonrpc-1.cc: New file.

2014-07-23  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (melt_cpu_time_millisec): New function declaration.
	(melt_flush_file, melt_close_file): New inlined functions.

	* melt-runtime.cc (melt_cpu_time_millisec): New function.

	* melt/warmelt-base.melt (cpu_time_millisec): New primitive.

	* melt/warmelt-hooks.melt (do_blocking_jsonrpc2_call): Complete
	but untested.

2014-07-22  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-hooks.melt (register_raw_input_channel_handler):
	Improve documentation.
	(connect_to_server): Improve warning_at calls.
	(do_blocking_jsonrpc2_call): Incomplete function.

2014-07-22  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (melt_string_same_case, melt_string_less_case):
	New inlined functions.

	* melt/warmelt-first.melt (==s-case, !=s-case, string<case)
	(string>case): New primitives using above functions.

	* melt/warmelt-base.melt (json_name_less, json_name_equal): Document the functions.
	(json_canonical_name): New function.
	(make_jsonobject): Use it.

2014-07-22  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-first.melt (class_named): Improve doc.

2014-07-22  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-hooks.melt (connect_to_server): Add memoization of services.

2014-07-21  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/generated/*: Regenerate all.

2014-07-21  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-hooks.melt (connect_to_server): Done function,
	untested!

2014-07-21  Basile Starynkevitch  <basile@starynkevitch.net>
	{{tjson-1.melt test also works}}

	* melt/warmelt-hooks.melt (connect_to_server): New incomplete
	function.

2014-07-21  Basile Starynkevitch  <basile@starynkevitch.net>

	* testsuite/melt/tjson-0.melt: Improved and working.

	* melt/warmelt-base.melt (make_jsonobject): Correct bug for list case.

2014-07-20  Basile Starynkevitch  <basile@starynkevitch.net>

	* testsuite/melt/tjson-0.melt: New file.

2014-07-20  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-base.melt (make_jsonobject): Add assert.

	* melt/warmelt-debug.melt (dbgout_jsonobject_method): Also display
	the size near toplevel...

	* melt/warmelt-hooks.melt (json_parser_input_processor): Works
	nearly ok, but make_jsonobject is still disappointing.


2014-07-20  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-hooks.melt (json_parser_input_processor): Works
	better, but make_jsonobject is disappointing.

	* testsuite/melt/tjson-1.melt: Improve the example, it was
	incorrect JSON because of missing comma inside array...

2014-07-19  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-hooks.melt (json_parser_input_processor): More
	debug, probably still buggy since wrong state transitions.

2014-07-18  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/generated/*: Regenerate all.

2014-07-18  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-hooks.melt (json_parser_input_processor): More
	debug, probably still buggy.

2014-07-18  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-hooks.melt (json_parser_input_processor): Even more
	code.

2014-07-18  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.cc (Melt_Module::get_dlsym): Becomes public.
	(melt_fatal_info): Display the melt_gen_timestamp of loaded
	modules when available.

	* melt/warmelt-first.melt (discr_jsonarray): Exported.

	* melt/warmelt-hooks.melt (json_parser_input_processor): More code.

2014-07-18  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-hooks.melt (class_json_parser): Add jsonparser_errorhandler field.
	(make_json_parser): New errclos argument.
	(json_parser_input_processor) More code, but incomplete.
	(hook_handle_sigchld): Better indented.

	* testsuite/melt/tjson-1.melt: Provide goterror to make_json_parser.

2014-07-18  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-hooks.melt (make_json_parser): New function.
	(json_parser_input_processor): Still incomplete.

	* melt/warmelt-outobj.melt (translate_run_melt_expressions): Typo
	in melt_fatal_error call in chunk..

	* testsuite/melt/tjson-1.melt: use make_json_parser.

2014-07-17  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.cc (meltgc_strbuf_json_string_peek): Handle
	ordinary character & EOF...

	* melt/warmelt-hooks.melt (json_lexer): Improve debug.

2014-07-17  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-hooks.melt (json_lexer): Add debug.

2014-07-17  Basile Starynkevitch  <basile@starynkevitch.net>

	* testsuite/melt/tjson-1.melt: New file.

	* melt/warmelt-hooks.melt (melt_invoke_input_callbacks): Add
	documentation...
	(register_raw_input_channel_handler)
	(register_paragraph_input_channel_handler): Improve documentation.
	(json_lexer): Improved.
	(json_parser_input_processor): Improved but incomplete.

2014-07-17  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/generated/*: Regenerate all.

2014-07-17  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-hooks.melt (json_lexer): Completed.

2014-07-15  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h: Typo in comment.
	(meltgc_strbuf_json_string_peek): New declaration.

	* melt-runtime.cc (MELT_READ_ERROR, MELT_READ_WARNING):
	Re-indented.
	(meltgc_strbuf_json_string_peek): New function.

	* melt/warmelt-hooks.melt (json_lexer): Now lexing JSON strings,
	but incomplete since should lex keywords.

2014-07-15  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (meltgc_new_double): New declaration.

	* melt-runtime.cc (meltgc_new_int): Default discriminant becomes
	DISCR_CONSTANT_INTEGER, not just DISCR_INTEGER.
	(meltgc_new_double): New function.

	* melt/warmelt-hooks.melt (json_lexer): Now lexing numbers but
	still very incomplete.

2014-07-15  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (melt_strbuf_peek_long_number)
	(melt_strbuf_peek_double_number): New inline functions.

2014-07-15  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-base.melt (outjson_named_method): New method for
	output_as_json on class_named. Beware that it won't work well with
	non-ASCII names!

2014-07-15  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-predef.list (DISCR_JSONARRAY): New.

	* melt/warmelt-first.melt (DISCR_JSONARRAY): New.

2014-06-10  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/generated/*: Regenerate all.

2014-06-10  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-base.melt (valdesc_double): Correct typo.

2014-06-10  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-base.melt (valdesc_double): New.

2014-06-10  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/generated/*: Regenerate all.

2014-06-10  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-predef.list (CTYPE_DOUBLE, DISCR_CONSTANT_DOUBLE)
	(DISCR_DOUBLE): New.

	* melt/warmelt-first.melt (discr_double, discr_constant_double)
	(ctype_double): New.

2014-06-10  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.cc (meltgc_readhashescape): Typo in error message.

	* melt/warmelt-hooks.melt (json_lexer): Add more code.

2014-06-10  Basile Starynkevitch  <basile@starynkevitch.net>
	* utf8/: New directory, from http://utfcpp.sourceforge.net/
	* utf8.h: new file, from  http://utfcpp.sourceforge.net/
	* utf8/core.h: Likewise.
	* utf8/checked.h: Likewise.
	* utf8/unchecked.h: Likewise.

2014-06-10  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.h (MELT_VERSION_STRING): Bump to 1.1-rc0plus
	* melt/warmelt-hooks.melt (register_raw_input_channel_handler):
	Improve comment.
	(json_lexer): Tiny bit more.

2014-05-05  Basile Starynkevitch  <basile@starynkevitch.net>
	{{MELT 1.1-rc0}}
	* melt-runtime.h (MELT_VERSION_STRING): Bump to 1.1-rc0

2014-04-23  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-base.melt (strbuf_consume, strbuf_peek): New
	primitives.

2014-04-23  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (melt_strbuf_peek): New function.
	* melt/warmelt-hooks.melt (json_name_dict): New variable.
	(json_lexer): New function stub.

2014-04-23  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/generated/*: Regenerate all.

2014-04-23  Basile Starynkevitch  <basile@starynkevitch.net>

	{{should add JSON asynchronous parsing}}
	* melt/warmelt-hooks.melt (class_paragraph_input_channel_handler)
	(class_raw_input_channel_handler): New classes.
	(register_paragraph_input_channel_handler)
	(register_raw_input_channel_handler): New functions.
	(register_input_channel_handler): Deprecated synonym of
	register_paragraph_input_channel_handler.
	(class_json_parser): New incomplete class.
	(json_parser_input_processor): New function stub.

	* melt/warmelt-modes.melt (repl_docmd): Call
	register_paragraph_input_channel_handler.

	* melt/xtramelt-probe.melt (start_probe): Likewise.

2014-04-14  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/generated/*: Regenerate all.

2014-04-14  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-predef.list (JSON_FALSE): New predefined.

	* melt/warmelt-first.melt: initialize it using :json_false.

	* melt/warmelt-base.melt (output_as_json): New selector.
	(output_json): New function.
	(outjson_jsonobj_method): New method for output_as_json on
	discr_jsonobject.
	(outjson_multiple_method): New method for output_as_json on
	discr_multiple.

2014-04-08  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/generated/*: Regenerate all.

2014-04-08  Basile Starynkevitch  <basile@starynkevitch.net>

	{{fix of MELT-SFT-8 bug}}
	* melt/warmelt-normal.melt (normexp_ifvariadic): Clean the cached
	location map of bindings local to the then branch...

	* melt/warmelt-genobj.melt (compilobj_nrep_let): More debug.

	* testsuite/melt/tvariadic-4.melt: Improve.

2014-04-07  Basile Starynkevitch  <basile@starynkevitch.net>

	{{still failing MELT-SFT-8}}
	* melt/warmelt-base.melt (multiple_sort): Remove debug print.

	* melt/warmelt-macro.melt (mexpand_variadic): More debug. Location
	update for emitted ifvariadic...

	* melt/warmelt-normal.melt (normexp_ifvariadic): More debug.

	* melt/warmelt-genobj.melt (compilobj_nrep_ifvariadic): More debug.

	* testsuite/melt/tvariadic-4.melt: Untabify and reindent.

2014-04-07  Basile Starynkevitch  <basile@starynkevitch.net>

	{{failed test MELT-SFT-8 https://sourceforge.net/p/gcc-melt/tickets/8/}}
	* testsuite/melt/tvariadic-4.melt: New test which fails but should
	work. Scope of variadic locals is wrong.

2014-04-05  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-debug.melt (dbgout_jsonobject_method): New method
	for dbg_output on discr_jsonobject.

2014-04-05  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/generated/*: Regenerate all.

2014-04-05  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.cc (melt_really_initialize): Initialize modstr
	earlier.
	* melt/warmelt-base.melt (jsonobject_aux,
	(jsonobject_auxput, jsonobject_size, jsonobject_nth_name)
	(jsonobject_nth_value,	json_name_less, json_name_equal)
	(foreach_entry_in_jsonobject, jsonobject_get_named): New.


2014-04-05  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-base.melt (make_jsonobject): Compiles ok.
	(jsonobject_aux, jsonobject_auxput, jsonobject_size)
	(jsonobject_nth_name, jsonobject_nth_value): New primitives.

2014-04-05  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-base.melt (valdesc_jsonobject): cast C++
	functions.

	* melt/generated/*: Regenerate all.

2014-04-05  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-base.melt (valdesc_jsonobject): Typo in small C++
	functions.

2014-04-05  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-first.melt (is_jsonobject): New primitive.

	* melt/warmelt-base.melt (valdesc_jsonobject): Add small C++
	function definitions.
	(melt_make_jsonobject): Incomplete.

2014-04-05  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-first.melt (class_named): Mention that named_name
	field should be an immutable string.

2014-04-04  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-first.melt (discr_jsonobject): Export it.

	* melt/warmelt-base.melt (melt_make_jsonobject, make_jsonobject): New stub.

2014-04-04  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/generated/*: Regenerate all.

2014-04-04  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-base.melt (valdesc_jsonobject): Instance of
	class_varisized_value_descriptor...

2014-04-04  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-base.melt (valdesc_jsonobject): Typo in struct.

2014-04-04  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-base.melt (valdesc_jsonobject): Typo in forwarding.

2014-04-04  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (struct melt_jsonobentry_st): New.

	* melt-predef.list (DISCR_JSONOBJECT): New.

	* melt/warmelt-first.melt (DISCR_JSONOBJECT): New, but not yet complete.

	* melt/warmelt-base.melt (valdesc_jsonobject): New.

	* melt-build-script.tpl: library is a new overall goal which could
	also be applications.
	* melt-build-script.sh: Regenerate.

2014-04-03  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/xtramelt-ana-simple.melt (class_justcountipa_data): Add
	jcntipa_bucketbblist & jcntipa_edgemap fields.
	(justcountipa_exec): Use them, to count basic block size
	distributions and edges.

2014-04-03  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/generated/*: Regenerate all.

2014-04-03  Basile Starynkevitch  <basile@starynkevitch.net>
	{{generated melt-default-modules*modlis contains mode-conditioned extra modules}}
	* melt-build-script.tpl: Emit mode-conditioned extra modules using awk.
	* melt-build-script.sh: Regenerate.

	* melt/warmelt-modes.melt (install_melt_mode): Handle the second
	modename string.

	* melt/xtramelt-ana-simple.melt: Add name for each mode.
	* melt/xtramelt-probe.melt: Likewise.

2014-04-03  Basile Starynkevitch  <basile@starynkevitch.net>
	{{New feature: mode-conditional module component in module list, stabilizing}}

	* melt-build-script.tpl: Add call to meltbuild_do_extras.
	* melt-build-script.sh: Regenerate.
	* melt-runtime.cc (meltgc_load_module_list): mode-conditional
	module starts with ?modename instead of !modename

2014-04-02  Basile Starynkevitch  <basile@starynkevitch.net>
	{{New feature: mode-conditional module component in module list, **UNSTABLE**}}

	* melt-build-script.tpl: typo for xtramelt-ana-simple!
	* melt-build-script.sh: Regenerate.

	* melt-runtime.cc (melt_asked_modes_vector): New static
	variable.
	(Melt_Module::~Melt_Module): Typo in error message.
	(meltgc_load_module_list): Remove trailing spaces.
	Handle mode-conditional module component: !modename modulename
	(meltgc_load_modules_and_do_mode): Use melt_asked_modes_vector.
	(melt_really_initialize): Set melt_asked_modes_vector.
	Random seed is always a number, not a string.

	* melt/warmelt-modes.melt (install_melt_mode): Check name of mode,
	should be a C identifier like name.

2014-04-01  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Now have library and extra MELT files}}
	* melt-build-script.def: Have library and extra MELT files.
	* melt-build-script.tpl: Process library and extra MELT files.
	* melt-build-script.sh: Regenerate.

	* melt/xtramelt-ana-base.melt: Rename file as...
	* melt/libmelt-ana-base.melt: File was xtramelt-ana-base.melt

	* melt/xtramelt-ana-tree.melt: Rename file as...
	* melt/libmelt-ana-tree.melt: File was xtramelt-ana-tree.melt

	* melt/xtramelt-ana-gimple.melt: Rename file as...
	* melt/libmelt-ana-gimple.melt: File was xtramelt-ana-gimple.melt


2014-03-25  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/xtramelt-ana-gimple.melt (gimple_assign_abs)
	(gimple_assign_addr_space_convert, gimple_assign_convert)
	(gimple_assign_fixed_convert, gimple_assign_float)
	(gimple_assign_mult_highpart, gimple_assign_nop)
	(gimple_assign_paren, gimple_assign_negate): New.
	(gimple_assign_pointerplus): Rename as
	(gimple_assign_pointer_plus): renamed.


	* melt/xtramelt-ana-simple.melt: Use gimple_assign_pointer_plus.

2014-03-25  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/generated/*: Regenerated.


2014-03-25  Basile Starynkevitch  <basile@starynkevitch.net>

	{{merged with trunk, and....}}
	* melt-runtime.cc (melt_load_module_index): Accept very short versionmelt strings.

2014-03-11  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.cc (melt_open_ppfile): Also use open_memstream with
	_GNU_SOURCE....

2014-03-11  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.cc (melt_fatal_info): Warn about temporary
	directory to clean...

2014-03-11  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.cc: Don't use <setjmp.h> but C++
	exceptions. Include <stdexcept>.
	(class melt_read_error): New runtime exception class.
	(melt_read_got_error_at): Is throwing melt_read_error.
	(meltgc_read_file, meltgc_read_from_rawstring)
	(meltgc_read_from_val): Is catching melt_read_error.

	* melt/warmelt-macro.melt (fatal_error_at): New function.

2014-03-11  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/xtramelt-ana-gimple.melt (melt_walk_use_def_chains): Done
	for GCC 4.9...

2014-03-11  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.cc (melt_really_initialize): Sets melt_flag_debug
	when melt_debugging_after_mode.

	* testsuite/melt/tusedef-ana1.melt: Comments for command-line
	should suggest -O.
	(usedef_walker): More verbose inform for SSA names.

2014-03-10  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/generated/*: Regenerated.

2014-03-10  Basile Starynkevitch  <basile@starynkevitch.net>

	{{See http://gcc.gnu.org/ml/gcc/2014-03/msg00141.html so a workaround here}}
	* melt-runtime.h: Include tree-pass.h header.
	(melt_current_pass_ptr): New variable declaration.

	* melt-runtime.cc (melt_current_pass_ptr): New variable definition.

	* melt/warmelt-hooks.melt (hook_gimple_gate): Set and restore melt_current_pass_ptr.

	* melt/xtramelt-ana-base.melt (melt_gimple_pass)
	(melt_simple_ipa_pass): Likewise.

	* testsuite/melt/tusedef-ana1.melt: Improve comment.
	(usedef_walker, usedef_process_set): Inform user.

2014-03-10  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.cc (melt_really_initialize): Improbe handling of debugging...
	(melt_do_finalize): Improve printing of number of successful
	modes.

	* melt/xtramelt-ana-gimple.melt (melt_walk_use_def_chains): More
	code for GCC 4.9.

	* testsuite/melt/tusedef-code1.c: Compute explicit length of
	sample1 & sample2.

	* testsuite/melt/tusedef-ana1.melt: Improve comment for
	compilation command.

2014-03-07  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/generated/*: Regenerated.

2014-03-07  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Bug about cheader emitted twice solved. MELT branch is stable
	again...}}
	* melt-runtime.cc (melt_do_finalize): Display melt_dbgcounter when
	no quiet_flag.

	* melt/warmelt-macro.melt (mexpand_cheader): More debug.

	* melt/warmelt-moremacro.melt (mexpand_gccif): Compute correctly
	the exptail...

	* melt/warmelt-normal.melt (normexp_cheader): More debug.

2014-03-06  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Trigger an error on the MELT branch also; instable!}}
	* melt/xtramelt-ana-gimple.melt: For 4.9 also add a cheader for
	walk_use_def.... which is wrongly emitted twice.

2014-03-05  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/generated/*: Regenerated.

2014-03-05  Basile Starynkevitch  <basile@starynkevitch.net>

	{{With GCC 4.8 the MELT module is emitting twice the struct
	meltwalkhookdata_st header in xtramelt-ana-gimple.cc}}
	* melt/warmelt-normal.melt (normexp_cheader): Add check that the
	header is unique.

	* melt/warmelt-outobj.melt (translate_macroexpanded_list): Emit
	hashcode of header.

	* melt/xtramelt-ana-gimple.melt (output_gimple): Move definition
	before dbgout_mapgimple_method...

	* testsuite/melt/tusedef-code1.c: Improve comment.

2014-03-05  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/generated/*: Regenerated.

2014-03-05  Basile Starynkevitch  <basile@starynkevitch.net>
	{{tgccif.melt works for GCC 4.8 plugin}}
	* melt/warmelt-macro.melt (expand_restlist_as_list)
	(expand_pairlist_as_list, macroexpand_toplevel_list): Handle the
	case when mexpander gives a list or tuple primary result and/or a
	secondary result - possibly a list or tuple...

	* melt/warmelt-moremacro.melt (filtergccversion): More debug.
	(mexpand_gccif): Correctly handle the case of many stuff under
	gccif...


2014-03-04  Basile Starynkevitch  <basile@starynkevitch.net>
	{{tgccif.melt works on MELT branch but fails for GCC 4.8 plugin}}
	* melt/warmelt-moremacro.melt (filtergccversion): Improve the
	version test, but not yet working.

2014-03-04  Basile Starynkevitch  <basile@starynkevitch.net>

	{{tgccif.melt fails on MELT branch svn 208269}}
	* melt/warmelt-moremacro.melt (filtergccversion): More debug.

2014-03-04  Basile Starynkevitch  <basile@starynkevitch.net>

	* testsuite/melt/tgccif.melt: Test that a defun can appear inside
	a gccif...

	* testsuite/melt/tusedef-ana1.melt: More code, using
	melt_walk_use_def_chains... Don't seem to work yet.

2014-03-04  Basile Starynkevitch  <basile@starynkevitch.net>

	* testsuite/melt/tusedef-ana1.melt: Improve. Add gate function.

	* testsuite/melt/tusedef-code1.c: Improve. Add main function.

2014-03-04  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.cc (melt_inform_str): Remove useless mixmag
	local variable.

	* melt/xtramelt-ana-base.melt: Seems to work with both GCC 4.8 and
	4.9...

2014-03-04  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.cc (plugin_init): gccversionstr don't mention
	gcc_version->devphase if it is empty. Typo corrected in plugin
	info help message.

	* melt/warmelt-moremacro.melt (filtergccversion): Ensure that the
	version string match the prefix followed by a space.
	(gccif): Improve documentation of the string.

	* melt/xtramelt-ana-base.melt: Correct gccif usage e.g. "4.8"
	instead of "4.8.".

	* melt/xtramelt-ana-gimple.melt: Likewise.

	* melt/xtramelt-probe.melt: Likewise.

	* testsuite/melt/tgccif.melt: Likewise.

2014-03-04  Basile Starynkevitch  <basile@starynkevitch.net>

	{{adding a new test for use-def walking}}
	* testsuite/melt/tusedef-ana1.melt: New file.
	* testsuite/melt/tusedef-code1.c: New file.

2014-03-03  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/generated/*: Regenerated.

2014-03-03  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-base.melt (multiple_sort): Don't call
	melt_low_debug...

2014-03-03  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/generated/*: Regenerated.

2014-03-03  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-base.melt: Add module_is_gpl_compatible.

	* melt/warmelt-debug.melt: Likewise.

	* melt/warmelt-moremacro.melt (mexpand_gccif): More debug.

	* melt/warmelt-hooks.melt: Add module_is_gpl_compatible.

	* melt/xtramelt-ana-base.melt (each_cgraph_decl): Removed, since
	obsolete in GCC 4.8...

	* testsuite/melt/tgccif.melt: Improve.

2014-03-03  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/generated/*: Regenerated.

2014-03-03  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-run.proto.h (MELT_GCC_VERSION): Include very early
	<cstdlib>, as suggested in
	http://gcc.gnu.org/ml/gcc/2012-08/msg00277.html message. Use
	GCCPLUGIN_VERSION by default.

	* Makefile.in (melt-run.h): Substitute GCCPLUGIN_VERSION by the
	actual number for MELT_GCC_VERSION.

	* melt/warmelt-first.melt (ctype_gimple_seq): Since gimple_seq is
	synonym of gimple, use the gimple marker routine.

	* melt/xtramelt-ana-gimple.melt (melt_walk_use_def_chains): Clear
	the local meltwalkhookdata_st structure after the walk.

2014-02-26  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/generated/*: Regenerated.

2014-02-26  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/xtramelt-ana-tree.melt: Improve comment.

	* melt/xtramelt-ana-gimple.melt: Handle use-def walking
	differently for GCC 4.8 & 4.9.
	(melt_4dot8_walk_hook_use_def_wrapper): New internal C++ wrapper.
	(melt_4dot8_walk_use_def_hook): New hook.
	(melt_walk_use_def_chains): New function, incomplete for the 4.9
	version of GCC.

2014-02-26  Basile Starynkevitch  <basile@starynkevitch.net>

	{temporarily removing meltgc_walk_use_def_chain; should become a
	hook...}
	* melt-runtime.h (meltgc_walk_use_def_chain): Remove declaration.

	* melt-runtime.cc (meltgc_usedef_internalfun)
	(meltgc_walk_use_def_chain): Remove functions.

	* melt/xtramelt-ana-tree.melt (walk_use_def_chain_depth_first)
	(walk_use_def_chain_breadth_first): Remove primitives.

2014-02-25  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/generated/*: Regenerated.

2014-02-14  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.cc (meltgc_debugmsgval): Remove.

2014-02-14  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (debugmsgval_at): Use the count argument.

2014-02-14  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/generated/*: Regenerated.

2014-02-14  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (debugvalue_at, debugmsgval_at): Use
	melthookproc_HOOK_LOW_DEBUG_VALUE_AT.

	* melt/warmelt-base.melt (messageval_dbg): Remove.

	* melt/warmelt-debug.melt (debug_msg_fun): Remove entirely.

	* melt/warmelt-macro.melt (macroexpand_toplevel_list): Don't
	mention messageval_dbg even in a comment.

2014-02-13  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-first.melt (class_initial_system_data)
	Remove field sysdata_debugmsg.

2014-02-13  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/generated/*: Regenerated.

2014-02-13  Basile Starynkevitch  <basile@starynkevitch.net>
	{{removing sysdata_debugmsg field}}
	* melt-runtime.cc (meltgc_debugmsgval): Obsolete function, to be
	removed and replaced by some hook...

	* melt/warmelt-first.melt (class_initial_system_data)
	(initial_system_data): sysdata_debugmsg is obsolete.

	* melt/warmelt-debug.melg (debug_msg_fun): Comment function and
	don't put it in the initial_system_data.

2014-02-13  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.cc (meltgc_do_initial_mode): Remove.
	(meltgc_load_modules_and_do_mode): Call
	melthookproc_HOOK_MELT_DO_INITIAL_MODE instead of
	meltgc_do_initial_mode.

2014-02-13  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/generated/*: Regenerated.

2014-02-13  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h: Add inclusion of <string> and <vector> C++ headers.
	(melt_done_modes_vector): Declare this external variable.

	* melt-runtime.cc (melt_done_modes_vector): Define as global
	variable, not as static one.

	* melt/warmelt-hooks.melt (hook_melt_do_initial_mode): Update
	melt_done_modes_vector for successful modes.

2014-02-12  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-hooks.melt (hook_melt_do_initial_mode): Typo in
	expr_chunk.

2014-02-12  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-predef.list (HOOK_MELT_DO_INITIAL_MODE): New.

	* melt/warmelt-first.melt: Better indent after foreach_in_list obsolete
	synonym.

	* melt/warmelt-hooks.melt (hook_melt_do_initial_mode): New hook.

2014-01-31  Basile Starynkevitch  <basile@starynkevitch.net>

	{{More stable. Can be entirely built.}}
	* melt/xtramelt-ana-tree.melt (check_c_frontend, pragma_lex):
	Improve :doc string.

2014-01-31  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/generated/*: Regenerated.

2014-01-31  Basile Starynkevitch  <basile@starynkevitch.net>

	{{unstable, since should be boostrapped with make upgrade-warmelt}}
	* melt-predef.list (HOOK_PROCESS_PRAGMA): New.

	* melt/warmelt-first.melt (class_gcc_pragma): New field
	gccpragma_data.
	* melt/warmelt-hooks.melt: Most of pragma support is tree specific
	so goes into xtramelt-ana-tree.melt...
	(pragma_lex, c_register_pragma_with_expansion_and_data)
	(c_register_pragma_with_data, melt_register_pragmas_callback):
	Remove cheader defining them.
	(pragma_processor): New variable.
	(register_pragma_processor): New function.
	(hook_register_pragmas): Improve.
	(check_c_frontend): Move to xtramelt-ana-tree.melt.
	(pragma_handler_tuple): New variable.
	(hook_process_pragma): New hook.
	(cpp_ttype_tuple, register_cpp_ttype, ensure_cpp_ttype_tuple)
	(register_expanded_pragma): Move to xtramelt-ana-tree.melt.
	(add_pragma_handler): New handler.

	* melt/xtramelt-ana-tree.melt: Move most of pragma support from
	warmelt-hooks.melt to here.
	(pragma_lex, c_register_pragma_with_expansion_and_data)
	(c_register_pragma_with_data)
	(melt_register_pragmas_callback, melt_pragma_process_callback):
	Add cheader defining them.
	(check_c_frontend, cpp_ttype_tuple, register_cpp_ttype)
	(ensure_cpp_ttype_tuple, pragma_lex): Function & variable & hook
	moved from warmelt-hooks.melt
	(register_expanded_pragma, register_plain_pragma)
	(real_pragma_processor): New functions.

2014-01-30  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-hooks.melt (cpp_ttype_tuple): New variable.
	(ensure_cpp_ttype_tuple, register_expanded_pragma): New
	functions.

2014-01-30  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-hooks.melt (check_c_frontend): New function.

2014-01-29  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.cc (pragma_lex)
	(c_register_pragma_with_expansion_and_data)
	(c_register_pragma_with_data): Remove weak redeclaration.

	* melt/warmelt-hooks.melt: Add new cheader with above weak
	redeclarations and melt_register_pragmas_callback.

2014-01-29  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/generated/*: Regenerated.

2014-01-29  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-predef.list: Sorted hooks in alphabetical order.
	(HOOK_REGISTER_PRAGMAS): New predefined.

	* melt-runtime.cc (melt_handle_melt_pragma, melt_pragma_callback)
	(handle_melt_pragma): Remove functions.
	(melt_really_initialize): Remove registration of
	melt_pragma_callback for PLUGIN_PRAGMAS.

	* melt/warmelt-first.melt (class_initial_system_data): Remove
	sysdata_meltpragmas field.

	* melt/warmelt-hooks.melt: Update copyright year.
	(hook_register_pragmas): New stub.

2014-01-29  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/generated/*: Regenerated.


2014-01-29  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Redesigning pragma support thru hooks; first removing old
	support...}}
	* melt-runtime.h (MELT_WEAK_ON_HOST): Add macro for weak function
	attribute on host machine, i.e. inside cc1plus or lto1...

	* melt-runtime.cc (pragma_lex)
	(c_register_pragma_with_expansion_and_data)
	(c_register_pragma_with_data): Redeclare external functions using
	MELT_WEAK_ON_HOST.

	* melt/warmelt-base.melt (register_pragma_handler): Temporarily
	remove it.

2014-01-25  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.cc (meltgc_send): Add comment near each
	melt_apply...
	(handle_melt_pragma): Call melt_fatal_error, not just fatal_error,
	e.g. when used from lto1...
	(melt_handle_melt_pragma, meltgc_do_initial_mode)
	(meltgc_debugmsgval, meltgc_usedef_internalfun)
	(meltgc_walkstmt_cb, meltgc_walktree_cb): Comment near melt_apply.

2014-01-25  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.cc (melt_handle_melt_pragma, melt_pragma_callback):
	Remove old 4.6 pragma handling.

2014-01-24  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.cc (melt_load_module_index): For non GPL compatible
	modules notice about GCC extension URL.

2014-01-23  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/generated/*: Regenerated.

2014-01-23  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-genobj.melt (class_initialroutineobj): Remove
	oirout_modulename field.
	(compile2obj_initproc, compile2obj_initextendproc): Likewise.

2014-01-23  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.cc (melt_load_module_index): Emit a warning if
	melt_module_is_gpl_compatible does not exist... See the
	MODULE_IS_GPL_COMPATIBLE macro.

2014-01-23  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/generated/*: Regenerated.

2014-01-23  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-outobj.melt (outpucod_initialmoduleroutine): Emit
	definition of melt_module_is_gpl_compatible when
	MODULE_IS_GPL_COMPATIBLE macro is used, otherwise give a warning.

2014-01-23  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/generated/*: Regenerated.

2014-01-23  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-outobj.melt (initial_classy_frame_name)
	(outpucod_initialmoduleroutine, outpucod_initialextensionroutine):
	Use :oirout_modctx and no more :oirout_modulename...

2014-01-23  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/generated/*: Regenerated.

2014-01-23  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-genobj.melt (class_initialroutineobj): Add
	oirout_modctx field.

	* melt/warmelt-outobj.melt (outpucod_initialmoduleroutine): Get
	it. Should emit the melt_module_is_gpl_compatible variable.

2014-01-23  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-first.melt: Add module_is_gpl_compatible.
	* melt/warmelt-genobj.melt: Add module_is_gpl_compatible.
	* melt/warmelt-macro.melt: Add module_is_gpl_compatible.
	* melt/warmelt-modes.melt: Add module_is_gpl_compatible.
	* melt/warmelt-moremacro.melt: Add module_is_gpl_compatible.
	* melt/warmelt-normal.melt: Add module_is_gpl_compatible.
	* melt/warmelt-normatch.melt: Add module_is_gpl_compatible.
	* melt/warmelt-outobj.melt: Add module_is_gpl_compatible.
	* melt/xtramelt-ana-base.melt: Add module_is_gpl_compatible.
	* melt/xtramelt-ana-gimple.melt: Add module_is_gpl_compatible.
	* melt/xtramelt-ana-simple.melt: Add module_is_gpl_compatible.
	* melt/xtramelt-ana-tree.melt: Add module_is_gpl_compatible.
	* melt/xtramelt-playground.melt: Add module_is_gpl_compatible.
	* melt/xtramelt-probe.melt: Add module_is_gpl_compatible.

2014-01-23  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/generated/*: Regenerated.

2014-01-23  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-first.melt (class_any_module_context): Add
	mocx_isgplcompatible field.

	* melt/warmelt-macro.melt (class_source_module_is_gpl_compatible):
	New class.
	(module_is_gpl_compatible): New macro.
	(mexpand_module_is_gpl_compatible): New macro-expanding function.

	* melt/warmelt-normal.melt (normexp_module_is_gpl_compatible): New
	method for normal_exp on normexp_module_is_gpl_compatible...

	* melt/warmelt-outobj.melt (compile_list_sexpr)
	(compile_first_bootstrap_list_sexpr)
	(melt_translate_run_macroexpansions_list): Initialize field
	:mocx_isgplcompatible to nil.

	* melt/warmelt-modes.melt (makedoc_docmd): Likewise.

2014-01-18  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/generated/*: Regenerated.

2014-01-18  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (meltgc_sort_multiple): Remove declaration.

	* melt-runtime.cc (meltgc_sort_multiple): Remove function.

	* melt/warmelt-first.melt (hook_intern_symbol): Remove
	dbgintern_chk code chunk.

	* melt/generated/warmelt-first+01.cc: Manually remove call to
	meltgc_sort_multiple.
	* melt/generated/warmelt-first.cc: Ditto.

2014-01-18  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.cc (meltgc_sort_multiple): Obsolete
	function. Replaced by multiple_sort MELT function.

2014-01-18  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-first.melt (multiple_sort)
	(mapobject_sorted_attribute_tuple): Remove, since moved into
	warmelt-base.melt

	* melt/warmelt-base.melt (multiple_sort_new): Removed, since
	renamed as...
	(multiple_sort): The definitive name for the function. Was a
	primitive in warmelt-first.melt.

2014-01-18  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/generated/*: Regenerated.

2014-01-18  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-base.melt (mapobject_sorted_attribute_tuple):
	Copied here. Should be removed from warmelt-first.melt...

	* testsuite/melt/tmulsort.melt: Simplified.

2014-01-18  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/generated/*: Regenerated.

2014-01-18  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-base.melt (multiple_sort_new): The discriminant
	formal is named DIS. Added debug messages. Works.
	(multiple_sort): Is synonym of multiple_sort_new.

	* testsuite/melt/tmulsort.melt: More debug messages. Works.

2014-01-18  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-base.melt: Reindented various valdesc_* code chunks.
	(multiple_sort_new): Add debugeprintf.

	* testsuite/melt/tmulsort.melt: New test file.

2014-01-18  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/generated/*: Regenerated.

2014-01-18  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-predef.list (HOOK_SORT_COMPARE): Remove.
	* melt/generated/warmelt-normal.cc: Manually replace
	HOOK_SORT_COMAPRE with HOOK_SORT_COMPARE_LESS...

2014-01-18  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/generated/*: Regenerated.

2014-01-18  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-predef.list (HOOK_SORT_COMPARE): Poisoned.

	* melt/warmelt-base.melt (hook_sort_compare): Remove since renamed
	as....
	(hook_sort_compare_less): Better, since rename old
	hook_sort_compare
	(multiple_sort_new): Use hook_sort_compare_less.


2014-01-18  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/generated/*: Regenerated.

	* melt-predef.list (HOOK_SORT_COMPARE_LESS): New, to replace the
	badly named HOOK_SORT_COMPARE...

	* melt/warmelt-base.melt (HOOK_SORT_COMPARE_LESS): New hook.
	(HOOK_SORT_COMPARE): Should become obsolete.

2014-01-18  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h: Improve comment regarding melt_assermsg.

	* melt/warmelt-first.melt (register_option): Inform that it is
	obsolete. To be removed.
	(multiple_sort): Add a comment that it should be replaced by a
	function from warmelt-base.melt

	* melt/warmelt-base.melt: Add thru cheader an #include of <vector>
	and <algorithm>, and a global declaration of
	Melt_Sort_Compare_Index class in the generated code.
	(multiple_sort_new): New function which should replace the old
	multiple_sort primitive. Uses std::stable_sort with
	Melt_Sort_Compare_Index.  See
	http://stackoverflow.com/q/21201685/841108 for details.

	* melt/warmelt-normatch.melt: Remove register_option for
	alternate_match.

2014-01-17  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/generated/*: Regenerate all.

2014-01-17  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-base.melt (multiple_sort): Commented out a
	std::stable_sort based sorting function which fails to compile
	yet.

	* melt/warmelt-normal.melt (normexp_hook_call): Slightly improved
	error message for arity mismatch.

	* melt/xtramelt-playground.melt: Add testing of inform_at...

2014-01-09  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.cc (meltgc_strbuf_reserve): Improve debugprintf.
	(meltgc_set_user_options): Remove function.

2014-01-09  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/generated/*: Regenerate all.
	* melt/generated/warmelt-normatch+06.cc: Remove.

2014-01-09  Basile Starynkevitch  <basile@starynkevitch.net>

	{{removing option facility; should use std::sort for sorting..}}

	* melt-predef.list: Update copyright year.
	(HOOK_SORT_COMPARE): Add.

	* melt-runtime.cc (melt_load_module_index): Improve debugprintf in
	MELTDESCR_REQUIRED_SYMBOL.
	(meltgc_set_user_options): Becomes obsolete.
	(meltgc_load_modules_and_do_mode): Don't set options.

	* melt/warmelt-first.melt: Update copyright year.
	(class_initial_system_data): Remove sysdata_option_set field.
	(option_map_container, class_option_descriptor, init_optionsetter): Remove
	(register_option): Obsolete.
	(option_helper_fun): Remove.
	(initial_system_data): Remove sysdata_option_set.

	* melt/warmelt-base.melt (hook_sort_compare): New hook.

	* melt/warmelt-normatch.melt (match_graphic_dot_prefix): Remove.
	(match_graphic_optset): Remove.
	(match_graphic): Removed option.

	* melt/warmelt-outobj.melt: Update copyright year.
	(code_buffer_limit_optset): Remove function.
	(code_buffer_limit): Remove option.

2014-01-08  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/generated/*: Regenerated all files.


2014-01-08  Basile Starynkevitch  <basile@starynkevitch.net>

	{{The tgccif test passes and MELT is more stable since entirely
	compilable.}}
	* melt/warmelt-base.melt (valdesc_hook): The
	MELT_HOOK_SET_ROUTCODE macro uses a reinterpret_cast.

	* melt/warmelt-macro.melt: Update copyright year.

	* melt/warmelt-moremacro.melt Update copyright year.
	(mexpand_gccif): Use expand_pairlist_as_list and return both first
	and rest of expansion...

2014-01-08  Basile Starynkevitch  <basile@starynkevitch.net>

	* testsuite/melt/tgccif.melt: New file. Still failing but should
	work.

	* melt/warmelt-normal.melt: Update copyright.
	(normexp_any_value): Add debug.

2014-01-08  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/xtramelt-ana-gimple.melt: Update copyright year.
	(gimple_seq_alloc): Remove primitive.
	(gimple_seq_alloc_with_stmt): Add primitive.

2014-01-07  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/generated/*: Regenerated all files.

2014-01-07  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (MELT_VERSION_STRING): Update to 1.1-pre!

2014-01-07  Basile Starynkevitch  <basile@starynkevitch.net>

	* Makefile.in (upgrade-warmelt): Fancier echo-s.

	* melt-build-script.tpl: Ensure that regenerate overall goal is
	done even when application files don't compile.
	Generate warmelt modules lists.
	Move application overall goal after regenerate.

	* melt-build-script.sh: Regenerate.

2014-01-07  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-base.melt: Update copyright year.
	(valdesc_routine): Use reinterpret_cast in
	MELT_ROUTINE_SET_ROUTCODE.

2014-01-07  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-modes.melt: Update copyright year.
	(generate_runtypesupport_predefined_hooks): Emit a
	reinterpret_cast for hook routines.

2014-01-07  Basile Starynkevitch  <basile@starynkevitch.net>

	{{still unstable; xtramelt-ana-gimple.melt don't compile!}}
	* melt-run.proto.h: For GCC 4.9 include "stringpool.h" and
	"tree-ssa-threadedge.h" headers.

	* melt-runtime.cc (MELTDESCR_UNION_SYMBOL): Remove
	macro.
	(meltgc_run_cc_extension): Use reinterpret_cast with dlsym.

	* melt/xtramelt-ana-tree.melt: Update copyright year.
	(tree_integer_cst): Use tree_fits_shwi_p & tree_to_shwi for GCC
	4.9.

2014-01-06  Basile Starynkevitch  <basile@starynkevitch.net>

	{{still unstable; xtramelt-ana-tree.melt don't compile!}}
	* melt-run.proto.h: Update copyright year.
	For GCC 4.9 #include "gimple-iterator.h"

	* xtramelt-ana-base.melt: Update copyright year.
	(each_cgraph_fun_entryblock, each_cgraph_fun_call_flow_graph)
	(each_cgraph_decl, cfun_cfg_entry_block, cfun_cfg_exit_block):
	Adapt for GCC 4.9...

2014-01-04  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.cc: Update copyright year.
	(meltgc_make_special): Better debug printf.
	(melt_garbcoll): Cast to long in compare.
	(melt_warning_str): Remove mixmag variable.  Correct the
	warning_at format string when melt_dbgcounter is 0.

2013-12-17  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.cc (meltgc_read_from_rawstring)
	(meltgc_read_from_val): Force rhas_file_location to false.

2013-11-27  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/xtramelt-ana-base.melt: Still not translatable.  Should use
	ENTRY_BLOCK_PTR_FOR_FN instead of ENTRY_BLOCK_PTR_FOR_FUNCTION
	etc...

2013-11-27  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-build-script.tpl (meltbuild_do_applications): Restart the
	compilation without line numbering on error, and make a notice of
	it.
	* melt-build-script.sh: Regenerate.

2013-11-26  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/xtramelt-ana-base.melt: Still not translatable.
	(each_loop): Gives two versions, on for GCC 4.7 & 4.8 another for
	GCC 4.9
	(each_cgraph_fun_body): Still bad. Needs some GCC 4.9 specific
	code.

2013-11-26  Basile Starynkevitch  <basile@starynkevitch.net>

	{{unstable, xtramelt-ana-base.melt is not translatable. Merge with
	trunk svn rev 205391}}
	* melt-run.proto.h: Move MELT_GCC_VERSION #definition above.
	Include basic-block.h, tree-ssa-alias.h, internal-fn.h,
	gimple-expr.h, is-a.h for GCC 4.9...
	* melt-runtime.cc: Include basic-block.h, tree-ssa-alias.h, internal-fn.h,
	gimple-expr.h, is-a.h, pointer-set.h for GCC 4.9...


2013-11-22  Basile Starynkevitch  <basile@starynkevitch.net>

	{{unstable, xtramelt-ana-base.melt is not translatable.}}
	* melt/warmelt-first.melt (ctype_tree, ctype_gimple)
	(ctype_gimple_seq, ctype_basic_block, ctype_edge, ctype_loop)
	(ctype_rtx, ctype_bitmap): The :ctype_marker field has a comment
	to be generated.

2013-11-22  Basile Starynkevitch  <basile@starynkevitch.net>

	{{merge with trunk GCC 4.9 svn rev 205247 now in stage 3}}
	* Makefile.in (MELT_GCC_VERSION_NUM): New make variable.
	(melt-run-md5.h, melt-run.h): Use it.

	* melt-runtime.cc: With GCC 4.9 include print-tree.h,
	gimple-iterator.h, gimple-walk.h.
	(meltgc_start_all_new_modules, meltgc_start_flavored_module)
	(meltgc_do_initial_mode, meltgc_set_user_options)
	(meltgc_load_modules_and_do_mode): Improve debugprintf...
	(melt_gt_ggc_mx_gimple_seq_d): Handle GCC 4.9 specifically.

	* melt-runtime.h (gt_ggc_mx_gimple_statement_d): Temporarily
	define this macro.


2013-11-11  Basile Starynkevitch  <basile@starynkevitch.net>

	{{merge with trunk GCC 4.9 svn rev 204695; very unstable}}
	* melt-runtime.h (MELT_VERSION_STRING): Bump to "1.0.1+".

	* melt-run.proto.h: Update copyright years.
	include tree-cfg.h instead of tree-flow.h for GCC 4.9.

	* melt-runtime.cc: Include tree-cfg.h not tree-flow.h for GCC 4.9.
	(meltgc_walk_gimple_seq): Fatal error with GCC 4.9 since the
	walk_use_def_chains function disappeared from GCC...

	* melt/xtramelt-ana-gimple.melt (walk_gimple_seq)
	(walk_gimple_seq_unique_tree): issue some #warning-s for GCC 4.9
	because walk_use_def_chains function disappeared from GCC...

	* melt/xtramelt-probe.melt (probe_docmd): Issue an error since
	currently the MELT probe is not usable with GCC 4.9....

2013-11-07  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.h (MELT_VERSION_STRING): Bump to "1.0.1".

2013-11-05  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Bug MELT-SFT-6 probably fixed by a shameful hack to circumvent a
	bug in GCC 4.7 gengtype...}}

	* melt-runtime.h (MELT_VERSION_STRING): Bump to "1.0.1-rc1".

2013-11-05  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/generated/: Regenerated all files.

2013-11-05  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-modes.melt (generate_runtypesupport_gty): Avoid
	operator with #ifdef MELT_BOGUS_GENGTYPE_4dot7 not #ifdef
	MELT_NO_CONVERSION_OPERATOR....

	* melt-runtime.cc: Add long comment explaining how
	MELT_BOGUS_GENGTYPE_4dot7 is used to circumvent a GCC 4.7 bug.
	(melt_branch_process_arguments, meltgc_walkstmt_cb)
	(meltgc_walktree_cb): Use MELT_BOGUS_GENGTYPE_4dot7 to avoid a bug
	in gengtype from GCC 4.7...

2013-11-05  Basile Starynkevitch  <basile@starynkevitch.net>
	{{after MELT 1.0 the regeneration of MELT is not detailed file by
	fiile, unless new files are emitted or removed....}}
	* melt/generated/: Regenerated all files.

2013-11-05  Basile Starynkevitch  <basile@starynkevitch.net>
	{{tentative fix for bug MELT-STF-6 
	  https://sourceforge.net/p/gcc-melt/tickets/6/}}
	* melt-runtime.h (MELT_VERSION_STR): Bump to "1.0.1-pre"

	* melt/warmelt-modes.melt (generate_runtypesupport_gty): Nest
	correctly the emission of MELT_NO_CONVERSION_OPERATOR preprocessor
	#ifndef/#endif ... BTW, this flag might be useless now...

2013-10-29  Basile Starynkevitch  <basile@starynkevitch.net>
	{{MELT plugin 1.0 release}}
	* melt-module.mk: Remove info about GCCMELTGEN_BUILD.

	* melt-runtime.h (MELT_VERSION_STR): Bump to "1.0"

2013-10-28  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}
	* melt/generated/meltrunsup-inc.cc: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.cc: Regenerate.
	* melt/generated/warmelt-base+02.cc: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.cc: Regenerate.
	* melt/generated/warmelt-debug+01.cc: Regenerate.
	* melt/generated/warmelt-debug+02.cc: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.cc: Regenerate.
	* melt/generated/warmelt-first+01.cc: Regenerate.
	* melt/generated/warmelt-first+02.cc: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.cc: Regenerate.
	* melt/generated/warmelt-genobj+01.cc: Regenerate.
	* melt/generated/warmelt-genobj+02.cc: Regenerate.
	* melt/generated/warmelt-genobj+03.cc: Regenerate.
	* melt/generated/warmelt-genobj+04.cc: Regenerate.
	* melt/generated/warmelt-genobj+05.cc: Regenerate.
	* melt/generated/warmelt-genobj+06.cc: Regenerate.
	* melt/generated/warmelt-genobj+07.cc: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.cc: Regenerate.
	* melt/generated/warmelt-hooks+01.cc: Regenerate.
	* melt/generated/warmelt-hooks+02.cc: Regenerate.
	* melt/generated/warmelt-hooks+03.cc: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.cc: Regenerate.
	* melt/generated/warmelt-macro+01.cc: Regenerate.
	* melt/generated/warmelt-macro+02.cc: Regenerate.
	* melt/generated/warmelt-macro+03.cc: Regenerate.
	* melt/generated/warmelt-macro+04.cc: Regenerate.
	* melt/generated/warmelt-macro+05.cc: Regenerate.
	* melt/generated/warmelt-macro+06.cc: Regenerate.
	* melt/generated/warmelt-macro+07.cc: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.cc: Regenerate.
	* melt/generated/warmelt-modes+01.cc: Regenerate.
	* melt/generated/warmelt-modes+02.cc: Regenerate.
	* melt/generated/warmelt-modes+03.cc: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.cc: Regenerate.
	* melt/generated/warmelt-moremacro+01.cc: Regenerate.
	* melt/generated/warmelt-moremacro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-moremacro+melttime.h: Regenerate.
	* melt/generated/warmelt-moremacro.cc: Regenerate.
	* melt/generated/warmelt-normal+01.cc: Regenerate.
	* melt/generated/warmelt-normal+02.cc: Regenerate.
	* melt/generated/warmelt-normal+03.cc: Regenerate.
	* melt/generated/warmelt-normal+04.cc: Regenerate.
	* melt/generated/warmelt-normal+05.cc: Regenerate.
	* melt/generated/warmelt-normal+06.cc: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.cc: Regenerate.
	* melt/generated/warmelt-normatch+01.cc: Regenerate.
	* melt/generated/warmelt-normatch+02.cc: Regenerate.
	* melt/generated/warmelt-normatch+03.cc: Regenerate.
	* melt/generated/warmelt-normatch+04.cc: Regenerate.
	* melt/generated/warmelt-normatch+05.cc: Regenerate.
	* melt/generated/warmelt-normatch+06.cc: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.cc: Regenerate.
	* melt/generated/warmelt-outobj+01.cc: Regenerate.
	* melt/generated/warmelt-outobj+02.cc: Regenerate.
	* melt/generated/warmelt-outobj+03.cc: Regenerate.
	* melt/generated/warmelt-outobj+04.cc: Regenerate.
	* melt/generated/warmelt-outobj+05.cc: Regenerate.
	* melt/generated/warmelt-outobj+06.cc: Regenerate.
	* melt/generated/warmelt-outobj+07.cc: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.cc: Regenerate.

2013-10-28  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (MELT_VERSION_STRING): Bump to "1.0-rc3+". Should
	be the 1.0 release....

2013-10-28  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/xtramelt-ana-base.melt (read_arg_list): New function.

	* melt/xtramelt-ana-simple.melt (findgimple_docmd): Use the
	-fplugin-arg-melt-gimple-pattern=
	-fplugin-arg-melt-function-pattern= -fplugin-arg-melt-action=
	arguments and deprecates -fplugin-arg-melt-arg.
	(findgimple_mode): Document above change.

2013-10-28  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-base.melt (some_string_value_containing): New
	cmatcher.

	* melt/warmelt-macro.melt (macroexpand_toplevel_list): Don't warn
	for a short list of s-expression.

	* melt/warmelt-outobj.melt (translate_macroexpanded_list): Mention
	generation of C++, not C, code.

2013-10-27  Basile Starynkevitch  <basile@starynkevitch.net>
	{{1.0-rc3 release candidate}}
	* melt-runtime.h (MELT_VERSION_STR): Bump to "1.0-rc3" ...


2013-10-27  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup-inc.cc: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.cc: Regenerate.
	* melt/generated/warmelt-base+02.cc: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.cc: Regenerate.
	* melt/generated/warmelt-debug+01.cc: Regenerate.
	* melt/generated/warmelt-debug+02.cc: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.cc: Regenerate.
	* melt/generated/warmelt-first+01.cc: Regenerate.
	* melt/generated/warmelt-first+02.cc: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.cc: Regenerate.
	* melt/generated/warmelt-genobj+01.cc: Regenerate.
	* melt/generated/warmelt-genobj+02.cc: Regenerate.
	* melt/generated/warmelt-genobj+03.cc: Regenerate.
	* melt/generated/warmelt-genobj+04.cc: Regenerate.
	* melt/generated/warmelt-genobj+05.cc: Regenerate.
	* melt/generated/warmelt-genobj+06.cc: Regenerate.
	* melt/generated/warmelt-genobj+07.cc: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.cc: Regenerate.
	* melt/generated/warmelt-hooks+01.cc: Regenerate.
	* melt/generated/warmelt-hooks+02.cc: Regenerate.
	* melt/generated/warmelt-hooks+03.cc: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.cc: Regenerate.
	* melt/generated/warmelt-macro+01.cc: Regenerate.
	* melt/generated/warmelt-macro+02.cc: Regenerate.
	* melt/generated/warmelt-macro+03.cc: Regenerate.
	* melt/generated/warmelt-macro+04.cc: Regenerate.
	* melt/generated/warmelt-macro+05.cc: Regenerate.
	* melt/generated/warmelt-macro+06.cc: Regenerate.
	* melt/generated/warmelt-macro+07.cc: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.cc: Regenerate.
	* melt/generated/warmelt-modes+01.cc: Regenerate.
	* melt/generated/warmelt-modes+02.cc: Regenerate.
	* melt/generated/warmelt-modes+03.cc: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.cc: Regenerate.
	* melt/generated/warmelt-moremacro+01.cc: Regenerate.
	* melt/generated/warmelt-moremacro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-moremacro+melttime.h: Regenerate.
	* melt/generated/warmelt-moremacro.cc: Regenerate.
	* melt/generated/warmelt-normal+01.cc: Regenerate.
	* melt/generated/warmelt-normal+02.cc: Regenerate.
	* melt/generated/warmelt-normal+03.cc: Regenerate.
	* melt/generated/warmelt-normal+04.cc: Regenerate.
	* melt/generated/warmelt-normal+05.cc: Regenerate.
	* melt/generated/warmelt-normal+06.cc: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.cc: Regenerate.
	* melt/generated/warmelt-normatch+01.cc: Regenerate.
	* melt/generated/warmelt-normatch+02.cc: Regenerate.
	* melt/generated/warmelt-normatch+03.cc: Regenerate.
	* melt/generated/warmelt-normatch+04.cc: Regenerate.
	* melt/generated/warmelt-normatch+05.cc: Regenerate.
	* melt/generated/warmelt-normatch+06.cc: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.cc: Regenerate.
	* melt/generated/warmelt-outobj+01.cc: Regenerate.
	* melt/generated/warmelt-outobj+02.cc: Regenerate.
	* melt/generated/warmelt-outobj+03.cc: Regenerate.
	* melt/generated/warmelt-outobj+04.cc: Regenerate.
	* melt/generated/warmelt-outobj+05.cc: Regenerate.
	* melt/generated/warmelt-outobj+06.cc: Regenerate.
	* melt/generated/warmelt-outobj+07.cc: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.cc: Regenerate.

2013-10-27  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-modes.melt (makedoc_scaninput, makedoc_genmacro):
	Handle defmacro.

2013-10-26  Basile Starynkevitch  <basile@starynkevitch.net>

	{{MELT-SFT-5 solved}}
	* melt/warmelt-outobj.melt (autobox_normal_return): Is making a
	new binding for the unboxed thing... so that autoboxing happens on
	a local occurence.

2013-10-26  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-debug.melt (dbgout_closure_method): Remove spurious
	indent.

	* melt/warmelt-normal.melt
	(normexp_update_current_module_environment_reference): Slightly
	less debugging.

	* melt/warmelt-outobj.melt (give_normalized_macroexpanded_list):
	More debugging...

>>>>>>> .r204127
2013-10-25  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/meltrunsup-inc.cc: Regenerate.
	* melt/generated/warmelt-base.cc: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.cc: Regenerate.
	* melt/generated/warmelt-genobj+02.cc: Regenerate.
	* melt/generated/warmelt-genobj+03.cc: Regenerate.
	* melt/generated/warmelt-genobj+04.cc: Regenerate.
	* melt/generated/warmelt-genobj+05.cc: Regenerate.
	* melt/generated/warmelt-genobj+06.cc: Regenerate.
	* melt/generated/warmelt-genobj+07.cc: Regenerate.
	* melt/generated/warmelt-genobj.cc: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+01.cc: Regenerate.
	* melt/generated/warmelt-modes+02.cc: Regenerate.
	* melt/generated/warmelt-modes+03.cc: Regenerate.
	* melt/generated/warmelt-modes.cc: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-moremacro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-moremacro+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+01.cc: Regenerate.
	* melt/generated/warmelt-outobj+02.cc: Regenerate.
	* melt/generated/warmelt-outobj+03.cc: Regenerate.
	* melt/generated/warmelt-outobj+04.cc: Regenerate.
	* melt/generated/warmelt-outobj+05.cc: Regenerate.
	* melt/generated/warmelt-outobj+06.cc: Regenerate.
	* melt/generated/warmelt-outobj+07.cc: Regenerate.
	* melt/generated/warmelt-outobj.cc: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.


2013-10-25  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.h (MELT_VERSION_STR): Bump to "1.0-rc2+".

2013-10-25  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-genobj.melt (compile2obj_initextendproc)
	(compilobj_nrep_locsymocc): More debug.

	* melt/warmelt-outobj.melt (autobox_normal_return): More
	debug. Perhaps should create another binding for the
	class_nrep_return instance....
	(translate_run_melt_expressions): More debug.

	* melt/warmelt-modes.melt (eval_docmd, evalfile_docmd): More
	debug, and describe the created environments.

2013-10-25  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-outobj.melt (translate_run_melt_expressions): If
	the run-infix program argument is given as
	-fplugin-arg-melt-run-infix=FOO use it instead of the process id
	in the name of the generated temporary module.

2013-10-23  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-outobj.melt (autobox_normal_return): Add backtrace.

2013-10-23  Basile Starynkevitch  <basile@starynkevitch.net>

	{{MELT-SFT-5:: Failing command:
	  ./cc1 -fmelt-debug -fmelt-init=@warmelt.quicklybuilt \
	    -fplugin-arg-melt-mode=eval \
	    -fplugin-arg-melt-arg='(melt_version_str)' \
	    @meltbuild-common.args  meltbuild-empty-file.c
	}}
	* melt/warmelt-outobj.melt (translate_run_melt_expressions):
	Improve warning.

2013-10-23  Basile Starynkevitch  <basile@starynkevitch.net>
	{{1.0-rc2 = MELT plugin 1.0 release candidate 2}}
	* melt-runtime.h (MELT_VERSION_STRING): Bump to "1.0-rc2".

2013-10-23  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.cc (melt_error_str, melt_warning_at_strbuf)
	(melt_warning_str, melt_inform_str): Don't display the
	melt_dbgcounter when it is 0.
	(melt_do_finalize): Prettier printing of MELT GC stats.

2013-10-23  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/meltrunsup-inc.cc: Regenerate.
	* melt/generated/warmelt-base+01.cc: Regenerate.
	* melt/generated/warmelt-base+02.cc: Regenerate.
	* melt/generated/warmelt-base.cc: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first.cc: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+02.cc: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-moremacro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-moremacro+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.


2013-10-23  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (MELT_VERSION_STRING): Bump to "1.0-rc2almost".

	* melt/warmelt-first.melt (hook_symbol_importer): Don't show
	warnings for warmelt-* modules unless bootsrapping. This is a
	shameful kludge.

	* melt/warmelt-base.melt (melt_make_sexpr): Remove all debug.

2013-10-23  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/meltrunsup-inc.cc: Regenerate.
	* melt/generated/warmelt-base+01.cc: Regenerate.
	* melt/generated/warmelt-base+02.cc: Regenerate.
	* melt/generated/warmelt-base.cc: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+01.cc: Regenerate.
	* melt/generated/warmelt-macro+02.cc: Regenerate.
	* melt/generated/warmelt-macro+03.cc: Regenerate.
	* melt/generated/warmelt-macro+04.cc: Regenerate.
	* melt/generated/warmelt-macro+05.cc: Regenerate.
	* melt/generated/warmelt-macro+06.cc: Regenerate.
	* melt/generated/warmelt-macro+07.cc: Regenerate.
	* melt/generated/warmelt-macro.cc: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-moremacro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-moremacro+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-10-23  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-base.melt (melt_make_sexpr, make_sexpr): Add since
	moved from warmelt-macro.melt file and replace error_at with lower
	level error processing...

	* melt/warmelt-macro.melt (melt_make_sexpr, make_sexpr): Remove
	since moved to warmelt-base.melt file...
.
2013-10-23  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-macro.melt (melt_make_sexpr, make_sexpr): Move
	near begin of file.

2013-10-22  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/warmelt-base+01.cc: Regenerate.
	* melt/generated/warmelt-base+02.cc: Regenerate.
	* melt/generated/warmelt-base.cc: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+01.cc: Regenerate.
	* melt/generated/warmelt-debug+02.cc: Regenerate.
	* melt/generated/warmelt-debug.cc: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+01.cc: Regenerate.
	* melt/generated/warmelt-first+02.cc: Regenerate.
	* melt/generated/warmelt-first.cc: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.cc: Regenerate.
	* melt/generated/warmelt-genobj+02.cc: Regenerate.
	* melt/generated/warmelt-genobj+03.cc: Regenerate.
	* melt/generated/warmelt-genobj+04.cc: Regenerate.
	* melt/generated/warmelt-genobj+05.cc: Regenerate.
	* melt/generated/warmelt-genobj+06.cc: Regenerate.
	* melt/generated/warmelt-genobj+07.cc: Regenerate.
	* melt/generated/warmelt-genobj.cc: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+01.cc: Regenerate.
	* melt/generated/warmelt-hooks+02.cc: Regenerate.
	* melt/generated/warmelt-hooks+03.cc: Regenerate.
	* melt/generated/warmelt-hooks.cc: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+01.cc: Regenerate.
	* melt/generated/warmelt-macro+02.cc: Regenerate.
	* melt/generated/warmelt-macro+03.cc: Regenerate.
	* melt/generated/warmelt-macro+04.cc: Regenerate.
	* melt/generated/warmelt-macro+05.cc: Regenerate.
	* melt/generated/warmelt-macro+06.cc: Regenerate.
	* melt/generated/warmelt-macro+07.cc: Regenerate.
	* melt/generated/warmelt-macro.cc: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+01.cc: Regenerate.
	* melt/generated/warmelt-modes+02.cc: Regenerate.
	* melt/generated/warmelt-modes+03.cc: Regenerate.
	* melt/generated/warmelt-modes.cc: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-moremacro+01.cc: Regenerate.
	* melt/generated/warmelt-moremacro.cc: Regenerate.
	* melt/generated/warmelt-moremacro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-moremacro+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+01.cc: Regenerate.
	* melt/generated/warmelt-normal+02.cc: Regenerate.
	* melt/generated/warmelt-normal+03.cc: Regenerate.
	* melt/generated/warmelt-normal+04.cc: Regenerate.
	* melt/generated/warmelt-normal+05.cc: Regenerate.
	* melt/generated/warmelt-normal+06.cc: Regenerate.
	* melt/generated/warmelt-normal.cc: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+01.cc: Regenerate.
	* melt/generated/warmelt-normatch+02.cc: Regenerate.
	* melt/generated/warmelt-normatch+03.cc: Regenerate.
	* melt/generated/warmelt-normatch+04.cc: Regenerate.
	* melt/generated/warmelt-normatch+05.cc: Regenerate.
	* melt/generated/warmelt-normatch+06.cc: Regenerate.
	* melt/generated/warmelt-normatch.cc: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+01.cc: Regenerate.
	* melt/generated/warmelt-outobj+02.cc: Regenerate.
	* melt/generated/warmelt-outobj+03.cc: Regenerate.
	* melt/generated/warmelt-outobj+04.cc: Regenerate.
	* melt/generated/warmelt-outobj+05.cc: Regenerate.
	* melt/generated/warmelt-outobj+06.cc: Regenerate.
	* melt/generated/warmelt-outobj+07.cc: Regenerate.
	* melt/generated/warmelt-outobj.cc: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-10-22  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-macro.melt (expand_quoted_sexpr, mexpand_quote)
	(antiquoter, mexpand_backquote, mexpand_comma): Remove, since they
	have been moved to warmelt-moremacro.melt file...

2013-10-22  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/warmelt-moremacro+01.cc: New generated file...
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/meltrunsup-inc.cc: Regenerate.
	* melt/generated/warmelt-base+01.cc: Regenerate.
	* melt/generated/warmelt-base+02.cc: Regenerate.
	* melt/generated/warmelt-base.cc: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+01.cc: Regenerate.
	* melt/generated/warmelt-debug+02.cc: Regenerate.
	* melt/generated/warmelt-debug.cc: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+01.cc: Regenerate.
	* melt/generated/warmelt-first+02.cc: Regenerate.
	* melt/generated/warmelt-first.cc: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.cc: Regenerate.
	* melt/generated/warmelt-genobj+02.cc: Regenerate.
	* melt/generated/warmelt-genobj+03.cc: Regenerate.
	* melt/generated/warmelt-genobj+04.cc: Regenerate.
	* melt/generated/warmelt-genobj+05.cc: Regenerate.
	* melt/generated/warmelt-genobj+06.cc: Regenerate.
	* melt/generated/warmelt-genobj+07.cc: Regenerate.
	* melt/generated/warmelt-genobj.cc: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+01.cc: Regenerate.
	* melt/generated/warmelt-hooks+02.cc: Regenerate.
	* melt/generated/warmelt-hooks+03.cc: Regenerate.
	* melt/generated/warmelt-hooks.cc: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+01.cc: Regenerate.
	* melt/generated/warmelt-macro+02.cc: Regenerate.
	* melt/generated/warmelt-macro+03.cc: Regenerate.
	* melt/generated/warmelt-macro+04.cc: Regenerate.
	* melt/generated/warmelt-macro+05.cc: Regenerate.
	* melt/generated/warmelt-macro+06.cc: Regenerate.
	* melt/generated/warmelt-macro+07.cc: Regenerate.
	* melt/generated/warmelt-macro.cc: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+01.cc: Regenerate.
	* melt/generated/warmelt-modes+02.cc: Regenerate.
	* melt/generated/warmelt-modes+03.cc: Regenerate.
	* melt/generated/warmelt-modes.cc: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-moremacro.cc: Regenerate.
	* melt/generated/warmelt-moremacro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-moremacro+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+01.cc: Regenerate.
	* melt/generated/warmelt-normal+02.cc: Regenerate.
	* melt/generated/warmelt-normal+03.cc: Regenerate.
	* melt/generated/warmelt-normal+04.cc: Regenerate.
	* melt/generated/warmelt-normal+05.cc: Regenerate.
	* melt/generated/warmelt-normal+06.cc: Regenerate.
	* melt/generated/warmelt-normal.cc: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+01.cc: Regenerate.
	* melt/generated/warmelt-normatch+02.cc: Regenerate.
	* melt/generated/warmelt-normatch+03.cc: Regenerate.
	* melt/generated/warmelt-normatch+04.cc: Regenerate.
	* melt/generated/warmelt-normatch+05.cc: Regenerate.
	* melt/generated/warmelt-normatch+06.cc: Regenerate.
	* melt/generated/warmelt-normatch.cc: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+01.cc: Regenerate.
	* melt/generated/warmelt-outobj+02.cc: Regenerate.
	* melt/generated/warmelt-outobj+03.cc: Regenerate.
	* melt/generated/warmelt-outobj+04.cc: Regenerate.
	* melt/generated/warmelt-outobj+05.cc: Regenerate.
	* melt/generated/warmelt-outobj+06.cc: Regenerate.
	* melt/generated/warmelt-outobj+07.cc: Regenerate.
	* melt/generated/warmelt-outobj.cc: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-10-22  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-moremacro.melt (expand_quoted_sexpr, mexpand_quote)
	(antiquoter, mexpand_backquote, mexpand_comma): Copied from
	warmelt-macro.melt, to be moved from it...

2013-10-22  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.cc (melt_load_module_index): srcpath has ".cc" not
	".c" file suffix.

	* melt/xtramelt-ana-simple.melt (findgimple_docmd
	findgimple/notreegate) split long debug in two.

2013-10-21  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.cc (melt_do_finalize): Improve printing for verbose
	display of modes which have been successfully run.

2013-10-19  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup-inc.cc: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.cc: Regenerate.
	* melt/generated/warmelt-base+02.cc: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.cc: Regenerate.
	* melt/generated/warmelt-debug+01.cc: Regenerate.
	* melt/generated/warmelt-debug+02.cc: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.cc: Regenerate.
	* melt/generated/warmelt-first+01.cc: Regenerate.
	* melt/generated/warmelt-first+02.cc: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.cc: Regenerate.
	* melt/generated/warmelt-genobj+01.cc: Regenerate.
	* melt/generated/warmelt-genobj+02.cc: Regenerate.
	* melt/generated/warmelt-genobj+03.cc: Regenerate.
	* melt/generated/warmelt-genobj+04.cc: Regenerate.
	* melt/generated/warmelt-genobj+05.cc: Regenerate.
	* melt/generated/warmelt-genobj+06.cc: Regenerate.
	* melt/generated/warmelt-genobj+07.cc: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.cc: Regenerate.
	* melt/generated/warmelt-hooks+01.cc: Regenerate.
	* melt/generated/warmelt-hooks+02.cc: Regenerate.
	* melt/generated/warmelt-hooks+03.cc: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.cc: Regenerate.
	* melt/generated/warmelt-macro+01.cc: Regenerate.
	* melt/generated/warmelt-macro+02.cc: Regenerate.
	* melt/generated/warmelt-macro+03.cc: Regenerate.
	* melt/generated/warmelt-macro+04.cc: Regenerate.
	* melt/generated/warmelt-macro+05.cc: Regenerate.
	* melt/generated/warmelt-macro+06.cc: Regenerate.
	* melt/generated/warmelt-macro+07.cc: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.cc: Regenerate.
	* melt/generated/warmelt-modes+01.cc: Regenerate.
	* melt/generated/warmelt-modes+02.cc: Regenerate.
	* melt/generated/warmelt-modes+03.cc: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.cc: Regenerate.
	* melt/generated/warmelt-moremacro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-moremacro+melttime.h: Regenerate.
	* melt/generated/warmelt-moremacro.cc: Regenerate.
	* melt/generated/warmelt-normal+01.cc: Regenerate.
	* melt/generated/warmelt-normal+02.cc: Regenerate.
	* melt/generated/warmelt-normal+03.cc: Regenerate.
	* melt/generated/warmelt-normal+04.cc: Regenerate.
	* melt/generated/warmelt-normal+05.cc: Regenerate.
	* melt/generated/warmelt-normal+06.cc: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.cc: Regenerate.
	* melt/generated/warmelt-normatch+01.cc: Regenerate.
	* melt/generated/warmelt-normatch+02.cc: Regenerate.
	* melt/generated/warmelt-normatch+03.cc: Regenerate.
	* melt/generated/warmelt-normatch+04.cc: Regenerate.
	* melt/generated/warmelt-normatch+05.cc: Regenerate.
	* melt/generated/warmelt-normatch+06.cc: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.cc: Regenerate.
	* melt/generated/warmelt-outobj+01.cc: Regenerate.
	* melt/generated/warmelt-outobj+02.cc: Regenerate.
	* melt/generated/warmelt-outobj+03.cc: Regenerate.
	* melt/generated/warmelt-outobj+04.cc: Regenerate.
	* melt/generated/warmelt-outobj+05.cc: Regenerate.
	* melt/generated/warmelt-outobj+06.cc: Regenerate.
	* melt/generated/warmelt-outobj+07.cc: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.cc: Regenerate.

2013-10-19  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-upgrade.sh: Skip *+[0-9][0-9].c files if they dont exist,
	e.g warmelt-moremacro+[0-9][0-9].c file...

2013-10-19  Basile Starynkevitch  <basile@starynkevitch.net>

	{{MELT-SFT-4 fixed}}
	* melt-runtime.h (MELT_VERSION_STRING): Bump to 1.0-rc2quasi.

	* melt/warmelt-macro.melt (mexpand_gccif, gccif)
	(mexpandobsolete_container, container): Remove since moved to
	warmelt-moremacro.melt file...
	(install_initial_patmacro, mexpand_reference)
	(patexpand_reference): Export functions.

	* melt/warmelt-moremacro.melt (mexpand_gccif, gccif)
	(mexpandobsolete_container, container): Moved here.

2013-10-19  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Unstable}}
	* melt-build-script.def: New entry for warmelt-moremacro.melt.
	* melt-build-script.sh: Regenerate.

	* melt/warmelt-macro.melt (each_component_in_list): Remove
	function, since moved into warmelt-moremacro.melt file...

	* melt/warmelt-moremacro.melt: New file.
	(each_component_in_list): Move function here.
	* melt/generated/warmelt-moremacro+meltbuild.mk: New file.
	* melt/generated/warmelt-moremacro+meltdesc.c: New file.
	* melt/generated/warmelt-moremacro+melttime.h: New file.
	* melt/generated/warmelt-moremacro.cc: New file.

2013-10-18  Basile Starynkevitch  <basile@starynkevitch.net>

	{{should split warmelt-macro.melt into two files and put
	each_component_in_list in the second part...}}

	* melt/warmelt-macro.melt (expand_tuple_slice_as_tuple): More debug.
	(each_component_in_list): More debug, but does not work because
	expand_tuple_slice_as_tuple is not really seen...

2013-10-18  Basile Starynkevitch  <basile@starynkevitch.net>

	{{each_component_in_list don't work as it should.}}
	* testsuite/melt/teachcomplist.melt: New file.

	* melt/warmelt-macro.melt (diagnostic_args_macro)
	(diagnostic_expand_message): Less debug.

	* melt/warmelt-modes.melt (makedoc_docmd): More debug.

2013-10-17  Basile Starynkevitch  <basile@starynkevitch.net>

	{{MELT-SFT-4: makedoc fails on tmakedoc.melt}}

	* testsuite/melt/tmakedoc.melt: Improve comment, but is failing
	because of some bug in makedoc mode.

	* melt/warmelt-modes.melt (makedoc_scaninput, makedoc_docmd): More
	debug.

	* melt-build-script.tpl: More verbose error shows
	$GCCMELT_CC1PLUS...

	* melt-build-script.sh: Regenerate.

2013-10-17  Basile Starynkevitch  <basile@starynkevitch.net>

	{{unstable, documentation not generated}}
	* melt/warmelt-modes.melt (makedoc_docmd): More information
	messages.

2013-10-17  Basile Starynkevitch  <basile@starynkevitch.net>

	{{unstable, documentation not generated}}
	* melt/warmelt-modes.melt (makedoc_docmd): More debug. The created
	environments are described.

2013-10-17  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}
	* melt/generated/meltrunsup-inc.cc: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.cc: Regenerate.
	* melt/generated/warmelt-base+02.cc: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.cc: Regenerate.
	* melt/generated/warmelt-debug+01.cc: Regenerate.
	* melt/generated/warmelt-debug+02.cc: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.cc: Regenerate.
	* melt/generated/warmelt-first+01.cc: Regenerate.
	* melt/generated/warmelt-first+02.cc: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.cc: Regenerate.
	* melt/generated/warmelt-genobj+01.cc: Regenerate.
	* melt/generated/warmelt-genobj+02.cc: Regenerate.
	* melt/generated/warmelt-genobj+03.cc: Regenerate.
	* melt/generated/warmelt-genobj+04.cc: Regenerate.
	* melt/generated/warmelt-genobj+05.cc: Regenerate.
	* melt/generated/warmelt-genobj+06.cc: Regenerate.
	* melt/generated/warmelt-genobj+07.cc: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.cc: Regenerate.
	* melt/generated/warmelt-hooks+01.cc: Regenerate.
	* melt/generated/warmelt-hooks+02.cc: Regenerate.
	* melt/generated/warmelt-hooks+03.cc: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.cc: Regenerate.
	* melt/generated/warmelt-macro+01.cc: Regenerate.
	* melt/generated/warmelt-macro+02.cc: Regenerate.
	* melt/generated/warmelt-macro+03.cc: Regenerate.
	* melt/generated/warmelt-macro+04.cc: Regenerate.
	* melt/generated/warmelt-macro+05.cc: Regenerate.
	* melt/generated/warmelt-macro+06.cc: Regenerate.
	* melt/generated/warmelt-macro+07.cc: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.cc: Regenerate.
	* melt/generated/warmelt-modes+01.cc: Regenerate.
	* melt/generated/warmelt-modes+02.cc: Regenerate.
	* melt/generated/warmelt-modes+03.cc: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.cc: Regenerate.
	* melt/generated/warmelt-normal+01.cc: Regenerate.
	* melt/generated/warmelt-normal+02.cc: Regenerate.
	* melt/generated/warmelt-normal+03.cc: Regenerate.
	* melt/generated/warmelt-normal+04.cc: Regenerate.
	* melt/generated/warmelt-normal+05.cc: Regenerate.
	* melt/generated/warmelt-normal+06.cc: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.cc: Regenerate.
	* melt/generated/warmelt-normatch+01.cc: Regenerate.
	* melt/generated/warmelt-normatch+02.cc: Regenerate.
	* melt/generated/warmelt-normatch+03.cc: Regenerate.
	* melt/generated/warmelt-normatch+04.cc: Regenerate.
	* melt/generated/warmelt-normatch+05.cc: Regenerate.
	* melt/generated/warmelt-normatch+06.cc: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.cc: Regenerate.
	* melt/generated/warmelt-outobj+01.cc: Regenerate.
	* melt/generated/warmelt-outobj+02.cc: Regenerate.
	* melt/generated/warmelt-outobj+03.cc: Regenerate.
	* melt/generated/warmelt-outobj+04.cc: Regenerate.
	* melt/generated/warmelt-outobj+05.cc: Regenerate.
	* melt/generated/warmelt-outobj+06.cc: Regenerate.
	* melt/generated/warmelt-outobj+07.cc: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.cc: Regenerate.

2013-10-17  Basile Starynkevitch  <basile@starynkevitch.net>

	{{remove temporary -fmelt-plugin-arg-use-base-env option}}
	* melt-runtime.h (MELT_VERSION_STRING): Bump to 1.0-rc2-

	* melt/warmelt-normal.melt (normexp_macro_installation): No more
	use-base-env...

	* melt/warmelt-outobj.melt (translate_macroexpanded_list):
	Likewise...

2013-10-17  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-build-script.tpl: Emit meltbuild_do_stage with an extra
	GCCMELT_EMIT_OPTION_STAGEx.

	* melt-build-script.sh: Regenerate.

2013-10-17  Basile Starynkevitch  <basile@starynkevitch.net>

	{{MELT-SFT-3 solved: tbad-5.melt -fmelt-use-base-env fails with
	nice error message and tmacro-1.melt passes....}}
	* melt/warmelt-macro.melt (mexpand_defmacro): The lambdabind
	signal an error for failed macro-expansion.

	* testsuite/melt/tbad-5.melt: Remove insane debug of badmacro.

2013-10-17  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/meltrunsup-inc.cc: Regenerate.
	* melt/generated/warmelt-base+01.cc: Regenerate.
	* melt/generated/warmelt-base+02.cc: Regenerate.
	* melt/generated/warmelt-base.cc: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+01.cc: Regenerate.
	* melt/generated/warmelt-debug+02.cc: Regenerate.
	* melt/generated/warmelt-debug.cc: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+01.cc: Regenerate.
	* melt/generated/warmelt-first+02.cc: Regenerate.
	* melt/generated/warmelt-first.cc: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.cc: Regenerate.
	* melt/generated/warmelt-genobj+02.cc: Regenerate.
	* melt/generated/warmelt-genobj+03.cc: Regenerate.
	* melt/generated/warmelt-genobj+04.cc: Regenerate.
	* melt/generated/warmelt-genobj+05.cc: Regenerate.
	* melt/generated/warmelt-genobj+06.cc: Regenerate.
	* melt/generated/warmelt-genobj+07.cc: Regenerate.
	* melt/generated/warmelt-genobj.cc: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+01.cc: Regenerate.
	* melt/generated/warmelt-hooks+02.cc: Regenerate.
	* melt/generated/warmelt-hooks+03.cc: Regenerate.
	* melt/generated/warmelt-hooks.cc: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+01.cc: Regenerate.
	* melt/generated/warmelt-macro+02.cc: Regenerate.
	* melt/generated/warmelt-macro+03.cc: Regenerate.
	* melt/generated/warmelt-macro+04.cc: Regenerate.
	* melt/generated/warmelt-macro+05.cc: Regenerate.
	* melt/generated/warmelt-macro+06.cc: Regenerate.
	* melt/generated/warmelt-macro+07.cc: Regenerate.
	* melt/generated/warmelt-macro.cc: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+01.cc: Regenerate.
	* melt/generated/warmelt-modes+02.cc: Regenerate.
	* melt/generated/warmelt-modes+03.cc: Regenerate.
	* melt/generated/warmelt-modes.cc: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+01.cc: Regenerate.
	* melt/generated/warmelt-normal+02.cc: Regenerate.
	* melt/generated/warmelt-normal+03.cc: Regenerate.
	* melt/generated/warmelt-normal+04.cc: Regenerate.
	* melt/generated/warmelt-normal+05.cc: Regenerate.
	* melt/generated/warmelt-normal+06.cc: Regenerate.
	* melt/generated/warmelt-normal.cc: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+01.cc: Regenerate.
	* melt/generated/warmelt-normatch+02.cc: Regenerate.
	* melt/generated/warmelt-normatch+03.cc: Regenerate.
	* melt/generated/warmelt-normatch+04.cc: Regenerate.
	* melt/generated/warmelt-normatch+05.cc: Regenerate.
	* melt/generated/warmelt-normatch+06.cc: Regenerate.
	* melt/generated/warmelt-normatch.cc: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+01.cc: Regenerate.
	* melt/generated/warmelt-outobj+02.cc: Regenerate.
	* melt/generated/warmelt-outobj+03.cc: Regenerate.
	* melt/generated/warmelt-outobj+04.cc: Regenerate.
	* melt/generated/warmelt-outobj+05.cc: Regenerate.
	* melt/generated/warmelt-outobj+06.cc: Regenerate.
	* melt/generated/warmelt-outobj+07.cc: Regenerate.
	* melt/generated/warmelt-outobj.cc: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-10-17  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-normal.melt (normbind_defmacrobind): Error about
	insane use of macro when used in strange contexts.

	* testsuite/melt/tmacro-1.melt: Commented insane use.
	* testsuite/melt/tmacro-2.melt: Commented insane use.
	* testsuite/melt/tmacro-3.melt: Commented insane use.

2013-10-17  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-normal.melt (normbind_defmacrobind): More debug.

2013-10-17  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-build-script.tpl (meltbuild_do_stage): Run another make
	with -DMELTGCC_NOLINENUMBERING on error, to help catching errors
	in generated C++...

	* melt-build-script.sh: Regenerate.

	* melt/warmelt-base.melt (cstring_containing): Correct typo.

2013-10-17  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-base.melt (cstring_containing): New cmatcher.

	* melt/warmelt-macro.melt (mexpand_defmacro): Update the
	modmacroenv.

	* melt/warmelt-normal.melt (normexp_macro_installation): More debug.

	* melt/xtramelt-ana-simple.melt (meltframe_gate): Use
	cstring_containing for "meltgc_".

2013-10-17  Basile Starynkevitch  <basile@starynkevitch.net>

	{{tmacro-1.melt test still don't work with  -fmelt-use-base-env}}
	* melt/warmelt-macro.melt
	(melt_invoke_translator_runner_macroexpansions): More debug.

	* melt/warmelt-normal.melt (normexp_macro_installation): Introduce
	myenv for using macroenv with -fmelt-use-base-env

2013-10-16  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate, but unstable, see previous logs}}
	* melt/generated/meltrunsup-inc.cc: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.cc: Regenerate.
	* melt/generated/warmelt-base+02.cc: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.cc: Regenerate.
	* melt/generated/warmelt-debug+01.cc: Regenerate.
	* melt/generated/warmelt-debug+02.cc: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.cc: Regenerate.
	* melt/generated/warmelt-first+01.cc: Regenerate.
	* melt/generated/warmelt-first+02.cc: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.cc: Regenerate.
	* melt/generated/warmelt-genobj+01.cc: Regenerate.
	* melt/generated/warmelt-genobj+02.cc: Regenerate.
	* melt/generated/warmelt-genobj+03.cc: Regenerate.
	* melt/generated/warmelt-genobj+04.cc: Regenerate.
	* melt/generated/warmelt-genobj+05.cc: Regenerate.
	* melt/generated/warmelt-genobj+06.cc: Regenerate.
	* melt/generated/warmelt-genobj+07.cc: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.cc: Regenerate.
	* melt/generated/warmelt-hooks+01.cc: Regenerate.
	* melt/generated/warmelt-hooks+02.cc: Regenerate.
	* melt/generated/warmelt-hooks+03.cc: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.cc: Regenerate.
	* melt/generated/warmelt-macro+01.cc: Regenerate.
	* melt/generated/warmelt-macro+02.cc: Regenerate.
	* melt/generated/warmelt-macro+03.cc: Regenerate.
	* melt/generated/warmelt-macro+04.cc: Regenerate.
	* melt/generated/warmelt-macro+05.cc: Regenerate.
	* melt/generated/warmelt-macro+06.cc: Regenerate.
	* melt/generated/warmelt-macro+07.cc: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.cc: Regenerate.
	* melt/generated/warmelt-modes+01.cc: Regenerate.
	* melt/generated/warmelt-modes+02.cc: Regenerate.
	* melt/generated/warmelt-modes+03.cc: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.cc: Regenerate.
	* melt/generated/warmelt-normal+01.cc: Regenerate.
	* melt/generated/warmelt-normal+02.cc: Regenerate.
	* melt/generated/warmelt-normal+03.cc: Regenerate.
	* melt/generated/warmelt-normal+04.cc: Regenerate.
	* melt/generated/warmelt-normal+05.cc: Regenerate.
	* melt/generated/warmelt-normal+06.cc: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.cc: Regenerate.
	* melt/generated/warmelt-normatch+01.cc: Regenerate.
	* melt/generated/warmelt-normatch+02.cc: Regenerate.
	* melt/generated/warmelt-normatch+03.cc: Regenerate.
	* melt/generated/warmelt-normatch+04.cc: Regenerate.
	* melt/generated/warmelt-normatch+05.cc: Regenerate.
	* melt/generated/warmelt-normatch+06.cc: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.cc: Regenerate.
	* melt/generated/warmelt-outobj+01.cc: Regenerate.
	* melt/generated/warmelt-outobj+02.cc: Regenerate.
	* melt/generated/warmelt-outobj+03.cc: Regenerate.
	* melt/generated/warmelt-outobj+04.cc: Regenerate.
	* melt/generated/warmelt-outobj+05.cc: Regenerate.
	* melt/generated/warmelt-outobj+06.cc: Regenerate.
	* melt/generated/warmelt-outobj+07.cc: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.cc: Regenerate.

2013-10-16  Basile Starynkevitch  <basile@starynkevitch.net>

	{{tmacro-1.melt test still don't work with  -fmelt-use-base-env}}
	* melt/warmelt-macro.melt (macroexpand_1, macroexpand_toplevel_list): More debug.
	(mexpand_defmacro): Create fbind and fill it...

	* melt/warmelt-normal.melt (normexp_defun_defmacro): More debug.

2013-10-16  Basile Starynkevitch  <basile@starynkevitch.net>

	{{tmacro-1.melt test don't work with  -fmelt-use-base-env}}
	* melt/warmelt-macro.melt
	(melt_register_translator_runner_macroexpansions): Add backtrace.
	(melt_delayed_macro_expander, mexpand_defmacro): More debug.

2013-10-16  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-debug.melt (dbgout_environment_method): Show more
	often the description of environments.

	* melt/warmelt-macro.melt (mexpand_defmacro): More debug.

2013-10-16  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-debug.melt (dbgout_environment_method): May show
	the description of environments.

	* melt/warmelt-macro.melt (mexpand_defmacro): More debug.

	* melt/warmelt-normal.melt (normexp_macro_installation): More debug.

	* melt/warmelt-outobj.melt (compile_list_sexpr): More debug.

2013-10-16  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.cc (melt_done_modes_vector): New static variable.
	(meltgc_do_initial_mode): Update it.
	(melt_do_finalize): Use it to display successfully run modes when
	non-quiet.
	(melt_warn_for_no_expected_secondary_results_at): Use MELT program
	argument "warn-unexpected-secondary"
	i.e. -fplugin-arg-melt-warn-unexpected-secondary to give the
	warning.

2013-10-15  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-outobj.melt (translate_macroexpanded_list) more debug.
	(compile_list_sexpr): Add temporarily for MELT-SFT-3 the MELT
	argument use-base-env to choose between inienv and basenv. This is
	a dirty kludge.

2013-10-15  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.cc (meltgc_new_mapstrings): Explicitly initialize
	the count field. Reserve a slightly better memory estimate.
	(melt_get_mapstrings, meltgc_remove_mapstrings): Improve code layout.

2013-10-15  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate all}}
	* melt/generated/warmelt-base+01.cc: Regenerate.
	* melt/generated/warmelt-base+02.cc: Regenerate.
	* melt/generated/warmelt-base.cc: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+01.cc: Regenerate.
	* melt/generated/warmelt-debug+02.cc: Regenerate.
	* melt/generated/warmelt-debug.cc: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.cc: Regenerate.
	* melt/generated/warmelt-genobj+02.cc: Regenerate.
	* melt/generated/warmelt-genobj+03.cc: Regenerate.
	* melt/generated/warmelt-genobj+04.cc: Regenerate.
	* melt/generated/warmelt-genobj+05.cc: Regenerate.
	* melt/generated/warmelt-genobj+06.cc: Regenerate.
	* melt/generated/warmelt-genobj+07.cc: Regenerate.
	* melt/generated/warmelt-genobj.cc: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+01.cc: Regenerate.
	* melt/generated/warmelt-hooks+02.cc: Regenerate.
	* melt/generated/warmelt-hooks+03.cc: Regenerate.
	* melt/generated/warmelt-hooks.cc: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+01.cc: Regenerate.
	* melt/generated/warmelt-macro+02.cc: Regenerate.
	* melt/generated/warmelt-macro+03.cc: Regenerate.
	* melt/generated/warmelt-macro+04.cc: Regenerate.
	* melt/generated/warmelt-macro+05.cc: Regenerate.
	* melt/generated/warmelt-macro+06.cc: Regenerate.
	* melt/generated/warmelt-macro+07.cc: Regenerate.
	* melt/generated/warmelt-macro.cc: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+01.cc: Regenerate.
	* melt/generated/warmelt-modes+02.cc: Regenerate.
	* melt/generated/warmelt-modes+03.cc: Regenerate.
	* melt/generated/warmelt-modes.cc: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+01.cc: Regenerate.
	* melt/generated/warmelt-normal+02.cc: Regenerate.
	* melt/generated/warmelt-normal+03.cc: Regenerate.
	* melt/generated/warmelt-normal+04.cc: Regenerate.
	* melt/generated/warmelt-normal+05.cc: Regenerate.
	* melt/generated/warmelt-normal+06.cc: Regenerate.
	* melt/generated/warmelt-normal.cc: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+01.cc: Regenerate.
	* melt/generated/warmelt-normatch+02.cc: Regenerate.
	* melt/generated/warmelt-normatch+03.cc: Regenerate.
	* melt/generated/warmelt-normatch+04.cc: Regenerate.
	* melt/generated/warmelt-normatch+05.cc: Regenerate.
	* melt/generated/warmelt-normatch+06.cc: Regenerate.
	* melt/generated/warmelt-normatch.cc: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+01.cc: Regenerate.
	* melt/generated/warmelt-outobj+02.cc: Regenerate.
	* melt/generated/warmelt-outobj+03.cc: Regenerate.
	* melt/generated/warmelt-outobj+04.cc: Regenerate.
	* melt/generated/warmelt-outobj+05.cc: Regenerate.
	* melt/generated/warmelt-outobj+06.cc: Regenerate.
	* melt/generated/warmelt-outobj+07.cc: Regenerate.
	* melt/generated/warmelt-outobj.cc: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-10-15  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-genobj.melt (compilobj_nrep_constocc): More debug.

	* melt/warmelt-outobj.melt (compile_list_sexpr): More debug.

2013-10-15  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate all}}
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/meltrunsup-inc.cc: Regenerate.
	* melt/generated/warmelt-base+01.cc: Regenerate.
	* melt/generated/warmelt-base+02.cc: Regenerate.
	* melt/generated/warmelt-base.cc: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+01.cc: Regenerate.
	* melt/generated/warmelt-debug+02.cc: Regenerate.
	* melt/generated/warmelt-debug.cc: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+01.cc: Regenerate.
	* melt/generated/warmelt-first+02.cc: Regenerate.
	* melt/generated/warmelt-first.cc: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.cc: Regenerate.
	* melt/generated/warmelt-genobj+02.cc: Regenerate.
	* melt/generated/warmelt-genobj+03.cc: Regenerate.
	* melt/generated/warmelt-genobj+04.cc: Regenerate.
	* melt/generated/warmelt-genobj+05.cc: Regenerate.
	* melt/generated/warmelt-genobj+06.cc: Regenerate.
	* melt/generated/warmelt-genobj+07.cc: Regenerate.
	* melt/generated/warmelt-genobj.cc: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+01.cc: Regenerate.
	* melt/generated/warmelt-hooks+02.cc: Regenerate.
	* melt/generated/warmelt-hooks+03.cc: Regenerate.
	* melt/generated/warmelt-hooks.cc: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+01.cc: Regenerate.
	* melt/generated/warmelt-macro+02.cc: Regenerate.
	* melt/generated/warmelt-macro+03.cc: Regenerate.
	* melt/generated/warmelt-macro+04.cc: Regenerate.
	* melt/generated/warmelt-macro+05.cc: Regenerate.
	* melt/generated/warmelt-macro+06.cc: Regenerate.
	* melt/generated/warmelt-macro+07.cc: Regenerate.
	* melt/generated/warmelt-macro.cc: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+01.cc: Regenerate.
	* melt/generated/warmelt-modes+02.cc: Regenerate.
	* melt/generated/warmelt-modes+03.cc: Regenerate.
	* melt/generated/warmelt-modes.cc: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+01.cc: Regenerate.
	* melt/generated/warmelt-normal+02.cc: Regenerate.
	* melt/generated/warmelt-normal+03.cc: Regenerate.
	* melt/generated/warmelt-normal+04.cc: Regenerate.
	* melt/generated/warmelt-normal+05.cc: Regenerate.
	* melt/generated/warmelt-normal+06.cc: Regenerate.
	* melt/generated/warmelt-normal.cc: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+01.cc: Regenerate.
	* melt/generated/warmelt-normatch+02.cc: Regenerate.
	* melt/generated/warmelt-normatch+03.cc: Regenerate.
	* melt/generated/warmelt-normatch+04.cc: Regenerate.
	* melt/generated/warmelt-normatch+05.cc: Regenerate.
	* melt/generated/warmelt-normatch+06.cc: Regenerate.
	* melt/generated/warmelt-normatch.cc: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+01.cc: Regenerate.
	* melt/generated/warmelt-outobj+02.cc: Regenerate.
	* melt/generated/warmelt-outobj+03.cc: Regenerate.
	* melt/generated/warmelt-outobj+04.cc: Regenerate.
	* melt/generated/warmelt-outobj+05.cc: Regenerate.
	* melt/generated/warmelt-outobj+06.cc: Regenerate.
	* melt/generated/warmelt-outobj+07.cc: Regenerate.
	* melt/generated/warmelt-outobj.cc: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-10-15  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-macro.melt (mexpand_export_macro): Give an instance
	of class_source_export_defmacro for defmacro-ed exports.

2013-10-15  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate all}}
	* melt/generated/meltrunsup-inc.cc: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.cc: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+02.cc: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+01.cc: Regenerate.
	* melt/generated/warmelt-normal+02.cc: Regenerate.
	* melt/generated/warmelt-normal+03.cc: Regenerate.
	* melt/generated/warmelt-normal+04.cc: Regenerate.
	* melt/generated/warmelt-normal+05.cc: Regenerate.
	* melt/generated/warmelt-normal+06.cc: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.cc: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-10-15  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-normal.melt (normexp_export_defmacro): New method
	for normal_exp on class_source_export_defmacro.

2013-10-14  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate all}}
	* melt/generated/warmelt-base+01.cc: Regenerate.
	* melt/generated/warmelt-base+02.cc: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.cc: Regenerate.
	* melt/generated/warmelt-debug+01.cc: Regenerate.
	* melt/generated/warmelt-debug+02.cc: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.cc: Regenerate.
	* melt/generated/warmelt-first+01.cc: Regenerate.
	* melt/generated/warmelt-first+02.cc: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.cc: Regenerate.
	* melt/generated/warmelt-genobj+01.cc: Regenerate.
	* melt/generated/warmelt-genobj+02.cc: Regenerate.
	* melt/generated/warmelt-genobj+03.cc: Regenerate.
	* melt/generated/warmelt-genobj+04.cc: Regenerate.
	* melt/generated/warmelt-genobj+05.cc: Regenerate.
	* melt/generated/warmelt-genobj+06.cc: Regenerate.
	* melt/generated/warmelt-genobj+07.cc: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.cc: Regenerate.
	* melt/generated/warmelt-hooks+01.cc: Regenerate.
	* melt/generated/warmelt-hooks+02.cc: Regenerate.
	* melt/generated/warmelt-hooks+03.cc: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.cc: Regenerate.
	* melt/generated/warmelt-macro+01.cc: Regenerate.
	* melt/generated/warmelt-macro+02.cc: Regenerate.
	* melt/generated/warmelt-macro+03.cc: Regenerate.
	* melt/generated/warmelt-macro+04.cc: Regenerate.
	* melt/generated/warmelt-macro+05.cc: Regenerate.
	* melt/generated/warmelt-macro+06.cc: Regenerate.
	* melt/generated/warmelt-macro+07.cc: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.cc: Regenerate.
	* melt/generated/warmelt-modes+01.cc: Regenerate.
	* melt/generated/warmelt-modes+02.cc: Regenerate.
	* melt/generated/warmelt-modes+03.cc: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.cc: Regenerate.
	* melt/generated/warmelt-normal+01.cc: Regenerate.
	* melt/generated/warmelt-normal+02.cc: Regenerate.
	* melt/generated/warmelt-normal+03.cc: Regenerate.
	* melt/generated/warmelt-normal+04.cc: Regenerate.
	* melt/generated/warmelt-normal+05.cc: Regenerate.
	* melt/generated/warmelt-normal+06.cc: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.cc: Regenerate.
	* melt/generated/warmelt-normatch+01.cc: Regenerate.
	* melt/generated/warmelt-normatch+02.cc: Regenerate.
	* melt/generated/warmelt-normatch+03.cc: Regenerate.
	* melt/generated/warmelt-normatch+04.cc: Regenerate.
	* melt/generated/warmelt-normatch+05.cc: Regenerate.
	* melt/generated/warmelt-normatch+06.cc: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.cc: Regenerate.
	* melt/generated/warmelt-outobj+01.cc: Regenerate.
	* melt/generated/warmelt-outobj+02.cc: Regenerate.
	* melt/generated/warmelt-outobj+03.cc: Regenerate.
	* melt/generated/warmelt-outobj+04.cc: Regenerate.
	* melt/generated/warmelt-outobj+05.cc: Regenerate.
	* melt/generated/warmelt-outobj+06.cc: Regenerate.
	* melt/generated/warmelt-outobj+07.cc: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.cc: Regenerate.

2013-10-14  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-debug.melt (debug_more_fun): Remove useless
	indent-newline.

	* melt/warmelt-normal.melt (normexp_ifelse)
	(normexp_defun_defmacro): More debug.

	* melt/warmelt-outobj.melt (compile_list_sexpr): inienv cannot be
	null.
	(translate_run_melt_expressions): More debug.

2013-10-14  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-debug.melt (debug_more_fun): New function.
	(debug_more): New debug manipulator.

	* melt/warmelt-normal.melt (normexp_apply)
	(normexp_defun_defmacro): More debug.

	* testsuite/melt/tbad-5.melt: Improve.

2013-10-14  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate all}}
	* melt/generated/meltrunsup-inc.cc: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.cc: Regenerate.
	* melt/generated/warmelt-base+02.cc: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.cc: Regenerate.
	* melt/generated/warmelt-debug+01.cc: Regenerate.
	* melt/generated/warmelt-debug+02.cc: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.cc: Regenerate.
	* melt/generated/warmelt-first+01.cc: Regenerate.
	* melt/generated/warmelt-first+02.cc: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.cc: Regenerate.
	* melt/generated/warmelt-genobj+01.cc: Regenerate.
	* melt/generated/warmelt-genobj+02.cc: Regenerate.
	* melt/generated/warmelt-genobj+03.cc: Regenerate.
	* melt/generated/warmelt-genobj+04.cc: Regenerate.
	* melt/generated/warmelt-genobj+05.cc: Regenerate.
	* melt/generated/warmelt-genobj+06.cc: Regenerate.
	* melt/generated/warmelt-genobj+07.cc: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.cc: Regenerate.
	* melt/generated/warmelt-hooks+01.cc: Regenerate.
	* melt/generated/warmelt-hooks+02.cc: Regenerate.
	* melt/generated/warmelt-hooks+03.cc: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.cc: Regenerate.
	* melt/generated/warmelt-macro+01.cc: Regenerate.
	* melt/generated/warmelt-macro+02.cc: Regenerate.
	* melt/generated/warmelt-macro+03.cc: Regenerate.
	* melt/generated/warmelt-macro+04.cc: Regenerate.
	* melt/generated/warmelt-macro+05.cc: Regenerate.
	* melt/generated/warmelt-macro+06.cc: Regenerate.
	* melt/generated/warmelt-macro+07.cc: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.cc: Regenerate.
	* melt/generated/warmelt-modes+01.cc: Regenerate.
	* melt/generated/warmelt-modes+02.cc: Regenerate.
	* melt/generated/warmelt-modes+03.cc: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.cc: Regenerate.
	* melt/generated/warmelt-normal+01.cc: Regenerate.
	* melt/generated/warmelt-normal+02.cc: Regenerate.
	* melt/generated/warmelt-normal+03.cc: Regenerate.
	* melt/generated/warmelt-normal+04.cc: Regenerate.
	* melt/generated/warmelt-normal+05.cc: Regenerate.
	* melt/generated/warmelt-normal+06.cc: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.cc: Regenerate.
	* melt/generated/warmelt-normatch+01.cc: Regenerate.
	* melt/generated/warmelt-normatch+02.cc: Regenerate.
	* melt/generated/warmelt-normatch+03.cc: Regenerate.
	* melt/generated/warmelt-normatch+04.cc: Regenerate.
	* melt/generated/warmelt-normatch+05.cc: Regenerate.
	* melt/generated/warmelt-normatch+06.cc: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.cc: Regenerate.
	* melt/generated/warmelt-outobj+01.cc: Regenerate.
	* melt/generated/warmelt-outobj+02.cc: Regenerate.
	* melt/generated/warmelt-outobj+03.cc: Regenerate.
	* melt/generated/warmelt-outobj+04.cc: Regenerate.
	* melt/generated/warmelt-outobj+05.cc: Regenerate.
	* melt/generated/warmelt-outobj+06.cc: Regenerate.
	* melt/generated/warmelt-outobj+07.cc: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.cc: Regenerate.

2013-10-14  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (MELT_VERSION_STRING): Bump to 1.0-rc1+

2013-10-14  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-macro.melt (melt_delayed_macro_expander): Call
	melt_invoke_translator_runner_macroexpansions with the macro
	environment.
	(mexpand_defmacro): Check about the macro environment.

	* melt/warmelt-outobj.melt
	(melt_translate_run_macroexpansions_list): Debug the macro
	environment, and pass it to translate_macroexpanded_list...

2013-10-14  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-macro.melt (mexpand_defmacro) check maclist
	earlier.

2013-10-14  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-macro.melt (mexpand_defmacro)
	(mexpand_at_macro_expansion): Use the mocx_macroenv of the module
	context.

2013-10-14  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate all}}
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/meltrunsup-inc.cc: Regenerate.
	* melt/generated/warmelt-base+01.cc: Regenerate.
	* melt/generated/warmelt-base+02.cc: Regenerate.
	* melt/generated/warmelt-base.cc: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+01.cc: Regenerate.
	* melt/generated/warmelt-debug+02.cc: Regenerate.
	* melt/generated/warmelt-debug.cc: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+01.cc: Regenerate.
	* melt/generated/warmelt-first+02.cc: Regenerate.
	* melt/generated/warmelt-first.cc: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.cc: Regenerate.
	* melt/generated/warmelt-genobj+02.cc: Regenerate.
	* melt/generated/warmelt-genobj+03.cc: Regenerate.
	* melt/generated/warmelt-genobj+04.cc: Regenerate.
	* melt/generated/warmelt-genobj+05.cc: Regenerate.
	* melt/generated/warmelt-genobj+06.cc: Regenerate.
	* melt/generated/warmelt-genobj+07.cc: Regenerate.
	* melt/generated/warmelt-genobj.cc: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+01.cc: Regenerate.
	* melt/generated/warmelt-hooks+02.cc: Regenerate.
	* melt/generated/warmelt-hooks+03.cc: Regenerate.
	* melt/generated/warmelt-hooks.cc: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+01.cc: Regenerate.
	* melt/generated/warmelt-macro+02.cc: Regenerate.
	* melt/generated/warmelt-macro+03.cc: Regenerate.
	* melt/generated/warmelt-macro+04.cc: Regenerate.
	* melt/generated/warmelt-macro+05.cc: Regenerate.
	* melt/generated/warmelt-macro+06.cc: Regenerate.
	* melt/generated/warmelt-macro+07.cc: Regenerate.
	* melt/generated/warmelt-macro.cc: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+01.cc: Regenerate.
	* melt/generated/warmelt-modes+02.cc: Regenerate.
	* melt/generated/warmelt-modes+03.cc: Regenerate.
	* melt/generated/warmelt-modes.cc: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+01.cc: Regenerate.
	* melt/generated/warmelt-normal+02.cc: Regenerate.
	* melt/generated/warmelt-normal+03.cc: Regenerate.
	* melt/generated/warmelt-normal+04.cc: Regenerate.
	* melt/generated/warmelt-normal+05.cc: Regenerate.
	* melt/generated/warmelt-normal+06.cc: Regenerate.
	* melt/generated/warmelt-normal.cc: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+01.cc: Regenerate.
	* melt/generated/warmelt-normatch+02.cc: Regenerate.
	* melt/generated/warmelt-normatch+03.cc: Regenerate.
	* melt/generated/warmelt-normatch+04.cc: Regenerate.
	* melt/generated/warmelt-normatch+05.cc: Regenerate.
	* melt/generated/warmelt-normatch+06.cc: Regenerate.
	* melt/generated/warmelt-normatch.cc: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+01.cc: Regenerate.
	* melt/generated/warmelt-outobj+02.cc: Regenerate.
	* melt/generated/warmelt-outobj+03.cc: Regenerate.
	* melt/generated/warmelt-outobj+04.cc: Regenerate.
	* melt/generated/warmelt-outobj+05.cc: Regenerate.
	* melt/generated/warmelt-outobj+06.cc: Regenerate.
	* melt/generated/warmelt-outobj+07.cc: Regenerate.
	* melt/generated/warmelt-outobj.cc: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-10-14  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-first.melt (class_module_context): New mocx_macroenv
	field.

	* melt/warmelt-outobj.melt (compile_list_sexpr)
	(compile_first_bootstrap_list_sexpr)
	(melt_translate_run_macroexpansions_list): Fill it to a fresh
	environment.

	* melt/warmelt-modes.melt (makedoc_docmd): Likewise.

2013-10-12  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-normal.melt (normexp_defhook): Improve error
	message.

2013-10-12  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-macro.melt (error_at): Assert failure when
	bootstrapping error.

2013-10-12  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}
	* melt/generated/warmelt-base+01.cc: Regenerate.
	* melt/generated/warmelt-base+02.cc: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.cc: Regenerate.
	* melt/generated/warmelt-debug+01.cc: Regenerate.
	* melt/generated/warmelt-debug+02.cc: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.cc: Regenerate.
	* melt/generated/warmelt-first+01.cc: Regenerate.
	* melt/generated/warmelt-first+02.cc: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.cc: Regenerate.
	* melt/generated/warmelt-genobj+01.cc: Regenerate.
	* melt/generated/warmelt-genobj+02.cc: Regenerate.
	* melt/generated/warmelt-genobj+03.cc: Regenerate.
	* melt/generated/warmelt-genobj+04.cc: Regenerate.
	* melt/generated/warmelt-genobj+05.cc: Regenerate.
	* melt/generated/warmelt-genobj+06.cc: Regenerate.
	* melt/generated/warmelt-genobj+07.cc: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.cc: Regenerate.
	* melt/generated/warmelt-hooks+01.cc: Regenerate.
	* melt/generated/warmelt-hooks+02.cc: Regenerate.
	* melt/generated/warmelt-hooks+03.cc: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.cc: Regenerate.
	* melt/generated/warmelt-macro+01.cc: Regenerate.
	* melt/generated/warmelt-macro+02.cc: Regenerate.
	* melt/generated/warmelt-macro+03.cc: Regenerate.
	* melt/generated/warmelt-macro+04.cc: Regenerate.
	* melt/generated/warmelt-macro+05.cc: Regenerate.
	* melt/generated/warmelt-macro+06.cc: Regenerate.
	* melt/generated/warmelt-macro+07.cc: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.cc: Regenerate.
	* melt/generated/warmelt-modes+01.cc: Regenerate.
	* melt/generated/warmelt-modes+02.cc: Regenerate.
	* melt/generated/warmelt-modes+03.cc: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.cc: Regenerate.
	* melt/generated/warmelt-normal+01.cc: Regenerate.
	* melt/generated/warmelt-normal+02.cc: Regenerate.
	* melt/generated/warmelt-normal+03.cc: Regenerate.
	* melt/generated/warmelt-normal+04.cc: Regenerate.
	* melt/generated/warmelt-normal+05.cc: Regenerate.
	* melt/generated/warmelt-normal+06.cc: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.cc: Regenerate.
	* melt/generated/warmelt-normatch+01.cc: Regenerate.
	* melt/generated/warmelt-normatch+02.cc: Regenerate.
	* melt/generated/warmelt-normatch+03.cc: Regenerate.
	* melt/generated/warmelt-normatch+04.cc: Regenerate.
	* melt/generated/warmelt-normatch+05.cc: Regenerate.
	* melt/generated/warmelt-normatch+06.cc: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.cc: Regenerate.
	* melt/generated/warmelt-outobj+01.cc: Regenerate.
	* melt/generated/warmelt-outobj+02.cc: Regenerate.
	* melt/generated/warmelt-outobj+03.cc: Regenerate.
	* melt/generated/warmelt-outobj+04.cc: Regenerate.
	* melt/generated/warmelt-outobj+05.cc: Regenerate.
	* melt/generated/warmelt-outobj+06.cc: Regenerate.
	* melt/generated/warmelt-outobj+07.cc: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.cc: Regenerate.

2013-10-12  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-macro.melt (class_source_export_any_macro): New abstract class.
	(class_source_export_macro): Made subclass of class_source_export_any_macro.
	(class_source_export_defmacro): New subclass, with moved field sexpmac_mval.

	* melt/warmelt-normal.melt (normexp_export_defmacro): New method
	for normal_exp on class_source_export_defmacro.

	* melt/warmelt-outobj.melt (eval): Improve warning message.

	* melt/warmelt-modes.melt (translateinit_mode): Improve help message.

2013-10-12  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}
	* melt/generated/meltrunsup-inc.cc: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.cc: Regenerate.
	* melt/generated/warmelt-base+02.cc: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.cc: Regenerate.
	* melt/generated/warmelt-debug+01.cc: Regenerate.
	* melt/generated/warmelt-debug+02.cc: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.cc: Regenerate.
	* melt/generated/warmelt-first+01.cc: Regenerate.
	* melt/generated/warmelt-first+02.cc: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.cc: Regenerate.
	* melt/generated/warmelt-genobj+01.cc: Regenerate.
	* melt/generated/warmelt-genobj+02.cc: Regenerate.
	* melt/generated/warmelt-genobj+03.cc: Regenerate.
	* melt/generated/warmelt-genobj+04.cc: Regenerate.
	* melt/generated/warmelt-genobj+05.cc: Regenerate.
	* melt/generated/warmelt-genobj+06.cc: Regenerate.
	* melt/generated/warmelt-genobj+07.cc: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.cc: Regenerate.
	* melt/generated/warmelt-hooks+01.cc: Regenerate.
	* melt/generated/warmelt-hooks+02.cc: Regenerate.
	* melt/generated/warmelt-hooks+03.cc: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.cc: Regenerate.
	* melt/generated/warmelt-macro+01.cc: Regenerate.
	* melt/generated/warmelt-macro+02.cc: Regenerate.
	* melt/generated/warmelt-macro+03.cc: Regenerate.
	* melt/generated/warmelt-macro+04.cc: Regenerate.
	* melt/generated/warmelt-macro+05.cc: Regenerate.
	* melt/generated/warmelt-macro+06.cc: Regenerate.
	* melt/generated/warmelt-macro+07.cc: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.cc: Regenerate.
	* melt/generated/warmelt-modes+01.cc: Regenerate.
	* melt/generated/warmelt-modes+02.cc: Regenerate.
	* melt/generated/warmelt-modes+03.cc: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.cc: Regenerate.
	* melt/generated/warmelt-normal+01.cc: Regenerate.
	* melt/generated/warmelt-normal+02.cc: Regenerate.
	* melt/generated/warmelt-normal+03.cc: Regenerate.
	* melt/generated/warmelt-normal+04.cc: Regenerate.
	* melt/generated/warmelt-normal+05.cc: Regenerate.
	* melt/generated/warmelt-normal+06.cc: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.cc: Regenerate.
	* melt/generated/warmelt-normatch+01.cc: Regenerate.
	* melt/generated/warmelt-normatch+02.cc: Regenerate.
	* melt/generated/warmelt-normatch+03.cc: Regenerate.
	* melt/generated/warmelt-normatch+04.cc: Regenerate.
	* melt/generated/warmelt-normatch+05.cc: Regenerate.
	* melt/generated/warmelt-normatch+06.cc: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.cc: Regenerate.
	* melt/generated/warmelt-outobj+01.cc: Regenerate.
	* melt/generated/warmelt-outobj+02.cc: Regenerate.
	* melt/generated/warmelt-outobj+03.cc: Regenerate.
	* melt/generated/warmelt-outobj+04.cc: Regenerate.
	* melt/generated/warmelt-outobj+05.cc: Regenerate.
	* melt/generated/warmelt-outobj+06.cc: Regenerate.
	* melt/generated/warmelt-outobj+07.cc: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.cc: Regenerate.

2013-10-12  Basile Starynkevitch  <basile@starynkevitch.net>

	{{more specific code for bootstrapping first translation}}
	* melt/warmelt-macro.melt (mexpand_defmacro)
	(mexpand_at_macro_expansion): Error when the module context don't
	have a mocx_macrolist, i.e. for the first module.

	* melt/warmelt-outobj.melt (class_first_module_context): New
	internal class.
	(compile_first_bootstrap_list_sexpr): New function.

	* melt/warmelt-modes.melt (translateinit_docmd): Call it.

2013-10-11  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-first.melt: Add a comment about forbidden macros in
	this first file.
	(melt_low_debug): Improve documentation.

	* melt/warmelt-macro.melt (mexpand_defmacro): Reject macro in
	first file.

2013-10-11  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/warmelt-base.cc: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.cc: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+02.cc: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+01.cc: Regenerate.
	* melt/generated/warmelt-normal+02.cc: Regenerate.
	* melt/generated/warmelt-normal+03.cc: Regenerate.
	* melt/generated/warmelt-normal+04.cc: Regenerate.
	* melt/generated/warmelt-normal+05.cc: Regenerate.
	* melt/generated/warmelt-normal+06.cc: Regenerate.
	* melt/generated/warmelt-normal.cc: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+01.cc: Regenerate.
	* melt/generated/warmelt-outobj+02.cc: Regenerate.
	* melt/generated/warmelt-outobj+03.cc: Regenerate.
	* melt/generated/warmelt-outobj+04.cc: Regenerate.
	* melt/generated/warmelt-outobj+05.cc: Regenerate.
	* melt/generated/warmelt-outobj+06.cc: Regenerate.
	* melt/generated/warmelt-outobj+07.cc: Regenerate.
	* melt/generated/warmelt-outobj.cc: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-10-11  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-normal.melt (normbind_defmacrobind): More debug.
	(normexp_defun_defmacro): Better error message.
	Handle bootstrapped macros...

	* melt/warmelt-outobj.melt (translate_to_cc_module_melt_sources):
	Use error_at and when.

2013-10-11  Basile Starynkevitch  <basile@starynkevitch.net>

	{{open ticket MELT-SFT-3}}
	* testsuite/melt/tbad-5.melt: Mention MELT-SFT-3.

2013-10-11  Basile Starynkevitch  <basile@starynkevitch.net>
	* testsuite/melt/tbad-5.melt: New file which should not compile.

2013-10-11  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/meltrunsup-inc.cc: Regenerate.
	* melt/generated/warmelt-base+01.cc: Regenerate.
	* melt/generated/warmelt-base+02.cc: Regenerate.
	* melt/generated/warmelt-base.cc: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+01.cc: Regenerate.
	* melt/generated/warmelt-debug+02.cc: Regenerate.
	* melt/generated/warmelt-debug.cc: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+01.cc: Regenerate.
	* melt/generated/warmelt-first+02.cc: Regenerate.
	* melt/generated/warmelt-first.cc: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.cc: Regenerate.
	* melt/generated/warmelt-genobj+02.cc: Regenerate.
	* melt/generated/warmelt-genobj+03.cc: Regenerate.
	* melt/generated/warmelt-genobj+04.cc: Regenerate.
	* melt/generated/warmelt-genobj+05.cc: Regenerate.
	* melt/generated/warmelt-genobj+06.cc: Regenerate.
	* melt/generated/warmelt-genobj+07.cc: Regenerate.
	* melt/generated/warmelt-genobj.cc: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+01.cc: Regenerate.
	* melt/generated/warmelt-hooks+02.cc: Regenerate.
	* melt/generated/warmelt-hooks+03.cc: Regenerate.
	* melt/generated/warmelt-hooks.cc: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+01.cc: Regenerate.
	* melt/generated/warmelt-macro+02.cc: Regenerate.
	* melt/generated/warmelt-macro+03.cc: Regenerate.
	* melt/generated/warmelt-macro+04.cc: Regenerate.
	* melt/generated/warmelt-macro+05.cc: Regenerate.
	* melt/generated/warmelt-macro+06.cc: Regenerate.
	* melt/generated/warmelt-macro+07.cc: Regenerate.
	* melt/generated/warmelt-macro.cc: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+01.cc: Regenerate.
	* melt/generated/warmelt-modes+02.cc: Regenerate.
	* melt/generated/warmelt-modes+03.cc: Regenerate.
	* melt/generated/warmelt-modes.cc: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+01.cc: Regenerate.
	* melt/generated/warmelt-normal+02.cc: Regenerate.
	* melt/generated/warmelt-normal+03.cc: Regenerate.
	* melt/generated/warmelt-normal+04.cc: Regenerate.
	* melt/generated/warmelt-normal+05.cc: Regenerate.
	* melt/generated/warmelt-normal+06.cc: Regenerate.
	* melt/generated/warmelt-normal.cc: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+01.cc: Regenerate.
	* melt/generated/warmelt-normatch+02.cc: Regenerate.
	* melt/generated/warmelt-normatch+03.cc: Regenerate.
	* melt/generated/warmelt-normatch+04.cc: Regenerate.
	* melt/generated/warmelt-normatch+05.cc: Regenerate.
	* melt/generated/warmelt-normatch+06.cc: Regenerate.
	* melt/generated/warmelt-normatch.cc: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+01.cc: Regenerate.
	* melt/generated/warmelt-outobj+02.cc: Regenerate.
	* melt/generated/warmelt-outobj+03.cc: Regenerate.
	* melt/generated/warmelt-outobj+04.cc: Regenerate.
	* melt/generated/warmelt-outobj+05.cc: Regenerate.
	* melt/generated/warmelt-outobj+06.cc: Regenerate.
	* melt/generated/warmelt-outobj+07.cc: Regenerate.
	* melt/generated/warmelt-outobj.cc: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-10-11  Basile Starynkevitch  <basile@starynkevitch.net>

	{{defmacro and at_macro_expansion are expanded in the module
	initial environment, not in the current one!}}

	* melt/warmelt-macro.melt (mexpand_defmacro): Expand in the module
	initial environment.
	(mexpand_at_macro_expansion): Likewise.

	* melt/warmelt-normal.melt (normexp_defun_defmacro): For macros,
	use the module initial environment, not the current one.

2013-10-10  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-macro.melt (mexpand_defmacro): More debug.

	* melt/warmelt-outobj.melt (outpucod_initialmoduleroutine): Remove
	spurious emission of semi-colon ';' char...

2013-10-10  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}

	* melt/generated/meltrunsup-inc.cc: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.cc: Regenerate.
	* melt/generated/warmelt-base+02.cc: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.cc: Regenerate.
	* melt/generated/warmelt-debug+01.cc: Regenerate.
	* melt/generated/warmelt-debug+02.cc: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.cc: Regenerate.
	* melt/generated/warmelt-first+01.cc: Regenerate.
	* melt/generated/warmelt-first+02.cc: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.cc: Regenerate.
	* melt/generated/warmelt-genobj+01.cc: Regenerate.
	* melt/generated/warmelt-genobj+02.cc: Regenerate.
	* melt/generated/warmelt-genobj+03.cc: Regenerate.
	* melt/generated/warmelt-genobj+04.cc: Regenerate.
	* melt/generated/warmelt-genobj+05.cc: Regenerate.
	* melt/generated/warmelt-genobj+06.cc: Regenerate.
	* melt/generated/warmelt-genobj+07.cc: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.cc: Regenerate.
	* melt/generated/warmelt-hooks+01.cc: Regenerate.
	* melt/generated/warmelt-hooks+02.cc: Regenerate.
	* melt/generated/warmelt-hooks+03.cc: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.cc: Regenerate.
	* melt/generated/warmelt-macro+01.cc: Regenerate.
	* melt/generated/warmelt-macro+02.cc: Regenerate.
	* melt/generated/warmelt-macro+03.cc: Regenerate.
	* melt/generated/warmelt-macro+04.cc: Regenerate.
	* melt/generated/warmelt-macro+05.cc: Regenerate.
	* melt/generated/warmelt-macro+06.cc: Regenerate.
	* melt/generated/warmelt-macro+07.cc: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.cc: Regenerate.
	* melt/generated/warmelt-modes+01.cc: Regenerate.
	* melt/generated/warmelt-modes+02.cc: Regenerate.
	* melt/generated/warmelt-modes+03.cc: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.cc: Regenerate.
	* melt/generated/warmelt-normal+01.cc: Regenerate.
	* melt/generated/warmelt-normal+02.cc: Regenerate.
	* melt/generated/warmelt-normal+03.cc: Regenerate.
	* melt/generated/warmelt-normal+04.cc: Regenerate.
	* melt/generated/warmelt-normal+05.cc: Regenerate.
	* melt/generated/warmelt-normal+06.cc: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.cc: Regenerate.
	* melt/generated/warmelt-normatch+01.cc: Regenerate.
	* melt/generated/warmelt-normatch+02.cc: Regenerate.
	* melt/generated/warmelt-normatch+03.cc: Regenerate.
	* melt/generated/warmelt-normatch+04.cc: Regenerate.
	* melt/generated/warmelt-normatch+05.cc: Regenerate.
	* melt/generated/warmelt-normatch+06.cc: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.cc: Regenerate.
	* melt/generated/warmelt-outobj+01.cc: Regenerate.
	* melt/generated/warmelt-outobj+02.cc: Regenerate.
	* melt/generated/warmelt-outobj+03.cc: Regenerate.
	* melt/generated/warmelt-outobj+04.cc: Regenerate.
	* melt/generated/warmelt-outobj+05.cc: Regenerate.
	* melt/generated/warmelt-outobj+06.cc: Regenerate.
	* melt/generated/warmelt-outobj+07.cc: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.cc: Regenerate.

2013-10-10  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-normal.melt (normexp_symbol): Better debug.

2013-10-10  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-debug.melt (dbgout_mapobject_method): Stronger
	condition to avoid writing all the entries.
	(debug_less_fun): New internal function.
	(debug_less): New debug manipulator to give less output in debug
	expressions.

	* melt/warmelt-normal.melt (normexp_symbol): more debug.

	* melt/warmelt-genobj.melt (compilobj_nrep_constocc): More debug,
	using debug_less...

2013-10-10  Basile Starynkevitch  <basile@starynkevitch.net>

	* testsuite/melt/tmacro-3.melt: New file. Should give an error at
	macro-expansion but does not...

2013-10-10  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-macro.melt (at_macro_expansion): New macro.
	(mexpand_at_macro_expansion): Unimplemented yet.

2013-10-09  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}
	* melt/generated/meltrunsup-inc.cc: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.cc: Regenerate.
	* melt/generated/warmelt-base+02.cc: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.cc: Regenerate.
	* melt/generated/warmelt-debug+01.cc: Regenerate.
	* melt/generated/warmelt-debug+02.cc: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.cc: Regenerate.
	* melt/generated/warmelt-first+01.cc: Regenerate.
	* melt/generated/warmelt-first+02.cc: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.cc: Regenerate.
	* melt/generated/warmelt-genobj+01.cc: Regenerate.
	* melt/generated/warmelt-genobj+02.cc: Regenerate.
	* melt/generated/warmelt-genobj+03.cc: Regenerate.
	* melt/generated/warmelt-genobj+04.cc: Regenerate.
	* melt/generated/warmelt-genobj+05.cc: Regenerate.
	* melt/generated/warmelt-genobj+06.cc: Regenerate.
	* melt/generated/warmelt-genobj+07.cc: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.cc: Regenerate.
	* melt/generated/warmelt-hooks+01.cc: Regenerate.
	* melt/generated/warmelt-hooks+02.cc: Regenerate.
	* melt/generated/warmelt-hooks+03.cc: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.cc: Regenerate.
	* melt/generated/warmelt-macro+01.cc: Regenerate.
	* melt/generated/warmelt-macro+02.cc: Regenerate.
	* melt/generated/warmelt-macro+03.cc: Regenerate.
	* melt/generated/warmelt-macro+04.cc: Regenerate.
	* melt/generated/warmelt-macro+05.cc: Regenerate.
	* melt/generated/warmelt-macro+06.cc: Regenerate.
	* melt/generated/warmelt-macro+07.cc: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.cc: Regenerate.
	* melt/generated/warmelt-modes+01.cc: Regenerate.
	* melt/generated/warmelt-modes+02.cc: Regenerate.
	* melt/generated/warmelt-modes+03.cc: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.cc: Regenerate.
	* melt/generated/warmelt-normal+01.cc: Regenerate.
	* melt/generated/warmelt-normal+02.cc: Regenerate.
	* melt/generated/warmelt-normal+03.cc: Regenerate.
	* melt/generated/warmelt-normal+04.cc: Regenerate.
	* melt/generated/warmelt-normal+05.cc: Regenerate.
	* melt/generated/warmelt-normal+06.cc: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.cc: Regenerate.
	* melt/generated/warmelt-normatch+01.cc: Regenerate.
	* melt/generated/warmelt-normatch+02.cc: Regenerate.
	* melt/generated/warmelt-normatch+03.cc: Regenerate.
	* melt/generated/warmelt-normatch+04.cc: Regenerate.
	* melt/generated/warmelt-normatch+05.cc: Regenerate.
	* melt/generated/warmelt-normatch+06.cc: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.cc: Regenerate.
	* melt/generated/warmelt-outobj+01.cc: Regenerate.
	* melt/generated/warmelt-outobj+02.cc: Regenerate.
	* melt/generated/warmelt-outobj+03.cc: Regenerate.
	* melt/generated/warmelt-outobj+04.cc: Regenerate.
	* melt/generated/warmelt-outobj+05.cc: Regenerate.
	* melt/generated/warmelt-outobj+06.cc: Regenerate.
	* melt/generated/warmelt-outobj+07.cc: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.cc: Regenerate.

2013-10-09  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-base.melt (some_integer_!=, some_integer_=)
	(some_integer_>=, some_integer_>, some_integer_<=)
	(some_integer_<): New synonyms.
	(some_integer_between): New cmatcher.

2013-10-08  Basile Starynkevitch  <basile@starynkevitch.net>
	{{justcountipa on tfindgimple-1.c works as expected}}
	* melt/xtramelt-ana-base.melt (each_cgraph_fun_call_flow_graph):
	Assign the funtree local parameter.

2013-10-08  Basile Starynkevitch  <basile@starynkevitch.net>
	{{justcountipa on tfindgimple-1.c don't crash anymore when
	debugging but still don't show locations.}}
	* melt-runtime.cc (meltgc_ppout_gimple, meltgc_ppout_gimple_seq):
	Remove the TDF_VOPS flag...

2013-10-08  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Unstable: justcountipa pass crashes when debugging with
	tfindgimple-1.c and don't show function locations...}}
	* melt/xtramelt-ana-simple.melt (class_justcountipa_data): New class.
	(justcountipa_exec, justcountipa_docmd): Use it.

2013-10-08  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/xtramelt-ana-base.melt (install_melt_pass_in_gcc): More
	debug. The rpassdata for simple_ipa should be SIMPLE_IPA_PASS.

	* melt-build-script.sh: Regenerate.

2013-10-03  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (MELT_VERSION_STRING): Update to 1.0-rc1 

2013-10-03  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup-inc.cc: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.cc: Regenerate.
	* melt/generated/warmelt-base+02.cc: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.cc: Regenerate.
	* melt/generated/warmelt-debug+01.cc: Regenerate.
	* melt/generated/warmelt-debug+02.cc: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.cc: Regenerate.
	* melt/generated/warmelt-first+01.cc: Regenerate.
	* melt/generated/warmelt-first+02.cc: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.cc: Regenerate.
	* melt/generated/warmelt-genobj+01.cc: Regenerate.
	* melt/generated/warmelt-genobj+02.cc: Regenerate.
	* melt/generated/warmelt-genobj+03.cc: Regenerate.
	* melt/generated/warmelt-genobj+04.cc: Regenerate.
	* melt/generated/warmelt-genobj+05.cc: Regenerate.
	* melt/generated/warmelt-genobj+06.cc: Regenerate.
	* melt/generated/warmelt-genobj+07.cc: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.cc: Regenerate.
	* melt/generated/warmelt-hooks+01.cc: Regenerate.
	* melt/generated/warmelt-hooks+02.cc: Regenerate.
	* melt/generated/warmelt-hooks+03.cc: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.cc: Regenerate.
	* melt/generated/warmelt-macro+01.cc: Regenerate.
	* melt/generated/warmelt-macro+02.cc: Regenerate.
	* melt/generated/warmelt-macro+03.cc: Regenerate.
	* melt/generated/warmelt-macro+04.cc: Regenerate.
	* melt/generated/warmelt-macro+05.cc: Regenerate.
	* melt/generated/warmelt-macro+06.cc: Regenerate.
	* melt/generated/warmelt-macro+07.cc: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.cc: Regenerate.
	* melt/generated/warmelt-modes+01.cc: Regenerate.
	* melt/generated/warmelt-modes+02.cc: Regenerate.
	* melt/generated/warmelt-modes+03.cc: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.cc: Regenerate.
	* melt/generated/warmelt-normal+01.cc: Regenerate.
	* melt/generated/warmelt-normal+02.cc: Regenerate.
	* melt/generated/warmelt-normal+03.cc: Regenerate.
	* melt/generated/warmelt-normal+04.cc: Regenerate.
	* melt/generated/warmelt-normal+05.cc: Regenerate.
	* melt/generated/warmelt-normal+06.cc: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.cc: Regenerate.
	* melt/generated/warmelt-normatch+01.cc: Regenerate.
	* melt/generated/warmelt-normatch+02.cc: Regenerate.
	* melt/generated/warmelt-normatch+03.cc: Regenerate.
	* melt/generated/warmelt-normatch+04.cc: Regenerate.
	* melt/generated/warmelt-normatch+05.cc: Regenerate.
	* melt/generated/warmelt-normatch+06.cc: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.cc: Regenerate.
	* melt/generated/warmelt-outobj+01.cc: Regenerate.
	* melt/generated/warmelt-outobj+02.cc: Regenerate.
	* melt/generated/warmelt-outobj+03.cc: Regenerate.
	* melt/generated/warmelt-outobj+04.cc: Regenerate.
	* melt/generated/warmelt-outobj+05.cc: Regenerate.
	* melt/generated/warmelt-outobj+06.cc: Regenerate.
	* melt/generated/warmelt-outobj+07.cc: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.cc: Regenerate.

2013-10-03  Basile Starynkevitch  <basile@starynkevitch.net>

	* Makefile.in (MELT_RUNTIME_CC, melt-runtime.args, melt-runtime.o)
	(GTFILES, check-melt-runtime): Use MELT_RUNTIME_CC not
	MELT_RUNTIME_C everywhere.

2013-10-03  Basile Starynkevitch  <basile@starynkevitch.net>

	* Makefile.in (melt-build-script.sh): Reorder dependencies.

	* melt-build-script.tpl: Use GCCMELT_RUNTIME_CC unstead of GCCMELT_RUNTIME_C everywhere.

	* melt-build-script.sh: Regenerate.

2013-10-03  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (MELT_VERSION_STRING): Update to 1.0-pre...

	* melt-runtime.cc (melt_really_initialize): Improve warning when without mode.
	(melt_dbgbacktrace): Replace & by && in test.

2013-10-03  Basile Starynkevitch  <basile@starynkevitch.net>
	* obsolete-melt/libmeltopengpu/: Moved directory from topdir.

2013-10-02  Basile Starynkevitch  <basile@starynkevitch.net>

	* Makefile.in (melt-build-param.sh): Generate for C++ only, so use
	GCCMELT_CC1PLUS instead of GCCMELT_CC1, GCCMELT_RUNTIME_CC etc
	etc...

	* melt-build-script.tpl: Use GCCMELT_CC1PLUS,
	GCCMELT_CC1PLUS_PREFIX etc.., likewise.
	* melt-build-script.sh: Regenerate.

	* melt-run.proto.h (gt_ggc_mx_melt_un): Move declaration to
	melt-runtime.h file.

	* melt-runtime.h (gt_ggc_mx_melt_un): Add declaration.
	(Melt_CallProtoFrame, debug_hook, debug_closure, dbg_file)
	(dbg_line): Add stub methods to Melt_CallProtoFrame class.

2013-10-02  Basile Starynkevitch  <basile@starynkevitch.net>

	* obsolete-melt/: New directory.
	* xtramelt-c-generator.melt: Moved to obsolete-melt/
	* xtramelt-opengpu.melt: Ditto.
	* obsolete-melt/xtramelt-c-generator.melt: New file, has moved.
	* obsolete-melt/xtramelt-opengpu.melt: New file, has moved.
	* obsolete-melt/README: New file.

	* melt-build-script.def: Remove xtramelt-c-generator &
	xtramelt-opengpu application files.

	* melt-build-script.sh: Regenerate.

2013-10-02  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/xtramelt-ana-simple.melt (justcountipa_docmd) install the
	pass before "*free_lang_data".

2013-10-01  Basile Starynkevitch  <basile@starynkevitch.net>

	{{MELT full GC happens much less often}}
	* melt-runtime.cc (MELT_MIN_MINORSIZE_KW)
	(MELT_DEFAULT_MINORSIZE_KW, MELT_MAX_MINORSIZE_KW)
	(MELT_MIN_FULLTHRESHOLD_KW, MELT_DEFAULT_FULLTHRESHOLD_KW)
	(MELT_MAX_FULLTHRESHOLD_KW, MELT_MIN_PERIODFULL)
	(MELT_DEFAULT_PERIODFULL, MELT_MAX_PERIODFULL): New constant
	macros for MELT garbage-collector related parameters, which have
	been significantly increased.
	(melt_resize_scangcvect): Clear the old melt_scangcvect before
	freeing it.
	(melt_flag_dont_catch_crashing_signals): New C variable.
	(melt_branch_process_arguments): Set it appropriately and early
	with -fmelt-dont-catch-signals program argument.
	(melt_minor_copying_garbage_collector): Clear the melt_scangcvect.
	(melt_garbcoll): Set the GC parameters using the constant macros
	above, with much higher default and minimal levels.
	(melt_garbcoll): The factor for fowarded copy byte count
	threshold is increased from 4 to 5.

	* toplev.c (general_init): Only install the crash_signal handlers
	for crashing signals if -fmelt-dont-catch-signals is not given.
	(toplev_main): Move the melt_finalize call after PLUGIN_FINISH.

2013-09-30  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/xtramelt-ana-base.melt (install_melt_pass_in_gcc): Add
	debugprintf...

	* melt/xtramelt-ana-simple.melt (justcountipa_docmd) probably
	don't work...

2013-09-30  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/meltrunsup-inc.cc: Regenerate.
	* melt/generated/warmelt-base.cc: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+01.cc: Regenerate.
	* melt/generated/warmelt-hooks+02.cc: Regenerate.
	* melt/generated/warmelt-hooks+03.cc: Regenerate.
	* melt/generated/warmelt-hooks.cc: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+02.cc: Regenerate.
	* melt/generated/warmelt-modes.cc: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+01.cc: Regenerate.
	* melt/generated/warmelt-outobj+02.cc: Regenerate.
	* melt/generated/warmelt-outobj+03.cc: Regenerate.
	* melt/generated/warmelt-outobj+04.cc: Regenerate.
	* melt/generated/warmelt-outobj+05.cc: Regenerate.
	* melt/generated/warmelt-outobj+06.cc: Regenerate.
	* melt/generated/warmelt-outobj+07.cc: Regenerate.
	* melt/generated/warmelt-outobj.cc: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-09-30  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (melt_pass_instance_counter)
	(melt_current_pass_index_var): New extern variable.

	* melt-runtime.cc: Ditto.

	* melt/generated/meltrunsup.h (melthookproc_HOOK_PASS_EXECUTION):
	Add third ptype long parameter.

	* melt/generated/meltrunsup-inc.cc: Ditto.

	* melt/warmelt-hooks.melt (melt_pass_execution_hook_callback):
	pass the type number.
	(hook_pass_execution): Handle that type number. Don't accumulate
	results.
	(register_pass_execution_first, register_pass_execution_last):
	Improve :doc string.

	* melt/xtramelt-ana-base.melt (melt_gimple_pass)
	(melt_simple_ipa_pass): Handle the pass index.

	* melt/xtramelt-ana-simple.melt (justshowpass)
	(justshowpasses_docmd): New functions.
	(justshowpasses_mode): New justshowpasses mode.

2013-09-27  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/xtramelt-ana-gimple.melt: Update copyright year.
	(gimple_transaction): Also for GCC 4.9 ...

	* melt/xtramelt-ana-simple.melt: New gofindgimple mode.
	(gofindgimple_docmd, gofindgimple_mode): New.

2013-09-27  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-outobj.melt (translate_run_melt_expressions): More
	debug.

	* melt/xtramelt-ana-simple.melt (findgimple_docmd): Works much better.

	* testsuite/melt/tfindgimple-1.c: Improve test.

2013-09-24  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/meltrunsup-inc.cc: Regenerate.
	* melt/generated/warmelt-base.cc: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.cc: Regenerate.
	* melt/generated/warmelt-genobj+02.cc: Regenerate.
	* melt/generated/warmelt-genobj+03.cc: Regenerate.
	* melt/generated/warmelt-genobj+04.cc: Regenerate.
	* melt/generated/warmelt-genobj+05.cc: Regenerate.
	* melt/generated/warmelt-genobj+06.cc: Regenerate.
	* melt/generated/warmelt-genobj+07.cc: Regenerate.
	* melt/generated/warmelt-genobj.cc: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+02.cc: Regenerate.
	* melt/generated/warmelt-modes.cc: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+03.cc: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+01.cc: Regenerate.
	* melt/generated/warmelt-outobj+02.cc: Regenerate.
	* melt/generated/warmelt-outobj+03.cc: Regenerate.
	* melt/generated/warmelt-outobj+04.cc: Regenerate.
	* melt/generated/warmelt-outobj+05.cc: Regenerate.
	* melt/generated/warmelt-outobj+06.cc: Regenerate.
	* melt/generated/warmelt-outobj+07.cc: Regenerate.
	* melt/generated/warmelt-outobj.cc: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-09-24  Basile Starynkevitch  <basile@starynkevitch.net>
	{{fixed MELT-SFT-2}}
	* melt/warmelt-normal.melt (normexp_setq): More debug.

	* melt/warmelt-genobj.melt (putobjdest_catch_objputmodvar): New
	method, signalling an error, for put_objdest on
	class_objputmodvar.

	* melt/xtramelt-ana-simple.melt (register_findgimple_processor):
	Explicitly return nil.

	* melt/xtramelt-playground.melt: Remove all the useless code.

	* testsuite/melt/tdefvar-3.melt: New file.

2013-09-24  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-build-script.tpl: Move the creation of
	meltbuild-common.args and warmelt*modlis files.

	* melt-build-script.sh: Regenerate.

2013-09-20  Basile Starynkevitch  <basile@starynkevitch.net>

	{{unstable, xtramelt-ana-simple.melt don't compile! MELT-SFT-2}}
	* melt/warmelt-genobj.melt (putobjdest_catchall_objcode)
	(putobjdest_catchall_anydiscr): Slightly improved error message.

	* melt/xtramelt-ana-simple.melt (justscanpass_gate)
	(justscanpass_exec): Move functions below.

2013-09-20  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-macro.melt (use_package_from_pkg_config): Improve
	the :doc string.

	* melt/warmelt-outobj.melt (compile_list_sexpr): Remove the
	warning for short list of expressions.

	* melt/xtramelt-ana-tree.melt (diag_tree): Correct order of
	arguments to strbuf2string.

	* melt/xtramelt-ana-gimple.melt (diag_gimple, dig_gimpleseq):
	Likewise.

	* melt/xtramelt-ana-simple.melt (findgimple_docmd): More.

2013-09-20  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/xtramelt-ana-gimple.melt (diag_gimple, diag_gimpleseq): New
	registered diagnostic functions.

	* testsuite/melt/tfindgimple-1.c: pass -I include in comments.

2013-09-20  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerated}}
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/meltrunsup-inc.cc: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-09-20  Basile Starynkevitch  <basile@starynkevitch.net>

	* toplevel.c (melt_branch_argument_processing): Declaration
	renamed as ...
	(melt_branch_process_arguments): New declared name.
	(toplev_main): Call it appropriately.

	* melt-runtime.cc (melt_branch_argument_processing): Function
	renamed as ...
	(melt_branch_process_arguments): New name.

2013-09-20  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.cc (melt_branch_argument_processing): Detect and
	give a fatal error when same argument is given twice...

2013-09-20  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-upgrade.sh: Typo on messages about upgrade of descriptor
	files.

2013-09-19  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/xtramelt-ana-simple.melt (findgimple_docmd): More, and
	special cases for wild-cards.

	* testsuite/melt/tfindgimple-1.c: New test case.

2013-09-19  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/meltrunsup-inc.cc: Regenerate.
	* melt/generated/warmelt-base+01.cc: Regenerate.
	* melt/generated/warmelt-base+02.cc: Regenerate.
	* melt/generated/warmelt-base.cc: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+01.cc: Regenerate.
	* melt/generated/warmelt-debug+02.cc: Regenerate.
	* melt/generated/warmelt-debug.cc: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+01.cc: Regenerate.
	* melt/generated/warmelt-first+02.cc: Regenerate.
	* melt/generated/warmelt-first.cc: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.cc: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+01.cc: Regenerate.
	* melt/generated/warmelt-hooks+02.cc: Regenerate.
	* melt/generated/warmelt-hooks+03.cc: Regenerate.
	* melt/generated/warmelt-hooks.cc: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+01.cc: Regenerate.
	* melt/generated/warmelt-macro+02.cc: Regenerate.
	* melt/generated/warmelt-macro+03.cc: Regenerate.
	* melt/generated/warmelt-macro+04.cc: Regenerate.
	* melt/generated/warmelt-macro+05.cc: Regenerate.
	* melt/generated/warmelt-macro+06.cc: Regenerate.
	* melt/generated/warmelt-macro+07.cc: Regenerate.
	* melt/generated/warmelt-macro.cc: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+01.cc: Regenerate.
	* melt/generated/warmelt-modes+02.cc: Regenerate.
	* melt/generated/warmelt-modes+03.cc: Regenerate.
	* melt/generated/warmelt-modes.cc: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+01.cc: Regenerate.
	* melt/generated/warmelt-normal+02.cc: Regenerate.
	* melt/generated/warmelt-normal+03.cc: Regenerate.
	* melt/generated/warmelt-normal+04.cc: Regenerate.
	* melt/generated/warmelt-normal+05.cc: Regenerate.
	* melt/generated/warmelt-normal+06.cc: Regenerate.
	* melt/generated/warmelt-normal.cc: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+01.cc: Regenerate.
	* melt/generated/warmelt-normatch+02.cc: Regenerate.
	* melt/generated/warmelt-normatch+03.cc: Regenerate.
	* melt/generated/warmelt-normatch+04.cc: Regenerate.
	* melt/generated/warmelt-normatch+05.cc: Regenerate.
	* melt/generated/warmelt-normatch+06.cc: Regenerate.
	* melt/generated/warmelt-normatch.cc: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+06.cc: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-09-19  Basile Starynkevitch  <basile@starynkevitch.net>

	* xtramelt-ana-simple.melt (findgimple_docmd): evaluating when
	given no output.

2013-09-19  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.cc (melt_branch_argument_processing): Notify the
	user who is loading the MELT plugin into the branch...

2013-09-17  Basile Starynkevitch  <basile@starynkevitch.net>
	{{The branch should now accept -fplugin-arg-melt-* arguments like
	-fmelt ones and ignore -fplugin=melt; arbitrary arguments are
	permitted, like in plugin mode...}}

	* common.opt: Revert to trunk. No more MELT specific options.

	* melt-runtime.h (melt_flag_debug, melt_flag_bootstrapping):
	Declared both for branch and plugin.

	* melt-runtime.cc: include <map> header.
	(melt_flag_debug, melt_flag_bootstrapping)
	(melt_flag_generate_work_link): Declared both for branch and
	plugin.
	(melt_branch_argument_map): New variable in branch.
	(melt_branch_argument_processing): New function.
	(melt_argument): In branch, use melt_branch_argument_map.
	(melt_really_initialize): Less branch specific code.

	* toplevel.c (toplev_main): Call melt_branch_argument_processing.

2013-09-16  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/xtramelt-ana-base.melt (findgimple_docmd): More...

2013-09-16  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.cc: Move inclusion of "gcc.h" upward.
	Include "tree-ssa.h" for GCC 4.9.
	Always include headers from c-family.
	(meltgc_walk_use_def_chain): Move the initial load of closv &
	valv.

2013-09-11  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/xtramelt-ana-base.melt (findgimple_docmd): More...

2013-09-11  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.cc (meltgc_retrieve_location_from_value): New function.
	(melt_error_str, melt_warning_str, melt_inform_str): Use it.

	* melt/warmelt-first.melt (is_empty_string, is_non_empty_string):
	May return :true; previous form was buggy and always returned
	false.

	* melt/warmelt-base.melt (read_strv_loc): New primitive.

	* melt/xtramelt-ana-base.melt (findgimple_docmd, findgimple_mode):
	New but incomplete mode.

2013-09-10  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Documentation is generated again...}}
	* melt/warmelt-macro.melt (diagnostic_args_macro): Correct documentation.

	* melt/warmelt-modes.melt (makedoc_docmd): Make a fresh environment for each file...

2013-09-10  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/warmelt-base+01.cc: Regenerate.
	* melt/generated/warmelt-base+02.cc: Regenerate.
	* melt/generated/warmelt-base.cc: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+01.cc: Regenerate.
	* melt/generated/warmelt-debug+02.cc: Regenerate.
	* melt/generated/warmelt-debug.cc: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+01.cc: Regenerate.
	* melt/generated/warmelt-first+02.cc: Regenerate.
	* melt/generated/warmelt-first.cc: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.cc: Regenerate.
	* melt/generated/warmelt-genobj+02.cc: Regenerate.
	* melt/generated/warmelt-genobj+03.cc: Regenerate.
	* melt/generated/warmelt-genobj+04.cc: Regenerate.
	* melt/generated/warmelt-genobj+05.cc: Regenerate.
	* melt/generated/warmelt-genobj+06.cc: Regenerate.
	* melt/generated/warmelt-genobj+07.cc: Regenerate.
	* melt/generated/warmelt-genobj.cc: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+01.cc: Regenerate.
	* melt/generated/warmelt-hooks+02.cc: Regenerate.
	* melt/generated/warmelt-hooks+03.cc: Regenerate.
	* melt/generated/warmelt-hooks.cc: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+01.cc: Regenerate.
	* melt/generated/warmelt-macro+02.cc: Regenerate.
	* melt/generated/warmelt-macro+03.cc: Regenerate.
	* melt/generated/warmelt-macro+04.cc: Regenerate.
	* melt/generated/warmelt-macro+05.cc: Regenerate.
	* melt/generated/warmelt-macro+06.cc: Regenerate.
	* melt/generated/warmelt-macro+07.cc: Regenerate.
	* melt/generated/warmelt-macro.cc: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+01.cc: Regenerate.
	* melt/generated/warmelt-modes+02.cc: Regenerate.
	* melt/generated/warmelt-modes+03.cc: Regenerate.
	* melt/generated/warmelt-modes.cc: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+01.cc: Regenerate.
	* melt/generated/warmelt-normal+02.cc: Regenerate.
	* melt/generated/warmelt-normal+03.cc: Regenerate.
	* melt/generated/warmelt-normal+04.cc: Regenerate.
	* melt/generated/warmelt-normal+05.cc: Regenerate.
	* melt/generated/warmelt-normal+06.cc: Regenerate.
	* melt/generated/warmelt-normal.cc: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+01.cc: Regenerate.
	* melt/generated/warmelt-normatch+02.cc: Regenerate.
	* melt/generated/warmelt-normatch+03.cc: Regenerate.
	* melt/generated/warmelt-normatch+04.cc: Regenerate.
	* melt/generated/warmelt-normatch+05.cc: Regenerate.
	* melt/generated/warmelt-normatch+06.cc: Regenerate.
	* melt/generated/warmelt-normatch.cc: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+01.cc: Regenerate.
	* melt/generated/warmelt-outobj+02.cc: Regenerate.
	* melt/generated/warmelt-outobj+03.cc: Regenerate.
	* melt/generated/warmelt-outobj+04.cc: Regenerate.
	* melt/generated/warmelt-outobj+05.cc: Regenerate.
	* melt/generated/warmelt-outobj+06.cc: Regenerate.
	* melt/generated/warmelt-outobj+07.cc: Regenerate.
	* melt/generated/warmelt-outobj.cc: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-09-10  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-modes.melt (makedoc_docmd): Process each file one
	by one serially...

2013-09-10  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-macro.melt (each_component_in_list): Typo corrected.

2013-09-10  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-macro.melt (each_component_in_list): New macro.
	(expand_pairlist_as_list, expand_restlist_as_list)
	(expand_tuple_slice_as_tuple): Export and document these functions
	useful in defmacros etc...

2013-09-10  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+01.cc: Regenerate.
	* melt/generated/warmelt-first+02.cc: Regenerate.
	* melt/generated/warmelt-first.cc: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+01.cc: Regenerate.
	* melt/generated/warmelt-macro+02.cc: Regenerate.
	* melt/generated/warmelt-macro+03.cc: Regenerate.
	* melt/generated/warmelt-macro+04.cc: Regenerate.
	* melt/generated/warmelt-macro+05.cc: Regenerate.
	* melt/generated/warmelt-macro+06.cc: Regenerate.
	* melt/generated/warmelt-macro+07.cc: Regenerate.
	* melt/generated/warmelt-macro.cc: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-09-10  Basile Starynkevitch  <basile@starynkevitch.net>

	{{with_cloned_symb works}}
	* melt/warmelt-first.melt (put_env): Remove shortbacktrace since
	improved assert...

	* melt/warmelt-macro.melt (mexpand_with_cloned_symb): Works since
	extending correctly the environment...

2013-09-10  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/meltrunsup-inc.cc: Regenerate.
	* melt/generated/warmelt-base+01.cc: Regenerate.
	* melt/generated/warmelt-base+02.cc: Regenerate.
	* melt/generated/warmelt-base.cc: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+01.cc: Regenerate.
	* melt/generated/warmelt-debug+02.cc: Regenerate.
	* melt/generated/warmelt-debug.cc: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+01.cc: Regenerate.
	* melt/generated/warmelt-first+02.cc: Regenerate.
	* melt/generated/warmelt-first.cc: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.cc: Regenerate.
	* melt/generated/warmelt-genobj+02.cc: Regenerate.
	* melt/generated/warmelt-genobj+03.cc: Regenerate.
	* melt/generated/warmelt-genobj+04.cc: Regenerate.
	* melt/generated/warmelt-genobj+05.cc: Regenerate.
	* melt/generated/warmelt-genobj+06.cc: Regenerate.
	* melt/generated/warmelt-genobj+07.cc: Regenerate.
	* melt/generated/warmelt-genobj.cc: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+01.cc: Regenerate.
	* melt/generated/warmelt-hooks+02.cc: Regenerate.
	* melt/generated/warmelt-hooks+03.cc: Regenerate.
	* melt/generated/warmelt-hooks.cc: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+01.cc: Regenerate.
	* melt/generated/warmelt-macro+02.cc: Regenerate.
	* melt/generated/warmelt-macro+03.cc: Regenerate.
	* melt/generated/warmelt-macro+04.cc: Regenerate.
	* melt/generated/warmelt-macro+05.cc: Regenerate.
	* melt/generated/warmelt-macro+06.cc: Regenerate.
	* melt/generated/warmelt-macro+07.cc: Regenerate.
	* melt/generated/warmelt-macro.cc: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+01.cc: Regenerate.
	* melt/generated/warmelt-modes+02.cc: Regenerate.
	* melt/generated/warmelt-modes+03.cc: Regenerate.
	* melt/generated/warmelt-modes.cc: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+01.cc: Regenerate.
	* melt/generated/warmelt-normal+02.cc: Regenerate.
	* melt/generated/warmelt-normal+03.cc: Regenerate.
	* melt/generated/warmelt-normal+04.cc: Regenerate.
	* melt/generated/warmelt-normal+05.cc: Regenerate.
	* melt/generated/warmelt-normal+06.cc: Regenerate.
	* melt/generated/warmelt-normal.cc: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+01.cc: Regenerate.
	* melt/generated/warmelt-normatch+02.cc: Regenerate.
	* melt/generated/warmelt-normatch+03.cc: Regenerate.
	* melt/generated/warmelt-normatch+04.cc: Regenerate.
	* melt/generated/warmelt-normatch+05.cc: Regenerate.
	* melt/generated/warmelt-normatch+06.cc: Regenerate.
	* melt/generated/warmelt-normatch.cc: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+01.cc: Regenerate.
	* melt/generated/warmelt-outobj+02.cc: Regenerate.
	* melt/generated/warmelt-outobj+03.cc: Regenerate.
	* melt/generated/warmelt-outobj+04.cc: Regenerate.
	* melt/generated/warmelt-outobj+05.cc: Regenerate.
	* melt/generated/warmelt-outobj+06.cc: Regenerate.
	* melt/generated/warmelt-outobj+07.cc: Regenerate.
	* melt/generated/warmelt-outobj.cc: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-09-10  Basile Starynkevitch  <basile@starynkevitch.net>

	{{foreach_in_list renamed}}
	* melt/warmelt-first.melt (foreach_in_list): Obsolete, since renamed as...
	(foreach_pair_component_in_list): New name.

	* melt/warmelt-base.melt: Rename all foreach_in_list with foreach_pair_component_in_list.

	* melt/warmelt-debug.melt: Ditto.

	* melt/warmelt-macro.melt: Ditto.

	* melt/warmelt-normal.melt: Ditto.

	* melt/warmelt-normatch.melt: Ditto.

	* melt/warmelt-genobj.melt: Ditto.

	* melt/warmelt-outobj.melt: Ditto.

	* melt/xtramelt-ana-base.melt: Ditto.

	* melt/xtramelt-ana-tree.melt: Ditto.

	* melt/xtramelt-c-generator.melt: Ditto.

	* melt/xtramelt-probe.melt: Ditto.

2013-09-10  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-predef.list (HOOK_SIMPLE_IPA_GATE): Remove.

2013-09-10  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/meltrunsup-inc.cc: Regenerate.
	* melt/generated/warmelt-base+01.cc: Regenerate.
	* melt/generated/warmelt-base+02.cc: Regenerate.
	* melt/generated/warmelt-base.cc: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+01.cc: Regenerate.
	* melt/generated/warmelt-debug+02.cc: Regenerate.
	* melt/generated/warmelt-debug.cc: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+01.cc: Regenerate.
	* melt/generated/warmelt-first+02.cc: Regenerate.
	* melt/generated/warmelt-first.cc: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.cc: Regenerate.
	* melt/generated/warmelt-genobj+02.cc: Regenerate.
	* melt/generated/warmelt-genobj+03.cc: Regenerate.
	* melt/generated/warmelt-genobj+04.cc: Regenerate.
	* melt/generated/warmelt-genobj+05.cc: Regenerate.
	* melt/generated/warmelt-genobj+06.cc: Regenerate.
	* melt/generated/warmelt-genobj+07.cc: Regenerate.
	* melt/generated/warmelt-genobj.cc: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+01.cc: Regenerate.
	* melt/generated/warmelt-hooks+02.cc: Regenerate.
	* melt/generated/warmelt-hooks+03.cc: Regenerate.
	* melt/generated/warmelt-hooks.cc: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+01.cc: Regenerate.
	* melt/generated/warmelt-macro+02.cc: Regenerate.
	* melt/generated/warmelt-macro+03.cc: Regenerate.
	* melt/generated/warmelt-macro+04.cc: Regenerate.
	* melt/generated/warmelt-macro+05.cc: Regenerate.
	* melt/generated/warmelt-macro+06.cc: Regenerate.
	* melt/generated/warmelt-macro+07.cc: Regenerate.
	* melt/generated/warmelt-macro.cc: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+01.cc: Regenerate.
	* melt/generated/warmelt-modes+02.cc: Regenerate.
	* melt/generated/warmelt-modes+03.cc: Regenerate.
	* melt/generated/warmelt-modes.cc: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+01.cc: Regenerate.
	* melt/generated/warmelt-normal+02.cc: Regenerate.
	* melt/generated/warmelt-normal+03.cc: Regenerate.
	* melt/generated/warmelt-normal+04.cc: Regenerate.
	* melt/generated/warmelt-normal+05.cc: Regenerate.
	* melt/generated/warmelt-normal+06.cc: Regenerate.
	* melt/generated/warmelt-normal.cc: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+01.cc: Regenerate.
	* melt/generated/warmelt-normatch+02.cc: Regenerate.
	* melt/generated/warmelt-normatch+03.cc: Regenerate.
	* melt/generated/warmelt-normatch+04.cc: Regenerate.
	* melt/generated/warmelt-normatch+05.cc: Regenerate.
	* melt/generated/warmelt-normatch+06.cc: Regenerate.
	* melt/generated/warmelt-normatch.cc: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+01.cc: Regenerate.
	* melt/generated/warmelt-outobj+02.cc: Regenerate.
	* melt/generated/warmelt-outobj+03.cc: Regenerate.
	* melt/generated/warmelt-outobj+04.cc: Regenerate.
	* melt/generated/warmelt-outobj+05.cc: Regenerate.
	* melt/generated/warmelt-outobj+06.cc: Regenerate.
	* melt/generated/warmelt-outobj+07.cc: Regenerate.
	* melt/generated/warmelt-outobj.cc: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.


2013-09-10  Basile Starynkevitch  <basile@starynkevitch.net>

	{{no need for simple ipa gate functions... }}
	* melt-predef.list (HOOK_SIMPLE_IPA_GATE): Poisoned.

	* melt/warmelt-hooks.melt (hook_simple_ipa_gate): Removed.

	* melt/xtramelt-ana-base.melt (melthk_simple_ipa_gate): Remove
	this C++ helper function.
	(melt_pass_instance_counter_): New global.
	(melt_gimple_pass): Use it.
	(melt_simple_ipa_pass): New C++ class.
	(install_melt_pass_in_gcc): Simple IPA passes should not have gate
	functions.  Add GCC 4.9 handling of simple ipa passes.

2013-09-10  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (MELT_FLEXIBLE_DIM, MELT_HAVE_FLEXIBLE_DIM): Set
	with GCC or Clang or when MELT_FORCE_FLEXIBLE_DIM is set and
	MELT_FORCE_INFLEXIBLE_DIM is false.

2013-09-09  Basile Starynkevitch  <basile@starynkevitch.net>
	{{When merging trunk GCC 4.9 with C++ passes}}
	* melt/xtramelt-ana-base.melt: Add GCC 4.9 specific code, still
	incomplete, for classy passes.... Only Gimple passes are yet possible...

2013-09-06  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-macro.melt: Replaced all error_... with
	error_at.

2013-09-06  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.cc: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+01.cc: Regenerate.
	* melt/generated/warmelt-macro+02.cc: Regenerate.
	* melt/generated/warmelt-macro+03.cc: Regenerate.
	* melt/generated/warmelt-macro+04.cc: Regenerate.
	* melt/generated/warmelt-macro+05.cc: Regenerate.
	* melt/generated/warmelt-macro+06.cc: Regenerate.
	* melt/generated/warmelt-macro+07.cc: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.cc: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+01.cc: Regenerate.
	* melt/generated/warmelt-normal+02.cc: Regenerate.
	* melt/generated/warmelt-normal+03.cc: Regenerate.
	* melt/generated/warmelt-normal+04.cc: Regenerate.
	* melt/generated/warmelt-normal+05.cc: Regenerate.
	* melt/generated/warmelt-normal+06.cc: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.cc: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-09-06  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-macro.melt (diagnostic_expand_message): Works better.

2013-09-06  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-macro.melt: Replaced some error_... with
	error_at.

	* melt/warmelt-normal.melt (normexp_symbol): Aborts on failure
	while bootstrapping...

2013-09-06  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup-inc.cc: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.cc: Regenerate.
	* melt/generated/warmelt-base+02.cc: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.cc: Regenerate.
	* melt/generated/warmelt-debug+01.cc: Regenerate.
	* melt/generated/warmelt-debug+02.cc: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.cc: Regenerate.
	* melt/generated/warmelt-first+01.cc: Regenerate.
	* melt/generated/warmelt-first+02.cc: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.cc: Regenerate.
	* melt/generated/warmelt-genobj+01.cc: Regenerate.
	* melt/generated/warmelt-genobj+02.cc: Regenerate.
	* melt/generated/warmelt-genobj+03.cc: Regenerate.
	* melt/generated/warmelt-genobj+04.cc: Regenerate.
	* melt/generated/warmelt-genobj+05.cc: Regenerate.
	* melt/generated/warmelt-genobj+06.cc: Regenerate.
	* melt/generated/warmelt-genobj+07.cc: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.cc: Regenerate.
	* melt/generated/warmelt-hooks+01.cc: Regenerate.
	* melt/generated/warmelt-hooks+02.cc: Regenerate.
	* melt/generated/warmelt-hooks+03.cc: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.cc: Regenerate.
	* melt/generated/warmelt-macro+01.cc: Regenerate.
	* melt/generated/warmelt-macro+02.cc: Regenerate.
	* melt/generated/warmelt-macro+03.cc: Regenerate.
	* melt/generated/warmelt-macro+04.cc: Regenerate.
	* melt/generated/warmelt-macro+05.cc: Regenerate.
	* melt/generated/warmelt-macro+06.cc: Regenerate.
	* melt/generated/warmelt-macro+07.cc: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.cc: Regenerate.
	* melt/generated/warmelt-modes+01.cc: Regenerate.
	* melt/generated/warmelt-modes+02.cc: Regenerate.
	* melt/generated/warmelt-modes+03.cc: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.cc: Regenerate.
	* melt/generated/warmelt-normal+01.cc: Regenerate.
	* melt/generated/warmelt-normal+02.cc: Regenerate.
	* melt/generated/warmelt-normal+03.cc: Regenerate.
	* melt/generated/warmelt-normal+04.cc: Regenerate.
	* melt/generated/warmelt-normal+05.cc: Regenerate.
	* melt/generated/warmelt-normal+06.cc: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.cc: Regenerate.
	* melt/generated/warmelt-normatch+01.cc: Regenerate.
	* melt/generated/warmelt-normatch+02.cc: Regenerate.
	* melt/generated/warmelt-normatch+03.cc: Regenerate.
	* melt/generated/warmelt-normatch+04.cc: Regenerate.
	* melt/generated/warmelt-normatch+05.cc: Regenerate.
	* melt/generated/warmelt-normatch+06.cc: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.cc: Regenerate.
	* melt/generated/warmelt-outobj+01.cc: Regenerate.
	* melt/generated/warmelt-outobj+02.cc: Regenerate.
	* melt/generated/warmelt-outobj+03.cc: Regenerate.
	* melt/generated/warmelt-outobj+04.cc: Regenerate.
	* melt/generated/warmelt-outobj+05.cc: Regenerate.
	* melt/generated/warmelt-outobj+06.cc: Regenerate.
	* melt/generated/warmelt-outobj+07.cc: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.cc: Regenerate.

2013-09-06  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-macro.melt (diagnostic_expand_message): Use const
	char* pointer in chunk.

	* melt/generated/warmelt-macro.cc: Hand edited for above.

2013-09-05  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h: Reindented with astyle --style=gnu -s2 command.
	* melt-runtime.cc: Likewise.

	{{C++ifying the MELT runtime}}
	* melt-runtime.h (melt_nb_modules): Remove.

	* melt-runtime.cc: Include <string.h>, <string>, <vector> headers.
	(MELT_MODULE_MAGIC, MELT_EXTENSION_MAGIC): Remove #define.
	(struct melt_module_info_st, struct melt_modulinfovec_st, struct
	melt_extension_info_st, struct meltextinfovec_st)
	(melt_modulinfo, melt_extinfo): Remove.
	(Melt_Module, Melt_Plain_Module, Melt_Extension_Module): New
	classes.
	(Melt_Module::Melt_Module, Melt_Module::initialize): New.
	(melt_marking_callback, melt_minor_copying_garbage_collector)
	(melt_dlsym_all, melt_load_module_index, meltgc_run_cc_extension)
	(meltgc_start_module_by_index, meltgc_start_all_new_modules)
	(meltgc_load_modules_and_do_mode, melt_really_initialize)
	(melt_fatal_info): Adapt to use Melt_Module.

2013-09-04  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.cc: Regenerate.
	* melt/generated/warmelt-genobj+02.cc: Regenerate.
	* melt/generated/warmelt-genobj+03.cc: Regenerate.
	* melt/generated/warmelt-genobj+04.cc: Regenerate.
	* melt/generated/warmelt-genobj+05.cc: Regenerate.
	* melt/generated/warmelt-genobj+06.cc: Regenerate.
	* melt/generated/warmelt-genobj+07.cc: Regenerate.
	* melt/generated/warmelt-genobj.cc: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+01.cc: Regenerate.
	* melt/generated/warmelt-normal+02.cc: Regenerate.
	* melt/generated/warmelt-normal+03.cc: Regenerate.
	* melt/generated/warmelt-normal+04.cc: Regenerate.
	* melt/generated/warmelt-normal+05.cc: Regenerate.
	* melt/generated/warmelt-normal+06.cc: Regenerate.
	* melt/generated/warmelt-normal.cc: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-09-04  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-normal.melt: Use errror_at everywhere.

2013-09-04  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-normal.melt: More error_at replacement.

2013-09-04  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-normal.melt: More error_at replacement.

	* melt/warmeltgenobj.melt (compilobj_predef): Add assert.

2013-09-04  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/warmelt-base+01.cc: Regenerate.
	* melt/generated/warmelt-base+02.cc: Regenerate.
	* melt/generated/warmelt-base.cc: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+01.cc: Regenerate.
	* melt/generated/warmelt-debug+02.cc: Regenerate.
	* melt/generated/warmelt-debug.cc: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+01.cc: Regenerate.
	* melt/generated/warmelt-first+02.cc: Regenerate.
	* melt/generated/warmelt-first.cc: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.cc: Regenerate.
	* melt/generated/warmelt-genobj+02.cc: Regenerate.
	* melt/generated/warmelt-genobj+03.cc: Regenerate.
	* melt/generated/warmelt-genobj+04.cc: Regenerate.
	* melt/generated/warmelt-genobj+05.cc: Regenerate.
	* melt/generated/warmelt-genobj+06.cc: Regenerate.
	* melt/generated/warmelt-genobj+07.cc: Regenerate.
	* melt/generated/warmelt-genobj.cc: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+01.cc: Regenerate.
	* melt/generated/warmelt-hooks+02.cc: Regenerate.
	* melt/generated/warmelt-hooks+03.cc: Regenerate.
	* melt/generated/warmelt-hooks.cc: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+01.cc: Regenerate.
	* melt/generated/warmelt-macro+02.cc: Regenerate.
	* melt/generated/warmelt-macro+03.cc: Regenerate.
	* melt/generated/warmelt-macro+04.cc: Regenerate.
	* melt/generated/warmelt-macro+05.cc: Regenerate.
	* melt/generated/warmelt-macro+06.cc: Regenerate.
	* melt/generated/warmelt-macro+07.cc: Regenerate.
	* melt/generated/warmelt-macro.cc: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+01.cc: Regenerate.
	* melt/generated/warmelt-modes+02.cc: Regenerate.
	* melt/generated/warmelt-modes+03.cc: Regenerate.
	* melt/generated/warmelt-modes.cc: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+01.cc: Regenerate.
	* melt/generated/warmelt-normal+02.cc: Regenerate.
	* melt/generated/warmelt-normal+03.cc: Regenerate.
	* melt/generated/warmelt-normal+04.cc: Regenerate.
	* melt/generated/warmelt-normal+05.cc: Regenerate.
	* melt/generated/warmelt-normal+06.cc: Regenerate.
	* melt/generated/warmelt-normal.cc: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+01.cc: Regenerate.
	* melt/generated/warmelt-normatch+02.cc: Regenerate.
	* melt/generated/warmelt-normatch+03.cc: Regenerate.
	* melt/generated/warmelt-normatch+04.cc: Regenerate.
	* melt/generated/warmelt-normatch+05.cc: Regenerate.
	* melt/generated/warmelt-normatch+06.cc: Regenerate.
	* melt/generated/warmelt-normatch.cc: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+01.cc: Regenerate.
	* melt/generated/warmelt-outobj+02.cc: Regenerate.
	* melt/generated/warmelt-outobj+03.cc: Regenerate.
	* melt/generated/warmelt-outobj+04.cc: Regenerate.
	* melt/generated/warmelt-outobj+05.cc: Regenerate.
	* melt/generated/warmelt-outobj+06.cc: Regenerate.
	* melt/generated/warmelt-outobj+07.cc: Regenerate.
	* melt/generated/warmelt-outobj.cc: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-09-04  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-outobj.melt (outpucod_predef): Add assert.

2013-09-04  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/meltrunsup-inc.cc: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+01.cc: Regenerate.
	* melt/generated/warmelt-macro+02.cc: Regenerate.
	* melt/generated/warmelt-macro+03.cc: Regenerate.
	* melt/generated/warmelt-macro+04.cc: Regenerate.
	* melt/generated/warmelt-macro+05.cc: Regenerate.
	* melt/generated/warmelt-macro+06.cc: Regenerate.
	* melt/generated/warmelt-macro+07.cc: Regenerate.
	* melt/generated/warmelt-macro.cc: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+01.cc: Regenerate.
	* melt/generated/warmelt-normal+02.cc: Regenerate.
	* melt/generated/warmelt-normal+03.cc: Regenerate.
	* melt/generated/warmelt-normal+04.cc: Regenerate.
	* melt/generated/warmelt-normal+05.cc: Regenerate.
	* melt/generated/warmelt-normal+06.cc: Regenerate.
	* melt/generated/warmelt-normal.cc: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+01.cc: Regenerate.
	* melt/generated/warmelt-outobj+02.cc: Regenerate.
	* melt/generated/warmelt-outobj+03.cc: Regenerate.
	* melt/generated/warmelt-outobj+04.cc: Regenerate.
	* melt/generated/warmelt-outobj+05.cc: Regenerate.
	* melt/generated/warmelt-outobj+06.cc: Regenerate.
	* melt/generated/warmelt-outobj+07.cc: Regenerate.
	* melt/generated/warmelt-outobj.cc: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.


2013-09-04  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-outobj.melt (output_predef): Don't use obpredef but
	obpr.

2013-09-04  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-normal.melt: More replacing of old error messages
	with error_at...

2013-09-03  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-macro.melt (diagnostic_args_macro): Increment the
	argument counter before updating the vector, not after...

2013-09-03  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-normal.melt: Start replacing old error messages
	with error_at...

2013-09-03  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/warmelt-base+01.cc: Regenerate.
	* melt/generated/warmelt-base+02.cc: Regenerate.
	* melt/generated/warmelt-base.cc: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+01.cc: Regenerate.
	* melt/generated/warmelt-debug+02.cc: Regenerate.
	* melt/generated/warmelt-debug.cc: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+01.cc: Regenerate.
	* melt/generated/warmelt-first+02.cc: Regenerate.
	* melt/generated/warmelt-first.cc: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.cc: Regenerate.
	* melt/generated/warmelt-genobj+02.cc: Regenerate.
	* melt/generated/warmelt-genobj+03.cc: Regenerate.
	* melt/generated/warmelt-genobj+04.cc: Regenerate.
	* melt/generated/warmelt-genobj+05.cc: Regenerate.
	* melt/generated/warmelt-genobj+06.cc: Regenerate.
	* melt/generated/warmelt-genobj+07.cc: Regenerate.
	* melt/generated/warmelt-genobj.cc: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+01.cc: Regenerate.
	* melt/generated/warmelt-hooks+02.cc: Regenerate.
	* melt/generated/warmelt-hooks+03.cc: Regenerate.
	* melt/generated/warmelt-hooks.cc: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+01.cc: Regenerate.
	* melt/generated/warmelt-macro+02.cc: Regenerate.
	* melt/generated/warmelt-macro+03.cc: Regenerate.
	* melt/generated/warmelt-macro+04.cc: Regenerate.
	* melt/generated/warmelt-macro+05.cc: Regenerate.
	* melt/generated/warmelt-macro+06.cc: Regenerate.
	* melt/generated/warmelt-macro+07.cc: Regenerate.
	* melt/generated/warmelt-macro.cc: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+01.cc: Regenerate.
	* melt/generated/warmelt-modes+02.cc: Regenerate.
	* melt/generated/warmelt-modes+03.cc: Regenerate.
	* melt/generated/warmelt-modes.cc: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+01.cc: Regenerate.
	* melt/generated/warmelt-normal+02.cc: Regenerate.
	* melt/generated/warmelt-normal+03.cc: Regenerate.
	* melt/generated/warmelt-normal+04.cc: Regenerate.
	* melt/generated/warmelt-normal+05.cc: Regenerate.
	* melt/generated/warmelt-normal+06.cc: Regenerate.
	* melt/generated/warmelt-normal.cc: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+01.cc: Regenerate.
	* melt/generated/warmelt-normatch+02.cc: Regenerate.
	* melt/generated/warmelt-normatch+03.cc: Regenerate.
	* melt/generated/warmelt-normatch+04.cc: Regenerate.
	* melt/generated/warmelt-normatch+05.cc: Regenerate.
	* melt/generated/warmelt-normatch+06.cc: Regenerate.
	* melt/generated/warmelt-normatch.cc: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+01.cc: Regenerate.
	* melt/generated/warmelt-outobj+02.cc: Regenerate.
	* melt/generated/warmelt-outobj+03.cc: Regenerate.
	* melt/generated/warmelt-outobj+04.cc: Regenerate.
	* melt/generated/warmelt-outobj+05.cc: Regenerate.
	* melt/generated/warmelt-outobj+06.cc: Regenerate.
	* melt/generated/warmelt-outobj+07.cc: Regenerate.
	* melt/generated/warmelt-outobj.cc: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-09-03  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-macro.melt (error, warning, inform): Rename
	functions as ...
	(error_at, warning_at, inform_at): New names.


2013-09-03  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.h (MELT_FLEXIBLE_DIM): Define as 1 for standard
	compliance.

2013-09-03  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-macro.melt (error, warning, inform): New variadic
	functions.

2013-09-03  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}
	* melt/generated/warmelt-base+01.cc: Regenerate.
	* melt/generated/warmelt-base+02.cc: Regenerate.
	* melt/generated/warmelt-base.cc: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+01.cc: Regenerate.
	* melt/generated/warmelt-debug+02.cc: Regenerate.
	* melt/generated/warmelt-debug.cc: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+01.cc: Regenerate.
	* melt/generated/warmelt-first+02.cc: Regenerate.
	* melt/generated/warmelt-first.cc: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.cc: Regenerate.
	* melt/generated/warmelt-genobj+02.cc: Regenerate.
	* melt/generated/warmelt-genobj+03.cc: Regenerate.
	* melt/generated/warmelt-genobj+04.cc: Regenerate.
	* melt/generated/warmelt-genobj+05.cc: Regenerate.
	* melt/generated/warmelt-genobj+06.cc: Regenerate.
	* melt/generated/warmelt-genobj+07.cc: Regenerate.
	* melt/generated/warmelt-genobj.cc: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+01.cc: Regenerate.
	* melt/generated/warmelt-hooks+02.cc: Regenerate.
	* melt/generated/warmelt-hooks+03.cc: Regenerate.
	* melt/generated/warmelt-hooks.cc: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+01.cc: Regenerate.
	* melt/generated/warmelt-macro+02.cc: Regenerate.
	* melt/generated/warmelt-macro+03.cc: Regenerate.
	* melt/generated/warmelt-macro+04.cc: Regenerate.
	* melt/generated/warmelt-macro+05.cc: Regenerate.
	* melt/generated/warmelt-macro+06.cc: Regenerate.
	* melt/generated/warmelt-macro+07.cc: Regenerate.
	* melt/generated/warmelt-macro.cc: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+01.cc: Regenerate.
	* melt/generated/warmelt-modes+02.cc: Regenerate.
	* melt/generated/warmelt-modes+03.cc: Regenerate.
	* melt/generated/warmelt-modes.cc: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+01.cc: Regenerate.
	* melt/generated/warmelt-normal+02.cc: Regenerate.
	* melt/generated/warmelt-normal+03.cc: Regenerate.
	* melt/generated/warmelt-normal+04.cc: Regenerate.
	* melt/generated/warmelt-normal+05.cc: Regenerate.
	* melt/generated/warmelt-normal+06.cc: Regenerate.
	* melt/generated/warmelt-normal.cc: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+01.cc: Regenerate.
	* melt/generated/warmelt-normatch+02.cc: Regenerate.
	* melt/generated/warmelt-normatch+03.cc: Regenerate.
	* melt/generated/warmelt-normatch+04.cc: Regenerate.
	* melt/generated/warmelt-normatch+05.cc: Regenerate.
	* melt/generated/warmelt-normatch+06.cc: Regenerate.
	* melt/generated/warmelt-normatch.cc: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+01.cc: Regenerate.
	* melt/generated/warmelt-outobj+02.cc: Regenerate.
	* melt/generated/warmelt-outobj+03.cc: Regenerate.
	* melt/generated/warmelt-outobj+04.cc: Regenerate.
	* melt/generated/warmelt-outobj+05.cc: Regenerate.
	* melt/generated/warmelt-outobj+06.cc: Regenerate.
	* melt/generated/warmelt-outobj+07.cc: Regenerate.
	* melt/generated/warmelt-outobj.cc: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-09-03  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Caveat: warmelt-base.melt cannot contain defmacro or backquote
	so diagnostics support has moved}}
	* melt/warmelt-base.melt: Add comment that defmacro and backquote
	cannot be used in this file, so diagnostic support is moved to
	warmelt-macro.melt file...
	(diagv_gimple, diagv_gimple_seq, diagv_tree, diagv_basic_block)
	(diagv_edge, register_diag_gimple, register_diag_gimple_seq)
	(register_diag_tree, register_diag_edge, class_diagnostic_state)
	(discr_diagnostic_closure, diagnostic_args_macro): Remove and
	moved to warmelt-macro.melt file...

	* melt/warmelt-macro.melt: Diagnostic support moved from
	warmelt-base.melt file...
	(diagv_gimple, diagv_gimple_seq, diagv_tree, diagv_basic_block)
	(diagv_edge, register_diag_gimple, register_diag_gimple_seq)
	(register_diag_tree, register_diag_edge, class_diagnostic_state)
	(discr_diagnostic_closure, diagnostic_args_macro): New and
	moved from warmelt-base.melt file...

2013-09-03  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-first.melt (hook_symbol_importer): Show a backtrace
	on failure.

	* melt/xtramelt-playground.melt (play_error): New function...

2013-09-03  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/meltrunsup-inc.cc: Regenerate.
	* melt/generated/warmelt-base+01.cc: Regenerate.
	* melt/generated/warmelt-base+02.cc: Regenerate.
	* melt/generated/warmelt-base.cc: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+01.cc: Regenerate.
	* melt/generated/warmelt-debug+02.cc: Regenerate.
	* melt/generated/warmelt-debug.cc: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+01.cc: Regenerate.
	* melt/generated/warmelt-first+02.cc: Regenerate.
	* melt/generated/warmelt-first.cc: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.cc: Regenerate.
	* melt/generated/warmelt-genobj+02.cc: Regenerate.
	* melt/generated/warmelt-genobj+03.cc: Regenerate.
	* melt/generated/warmelt-genobj+04.cc: Regenerate.
	* melt/generated/warmelt-genobj+05.cc: Regenerate.
	* melt/generated/warmelt-genobj+06.cc: Regenerate.
	* melt/generated/warmelt-genobj+07.cc: Regenerate.
	* melt/generated/warmelt-genobj.cc: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+01.cc: Regenerate.
	* melt/generated/warmelt-hooks+02.cc: Regenerate.
	* melt/generated/warmelt-hooks+03.cc: Regenerate.
	* melt/generated/warmelt-hooks.cc: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+01.cc: Regenerate.
	* melt/generated/warmelt-macro+02.cc: Regenerate.
	* melt/generated/warmelt-macro+03.cc: Regenerate.
	* melt/generated/warmelt-macro+04.cc: Regenerate.
	* melt/generated/warmelt-macro+05.cc: Regenerate.
	* melt/generated/warmelt-macro+06.cc: Regenerate.
	* melt/generated/warmelt-macro+07.cc: Regenerate.
	* melt/generated/warmelt-macro.cc: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+01.cc: Regenerate.
	* melt/generated/warmelt-modes+02.cc: Regenerate.
	* melt/generated/warmelt-modes+03.cc: Regenerate.
	* melt/generated/warmelt-modes.cc: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+01.cc: Regenerate.
	* melt/generated/warmelt-normal+02.cc: Regenerate.
	* melt/generated/warmelt-normal+03.cc: Regenerate.
	* melt/generated/warmelt-normal+04.cc: Regenerate.
	* melt/generated/warmelt-normal+05.cc: Regenerate.
	* melt/generated/warmelt-normal+06.cc: Regenerate.
	* melt/generated/warmelt-normal.cc: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+01.cc: Regenerate.
	* melt/generated/warmelt-normatch+02.cc: Regenerate.
	* melt/generated/warmelt-normatch+03.cc: Regenerate.
	* melt/generated/warmelt-normatch+04.cc: Regenerate.
	* melt/generated/warmelt-normatch+05.cc: Regenerate.
	* melt/generated/warmelt-normatch+06.cc: Regenerate.
	* melt/generated/warmelt-normatch.cc: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+01.cc: Regenerate.
	* melt/generated/warmelt-outobj+02.cc: Regenerate.
	* melt/generated/warmelt-outobj+03.cc: Regenerate.
	* melt/generated/warmelt-outobj+04.cc: Regenerate.
	* melt/generated/warmelt-outobj+05.cc: Regenerate.
	* melt/generated/warmelt-outobj+06.cc: Regenerate.
	* melt/generated/warmelt-outobj+07.cc: Regenerate.
	* melt/generated/warmelt-outobj.cc: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-09-03  Basile Starynkevitch  <basile@starynkevitch.net>

	* testsuite/melt/tmacro-2.melt: New test file, which works.
	* melt/warmelt-base.melt (diagnostic_args_macro): More debug.

2013-09-03  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-base.melt (class_diagnostic_state): Add
	diag_position field.
	(discr_diagnostic_closure): New exported discriminant.
	(diagnostic_args_macro): Improve to use it.
	(diagnostic_expand_message): New exported function.

2013-09-03  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-modes.melt (makedoc_genoutput) output a temporary
	file on error to avoid overwriting the previously generated
	documentation.

2013-09-02  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}
	* melt/generated/meltrunsup-inc.cc: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.cc: Regenerate.
	* melt/generated/warmelt-base+02.cc: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.cc: Regenerate.
	* melt/generated/warmelt-debug+01.cc: Regenerate.
	* melt/generated/warmelt-debug+02.cc: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.cc: Regenerate.
	* melt/generated/warmelt-first+01.cc: Regenerate.
	* melt/generated/warmelt-first+02.cc: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.cc: Regenerate.
	* melt/generated/warmelt-genobj+01.cc: Regenerate.
	* melt/generated/warmelt-genobj+02.cc: Regenerate.
	* melt/generated/warmelt-genobj+03.cc: Regenerate.
	* melt/generated/warmelt-genobj+04.cc: Regenerate.
	* melt/generated/warmelt-genobj+05.cc: Regenerate.
	* melt/generated/warmelt-genobj+06.cc: Regenerate.
	* melt/generated/warmelt-genobj+07.cc: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.cc: Regenerate.
	* melt/generated/warmelt-hooks+01.cc: Regenerate.
	* melt/generated/warmelt-hooks+02.cc: Regenerate.
	* melt/generated/warmelt-hooks+03.cc: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.cc: Regenerate.
	* melt/generated/warmelt-macro+01.cc: Regenerate.
	* melt/generated/warmelt-macro+02.cc: Regenerate.
	* melt/generated/warmelt-macro+03.cc: Regenerate.
	* melt/generated/warmelt-macro+04.cc: Regenerate.
	* melt/generated/warmelt-macro+05.cc: Regenerate.
	* melt/generated/warmelt-macro+06.cc: Regenerate.
	* melt/generated/warmelt-macro+07.cc: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.cc: Regenerate.
	* melt/generated/warmelt-modes+01.cc: Regenerate.
	* melt/generated/warmelt-modes+02.cc: Regenerate.
	* melt/generated/warmelt-modes+03.cc: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.cc: Regenerate.
	* melt/generated/warmelt-normal+01.cc: Regenerate.
	* melt/generated/warmelt-normal+02.cc: Regenerate.
	* melt/generated/warmelt-normal+03.cc: Regenerate.
	* melt/generated/warmelt-normal+04.cc: Regenerate.
	* melt/generated/warmelt-normal+05.cc: Regenerate.
	* melt/generated/warmelt-normal+06.cc: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.cc: Regenerate.
	* melt/generated/warmelt-normatch+01.cc: Regenerate.
	* melt/generated/warmelt-normatch+02.cc: Regenerate.
	* melt/generated/warmelt-normatch+03.cc: Regenerate.
	* melt/generated/warmelt-normatch+04.cc: Regenerate.
	* melt/generated/warmelt-normatch+05.cc: Regenerate.
	* melt/generated/warmelt-normatch+06.cc: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.cc: Regenerate.
	* melt/generated/warmelt-outobj+01.cc: Regenerate.
	* melt/generated/warmelt-outobj+02.cc: Regenerate.
	* melt/generated/warmelt-outobj+03.cc: Regenerate.
	* melt/generated/warmelt-outobj+04.cc: Regenerate.
	* melt/generated/warmelt-outobj+05.cc: Regenerate.
	* melt/generated/warmelt-outobj+06.cc: Regenerate.
	* melt/generated/warmelt-outobj+07.cc: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.cc: Regenerate.

2013-09-02  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-macro.melt (melt_make_sexpr): Handle location
	values by emitting a hook_melt_make_location call.

2013-09-02  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-macro.melt (melt_make_sexpr): More debug.

2013-09-02  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}
	* melt/generated/warmelt-base+01.cc: Regenerate.
	* melt/generated/warmelt-base+02.cc: Regenerate.
	* melt/generated/warmelt-base.cc: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+01.cc: Regenerate.
	* melt/generated/warmelt-debug+02.cc: Regenerate.
	* melt/generated/warmelt-debug.cc: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+01.cc: Regenerate.
	* melt/generated/warmelt-first+02.cc: Regenerate.
	* melt/generated/warmelt-first.cc: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.cc: Regenerate.
	* melt/generated/warmelt-genobj+02.cc: Regenerate.
	* melt/generated/warmelt-genobj+03.cc: Regenerate.
	* melt/generated/warmelt-genobj+04.cc: Regenerate.
	* melt/generated/warmelt-genobj+05.cc: Regenerate.
	* melt/generated/warmelt-genobj+06.cc: Regenerate.
	* melt/generated/warmelt-genobj+07.cc: Regenerate.
	* melt/generated/warmelt-genobj.cc: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+01.cc: Regenerate.
	* melt/generated/warmelt-hooks+02.cc: Regenerate.
	* melt/generated/warmelt-hooks+03.cc: Regenerate.
	* melt/generated/warmelt-hooks.cc: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+01.cc: Regenerate.
	* melt/generated/warmelt-macro+02.cc: Regenerate.
	* melt/generated/warmelt-macro+03.cc: Regenerate.
	* melt/generated/warmelt-macro+04.cc: Regenerate.
	* melt/generated/warmelt-macro+05.cc: Regenerate.
	* melt/generated/warmelt-macro+06.cc: Regenerate.
	* melt/generated/warmelt-macro+07.cc: Regenerate.
	* melt/generated/warmelt-macro.cc: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+01.cc: Regenerate.
	* melt/generated/warmelt-modes+02.cc: Regenerate.
	* melt/generated/warmelt-modes+03.cc: Regenerate.
	* melt/generated/warmelt-modes.cc: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+01.cc: Regenerate.
	* melt/generated/warmelt-normal+02.cc: Regenerate.
	* melt/generated/warmelt-normal+03.cc: Regenerate.
	* melt/generated/warmelt-normal+04.cc: Regenerate.
	* melt/generated/warmelt-normal+05.cc: Regenerate.
	* melt/generated/warmelt-normal+06.cc: Regenerate.
	* melt/generated/warmelt-normal.cc: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+01.cc: Regenerate.
	* melt/generated/warmelt-normatch+02.cc: Regenerate.
	* melt/generated/warmelt-normatch+03.cc: Regenerate.
	* melt/generated/warmelt-normatch+04.cc: Regenerate.
	* melt/generated/warmelt-normatch+05.cc: Regenerate.
	* melt/generated/warmelt-normatch+06.cc: Regenerate.
	* melt/generated/warmelt-normatch.cc: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+01.cc: Regenerate.
	* melt/generated/warmelt-outobj+02.cc: Regenerate.
	* melt/generated/warmelt-outobj+03.cc: Regenerate.
	* melt/generated/warmelt-outobj+04.cc: Regenerate.
	* melt/generated/warmelt-outobj+05.cc: Regenerate.
	* melt/generated/warmelt-outobj+06.cc: Regenerate.
	* melt/generated/warmelt-outobj+07.cc: Regenerate.
	* melt/generated/warmelt-outobj.cc: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-09-02  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-outobj.melt (outpucod_initialextensionroutine):
	Define and use the omodcname for emission of module related
	identifiers.

2013-09-02  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}
	* melt/generated/warmelt-base+01.cc: Regenerate.
	* melt/generated/warmelt-base+02.cc: Regenerate.
	* melt/generated/warmelt-base.cc: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+01.cc: Regenerate.
	* melt/generated/warmelt-debug+02.cc: Regenerate.
	* melt/generated/warmelt-debug.cc: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+01.cc: Regenerate.
	* melt/generated/warmelt-first+02.cc: Regenerate.
	* melt/generated/warmelt-first.cc: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.cc: Regenerate.
	* melt/generated/warmelt-genobj+02.cc: Regenerate.
	* melt/generated/warmelt-genobj+03.cc: Regenerate.
	* melt/generated/warmelt-genobj+04.cc: Regenerate.
	* melt/generated/warmelt-genobj+05.cc: Regenerate.
	* melt/generated/warmelt-genobj+06.cc: Regenerate.
	* melt/generated/warmelt-genobj+07.cc: Regenerate.
	* melt/generated/warmelt-genobj.cc: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+01.cc: Regenerate.
	* melt/generated/warmelt-hooks+02.cc: Regenerate.
	* melt/generated/warmelt-hooks+03.cc: Regenerate.
	* melt/generated/warmelt-hooks.cc: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+01.cc: Regenerate.
	* melt/generated/warmelt-macro+02.cc: Regenerate.
	* melt/generated/warmelt-macro+03.cc: Regenerate.
	* melt/generated/warmelt-macro+04.cc: Regenerate.
	* melt/generated/warmelt-macro+05.cc: Regenerate.
	* melt/generated/warmelt-macro+06.cc: Regenerate.
	* melt/generated/warmelt-macro+07.cc: Regenerate.
	* melt/generated/warmelt-macro.cc: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+01.cc: Regenerate.
	* melt/generated/warmelt-modes+02.cc: Regenerate.
	* melt/generated/warmelt-modes+03.cc: Regenerate.
	* melt/generated/warmelt-modes.cc: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+01.cc: Regenerate.
	* melt/generated/warmelt-normal+02.cc: Regenerate.
	* melt/generated/warmelt-normal+03.cc: Regenerate.
	* melt/generated/warmelt-normal+04.cc: Regenerate.
	* melt/generated/warmelt-normal+05.cc: Regenerate.
	* melt/generated/warmelt-normal+06.cc: Regenerate.
	* melt/generated/warmelt-normal.cc: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+01.cc: Regenerate.
	* melt/generated/warmelt-normatch+02.cc: Regenerate.
	* melt/generated/warmelt-normatch+03.cc: Regenerate.
	* melt/generated/warmelt-normatch+04.cc: Regenerate.
	* melt/generated/warmelt-normatch+05.cc: Regenerate.
	* melt/generated/warmelt-normatch+06.cc: Regenerate.
	* melt/generated/warmelt-normatch.cc: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+01.cc: Regenerate.
	* melt/generated/warmelt-outobj+02.cc: Regenerate.
	* melt/generated/warmelt-outobj+03.cc: Regenerate.
	* melt/generated/warmelt-outobj+04.cc: Regenerate.
	* melt/generated/warmelt-outobj+05.cc: Regenerate.
	* melt/generated/warmelt-outobj+06.cc: Regenerate.
	* melt/generated/warmelt-outobj+07.cc: Regenerate.
	* melt/generated/warmelt-outobj.cc: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-09-02  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-base.melt (class_diagnostic_state): New class with
	fields diag_vec and diag_state.
	(diagnostic_args_macro): Improve.

2013-09-02  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/meltrunsup-inc.cc: Regenerate.
	* melt/generated/warmelt-base+01.cc: Regenerate.
	* melt/generated/warmelt-base+02.cc: Regenerate.
	* melt/generated/warmelt-base.cc: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+06.cc: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.


2013-09-02  Basile Starynkevitch  <basile@starynkevitch.net>

	* Makefile.in (melt_make_cc1_dependency, check-melt-runtime): Use
	melt-runtime.cc file.

	* melt/warmelt-base.melt (diagnostic_args_macro): Show also the
	sexcont.

2013-09-02  Basile Starynkevitch  <basile@starynkevitch.net>

	* gengtype.c (file_rules): Added rule for *.cc files.
	(get_output_file_with_visibility): Give fatal message when no
	rules found.

	* melt-runtime.c: File renamed as ...

	* melt-runtime.cc: Will use C++ features, so is renamed.

	* Makefile.in (MELT_RUNTIME_C): Becomes melt-runtime.cc ...
	(melt-runtime-params-inc.c): Update comment.

2013-08-09  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerated. Todo: C++ify the runtime. Variadic error & inform in
	MELT. Merge with GCC 4.9 new C++ pass system.}}

	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/meltrunsup-inc.cc: Regenerate.
	* melt/generated/warmelt-base+01.cc: Regenerate.
	* melt/generated/warmelt-base+02.cc: Regenerate.
	* melt/generated/warmelt-base.cc: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+01.cc: Regenerate.
	* melt/generated/warmelt-debug+02.cc: Regenerate.
	* melt/generated/warmelt-debug.cc: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+01.cc: Regenerate.
	* melt/generated/warmelt-first+02.cc: Regenerate.
	* melt/generated/warmelt-first.cc: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.cc: Regenerate.
	* melt/generated/warmelt-genobj+02.cc: Regenerate.
	* melt/generated/warmelt-genobj+03.cc: Regenerate.
	* melt/generated/warmelt-genobj+04.cc: Regenerate.
	* melt/generated/warmelt-genobj+05.cc: Regenerate.
	* melt/generated/warmelt-genobj+06.cc: Regenerate.
	* melt/generated/warmelt-genobj+07.cc: Regenerate.
	* melt/generated/warmelt-genobj.cc: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+01.cc: Regenerate.
	* melt/generated/warmelt-hooks+02.cc: Regenerate.
	* melt/generated/warmelt-hooks+03.cc: Regenerate.
	* melt/generated/warmelt-hooks.cc: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+01.cc: Regenerate.
	* melt/generated/warmelt-macro+02.cc: Regenerate.
	* melt/generated/warmelt-macro+03.cc: Regenerate.
	* melt/generated/warmelt-macro+04.cc: Regenerate.
	* melt/generated/warmelt-macro+05.cc: Regenerate.
	* melt/generated/warmelt-macro+06.cc: Regenerate.
	* melt/generated/warmelt-macro+07.cc: Regenerate.
	* melt/generated/warmelt-macro.cc: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+01.cc: Regenerate.
	* melt/generated/warmelt-modes+02.cc: Regenerate.
	* melt/generated/warmelt-modes+03.cc: Regenerate.
	* melt/generated/warmelt-modes.cc: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+01.cc: Regenerate.
	* melt/generated/warmelt-normal+02.cc: Regenerate.
	* melt/generated/warmelt-normal+03.cc: Regenerate.
	* melt/generated/warmelt-normal+04.cc: Regenerate.
	* melt/generated/warmelt-normal+05.cc: Regenerate.
	* melt/generated/warmelt-normal+06.cc: Regenerate.
	* melt/generated/warmelt-normal.cc: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+01.cc: Regenerate.
	* melt/generated/warmelt-normatch+02.cc: Regenerate.
	* melt/generated/warmelt-normatch+03.cc: Regenerate.
	* melt/generated/warmelt-normatch+04.cc: Regenerate.
	* melt/generated/warmelt-normatch+05.cc: Regenerate.
	* melt/generated/warmelt-normatch+06.cc: Regenerate.
	* melt/generated/warmelt-normatch.cc: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+01.cc: Regenerate.
	* melt/generated/warmelt-outobj+02.cc: Regenerate.
	* melt/generated/warmelt-outobj+03.cc: Regenerate.
	* melt/generated/warmelt-outobj+04.cc: Regenerate.
	* melt/generated/warmelt-outobj+05.cc: Regenerate.
	* melt/generated/warmelt-outobj+06.cc: Regenerate.
	* melt/generated/warmelt-outobj+07.cc: Regenerate.
	* melt/generated/warmelt-outobj.cc: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-08-09  Basile Starynkevitch  <basile@starynkevitch.net>
	{{tmacro-1.melt test works, and also the documentation
	generation; more stable...}}

	* melt-runtime.c (meltgc_send): Improve comment.
	added MELT_LOCATION_HERE_PRINTF when debugging.

	* melt/warmelt-debug.melt (dbgout_list_method): Show the list
	length at depth 0.

	* melt/warmelt-macro.melt
	(melt_invoke_translator_runner_macroexpansions, mexpand_defmacro):
	More debug.

	* melt/warmelt-normal.melt (normexp_defun_defmacro): Return the
	data closure.
	(normexp_macro_installation): Use a local symbol occurrence for
	the closure. Return both the closure and the symbol.

	* melt/warmelt-outobj.melt (output_raw_location): Aborts for
	unexpected location.
	(give_normalized_macroexpanded_list): Handle multiple result of
	normalization by letseq wrapping.


2013-08-08  Basile Starynkevitch  <basile@starynkevitch.net>

	{{tmacro-1.melt test still fails}}
	* melt/warmelt-normal.melt (normexp_defun_defmacro): Return the closure data.
	(normexp_macro_installation): Use it.
	(normexp_definstance, normexp_defselector): Use a foreach_in_multiple loop.

2013-08-08  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup-inc.cc: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.cc: Regenerate.
	* melt/generated/warmelt-base+02.cc: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.cc: Regenerate.
	* melt/generated/warmelt-debug+01.cc: Regenerate.
	* melt/generated/warmelt-debug+02.cc: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.cc: Regenerate.
	* melt/generated/warmelt-first+01.cc: Regenerate.
	* melt/generated/warmelt-first+02.cc: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.cc: Regenerate.
	* melt/generated/warmelt-genobj+01.cc: Regenerate.
	* melt/generated/warmelt-genobj+02.cc: Regenerate.
	* melt/generated/warmelt-genobj+03.cc: Regenerate.
	* melt/generated/warmelt-genobj+04.cc: Regenerate.
	* melt/generated/warmelt-genobj+05.cc: Regenerate.
	* melt/generated/warmelt-genobj+06.cc: Regenerate.
	* melt/generated/warmelt-genobj+07.cc: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.cc: Regenerate.
	* melt/generated/warmelt-hooks+01.cc: Regenerate.
	* melt/generated/warmelt-hooks+02.cc: Regenerate.
	* melt/generated/warmelt-hooks+03.cc: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.cc: Regenerate.
	* melt/generated/warmelt-macro+01.cc: Regenerate.
	* melt/generated/warmelt-macro+02.cc: Regenerate.
	* melt/generated/warmelt-macro+03.cc: Regenerate.
	* melt/generated/warmelt-macro+04.cc: Regenerate.
	* melt/generated/warmelt-macro+05.cc: Regenerate.
	* melt/generated/warmelt-macro+06.cc: Regenerate.
	* melt/generated/warmelt-macro+07.cc: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.cc: Regenerate.
	* melt/generated/warmelt-modes+01.cc: Regenerate.
	* melt/generated/warmelt-modes+02.cc: Regenerate.
	* melt/generated/warmelt-modes+03.cc: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.cc: Regenerate.
	* melt/generated/warmelt-normal+01.cc: Regenerate.
	* melt/generated/warmelt-normal+02.cc: Regenerate.
	* melt/generated/warmelt-normal+03.cc: Regenerate.
	* melt/generated/warmelt-normal+04.cc: Regenerate.
	* melt/generated/warmelt-normal+05.cc: Regenerate.
	* melt/generated/warmelt-normal+06.cc: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.cc: Regenerate.
	* melt/generated/warmelt-normatch+01.cc: Regenerate.
	* melt/generated/warmelt-normatch+02.cc: Regenerate.
	* melt/generated/warmelt-normatch+03.cc: Regenerate.
	* melt/generated/warmelt-normatch+04.cc: Regenerate.
	* melt/generated/warmelt-normatch+05.cc: Regenerate.
	* melt/generated/warmelt-normatch+06.cc: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.cc: Regenerate.
	* melt/generated/warmelt-outobj+01.cc: Regenerate.
	* melt/generated/warmelt-outobj+02.cc: Regenerate.
	* melt/generated/warmelt-outobj+03.cc: Regenerate.
	* melt/generated/warmelt-outobj+04.cc: Regenerate.
	* melt/generated/warmelt-outobj+05.cc: Regenerate.
	* melt/generated/warmelt-outobj+06.cc: Regenerate.
	* melt/generated/warmelt-outobj+07.cc: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.cc: Regenerate.


2013-08-08  Basile Starynkevitch  <basile@starynkevitch.net>
	{{tmacro-1.melt test fails}}
	* melt/warmelt-macro.melt (melt_translate_run_macroexpansions_list): Better debug.
	* melt/warmelt-outobj.melt
	(melt_translate_run_macroexpansions_list): Improve debug.

2013-08-08  Basile Starynkevitch  <basile@starynkevitch.net>
	{{simple eval works again. gendoc mode & tmacro-1.melt test still failing}}
	* melt/warmelt-outobj.melt (normalize_macroexpanded_list): Remove,
	since replaced by ...
	(give_normalized_macroexpanded_list): New function, with slightly
	different role and interface than old
	normalize_macroexpanded_list, in particular no side effects on the
	initial procedure's toplevel list.
	(translate_macroexpanded_list): Use above function.
	(autobox_normal_return): Change the interface.
	(translate_run_melt_expressions): Simplified its normalextend internal function.
	(melt_translate_run_macroexpansions_list): Remove its normalextend
	internal function.

2013-08-08  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.c (meltgc_run_cc_extension): Better location for
	MELT_LOCATION_HERE_PRINTF.

	* melt/warmelt-macro.melt (hook_macro_installer): Improve asserts.

	* melt/warmelt-outobj.melt (normalize_macroexpanded_list): Improve
	check of nbinds.  Actually, the normalize_macroexpanded_list
	function both fills the ninit_topl and return a value, and doing
	both is wrong.

2013-08-08  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate but unstable}}
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/meltrunsup-inc.cc: Regenerate.
	* melt/generated/warmelt-base+01.cc: Regenerate.
	* melt/generated/warmelt-base+02.cc: Regenerate.
	* melt/generated/warmelt-base.cc: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+01.cc: Regenerate.
	* melt/generated/warmelt-debug+02.cc: Regenerate.
	* melt/generated/warmelt-debug.cc: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+01.cc: Regenerate.
	* melt/generated/warmelt-first+02.cc: Regenerate.
	* melt/generated/warmelt-first.cc: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.cc: Regenerate.
	* melt/generated/warmelt-genobj+02.cc: Regenerate.
	* melt/generated/warmelt-genobj+03.cc: Regenerate.
	* melt/generated/warmelt-genobj+04.cc: Regenerate.
	* melt/generated/warmelt-genobj+05.cc: Regenerate.
	* melt/generated/warmelt-genobj+06.cc: Regenerate.
	* melt/generated/warmelt-genobj+07.cc: Regenerate.
	* melt/generated/warmelt-genobj.cc: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+01.cc: Regenerate.
	* melt/generated/warmelt-hooks+02.cc: Regenerate.
	* melt/generated/warmelt-hooks+03.cc: Regenerate.
	* melt/generated/warmelt-hooks.cc: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+01.cc: Regenerate.
	* melt/generated/warmelt-macro+02.cc: Regenerate.
	* melt/generated/warmelt-macro+03.cc: Regenerate.
	* melt/generated/warmelt-macro+04.cc: Regenerate.
	* melt/generated/warmelt-macro+05.cc: Regenerate.
	* melt/generated/warmelt-macro+06.cc: Regenerate.
	* melt/generated/warmelt-macro+07.cc: Regenerate.
	* melt/generated/warmelt-macro.cc: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+01.cc: Regenerate.
	* melt/generated/warmelt-modes+02.cc: Regenerate.
	* melt/generated/warmelt-modes+03.cc: Regenerate.
	* melt/generated/warmelt-modes.cc: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+01.cc: Regenerate.
	* melt/generated/warmelt-normal+02.cc: Regenerate.
	* melt/generated/warmelt-normal+03.cc: Regenerate.
	* melt/generated/warmelt-normal+04.cc: Regenerate.
	* melt/generated/warmelt-normal+05.cc: Regenerate.
	* melt/generated/warmelt-normal+06.cc: Regenerate.
	* melt/generated/warmelt-normal.cc: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+01.cc: Regenerate.
	* melt/generated/warmelt-normatch+02.cc: Regenerate.
	* melt/generated/warmelt-normatch+03.cc: Regenerate.
	* melt/generated/warmelt-normatch+04.cc: Regenerate.
	* melt/generated/warmelt-normatch+05.cc: Regenerate.
	* melt/generated/warmelt-normatch+06.cc: Regenerate.
	* melt/generated/warmelt-normatch.cc: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+01.cc: Regenerate.
	* melt/generated/warmelt-outobj+02.cc: Regenerate.
	* melt/generated/warmelt-outobj+03.cc: Regenerate.
	* melt/generated/warmelt-outobj+04.cc: Regenerate.
	* melt/generated/warmelt-outobj+05.cc: Regenerate.
	* melt/generated/warmelt-outobj+06.cc: Regenerate.
	* melt/generated/warmelt-outobj+07.cc: Regenerate.
	* melt/generated/warmelt-outobj.cc: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-08-08  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-macro.melt (assert_msg): Update comment and
	documentation...

	* melt/warmelt-hooks.melt (hook_low_stderr_value_at): Increase the
	maxdepth.

	* melt/warmelt-outobj.melt (normalize_macroexpanded_list):
	Probably still buggy but slightly improved.

2013-08-07  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerated but unstable}}

	* melt/generated/meltrunsup-inc.cc: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.cc: Regenerate.
	* melt/generated/warmelt-base+02.cc: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.cc: Regenerate.
	* melt/generated/warmelt-debug+01.cc: Regenerate.
	* melt/generated/warmelt-debug+02.cc: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.cc: Regenerate.
	* melt/generated/warmelt-first+01.cc: Regenerate.
	* melt/generated/warmelt-first+02.cc: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.cc: Regenerate.
	* melt/generated/warmelt-genobj+01.cc: Regenerate.
	* melt/generated/warmelt-genobj+02.cc: Regenerate.
	* melt/generated/warmelt-genobj+03.cc: Regenerate.
	* melt/generated/warmelt-genobj+04.cc: Regenerate.
	* melt/generated/warmelt-genobj+05.cc: Regenerate.
	* melt/generated/warmelt-genobj+06.cc: Regenerate.
	* melt/generated/warmelt-genobj+07.cc: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.cc: Regenerate.
	* melt/generated/warmelt-hooks+01.cc: Regenerate.
	* melt/generated/warmelt-hooks+02.cc: Regenerate.
	* melt/generated/warmelt-hooks+03.cc: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.cc: Regenerate.
	* melt/generated/warmelt-macro+01.cc: Regenerate.
	* melt/generated/warmelt-macro+02.cc: Regenerate.
	* melt/generated/warmelt-macro+03.cc: Regenerate.
	* melt/generated/warmelt-macro+04.cc: Regenerate.
	* melt/generated/warmelt-macro+05.cc: Regenerate.
	* melt/generated/warmelt-macro+06.cc: Regenerate.
	* melt/generated/warmelt-macro+07.cc: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.cc: Regenerate.
	* melt/generated/warmelt-modes+01.cc: Regenerate.
	* melt/generated/warmelt-modes+02.cc: Regenerate.
	* melt/generated/warmelt-modes+03.cc: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.cc: Regenerate.
	* melt/generated/warmelt-normal+01.cc: Regenerate.
	* melt/generated/warmelt-normal+02.cc: Regenerate.
	* melt/generated/warmelt-normal+03.cc: Regenerate.
	* melt/generated/warmelt-normal+04.cc: Regenerate.
	* melt/generated/warmelt-normal+05.cc: Regenerate.
	* melt/generated/warmelt-normal+06.cc: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.cc: Regenerate.
	* melt/generated/warmelt-normatch+01.cc: Regenerate.
	* melt/generated/warmelt-normatch+02.cc: Regenerate.
	* melt/generated/warmelt-normatch+03.cc: Regenerate.
	* melt/generated/warmelt-normatch+04.cc: Regenerate.
	* melt/generated/warmelt-normatch+05.cc: Regenerate.
	* melt/generated/warmelt-normatch+06.cc: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.cc: Regenerate.
	* melt/generated/warmelt-outobj+01.cc: Regenerate.
	* melt/generated/warmelt-outobj+02.cc: Regenerate.
	* melt/generated/warmelt-outobj+03.cc: Regenerate.
	* melt/generated/warmelt-outobj+04.cc: Regenerate.
	* melt/generated/warmelt-outobj+05.cc: Regenerate.
	* melt/generated/warmelt-outobj+06.cc: Regenerate.
	* melt/generated/warmelt-outobj+07.cc: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.cc: Regenerate.

2013-08-07  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Still unstable}}
	* melt/warmelt-debug.melt (dbgout_environment_method): Also write
	the depth and width of the environment in all cases...

	* melt/warmelt-normal.melt (normexp_symbol): Better assert.

	* melt/warmelt-outobj.melt (normalize_macroexpanded_list): More
	debug, but probably still buggy.
	(translate_macroexpanded_list, translate_run_melt_expressions):
	More debug, but still buggy perhaps...

	* melt/xtramelt-playground.melt (play_foo): Temporary new function.

2013-08-07  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-outobj.melt (normalize_macroexpanded_list)
	(translate_macroexpanded_list): More debug.

2013-08-06  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerated but unstable}}
	* melt/generated/meltrunsup-inc.cc: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.cc: Regenerate.
	* melt/generated/warmelt-base+02.cc: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.cc: Regenerate.
	* melt/generated/warmelt-debug+01.cc: Regenerate.
	* melt/generated/warmelt-debug+02.cc: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.cc: Regenerate.
	* melt/generated/warmelt-first+01.cc: Regenerate.
	* melt/generated/warmelt-first+02.cc: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.cc: Regenerate.
	* melt/generated/warmelt-genobj+01.cc: Regenerate.
	* melt/generated/warmelt-genobj+02.cc: Regenerate.
	* melt/generated/warmelt-genobj+03.cc: Regenerate.
	* melt/generated/warmelt-genobj+04.cc: Regenerate.
	* melt/generated/warmelt-genobj+05.cc: Regenerate.
	* melt/generated/warmelt-genobj+06.cc: Regenerate.
	* melt/generated/warmelt-genobj+07.cc: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.cc: Regenerate.
	* melt/generated/warmelt-hooks+01.cc: Regenerate.
	* melt/generated/warmelt-hooks+02.cc: Regenerate.
	* melt/generated/warmelt-hooks+03.cc: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.cc: Regenerate.
	* melt/generated/warmelt-macro+01.cc: Regenerate.
	* melt/generated/warmelt-macro+02.cc: Regenerate.
	* melt/generated/warmelt-macro+03.cc: Regenerate.
	* melt/generated/warmelt-macro+04.cc: Regenerate.
	* melt/generated/warmelt-macro+05.cc: Regenerate.
	* melt/generated/warmelt-macro+06.cc: Regenerate.
	* melt/generated/warmelt-macro+07.cc: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.cc: Regenerate.
	* melt/generated/warmelt-modes+01.cc: Regenerate.
	* melt/generated/warmelt-modes+02.cc: Regenerate.
	* melt/generated/warmelt-modes+03.cc: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.cc: Regenerate.
	* melt/generated/warmelt-normal+01.cc: Regenerate.
	* melt/generated/warmelt-normal+02.cc: Regenerate.
	* melt/generated/warmelt-normal+03.cc: Regenerate.
	* melt/generated/warmelt-normal+04.cc: Regenerate.
	* melt/generated/warmelt-normal+05.cc: Regenerate.
	* melt/generated/warmelt-normal+06.cc: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.cc: Regenerate.
	* melt/generated/warmelt-normatch+01.cc: Regenerate.
	* melt/generated/warmelt-normatch+02.cc: Regenerate.
	* melt/generated/warmelt-normatch+03.cc: Regenerate.
	* melt/generated/warmelt-normatch+04.cc: Regenerate.
	* melt/generated/warmelt-normatch+05.cc: Regenerate.
	* melt/generated/warmelt-normatch+06.cc: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.cc: Regenerate.
	* melt/generated/warmelt-outobj+01.cc: Regenerate.
	* melt/generated/warmelt-outobj+02.cc: Regenerate.
	* melt/generated/warmelt-outobj+03.cc: Regenerate.
	* melt/generated/warmelt-outobj+04.cc: Regenerate.
	* melt/generated/warmelt-outobj+05.cc: Regenerate.
	* melt/generated/warmelt-outobj+06.cc: Regenerate.
	* melt/generated/warmelt-outobj+07.cc: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.cc: Regenerate.

2013-08-06  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Still unstable}}
	* melt/warmelt-normal.melt (create_normal_extending_context): More
	debug.

	* melt/warmelt-outobj.melt (normalize_macroexpanded_list): More
	debug. Add comment about strange code!

2013-08-06  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Still unstable}}
	* melt-runtime.c (meltgc_run_cc_extension): Don't debugeprintf
	each line of the descriptor file.

	* melt/warmelt-genobj.melt (compile2obj_initextendproc): Still
	buggy, probably.

2013-08-02  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Still unstable, added comment about possible bug...}}
	* melt/warmelt-genobj.melt (get_free_objlocptr): More debug.
	(compilobj_nrep_let): More debug. Add comment about possible bug.

	* melt/warmelt-outobj.melt (translate_macroexpanded_list)
	(translate_run_melt_expressions): More debug.

2013-08-02  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerated but unstable, see entry below...}}
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/meltrunsup-inc.cc: Regenerate.
	* melt/generated/warmelt-base+01.cc: Regenerate.
	* melt/generated/warmelt-base+02.cc: Regenerate.
	* melt/generated/warmelt-base.cc: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+01.cc: Regenerate.
	* melt/generated/warmelt-debug+02.cc: Regenerate.
	* melt/generated/warmelt-debug.cc: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+01.cc: Regenerate.
	* melt/generated/warmelt-first+02.cc: Regenerate.
	* melt/generated/warmelt-first.cc: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.cc: Regenerate.
	* melt/generated/warmelt-genobj+02.cc: Regenerate.
	* melt/generated/warmelt-genobj+03.cc: Regenerate.
	* melt/generated/warmelt-genobj+04.cc: Regenerate.
	* melt/generated/warmelt-genobj+05.cc: Regenerate.
	* melt/generated/warmelt-genobj+06.cc: Regenerate.
	* melt/generated/warmelt-genobj+07.cc: Regenerate.
	* melt/generated/warmelt-genobj.cc: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+01.cc: Regenerate.
	* melt/generated/warmelt-hooks+02.cc: Regenerate.
	* melt/generated/warmelt-hooks+03.cc: Regenerate.
	* melt/generated/warmelt-hooks.cc: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+01.cc: Regenerate.
	* melt/generated/warmelt-macro+02.cc: Regenerate.
	* melt/generated/warmelt-macro+03.cc: Regenerate.
	* melt/generated/warmelt-macro+04.cc: Regenerate.
	* melt/generated/warmelt-macro+05.cc: Regenerate.
	* melt/generated/warmelt-macro+06.cc: Regenerate.
	* melt/generated/warmelt-macro+07.cc: Regenerate.
	* melt/generated/warmelt-macro.cc: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+01.cc: Regenerate.
	* melt/generated/warmelt-modes+02.cc: Regenerate.
	* melt/generated/warmelt-modes+03.cc: Regenerate.
	* melt/generated/warmelt-modes.cc: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+01.cc: Regenerate.
	* melt/generated/warmelt-normal+02.cc: Regenerate.
	* melt/generated/warmelt-normal+03.cc: Regenerate.
	* melt/generated/warmelt-normal+04.cc: Regenerate.
	* melt/generated/warmelt-normal+05.cc: Regenerate.
	* melt/generated/warmelt-normal+06.cc: Regenerate.
	* melt/generated/warmelt-normal.cc: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+01.cc: Regenerate.
	* melt/generated/warmelt-normatch+02.cc: Regenerate.
	* melt/generated/warmelt-normatch+03.cc: Regenerate.
	* melt/generated/warmelt-normatch+04.cc: Regenerate.
	* melt/generated/warmelt-normatch+05.cc: Regenerate.
	* melt/generated/warmelt-normatch+06.cc: Regenerate.
	* melt/generated/warmelt-normatch.cc: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+01.cc: Regenerate.
	* melt/generated/warmelt-outobj+02.cc: Regenerate.
	* melt/generated/warmelt-outobj+03.cc: Regenerate.
	* melt/generated/warmelt-outobj+04.cc: Regenerate.
	* melt/generated/warmelt-outobj+05.cc: Regenerate.
	* melt/generated/warmelt-outobj+06.cc: Regenerate.
	* melt/generated/warmelt-outobj+07.cc: Regenerate.
	* melt/generated/warmelt-outobj.cc: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.


2013-08-02  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Unstable, eval of (make_integerbox discr_integer 1) fails}}
	* melt/warmelt-first.melt (melt_assert_failure_fun): Move
	increment of argcount. Now works correctly.

	* melt/warmelt-genobj.melt (compile2obj_initextendproc)
	(dispose_bnd_obj, compilobj locsymocc, compilobj_nrep_letrec): More debug.

2013-08-02  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Unstable}}
	* melt/warmelt-outobj.melt: Done improve assert_msg, etc...

2013-08-02  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Unstable}}
	* melt/warmelt-outobj.melt: Partly improve assert_msg and add
	iterators instead of every_* function

2013-08-02  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Unstable}}
	* melt/warmelt-normal.melt: Finish improve assert_msg.

2013-08-01  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Unstable}}
	* melt/warmelt-normal.melt: More partly improve assert_msg.

2013-08-01  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Unstable}}
	* melt/warmelt-normal.melt: Partly improve assert_msg.

2013-08-01  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-modes.melt: Improve assert_msg.

2013-08-01  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/meltrunsup-inc.cc: Regenerate.
	* melt/generated/warmelt-base+01.cc: Regenerate.
	* melt/generated/warmelt-base+02.cc: Regenerate.
	* melt/generated/warmelt-base.cc: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+01.cc: Regenerate.
	* melt/generated/warmelt-debug+02.cc: Regenerate.
	* melt/generated/warmelt-debug.cc: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+01.cc: Regenerate.
	* melt/generated/warmelt-first+02.cc: Regenerate.
	* melt/generated/warmelt-first.cc: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.cc: Regenerate.
	* melt/generated/warmelt-genobj+02.cc: Regenerate.
	* melt/generated/warmelt-genobj+03.cc: Regenerate.
	* melt/generated/warmelt-genobj+04.cc: Regenerate.
	* melt/generated/warmelt-genobj+05.cc: Regenerate.
	* melt/generated/warmelt-genobj+06.cc: Regenerate.
	* melt/generated/warmelt-genobj+07.cc: Regenerate.
	* melt/generated/warmelt-genobj.cc: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+01.cc: Regenerate.
	* melt/generated/warmelt-hooks+02.cc: Regenerate.
	* melt/generated/warmelt-hooks+03.cc: Regenerate.
	* melt/generated/warmelt-hooks.cc: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+01.cc: Regenerate.
	* melt/generated/warmelt-macro+02.cc: Regenerate.
	* melt/generated/warmelt-macro+03.cc: Regenerate.
	* melt/generated/warmelt-macro+04.cc: Regenerate.
	* melt/generated/warmelt-macro+05.cc: Regenerate.
	* melt/generated/warmelt-macro+06.cc: Regenerate.
	* melt/generated/warmelt-macro+07.cc: Regenerate.
	* melt/generated/warmelt-macro.cc: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+01.cc: Regenerate.
	* melt/generated/warmelt-modes+02.cc: Regenerate.
	* melt/generated/warmelt-modes+03.cc: Regenerate.
	* melt/generated/warmelt-modes.cc: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+01.cc: Regenerate.
	* melt/generated/warmelt-normal+02.cc: Regenerate.
	* melt/generated/warmelt-normal+03.cc: Regenerate.
	* melt/generated/warmelt-normal+04.cc: Regenerate.
	* melt/generated/warmelt-normal+05.cc: Regenerate.
	* melt/generated/warmelt-normal+06.cc: Regenerate.
	* melt/generated/warmelt-normal.cc: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+01.cc: Regenerate.
	* melt/generated/warmelt-normatch+02.cc: Regenerate.
	* melt/generated/warmelt-normatch+03.cc: Regenerate.
	* melt/generated/warmelt-normatch+04.cc: Regenerate.
	* melt/generated/warmelt-normatch+05.cc: Regenerate.
	* melt/generated/warmelt-normatch+06.cc: Regenerate.
	* melt/generated/warmelt-normatch.cc: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+01.cc: Regenerate.
	* melt/generated/warmelt-outobj+02.cc: Regenerate.
	* melt/generated/warmelt-outobj+03.cc: Regenerate.
	* melt/generated/warmelt-outobj+04.cc: Regenerate.
	* melt/generated/warmelt-outobj+05.cc: Regenerate.
	* melt/generated/warmelt-outobj+06.cc: Regenerate.
	* melt/generated/warmelt-outobj+07.cc: Regenerate.
	* melt/generated/warmelt-outobj.cc: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-08-01  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-first.melt (list_to_multiple): Improve.

	* melt/warmelt-base.melt (diagnostic_args_macro): Show on stderr
	when arity error.

	* melt/warmelt-debug.melt (dbgout_mixloc_method)
	(dbgout_mixbigint_method): More verbose output.

	* melt/warmelt-outobj.melt
	(melt_translate_run_macroexpansions_list): Use different names
	parmodctx & newmodctx for the different module contexts.

	* melt/warmelt-modes.melt (makedoc_docmd): The module context gets
	a robust module name.

2013-08-01  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-first.melt (melt_assert_failure_fun): Call
	melthookproc_HOOK_LOW_STDERR_VALUE_AT.

	* melt/warmelt-macro.melt (mexpand_assert_msg): Mention
	melt_assert_failure_fun in comment.

	* melt/warmelt-outobj.melt (outpucod_procroutine): Emit the
	declaration as a MELT_EXTERN function.

2013-07-31  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.c (melt_fatal_info): Adding final debugeprintf.

2013-07-31  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}
	* melt/generated/warmelt-base+01.cc: Regenerate.
	* melt/generated/warmelt-base+02.cc: Regenerate.
	* melt/generated/warmelt-base.cc: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+01.cc: Regenerate.
	* melt/generated/warmelt-debug+02.cc: Regenerate.
	* melt/generated/warmelt-debug.cc: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+01.cc: Regenerate.
	* melt/generated/warmelt-first+02.cc: Regenerate.
	* melt/generated/warmelt-first.cc: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.cc: Regenerate.
	* melt/generated/warmelt-genobj+02.cc: Regenerate.
	* melt/generated/warmelt-genobj+03.cc: Regenerate.
	* melt/generated/warmelt-genobj+04.cc: Regenerate.
	* melt/generated/warmelt-genobj+05.cc: Regenerate.
	* melt/generated/warmelt-genobj+06.cc: Regenerate.
	* melt/generated/warmelt-genobj+07.cc: Regenerate.
	* melt/generated/warmelt-genobj.cc: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+03.cc: Regenerate.
	* melt/generated/warmelt-hooks.cc: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+01.cc: Regenerate.
	* melt/generated/warmelt-macro+02.cc: Regenerate.
	* melt/generated/warmelt-macro+03.cc: Regenerate.
	* melt/generated/warmelt-macro+04.cc: Regenerate.
	* melt/generated/warmelt-macro+05.cc: Regenerate.
	* melt/generated/warmelt-macro+06.cc: Regenerate.
	* melt/generated/warmelt-macro+07.cc: Regenerate.
	* melt/generated/warmelt-macro.cc: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.cc: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.cc: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-07-31  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-hooks.melt: Improve assert_msg with variadic arguments.
	* melt/warmelt-macro.melt: Improve assert_msg with variadic arguments.
	* melt/warmelt-modes.melt: Improve few assert_msg. Most improvements still to be made.

2013-07-31  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-first.melt: Improve assert_msg with variadic arguments.
	* melt/warmelt-base.melt: Ditto.
	* melt/warmelt-debug.melt: Ditto.
	* melt/warmelt-genobj.melt: Ditto.

	* melt/warmelt-hooks.melt: Improve few assert_msg. Most improvements still to be made.
	* melt/warmelt-normal.melt: Improve few assert_msg.

2013-07-31  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}
	* melt/generated/warmelt-base+01.cc: Regenerate.
	* melt/generated/warmelt-base+02.cc: Regenerate.
	* melt/generated/warmelt-base.cc: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+01.cc: Regenerate.
	* melt/generated/warmelt-debug+02.cc: Regenerate.
	* melt/generated/warmelt-debug.cc: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+01.cc: Regenerate.
	* melt/generated/warmelt-first+02.cc: Regenerate.
	* melt/generated/warmelt-first.cc: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.cc: Regenerate.
	* melt/generated/warmelt-genobj+02.cc: Regenerate.
	* melt/generated/warmelt-genobj+03.cc: Regenerate.
	* melt/generated/warmelt-genobj+04.cc: Regenerate.
	* melt/generated/warmelt-genobj+05.cc: Regenerate.
	* melt/generated/warmelt-genobj+06.cc: Regenerate.
	* melt/generated/warmelt-genobj+07.cc: Regenerate.
	* melt/generated/warmelt-genobj.cc: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+01.cc: Regenerate.
	* melt/generated/warmelt-hooks+02.cc: Regenerate.
	* melt/generated/warmelt-hooks+03.cc: Regenerate.
	* melt/generated/warmelt-hooks.cc: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+01.cc: Regenerate.
	* melt/generated/warmelt-macro+02.cc: Regenerate.
	* melt/generated/warmelt-macro+03.cc: Regenerate.
	* melt/generated/warmelt-macro+04.cc: Regenerate.
	* melt/generated/warmelt-macro+05.cc: Regenerate.
	* melt/generated/warmelt-macro+06.cc: Regenerate.
	* melt/generated/warmelt-macro+07.cc: Regenerate.
	* melt/generated/warmelt-macro.cc: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+01.cc: Regenerate.
	* melt/generated/warmelt-modes+02.cc: Regenerate.
	* melt/generated/warmelt-modes+03.cc: Regenerate.
	* melt/generated/warmelt-modes.cc: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+01.cc: Regenerate.
	* melt/generated/warmelt-normal+02.cc: Regenerate.
	* melt/generated/warmelt-normal+03.cc: Regenerate.
	* melt/generated/warmelt-normal+04.cc: Regenerate.
	* melt/generated/warmelt-normal+05.cc: Regenerate.
	* melt/generated/warmelt-normal+06.cc: Regenerate.
	* melt/generated/warmelt-normal.cc: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+01.cc: Regenerate.
	* melt/generated/warmelt-normatch+02.cc: Regenerate.
	* melt/generated/warmelt-normatch+03.cc: Regenerate.
	* melt/generated/warmelt-normatch+04.cc: Regenerate.
	* melt/generated/warmelt-normatch+05.cc: Regenerate.
	* melt/generated/warmelt-normatch+06.cc: Regenerate.
	* melt/generated/warmelt-normatch.cc: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+01.cc: Regenerate.
	* melt/generated/warmelt-outobj+02.cc: Regenerate.
	* melt/generated/warmelt-outobj+03.cc: Regenerate.
	* melt/generated/warmelt-outobj+04.cc: Regenerate.
	* melt/generated/warmelt-outobj+05.cc: Regenerate.
	* melt/generated/warmelt-outobj+06.cc: Regenerate.
	* melt/generated/warmelt-outobj+07.cc: Regenerate.
	* melt/generated/warmelt-outobj.cc: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-07-31  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (melt_fatal_info): Declare as MELT_EXTERN.

	* melt/warmelt-first.melt (melt_assert_failure_fun): New function.
	(variadic_ctype, variadic_index, variadic_length, variadic_skip)
	(variadic_type_code): Moved from warmelt-base.melt file.

	* melt/warmelt-base.melt (variadic_ctype, variadic_index)
	(variadic_length, variadic_skip)
	(variadic_type_code): Removed since moved to warmelt-first.melt
	file above.

	* melt/warmelt-macro.melt (mexpand_assert_msg): Now more variadic
	and expanded to call to melt_assert_failure_fun.

	* melt/xtramelt-ana-base.melt: Most assert_msg got new variadic
	arguments.

2013-07-31  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/meltrunsup-inc.cc: Regenerate.
	* melt/generated/warmelt-base+01.cc: Regenerate.
	* melt/generated/warmelt-base+02.cc: Regenerate.
	* melt/generated/warmelt-base.cc: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+01.cc: Regenerate.
	* melt/generated/warmelt-debug+02.cc: Regenerate.
	* melt/generated/warmelt-debug.cc: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+01.cc: Regenerate.
	* melt/generated/warmelt-first+02.cc: Regenerate.
	* melt/generated/warmelt-first.cc: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.cc: Regenerate.
	* melt/generated/warmelt-genobj+02.cc: Regenerate.
	* melt/generated/warmelt-genobj+03.cc: Regenerate.
	* melt/generated/warmelt-genobj+04.cc: Regenerate.
	* melt/generated/warmelt-genobj+05.cc: Regenerate.
	* melt/generated/warmelt-genobj+06.cc: Regenerate.
	* melt/generated/warmelt-genobj+07.cc: Regenerate.
	* melt/generated/warmelt-genobj.cc: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+01.cc: Regenerate.
	* melt/generated/warmelt-hooks+02.cc: Regenerate.
	* melt/generated/warmelt-hooks+03.cc: Regenerate.
	* melt/generated/warmelt-hooks.cc: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+01.cc: Regenerate.
	* melt/generated/warmelt-macro+02.cc: Regenerate.
	* melt/generated/warmelt-macro+03.cc: Regenerate.
	* melt/generated/warmelt-macro+04.cc: Regenerate.
	* melt/generated/warmelt-macro+05.cc: Regenerate.
	* melt/generated/warmelt-macro+06.cc: Regenerate.
	* melt/generated/warmelt-macro+07.cc: Regenerate.
	* melt/generated/warmelt-macro.cc: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+01.cc: Regenerate.
	* melt/generated/warmelt-modes+02.cc: Regenerate.
	* melt/generated/warmelt-modes+03.cc: Regenerate.
	* melt/generated/warmelt-modes.cc: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+01.cc: Regenerate.
	* melt/generated/warmelt-normal+02.cc: Regenerate.
	* melt/generated/warmelt-normal+03.cc: Regenerate.
	* melt/generated/warmelt-normal+04.cc: Regenerate.
	* melt/generated/warmelt-normal+05.cc: Regenerate.
	* melt/generated/warmelt-normal+06.cc: Regenerate.
	* melt/generated/warmelt-normal.cc: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+01.cc: Regenerate.
	* melt/generated/warmelt-normatch+02.cc: Regenerate.
	* melt/generated/warmelt-normatch+03.cc: Regenerate.
	* melt/generated/warmelt-normatch+04.cc: Regenerate.
	* melt/generated/warmelt-normatch+05.cc: Regenerate.
	* melt/generated/warmelt-normatch+06.cc: Regenerate.
	* melt/generated/warmelt-normatch.cc: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+01.cc: Regenerate.
	* melt/generated/warmelt-outobj+02.cc: Regenerate.
	* melt/generated/warmelt-outobj+03.cc: Regenerate.
	* melt/generated/warmelt-outobj+04.cc: Regenerate.
	* melt/generated/warmelt-outobj+05.cc: Regenerate.
	* melt/generated/warmelt-outobj+06.cc: Regenerate.
	* melt/generated/warmelt-outobj+07.cc: Regenerate.
	* melt/generated/warmelt-outobj.cc: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-07-31  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-outobj.melt (translate_run_melt_expressions)
	(melt_translate_run_macroexpansions_list): Generated base name
	starts with melt.

2013-07-30  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-macro.melt
	(melt_invoke_translator_runner_macroexpansions): New formal for
	modctx.
	(melt_delayed_macro_expander): Give that formal.

	* melt/warmelt-outobj.melt (translate_run_melt_expressions):
	Better format for the naked base name.
	(melt_translate_run_macroexpansions_list): New formal for modctx.
	Use it for generated naked base name when bootstrapping.

2013-07-30  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}
	* melt/generated/meltrunsup-inc.cc: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.cc: Regenerate.
	* melt/generated/warmelt-base+02.cc: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.cc: Regenerate.
	* melt/generated/warmelt-debug+01.cc: Regenerate.
	* melt/generated/warmelt-debug+02.cc: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.cc: Regenerate.
	* melt/generated/warmelt-first+01.cc: Regenerate.
	* melt/generated/warmelt-first+02.cc: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.cc: Regenerate.
	* melt/generated/warmelt-genobj+01.cc: Regenerate.
	* melt/generated/warmelt-genobj+02.cc: Regenerate.
	* melt/generated/warmelt-genobj+03.cc: Regenerate.
	* melt/generated/warmelt-genobj+04.cc: Regenerate.
	* melt/generated/warmelt-genobj+05.cc: Regenerate.
	* melt/generated/warmelt-genobj+06.cc: Regenerate.
	* melt/generated/warmelt-genobj+07.cc: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.cc: Regenerate.
	* melt/generated/warmelt-hooks+01.cc: Regenerate.
	* melt/generated/warmelt-hooks+02.cc: Regenerate.
	* melt/generated/warmelt-hooks+03.cc: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.cc: Regenerate.
	* melt/generated/warmelt-macro+01.cc: Regenerate.
	* melt/generated/warmelt-macro+02.cc: Regenerate.
	* melt/generated/warmelt-macro+03.cc: Regenerate.
	* melt/generated/warmelt-macro+04.cc: Regenerate.
	* melt/generated/warmelt-macro+05.cc: Regenerate.
	* melt/generated/warmelt-macro+06.cc: Regenerate.
	* melt/generated/warmelt-macro+07.cc: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.cc: Regenerate.
	* melt/generated/warmelt-modes+01.cc: Regenerate.
	* melt/generated/warmelt-modes+02.cc: Regenerate.
	* melt/generated/warmelt-modes+03.cc: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.cc: Regenerate.
	* melt/generated/warmelt-normal+01.cc: Regenerate.
	* melt/generated/warmelt-normal+02.cc: Regenerate.
	* melt/generated/warmelt-normal+03.cc: Regenerate.
	* melt/generated/warmelt-normal+04.cc: Regenerate.
	* melt/generated/warmelt-normal+05.cc: Regenerate.
	* melt/generated/warmelt-normal+06.cc: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.cc: Regenerate.
	* melt/generated/warmelt-normatch+01.cc: Regenerate.
	* melt/generated/warmelt-normatch+02.cc: Regenerate.
	* melt/generated/warmelt-normatch+03.cc: Regenerate.
	* melt/generated/warmelt-normatch+04.cc: Regenerate.
	* melt/generated/warmelt-normatch+05.cc: Regenerate.
	* melt/generated/warmelt-normatch+06.cc: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.cc: Regenerate.
	* melt/generated/warmelt-outobj+01.cc: Regenerate.
	* melt/generated/warmelt-outobj+02.cc: Regenerate.
	* melt/generated/warmelt-outobj+03.cc: Regenerate.
	* melt/generated/warmelt-outobj+04.cc: Regenerate.
	* melt/generated/warmelt-outobj+05.cc: Regenerate.
	* melt/generated/warmelt-outobj+06.cc: Regenerate.
	* melt/generated/warmelt-outobj+07.cc: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.cc: Regenerate.

2013-07-30  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-build-script.tpl: When generating meltbuild-gendoc.args put
	module-cflags & module-makefile since defmacros could generate
	code.

	* melt-build-script.sh: Regenerate.

	* melt/warmelt-base.melt (diagnostic_args_macro): Export it.

	* melt/warmelt-macro (melt_make_sexpr): Accept nil values.

	* melt/xtramelt-playground.melt (play_error): Temporary
          function which does not work yet. FIXME!.

2013-07-30  Basile Starynkevitch  <basile@starynkevitch.net>

	* README-MELT: Improve, and refer to gcc-melt.org site.

	{{Regenerate}}
	* melt/generated/warmelt-base+01.cc: Regenerate.
	* melt/generated/warmelt-base+02.cc: Regenerate.
	* melt/generated/warmelt-base.cc: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+01.cc: Regenerate.
	* melt/generated/warmelt-debug+02.cc: Regenerate.
	* melt/generated/warmelt-debug.cc: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+01.cc: Regenerate.
	* melt/generated/warmelt-first+02.cc: Regenerate.
	* melt/generated/warmelt-first.cc: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.cc: Regenerate.
	* melt/generated/warmelt-genobj+02.cc: Regenerate.
	* melt/generated/warmelt-genobj+03.cc: Regenerate.
	* melt/generated/warmelt-genobj+04.cc: Regenerate.
	* melt/generated/warmelt-genobj+05.cc: Regenerate.
	* melt/generated/warmelt-genobj+06.cc: Regenerate.
	* melt/generated/warmelt-genobj+07.cc: Regenerate.
	* melt/generated/warmelt-genobj.cc: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+01.cc: Regenerate.
	* melt/generated/warmelt-hooks+02.cc: Regenerate.
	* melt/generated/warmelt-hooks+03.cc: Regenerate.
	* melt/generated/warmelt-hooks.cc: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+01.cc: Regenerate.
	* melt/generated/warmelt-macro+02.cc: Regenerate.
	* melt/generated/warmelt-macro+03.cc: Regenerate.
	* melt/generated/warmelt-macro+04.cc: Regenerate.
	* melt/generated/warmelt-macro+05.cc: Regenerate.
	* melt/generated/warmelt-macro+06.cc: Regenerate.
	* melt/generated/warmelt-macro+07.cc: Regenerate.
	* melt/generated/warmelt-macro.cc: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+01.cc: Regenerate.
	* melt/generated/warmelt-modes+02.cc: Regenerate.
	* melt/generated/warmelt-modes+03.cc: Regenerate.
	* melt/generated/warmelt-modes.cc: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+01.cc: Regenerate.
	* melt/generated/warmelt-normal+02.cc: Regenerate.
	* melt/generated/warmelt-normal+03.cc: Regenerate.
	* melt/generated/warmelt-normal+04.cc: Regenerate.
	* melt/generated/warmelt-normal+05.cc: Regenerate.
	* melt/generated/warmelt-normal+06.cc: Regenerate.
	* melt/generated/warmelt-normal.cc: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+01.cc: Regenerate.
	* melt/generated/warmelt-normatch+02.cc: Regenerate.
	* melt/generated/warmelt-normatch+03.cc: Regenerate.
	* melt/generated/warmelt-normatch+04.cc: Regenerate.
	* melt/generated/warmelt-normatch+05.cc: Regenerate.
	* melt/generated/warmelt-normatch+06.cc: Regenerate.
	* melt/generated/warmelt-normatch.cc: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+01.cc: Regenerate.
	* melt/generated/warmelt-outobj+02.cc: Regenerate.
	* melt/generated/warmelt-outobj+03.cc: Regenerate.
	* melt/generated/warmelt-outobj+04.cc: Regenerate.
	* melt/generated/warmelt-outobj+05.cc: Regenerate.
	* melt/generated/warmelt-outobj+06.cc: Regenerate.
	* melt/generated/warmelt-outobj+07.cc: Regenerate.
	* melt/generated/warmelt-outobj.cc: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-07-30  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-first.melt (class_any_module_context): Inherits
	from class_proped.

	* melt/warmelt-macro.melt (mexpand_defmacro): More debugging.

	* melt/warmelt-modes.melt (class_makedoc_info): Rename as ...
	(class_makedoc_module_context): New class, now a subclass of
	class_any_module_context...
	(makedoc_docmd): Create an appropriate instance of it.

2013-07-30  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-base.melt (diagnostic_args_macro): New macro.
	(error): Should use it, but don't work yet, so commented out.

	* melt/warmelt-macro.melt (mexpand_defmacro): Use envm not env in
	lambdabind.


2013-07-30  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/meltrunsup-inc.cc: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+06.cc: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+01.cc: Regenerate.
	* melt/generated/warmelt-macro+02.cc: Regenerate.
	* melt/generated/warmelt-macro+03.cc: Regenerate.
	* melt/generated/warmelt-macro+04.cc: Regenerate.
	* melt/generated/warmelt-macro+05.cc: Regenerate.
	* melt/generated/warmelt-macro+06.cc: Regenerate.
	* melt/generated/warmelt-macro+07.cc: Regenerate.
	* melt/generated/warmelt-macro.cc: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.


2013-07-30  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-macro.melt (expand_quoted_sexpr): Change formal
	name antiquoter to antiquotefun.
	(antiquoter): Always macro-expand the aexp.

	* testsuite/melt/tbackquote-1.melt: Improve, and it still passes.


2013-07-29  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+01.cc: Regenerate.
	* melt/generated/warmelt-macro+02.cc: Regenerate.
	* melt/generated/warmelt-macro+03.cc: Regenerate.
	* melt/generated/warmelt-macro+04.cc: Regenerate.
	* melt/generated/warmelt-macro+05.cc: Regenerate.
	* melt/generated/warmelt-macro+06.cc: Regenerate.
	* melt/generated/warmelt-macro+07.cc: Regenerate.
	* melt/generated/warmelt-macro.cc: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-07-29  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-macro.melt (antiquoter): Handle simple cases with
	constant bindings... So tbackquote-1.melt test is passing.

2013-07-29  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-macro.melt (mexpand_let): Give more precise
	location of bindings.

2013-07-29  Basile Starynkevitch  <basile@starynkevitch.net>

	* testsuite/melt/tbackquote-1.melt: New file.

	* melt/warmelt-macro.melt (antiquoter): Some more code and more
	debugging.

2013-07-29  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/meltrunsup-inc.cc: Regenerate.
	* melt/generated/warmelt-base+01.cc: Regenerate.
	* melt/generated/warmelt-base+02.cc: Regenerate.
	* melt/generated/warmelt-base.cc: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+01.cc: Regenerate.
	* melt/generated/warmelt-debug+02.cc: Regenerate.
	* melt/generated/warmelt-debug.cc: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+01.cc: Regenerate.
	* melt/generated/warmelt-first+02.cc: Regenerate.
	* melt/generated/warmelt-first.cc: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.cc: Regenerate.
	* melt/generated/warmelt-genobj+02.cc: Regenerate.
	* melt/generated/warmelt-genobj+03.cc: Regenerate.
	* melt/generated/warmelt-genobj+04.cc: Regenerate.
	* melt/generated/warmelt-genobj+05.cc: Regenerate.
	* melt/generated/warmelt-genobj+06.cc: Regenerate.
	* melt/generated/warmelt-genobj+07.cc: Regenerate.
	* melt/generated/warmelt-genobj.cc: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+01.cc: Regenerate.
	* melt/generated/warmelt-hooks+02.cc: Regenerate.
	* melt/generated/warmelt-hooks+03.cc: Regenerate.
	* melt/generated/warmelt-hooks.cc: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+01.cc: Regenerate.
	* melt/generated/warmelt-macro+02.cc: Regenerate.
	* melt/generated/warmelt-macro+03.cc: Regenerate.
	* melt/generated/warmelt-macro+04.cc: Regenerate.
	* melt/generated/warmelt-macro+05.cc: Regenerate.
	* melt/generated/warmelt-macro+06.cc: Regenerate.
	* melt/generated/warmelt-macro+07.cc: Regenerate.
	* melt/generated/warmelt-macro.cc: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+01.cc: Regenerate.
	* melt/generated/warmelt-modes+02.cc: Regenerate.
	* melt/generated/warmelt-modes+03.cc: Regenerate.
	* melt/generated/warmelt-modes.cc: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+01.cc: Regenerate.
	* melt/generated/warmelt-normal+02.cc: Regenerate.
	* melt/generated/warmelt-normal+03.cc: Regenerate.
	* melt/generated/warmelt-normal+04.cc: Regenerate.
	* melt/generated/warmelt-normal+05.cc: Regenerate.
	* melt/generated/warmelt-normal+06.cc: Regenerate.
	* melt/generated/warmelt-normal.cc: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+01.cc: Regenerate.
	* melt/generated/warmelt-normatch+02.cc: Regenerate.
	* melt/generated/warmelt-normatch+03.cc: Regenerate.
	* melt/generated/warmelt-normatch+04.cc: Regenerate.
	* melt/generated/warmelt-normatch+05.cc: Regenerate.
	* melt/generated/warmelt-normatch+06.cc: Regenerate.
	* melt/generated/warmelt-normatch.cc: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+01.cc: Regenerate.
	* melt/generated/warmelt-outobj+02.cc: Regenerate.
	* melt/generated/warmelt-outobj+03.cc: Regenerate.
	* melt/generated/warmelt-outobj+04.cc: Regenerate.
	* melt/generated/warmelt-outobj+05.cc: Regenerate.
	* melt/generated/warmelt-outobj+06.cc: Regenerate.
	* melt/generated/warmelt-outobj+07.cc: Regenerate.
	* melt/generated/warmelt-outobj.cc: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-07-29  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-macro.melt (mexpand_quote): Don't expand instances
	of CLASS_SOURCE obtained by previous macro-expansion.
	(mexpand_backquote): Call expand_quoted_sexpr with antiquoter.
	(mexpand_comma): Make an error.

2013-07-29  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-macro.melt (quote): Improve documentation.
	(mexpand_backquote, mexpand_comma, backquote, comma): New stubs.

2013-07-19  Basile Starynkevitch  <basile@starynkevitch.net>
	{{quote implemented for s-expressions}}
	* melt-predef.list (HOOK_MELT_MAKE_LOCATION): New.

	* melt/warmelt-base.melt (make_sexpr): Moved to warmelt-macro.melt file and renamed as melt_make_sexpr.

	* melt/warmelt-macro.melt (melt_make_sexpr); Function moved from
	warmelt-base.melt file.
	(make_sexpr): Synonym of above.
	(expand_quoted_sexpr): New utility function.
	(mexpand_quote): Use it for quoted s-exprs.
	(antiquoter): New stub.

2013-07-19  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-first.melt (clone_symbol): The csym_urank is a constant boxed integer.

	* melt/warmelt-macro.melt (with_cloned_symb): New macro.

2013-07-18  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup-inc.cc: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.cc: Regenerate.
	* melt/generated/warmelt-base+02.cc: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.cc: Regenerate.
	* melt/generated/warmelt-debug+01.cc: Regenerate.
	* melt/generated/warmelt-debug+02.cc: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.cc: Regenerate.
	* melt/generated/warmelt-first+01.cc: Regenerate.
	* melt/generated/warmelt-first+02.cc: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.cc: Regenerate.
	* melt/generated/warmelt-genobj+01.cc: Regenerate.
	* melt/generated/warmelt-genobj+02.cc: Regenerate.
	* melt/generated/warmelt-genobj+03.cc: Regenerate.
	* melt/generated/warmelt-genobj+04.cc: Regenerate.
	* melt/generated/warmelt-genobj+05.cc: Regenerate.
	* melt/generated/warmelt-genobj+06.cc: Regenerate.
	* melt/generated/warmelt-genobj+07.cc: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.cc: Regenerate.
	* melt/generated/warmelt-hooks+01.cc: Regenerate.
	* melt/generated/warmelt-hooks+02.cc: Regenerate.
	* melt/generated/warmelt-hooks+03.cc: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.cc: Regenerate.
	* melt/generated/warmelt-macro+01.cc: Regenerate.
	* melt/generated/warmelt-macro+02.cc: Regenerate.
	* melt/generated/warmelt-macro+03.cc: Regenerate.
	* melt/generated/warmelt-macro+04.cc: Regenerate.
	* melt/generated/warmelt-macro+05.cc: Regenerate.
	* melt/generated/warmelt-macro+06.cc: Regenerate.
	* melt/generated/warmelt-macro+07.cc: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.cc: Regenerate.
	* melt/generated/warmelt-modes+01.cc: Regenerate.
	* melt/generated/warmelt-modes+02.cc: Regenerate.
	* melt/generated/warmelt-modes+03.cc: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.cc: Regenerate.
	* melt/generated/warmelt-normal+01.cc: Regenerate.
	* melt/generated/warmelt-normal+02.cc: Regenerate.
	* melt/generated/warmelt-normal+03.cc: Regenerate.
	* melt/generated/warmelt-normal+04.cc: Regenerate.
	* melt/generated/warmelt-normal+05.cc: Regenerate.
	* melt/generated/warmelt-normal+06.cc: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.cc: Regenerate.
	* melt/generated/warmelt-normatch+01.cc: Regenerate.
	* melt/generated/warmelt-normatch+02.cc: Regenerate.
	* melt/generated/warmelt-normatch+03.cc: Regenerate.
	* melt/generated/warmelt-normatch+04.cc: Regenerate.
	* melt/generated/warmelt-normatch+05.cc: Regenerate.
	* melt/generated/warmelt-normatch+06.cc: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.cc: Regenerate.
	* melt/generated/warmelt-outobj+01.cc: Regenerate.
	* melt/generated/warmelt-outobj+02.cc: Regenerate.
	* melt/generated/warmelt-outobj+03.cc: Regenerate.
	* melt/generated/warmelt-outobj+04.cc: Regenerate.
	* melt/generated/warmelt-outobj+05.cc: Regenerate.
	* melt/generated/warmelt-outobj+06.cc: Regenerate.
	* melt/generated/warmelt-outobj+07.cc: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.cc: Regenerate.

2013-07-18  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-first.melt (clone_with_discriminant): Move here
	from warmelt-base.melt file.
	(hook_macro_exporter): Use it.

	* melt/warmelt-base.melt (clone_with_discriminant): Is moved to
	warmelt-first.melt file.

	* melt/warmelt-macro.melt (mexpand_export_macro): Guess the
	expander for defmacros.

	* melt/warmelt-normal.melt (normbind_defmacrobind): New method for
	normalize_binding on class_defined_macro_binding.

	* melt/warmelt-genobj.melt (compilobj_nrep_constocc): More debug.


2013-07-18  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-base.melt (list_nth_element): Improve.

2013-07-18  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/meltrunsup-inc.cc: Regenerate.
	* melt/generated/warmelt-base+01.cc: Regenerate.
	* melt/generated/warmelt-base+02.cc: Regenerate.
	* melt/generated/warmelt-base.cc: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+01.cc: Regenerate.
	* melt/generated/warmelt-debug+02.cc: Regenerate.
	* melt/generated/warmelt-debug.cc: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+01.cc: Regenerate.
	* melt/generated/warmelt-first+02.cc: Regenerate.
	* melt/generated/warmelt-first.cc: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.cc: Regenerate.
	* melt/generated/warmelt-genobj+02.cc: Regenerate.
	* melt/generated/warmelt-genobj+03.cc: Regenerate.
	* melt/generated/warmelt-genobj+04.cc: Regenerate.
	* melt/generated/warmelt-genobj+05.cc: Regenerate.
	* melt/generated/warmelt-genobj+06.cc: Regenerate.
	* melt/generated/warmelt-genobj+07.cc: Regenerate.
	* melt/generated/warmelt-genobj.cc: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+01.cc: Regenerate.
	* melt/generated/warmelt-hooks+02.cc: Regenerate.
	* melt/generated/warmelt-hooks+03.cc: Regenerate.
	* melt/generated/warmelt-hooks.cc: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+01.cc: Regenerate.
	* melt/generated/warmelt-macro+02.cc: Regenerate.
	* melt/generated/warmelt-macro+03.cc: Regenerate.
	* melt/generated/warmelt-macro+04.cc: Regenerate.
	* melt/generated/warmelt-macro+05.cc: Regenerate.
	* melt/generated/warmelt-macro+06.cc: Regenerate.
	* melt/generated/warmelt-macro+07.cc: Regenerate.
	* melt/generated/warmelt-macro.cc: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+01.cc: Regenerate.
	* melt/generated/warmelt-modes+02.cc: Regenerate.
	* melt/generated/warmelt-modes+03.cc: Regenerate.
	* melt/generated/warmelt-modes.cc: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+01.cc: Regenerate.
	* melt/generated/warmelt-normal+02.cc: Regenerate.
	* melt/generated/warmelt-normal+03.cc: Regenerate.
	* melt/generated/warmelt-normal+04.cc: Regenerate.
	* melt/generated/warmelt-normal+05.cc: Regenerate.
	* melt/generated/warmelt-normal+06.cc: Regenerate.
	* melt/generated/warmelt-normal.cc: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+01.cc: Regenerate.
	* melt/generated/warmelt-normatch+02.cc: Regenerate.
	* melt/generated/warmelt-normatch+03.cc: Regenerate.
	* melt/generated/warmelt-normatch+04.cc: Regenerate.
	* melt/generated/warmelt-normatch+05.cc: Regenerate.
	* melt/generated/warmelt-normatch+06.cc: Regenerate.
	* melt/generated/warmelt-normatch.cc: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+01.cc: Regenerate.
	* melt/generated/warmelt-outobj+02.cc: Regenerate.
	* melt/generated/warmelt-outobj+03.cc: Regenerate.
	* melt/generated/warmelt-outobj+04.cc: Regenerate.
	* melt/generated/warmelt-outobj+05.cc: Regenerate.
	* melt/generated/warmelt-outobj+06.cc: Regenerate.
	* melt/generated/warmelt-outobj+07.cc: Regenerate.
	* melt/generated/warmelt-outobj.cc: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-07-18  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-base.melt (list_nth_element): Adding new function.
	(make_sexpr): Better diagnostics and debug.
	(error): Temporarily remove.

	* melt/warmelt-normal.melt (normexp_ifelse): Give error, not
	warning, on type incompatibility of conditional branches.


	* testsuite/melt/tmacro-1.melt: Use [not implemented yet]
	list_nth_element.

2013-07-18  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (Melt_CallProtoFrame::call_depth)
	(Melt_CallProtoFrame::call_deeper_than): New member functions.
	(Melt_CallProtoFrame::top_call_depth)
	(Melt_CallProtoFrame::top_call_deeper_than): New static functions.

	* melt-runtime.c (melt_apply): Call melt_fatal_error when too deep
	application...

	* melt/warmelt-base.melt (melt_call_deeper_than, melt_call_depth):
	New primitives.

	* melt/warmelt-macro.melt (macroexpand_1): Warn when excessive
	call depth.

	* testsuite/melt/tmacro-1.melt: Retrieve the first argument of a macro.

2013-07-18  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-macro.melt (melt_delayed_macro_expander): More debug.
	(mexpand_defmacro): More debug. The expander refetches its closure
	and reinvoke it.

	* testsuite/melt/tmacro-1.melt: macroexpands the s-expr.

2013-07-18  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-normal.melt (normexp_macro_installation): Make an
	instance of class_nrep_literalnamedvalue and use the closure of
	the macrofunction.

	* melt/warmelt-genobj.melt (compilobj_routproc): Better debug.

2013-07-17  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-normal.melt (normexp_macro_installation): Return a
	singleton list of bindings.

	* melt/warmelt-outobj.melt
	(melt_translate_run_macroexpansions_list): No need for autoboxing,
	because it has no useful result...

2013-07-17  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-normal.melt (wrap_normal_let1)
	(normexp_macro_installation): More debug.

2013-07-17  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/meltrunsup-inc.cc: Regenerate.
	* melt/generated/warmelt-base+01.cc: Regenerate.
	* melt/generated/warmelt-base+02.cc: Regenerate.
	* melt/generated/warmelt-base.cc: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+01.cc: Regenerate.
	* melt/generated/warmelt-debug+02.cc: Regenerate.
	* melt/generated/warmelt-debug.cc: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+01.cc: Regenerate.
	* melt/generated/warmelt-first+02.cc: Regenerate.
	* melt/generated/warmelt-first.cc: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.cc: Regenerate.
	* melt/generated/warmelt-genobj+02.cc: Regenerate.
	* melt/generated/warmelt-genobj+03.cc: Regenerate.
	* melt/generated/warmelt-genobj+04.cc: Regenerate.
	* melt/generated/warmelt-genobj+05.cc: Regenerate.
	* melt/generated/warmelt-genobj+06.cc: Regenerate.
	* melt/generated/warmelt-genobj+07.cc: Regenerate.
	* melt/generated/warmelt-genobj.cc: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+01.cc: Regenerate.
	* melt/generated/warmelt-hooks+02.cc: Regenerate.
	* melt/generated/warmelt-hooks+03.cc: Regenerate.
	* melt/generated/warmelt-hooks.cc: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+01.cc: Regenerate.
	* melt/generated/warmelt-macro+02.cc: Regenerate.
	* melt/generated/warmelt-macro+03.cc: Regenerate.
	* melt/generated/warmelt-macro+04.cc: Regenerate.
	* melt/generated/warmelt-macro+05.cc: Regenerate.
	* melt/generated/warmelt-macro+06.cc: Regenerate.
	* melt/generated/warmelt-macro+07.cc: Regenerate.
	* melt/generated/warmelt-macro.cc: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+01.cc: Regenerate.
	* melt/generated/warmelt-modes+02.cc: Regenerate.
	* melt/generated/warmelt-modes+03.cc: Regenerate.
	* melt/generated/warmelt-modes.cc: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+01.cc: Regenerate.
	* melt/generated/warmelt-normal+02.cc: Regenerate.
	* melt/generated/warmelt-normal+03.cc: Regenerate.
	* melt/generated/warmelt-normal+04.cc: Regenerate.
	* melt/generated/warmelt-normal+05.cc: Regenerate.
	* melt/generated/warmelt-normal+06.cc: Regenerate.
	* melt/generated/warmelt-normal.cc: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+01.cc: Regenerate.
	* melt/generated/warmelt-normatch+02.cc: Regenerate.
	* melt/generated/warmelt-normatch+03.cc: Regenerate.
	* melt/generated/warmelt-normatch+04.cc: Regenerate.
	* melt/generated/warmelt-normatch+05.cc: Regenerate.
	* melt/generated/warmelt-normatch+06.cc: Regenerate.
	* melt/generated/warmelt-normatch.cc: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+01.cc: Regenerate.
	* melt/generated/warmelt-outobj+02.cc: Regenerate.
	* melt/generated/warmelt-outobj+03.cc: Regenerate.
	* melt/generated/warmelt-outobj+04.cc: Regenerate.
	* melt/generated/warmelt-outobj+05.cc: Regenerate.
	* melt/generated/warmelt-outobj+06.cc: Regenerate.
	* melt/generated/warmelt-outobj+07.cc: Regenerate.
	* melt/generated/warmelt-outobj.cc: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-07-17  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-predef.list (HOOK_MACRO_INSTALLER): New.

	* melt/warmelt-macro.melt (class_source_macro_installation): New
	class with field smacinst_defmacro.
	(hook_macro_installer): New hook.
	(melt_delayed_macro_expander): Call
	melt_invoke_translator_runner_macroexpansions.
	(mexpand_defmacro): Create instance of
	class_source_macro_installation.

	* melt/warmelt-normal.melt (normexp_macro_installation): New
	method for normal_exp of normexp_macro_installation.

	* melt/warmelt-outobj.melt (normalize_macroexpanded_list): Can
	handle normalization into tuples or lists of nreps.

2013-07-17  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/meltrunsup-inc.cc: Regenerate.
	* melt/generated/warmelt-base+01.cc: Regenerate.
	* melt/generated/warmelt-base+02.cc: Regenerate.
	* melt/generated/warmelt-base.cc: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+01.cc: Regenerate.
	* melt/generated/warmelt-debug+02.cc: Regenerate.
	* melt/generated/warmelt-debug.cc: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+01.cc: Regenerate.
	* melt/generated/warmelt-first+02.cc: Regenerate.
	* melt/generated/warmelt-first.cc: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.cc: Regenerate.
	* melt/generated/warmelt-genobj+02.cc: Regenerate.
	* melt/generated/warmelt-genobj+03.cc: Regenerate.
	* melt/generated/warmelt-genobj+04.cc: Regenerate.
	* melt/generated/warmelt-genobj+05.cc: Regenerate.
	* melt/generated/warmelt-genobj+06.cc: Regenerate.
	* melt/generated/warmelt-genobj+07.cc: Regenerate.
	* melt/generated/warmelt-genobj.cc: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+01.cc: Regenerate.
	* melt/generated/warmelt-hooks+02.cc: Regenerate.
	* melt/generated/warmelt-hooks+03.cc: Regenerate.
	* melt/generated/warmelt-hooks.cc: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+01.cc: Regenerate.
	* melt/generated/warmelt-macro+02.cc: Regenerate.
	* melt/generated/warmelt-macro+03.cc: Regenerate.
	* melt/generated/warmelt-macro+04.cc: Regenerate.
	* melt/generated/warmelt-macro+05.cc: Regenerate.
	* melt/generated/warmelt-macro+06.cc: Regenerate.
	* melt/generated/warmelt-macro+07.cc: New generated file.
	* melt/generated/warmelt-macro.cc: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+01.cc: Regenerate.
	* melt/generated/warmelt-modes+02.cc: Regenerate.
	* melt/generated/warmelt-modes+03.cc: Regenerate.
	* melt/generated/warmelt-modes.cc: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+01.cc: Regenerate.
	* melt/generated/warmelt-normal+02.cc: Regenerate.
	* melt/generated/warmelt-normal+03.cc: Regenerate.
	* melt/generated/warmelt-normal+04.cc: Regenerate.
	* melt/generated/warmelt-normal+05.cc: Regenerate.
	* melt/generated/warmelt-normal+06.cc: Regenerate.
	* melt/generated/warmelt-normal.cc: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+01.cc: Regenerate.
	* melt/generated/warmelt-normatch+02.cc: Regenerate.
	* melt/generated/warmelt-normatch+03.cc: Regenerate.
	* melt/generated/warmelt-normatch+04.cc: Regenerate.
	* melt/generated/warmelt-normatch+05.cc: Regenerate.
	* melt/generated/warmelt-normatch+06.cc: Regenerate.
	* melt/generated/warmelt-normatch.cc: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+01.cc: Regenerate.
	* melt/generated/warmelt-outobj+02.cc: Regenerate.
	* melt/generated/warmelt-outobj+03.cc: Regenerate.
	* melt/generated/warmelt-outobj+04.cc: Regenerate.
	* melt/generated/warmelt-outobj+05.cc: Regenerate.
	* melt/generated/warmelt-outobj+06.cc: Regenerate.
	* melt/generated/warmelt-outobj+07.cc: Regenerate.
	* melt/generated/warmelt-outobj.cc: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-07-17  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-macro.melt (class_defined_macro_binding): Add
	mbind_data field.

	* melt/warmelt-normal.melt (normexp_defun_defmacro): The created
	closure is of discr_macro_closure for macros, and the data is in
	mbind_data for macro.

2013-07-17  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-predef.list (DISCR_MACRO_CLOSURE): New.

	* melt/warmelt-first (discr_macro_closure): New.

2013-07-16  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-first.melt (class_any_module_context): Add
	mocx_macrolist field.

	* melt/warmelt-macro.melt (class_source_defun): Mention macros.
	(melt_delayed_macro_expander): New empty function stub.
	(mexpand_defmacro): Update the mocx_macrolist field. Put some
	lambda using it in the mbind.

	* melt/warmelt-debug.melt (dbgout_fields, dbgout_class_method):
	Better output.

	* melt/warmelt-normal.melt (normexp_defun): Rename as...
	(normexp_defun_defmacro): Handle both defun & defmacro.

	* melt/warmelt-outobj.melt (compile_list_sexpr)
	(translate_run_melt_expressions)
	(melt_translate_run_macroexpansions_list): Initialize mocx_macrolist.

2013-07-16  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/meltrunsup-inc.cc: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+01.cc: Regenerate.
	* melt/generated/warmelt-debug+02.cc: Regenerate.
	* melt/generated/warmelt-debug.cc: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.cc: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+02.cc: Regenerate.
	* melt/generated/warmelt-macro+03.cc: Regenerate.
	* melt/generated/warmelt-macro+04.cc: Regenerate.
	* melt/generated/warmelt-macro+05.cc: Regenerate.
	* melt/generated/warmelt-macro+06.cc: Regenerate.
	* melt/generated/warmelt-macro.cc: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-07-16  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.c (melt_sparebreakpoint_0_at)
	(melt_sparebreakpoint_1_at, melt_sparebreakpoint_2_at): Better
	backtrace.

	* melt/warmelt-debug.melt (debug_msg_fun, melt_debug_fun)
	(dbg_outobject, dbgout_fields): Improve debugging output.

	* melt/warmelt-macro.melt (mexpand_defmacro): More debug.

2013-07-09  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}

	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/meltrunsup-inc.cc: Regenerate.
	* melt/generated/warmelt-base+01.cc: Regenerate.
	* melt/generated/warmelt-base+02.cc: Regenerate.
	* melt/generated/warmelt-base.cc: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+01.cc: Regenerate.
	* melt/generated/warmelt-debug+02.cc: Regenerate.
	* melt/generated/warmelt-debug.cc: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+01.cc: Regenerate.
	* melt/generated/warmelt-first+02.cc: Regenerate.
	* melt/generated/warmelt-first.cc: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.cc: Regenerate.
	* melt/generated/warmelt-genobj+02.cc: Regenerate.
	* melt/generated/warmelt-genobj+03.cc: Regenerate.
	* melt/generated/warmelt-genobj+04.cc: Regenerate.
	* melt/generated/warmelt-genobj+05.cc: Regenerate.
	* melt/generated/warmelt-genobj+06.cc: Regenerate.
	* melt/generated/warmelt-genobj+07.cc: Regenerate.
	* melt/generated/warmelt-genobj.cc: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+01.cc: Regenerate.
	* melt/generated/warmelt-hooks+02.cc: Regenerate.
	* melt/generated/warmelt-hooks+03.cc: Regenerate.
	* melt/generated/warmelt-hooks.cc: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+01.cc: Regenerate.
	* melt/generated/warmelt-macro+02.cc: Regenerate.
	* melt/generated/warmelt-macro+03.cc: Regenerate.
	* melt/generated/warmelt-macro+04.cc: Regenerate.
	* melt/generated/warmelt-macro+05.cc: Regenerate.
	* melt/generated/warmelt-macro+06.cc: Regenerate.
	* melt/generated/warmelt-macro.cc: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+01.cc: Regenerate.
	* melt/generated/warmelt-modes+02.cc: Regenerate.
	* melt/generated/warmelt-modes+03.cc: Regenerate.
	* melt/generated/warmelt-modes.cc: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+01.cc: Regenerate.
	* melt/generated/warmelt-normal+02.cc: Regenerate.
	* melt/generated/warmelt-normal+03.cc: Regenerate.
	* melt/generated/warmelt-normal+04.cc: Regenerate.
	* melt/generated/warmelt-normal+05.cc: Regenerate.
	* melt/generated/warmelt-normal+06.cc: Regenerate.
	* melt/generated/warmelt-normal.cc: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+01.cc: Regenerate.
	* melt/generated/warmelt-normatch+02.cc: Regenerate.
	* melt/generated/warmelt-normatch+03.cc: Regenerate.
	* melt/generated/warmelt-normatch+04.cc: Regenerate.
	* melt/generated/warmelt-normatch+05.cc: Regenerate.
	* melt/generated/warmelt-normatch+06.cc: Regenerate.
	* melt/generated/warmelt-normatch.cc: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+01.cc: Regenerate.
	* melt/generated/warmelt-outobj+02.cc: Regenerate.
	* melt/generated/warmelt-outobj+03.cc: Regenerate.
	* melt/generated/warmelt-outobj+04.cc: Regenerate.
	* melt/generated/warmelt-outobj+05.cc: Regenerate.
	* melt/generated/warmelt-outobj+06.cc: Regenerate.
	* melt/generated/warmelt-outobj+07.cc: Regenerate.
	* melt/generated/warmelt-outobj.cc: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.


2013-07-09  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-macro.melt (melt_transrunmacro_clos): New variable.
	(melt_register_translator_runner_macroexpansions)
	(melt_invoke_translator_runner_macroexpansions): New functions.

	* melt/warmelt-outobj.melt
	(melt_translate_run_macroexpansions_list): New function.

2013-07-09  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (melt_default_depth): Declare MELT_EXTERN.

	* melt/warmelt-base.melt (make_sexpr): The loc formal argument can
	be some located object.

	* melt/warmelt-macro.melt (mexpand_debug): More debug.

	* testsuite/melt/tmacro-1.melt: New file.

2013-07-09  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-base.melt (make_sexpr): New function.

2013-07-09  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}
	* melt/generated/meltrunsup-inc.cc: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.cc: Regenerate.
	* melt/generated/warmelt-base+02.cc: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.cc: Regenerate.
	* melt/generated/warmelt-debug+01.cc: Regenerate.
	* melt/generated/warmelt-debug+02.cc: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.cc: Regenerate.
	* melt/generated/warmelt-first+01.cc: Regenerate.
	* melt/generated/warmelt-first+02.cc: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.cc: Regenerate.
	* melt/generated/warmelt-genobj+01.cc: Regenerate.
	* melt/generated/warmelt-genobj+02.cc: Regenerate.
	* melt/generated/warmelt-genobj+03.cc: Regenerate.
	* melt/generated/warmelt-genobj+04.cc: Regenerate.
	* melt/generated/warmelt-genobj+05.cc: Regenerate.
	* melt/generated/warmelt-genobj+06.cc: Regenerate.
	* melt/generated/warmelt-genobj+07.cc: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.cc: Regenerate.
	* melt/generated/warmelt-hooks+01.cc: Regenerate.
	* melt/generated/warmelt-hooks+02.cc: Regenerate.
	* melt/generated/warmelt-hooks+03.cc: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.cc: Regenerate.
	* melt/generated/warmelt-macro+01.cc: Regenerate.
	* melt/generated/warmelt-macro+02.cc: Regenerate.
	* melt/generated/warmelt-macro+03.cc: Regenerate.
	* melt/generated/warmelt-macro+04.cc: Regenerate.
	* melt/generated/warmelt-macro+05.cc: Regenerate.
	* melt/generated/warmelt-macro+06.cc: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.cc: Regenerate.
	* melt/generated/warmelt-modes+01.cc: Regenerate.
	* melt/generated/warmelt-modes+02.cc: Regenerate.
	* melt/generated/warmelt-modes+03.cc: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.cc: Regenerate.
	* melt/generated/warmelt-normal+01.cc: Regenerate.
	* melt/generated/warmelt-normal+02.cc: Regenerate.
	* melt/generated/warmelt-normal+03.cc: Regenerate.
	* melt/generated/warmelt-normal+04.cc: Regenerate.
	* melt/generated/warmelt-normal+05.cc: Regenerate.
	* melt/generated/warmelt-normal+06.cc: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.cc: Regenerate.
	* melt/generated/warmelt-normatch+01.cc: Regenerate.
	* melt/generated/warmelt-normatch+02.cc: Regenerate.
	* melt/generated/warmelt-normatch+03.cc: Regenerate.
	* melt/generated/warmelt-normatch+04.cc: Regenerate.
	* melt/generated/warmelt-normatch+05.cc: Regenerate.
	* melt/generated/warmelt-normatch+06.cc: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.cc: Regenerate.
	* melt/generated/warmelt-outobj+01.cc: Regenerate.
	* melt/generated/warmelt-outobj+02.cc: Regenerate.
	* melt/generated/warmelt-outobj+03.cc: Regenerate.
	* melt/generated/warmelt-outobj+04.cc: Regenerate.
	* melt/generated/warmelt-outobj+05.cc: Regenerate.
	* melt/generated/warmelt-outobj+06.cc: Regenerate.
	* melt/generated/warmelt-outobj+07.cc: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.cc: Regenerate.

2013-07-09  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Some corrections to make eval mode work again}}
	* melt/warmelt-outobj.melt (output_curframe_declstruct)
	(outpucod_initialextensionroutine): Improve emitted output.

2013-07-09  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-macro.melt (class_defined_macro_binding): New class
	with field mbind_defmacro.
	(mexpand_defmacro): Use it.
	{But export_value should accept defmacro-ed names.}

2013-07-09  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-macro.melt (macroexpand_1): Make an error when the
	field mbind_expanser of a macro is null. Return both values
	otherwise.

2013-07-09  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-first.melt (class_macro_binding): Change comment.

	* melt/warmelt-macro.melt (mexpand_defmacro): More, but still
	incomplete.

2013-07-08  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}
	* melt/generated/meltrunsup-inc.cc: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.cc: Regenerate.
	* melt/generated/warmelt-base+02.cc: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.cc: Regenerate.
	* melt/generated/warmelt-debug+01.cc: Regenerate.
	* melt/generated/warmelt-debug+02.cc: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.cc: Regenerate.
	* melt/generated/warmelt-first+01.cc: Regenerate.
	* melt/generated/warmelt-first+02.cc: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.cc: Regenerate.
	* melt/generated/warmelt-genobj+01.cc: Regenerate.
	* melt/generated/warmelt-genobj+02.cc: Regenerate.
	* melt/generated/warmelt-genobj+03.cc: Regenerate.
	* melt/generated/warmelt-genobj+04.cc: Regenerate.
	* melt/generated/warmelt-genobj+05.cc: Regenerate.
	* melt/generated/warmelt-genobj+06.cc: Regenerate.
	* melt/generated/warmelt-genobj+07.cc: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.cc: Regenerate.
	* melt/generated/warmelt-hooks+01.cc: Regenerate.
	* melt/generated/warmelt-hooks+02.cc: Regenerate.
	* melt/generated/warmelt-hooks+03.cc: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.cc: Regenerate.
	* melt/generated/warmelt-macro+01.cc: Regenerate.
	* melt/generated/warmelt-macro+02.cc: Regenerate.
	* melt/generated/warmelt-macro+03.cc: Regenerate.
	* melt/generated/warmelt-macro+04.cc: Regenerate.
	* melt/generated/warmelt-macro+05.cc: Regenerate.
	* melt/generated/warmelt-macro+06.cc: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.cc: Regenerate.
	* melt/generated/warmelt-modes+01.cc: Regenerate.
	* melt/generated/warmelt-modes+02.cc: Regenerate.
	* melt/generated/warmelt-modes+03.cc: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.cc: Regenerate.
	* melt/generated/warmelt-normal+01.cc: Regenerate.
	* melt/generated/warmelt-normal+02.cc: Regenerate.
	* melt/generated/warmelt-normal+03.cc: Regenerate.
	* melt/generated/warmelt-normal+04.cc: Regenerate.
	* melt/generated/warmelt-normal+05.cc: Regenerate.
	* melt/generated/warmelt-normal+06.cc: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.cc: Regenerate.
	* melt/generated/warmelt-normatch+01.cc: Regenerate.
	* melt/generated/warmelt-normatch+02.cc: Regenerate.
	* melt/generated/warmelt-normatch+03.cc: Regenerate.
	* melt/generated/warmelt-normatch+04.cc: Regenerate.
	* melt/generated/warmelt-normatch+05.cc: Regenerate.
	* melt/generated/warmelt-normatch+06.cc: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.cc: Regenerate.
	* melt/generated/warmelt-outobj+01.cc: Regenerate.
	* melt/generated/warmelt-outobj+02.cc: Regenerate.
	* melt/generated/warmelt-outobj+03.cc: Regenerate.
	* melt/generated/warmelt-outobj+04.cc: Regenerate.
	* melt/generated/warmelt-outobj+05.cc: Regenerate.
	* melt/generated/warmelt-outobj+06.cc: Regenerate.
	* melt/generated/warmelt-outobj+07.cc: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.cc: Regenerate.

2013-07-08  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Start adding defmacro and :macro let-bindings}}

	* melt/warmelt-first.melt (quasi_ctype_macro): New.

	* melt/warmelt-base.melt (error): Start adding a variadic error,
	but we really need a macro system to share code between error,
	warning, inform...

	* melt/warmelt-macro.melt (class_source_defmacro): New class with
	field smacro_body.
	(class_source_any_let_binding): New class with field sletb_binder.
	(class_source_macro_let_binding): New class with field
	(class_source_let_binding): Move sletb_binder field ...
	(mexpand_defmacro): New, very incomplete.
	(defmacro): New macro.
	(mexpand_letbinding): Handle :macro binding.

2013-07-05  Basile Starynkevitch  <basile@starynkevitch.net>

	{{keep only the classy frames}}
	* melt-runtime.h (melt_check_call_frames): Empty macro.
	Keep only the classy frames, so remove #if MELT_HAVE_CLASSY_FRAME....

	* melt-runtime.c: Keep only the classy frames, so remove #if
	MELT_HAVE_CLASSY_FRAME....
	(melt_check_call_frames_at): Remove.

2013-07-05  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}
	* melt/generated/meltrunsup-inc.cc: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.cc: Regenerate.
	* melt/generated/warmelt-base+02.cc: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.cc: Regenerate.
	* melt/generated/warmelt-debug+01.cc: Regenerate.
	* melt/generated/warmelt-debug+02.cc: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.cc: Regenerate.
	* melt/generated/warmelt-first+01.cc: Regenerate.
	* melt/generated/warmelt-first+02.cc: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.cc: Regenerate.
	* melt/generated/warmelt-genobj+01.cc: Regenerate.
	* melt/generated/warmelt-genobj+02.cc: Regenerate.
	* melt/generated/warmelt-genobj+03.cc: Regenerate.
	* melt/generated/warmelt-genobj+04.cc: Regenerate.
	* melt/generated/warmelt-genobj+05.cc: Regenerate.
	* melt/generated/warmelt-genobj+06.cc: Regenerate.
	* melt/generated/warmelt-genobj+07.cc: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.cc: Regenerate.
	* melt/generated/warmelt-hooks+01.cc: Regenerate.
	* melt/generated/warmelt-hooks+02.cc: Regenerate.
	* melt/generated/warmelt-hooks+03.cc: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.cc: Regenerate.
	* melt/generated/warmelt-macro+01.cc: Regenerate.
	* melt/generated/warmelt-macro+02.cc: Regenerate.
	* melt/generated/warmelt-macro+03.cc: Regenerate.
	* melt/generated/warmelt-macro+04.cc: Regenerate.
	* melt/generated/warmelt-macro+05.cc: Regenerate.
	* melt/generated/warmelt-macro+06.cc: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.cc: Regenerate.
	* melt/generated/warmelt-modes+01.cc: Regenerate.
	* melt/generated/warmelt-modes+02.cc: Regenerate.
	* melt/generated/warmelt-modes+03.cc: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.cc: Regenerate.
	* melt/generated/warmelt-normal+01.cc: Regenerate.
	* melt/generated/warmelt-normal+02.cc: Regenerate.
	* melt/generated/warmelt-normal+03.cc: Regenerate.
	* melt/generated/warmelt-normal+04.cc: Regenerate.
	* melt/generated/warmelt-normal+05.cc: Regenerate.
	* melt/generated/warmelt-normal+06.cc: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.cc: Regenerate.
	* melt/generated/warmelt-normatch+01.cc: Regenerate.
	* melt/generated/warmelt-normatch+02.cc: Regenerate.
	* melt/generated/warmelt-normatch+03.cc: Regenerate.
	* melt/generated/warmelt-normatch+04.cc: Regenerate.
	* melt/generated/warmelt-normatch+05.cc: Regenerate.
	* melt/generated/warmelt-normatch+06.cc: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.cc: Regenerate.
	* melt/generated/warmelt-outobj+01.cc: Regenerate.
	* melt/generated/warmelt-outobj+02.cc: Regenerate.
	* melt/generated/warmelt-outobj+03.cc: Regenerate.
	* melt/generated/warmelt-outobj+04.cc: Regenerate.
	* melt/generated/warmelt-outobj+05.cc: Regenerate.
	* melt/generated/warmelt-outobj+06.cc: Regenerate.
	* melt/generated/warmelt-outobj+07.cc: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.cc: Regenerate.

2013-07-06  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-outobj.melt (outpucod_procroutine): Emit use of
	argument to avoid warning.

	* melt-module.mk (GCCMELT_OPTIMIZED_PREPROFLAGS): Add
	-DMELTGCC_NOLINENUMBERING.

2013-07-06  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Remove non-classy frames from generation}}
	* melt/warmelt-genobj.melt
	(compilobj_nrep_quasiconstant_current_module_environment_reference):
	Remove emission of check about environment.

	* melt/warmelt-outobj.melt (output_curframe_declstruct)
	(output_curframe_declstruct_init)
	(outpucod_initialextensionroutine): Remove emission for non-classy
	frames.
	(outpucod_marker): Remove function.

2013-07-06  Basile Starynkevitch  <basile@starynkevitch.net>

	{{classy frames fully working}}
	* melt-runtime.h (MELT_HAVE_CLASSY_FRAME): Define to 1.
	(Melt_CallFrame): Use #if ENABLE_CHECKING instead of #if
	MELT_HAVE_DEBUG to enable the dbg_file etc...

	* melt-runtime.c (melt_dbgbacktrace, melt_dbgshortbacktrace):
	Shameful hack around a bug elsewhere; Don't compile the
	cfr->dbg_file() case when GCCMELT_CHECKMELTRUNTIME.

	* melt-build-script.tpl: The checkruntime case gets
	-DGCCMELT_CHECKMELTRUNTIME preprocessor flag.

	* melt-build-script.sh: Regenerate.

2013-07-05  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}
	* melt/generated/meltrunsup-inc.cc: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.cc: Regenerate.
	* melt/generated/warmelt-base+02.cc: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.cc: Regenerate.
	* melt/generated/warmelt-debug+01.cc: Regenerate.
	* melt/generated/warmelt-debug+02.cc: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.cc: Regenerate.
	* melt/generated/warmelt-first+01.cc: Regenerate.
	* melt/generated/warmelt-first+02.cc: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.cc: Regenerate.
	* melt/generated/warmelt-genobj+01.cc: Regenerate.
	* melt/generated/warmelt-genobj+02.cc: Regenerate.
	* melt/generated/warmelt-genobj+03.cc: Regenerate.
	* melt/generated/warmelt-genobj+04.cc: Regenerate.
	* melt/generated/warmelt-genobj+05.cc: Regenerate.
	* melt/generated/warmelt-genobj+06.cc: Regenerate.
	* melt/generated/warmelt-genobj+07.cc: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.cc: Regenerate.
	* melt/generated/warmelt-hooks+01.cc: Regenerate.
	* melt/generated/warmelt-hooks+02.cc: Regenerate.
	* melt/generated/warmelt-hooks+03.cc: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.cc: Regenerate.
	* melt/generated/warmelt-macro+01.cc: Regenerate.
	* melt/generated/warmelt-macro+02.cc: Regenerate.
	* melt/generated/warmelt-macro+03.cc: Regenerate.
	* melt/generated/warmelt-macro+04.cc: Regenerate.
	* melt/generated/warmelt-macro+05.cc: Regenerate.
	* melt/generated/warmelt-macro+06.cc: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.cc: Regenerate.
	* melt/generated/warmelt-modes+01.cc: Regenerate.
	* melt/generated/warmelt-modes+02.cc: Regenerate.
	* melt/generated/warmelt-modes+03.cc: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.cc: Regenerate.
	* melt/generated/warmelt-normal+01.cc: Regenerate.
	* melt/generated/warmelt-normal+02.cc: Regenerate.
	* melt/generated/warmelt-normal+03.cc: Regenerate.
	* melt/generated/warmelt-normal+04.cc: Regenerate.
	* melt/generated/warmelt-normal+05.cc: Regenerate.
	* melt/generated/warmelt-normal+06.cc: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.cc: Regenerate.
	* melt/generated/warmelt-normatch+01.cc: Regenerate.
	* melt/generated/warmelt-normatch+02.cc: Regenerate.
	* melt/generated/warmelt-normatch+03.cc: Regenerate.
	* melt/generated/warmelt-normatch+04.cc: Regenerate.
	* melt/generated/warmelt-normatch+05.cc: Regenerate.
	* melt/generated/warmelt-normatch+06.cc: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.cc: Regenerate.
	* melt/generated/warmelt-outobj+01.cc: Regenerate.
	* melt/generated/warmelt-outobj+02.cc: Regenerate.
	* melt/generated/warmelt-outobj+03.cc: Regenerate.
	* melt/generated/warmelt-outobj+04.cc: Regenerate.
	* melt/generated/warmelt-outobj+05.cc: Regenerate.
	* melt/generated/warmelt-outobj+06.cc: Regenerate.
	* melt/generated/warmelt-outobj+07.cc: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.cc: Regenerate.

2013-07-05  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (Melt_CallProtoFrame, Melt_CallFrame)
	(Melt_CallFrameWithValues): Use #if ENABLE_CHECKING not
	MELT_HAVE_DEBUG.

	* melt-runtime.c (melt_really_initialize): Likewise.
	(melt_dbgbacktrace, melt_dbgshortbacktrace): Use the dbg_file()
	when relevant.

	* melt/warmelt-outobj.melt (output_curframe_declstruct): Emit
	ENABLE_CHECKING, not MELT_HAVE_DEBUG.
	(outpucod_initialmoduleroutine): Don't emit the
	melt_sparebreakpoint_0.

2013-07-05  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/warmelt-base+01.cc: Regenerate.
	* melt/generated/warmelt-base+02.cc: Regenerate.
	* melt/generated/warmelt-base.cc: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+01.cc: Regenerate.
	* melt/generated/warmelt-debug+02.cc: Regenerate.
	* melt/generated/warmelt-debug.cc: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+01.cc: Regenerate.
	* melt/generated/warmelt-first+02.cc: Regenerate.
	* melt/generated/warmelt-first.cc: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.cc: Regenerate.
	* melt/generated/warmelt-genobj+02.cc: Regenerate.
	* melt/generated/warmelt-genobj+03.cc: Regenerate.
	* melt/generated/warmelt-genobj+04.cc: Regenerate.
	* melt/generated/warmelt-genobj+05.cc: Regenerate.
	* melt/generated/warmelt-genobj+06.cc: Regenerate.
	* melt/generated/warmelt-genobj+07.cc: Regenerate.
	* melt/generated/warmelt-genobj.cc: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+01.cc: Regenerate.
	* melt/generated/warmelt-hooks+02.cc: Regenerate.
	* melt/generated/warmelt-hooks+03.cc: Regenerate.
	* melt/generated/warmelt-hooks.cc: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+01.cc: Regenerate.
	* melt/generated/warmelt-macro+02.cc: Regenerate.
	* melt/generated/warmelt-macro+03.cc: Regenerate.
	* melt/generated/warmelt-macro+04.cc: Regenerate.
	* melt/generated/warmelt-macro+05.cc: Regenerate.
	* melt/generated/warmelt-macro+06.cc: Regenerate.
	* melt/generated/warmelt-macro.cc: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+01.cc: Regenerate.
	* melt/generated/warmelt-modes+02.cc: Regenerate.
	* melt/generated/warmelt-modes+03.cc: Regenerate.
	* melt/generated/warmelt-modes.cc: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+01.cc: Regenerate.
	* melt/generated/warmelt-normal+02.cc: Regenerate.
	* melt/generated/warmelt-normal+03.cc: Regenerate.
	* melt/generated/warmelt-normal+04.cc: Regenerate.
	* melt/generated/warmelt-normal+05.cc: Regenerate.
	* melt/generated/warmelt-normal+06.cc: Regenerate.
	* melt/generated/warmelt-normal.cc: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+01.cc: Regenerate.
	* melt/generated/warmelt-normatch+02.cc: Regenerate.
	* melt/generated/warmelt-normatch+03.cc: Regenerate.
	* melt/generated/warmelt-normatch+04.cc: Regenerate.
	* melt/generated/warmelt-normatch+05.cc: Regenerate.
	* melt/generated/warmelt-normatch+06.cc: Regenerate.
	* melt/generated/warmelt-normatch.cc: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+01.cc: Regenerate.
	* melt/generated/warmelt-outobj+02.cc: Regenerate.
	* melt/generated/warmelt-outobj+03.cc: Regenerate.
	* melt/generated/warmelt-outobj+04.cc: Regenerate.
	* melt/generated/warmelt-outobj+05.cc: Regenerate.
	* melt/generated/warmelt-outobj+06.cc: Regenerate.
	* melt/generated/warmelt-outobj+07.cc: Regenerate.
	* melt/generated/warmelt-outobj.cc: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-07-05  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (melt_sparebreakpoint_0_at)
	(melt_sparebreakpoint_1_at, melt_sparebreakpoint_2_at): Declare as
	MELT_EXTERN functions.
	(melt_sparebreakpoint_0): New macro.

	* melt-runtime.c (melt_really_initialize): Write a comment in
	dbgfile about GCCMELT_DEBUG_CALL_FRAME environemnt variable.
	(melt_sparebreakpoint_0_at): New function.

	* melt/warmelt-outobj.melt (outpucod_initialmoduleroutine): Emit
	debug printing and call to melt_sparebreakpoint_0.

2013-07-05  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/warmelt-base.cc: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.cc: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+02.cc: Regenerate.
	* melt/generated/warmelt-first.cc: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.cc: Regenerate.
	* melt/generated/warmelt-genobj+02.cc: Regenerate.
	* melt/generated/warmelt-genobj+03.cc: Regenerate.
	* melt/generated/warmelt-genobj+04.cc: Regenerate.
	* melt/generated/warmelt-genobj+05.cc: Regenerate.
	* melt/generated/warmelt-genobj+06.cc: Regenerate.
	* melt/generated/warmelt-genobj+07.cc: Regenerate.
	* melt/generated/warmelt-genobj.cc: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.cc: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+01.cc: Regenerate.
	* melt/generated/warmelt-macro+02.cc: Regenerate.
	* melt/generated/warmelt-macro+03.cc: Regenerate.
	* melt/generated/warmelt-macro+04.cc: Regenerate.
	* melt/generated/warmelt-macro+05.cc: Regenerate.
	* melt/generated/warmelt-macro+06.cc: Regenerate.
	* melt/generated/warmelt-macro.cc: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+01.cc: Regenerate.
	* melt/generated/warmelt-modes+02.cc: Regenerate.
	* melt/generated/warmelt-modes.cc: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+01.cc: Regenerate.
	* melt/generated/warmelt-normal+02.cc: Regenerate.
	* melt/generated/warmelt-normal+03.cc: Regenerate.
	* melt/generated/warmelt-normal+04.cc: Regenerate.
	* melt/generated/warmelt-normal+05.cc: Regenerate.
	* melt/generated/warmelt-normal+06.cc: Regenerate.
	* melt/generated/warmelt-normal.cc: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.cc: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+02.cc: Regenerate.
	* melt/generated/warmelt-outobj+06.cc: Regenerate.
	* melt/generated/warmelt-outobj.cc: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-07-05  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-genobj.melt
	(compilobj_nrep_quasiconstant_current_module_environment_reference):
	Emit a check to ease debugging of classy frames.

	* melt/warmelt-outobj.melt (outpucod_initialmoduleroutine):
	Correct typo in frame pointer formal argument name.

2013-07-05  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/meltrunsup-inc.cc: Regenerate.
	* melt/generated/warmelt-base+01.cc: Regenerate.
	* melt/generated/warmelt-base+02.cc: Regenerate.
	* melt/generated/warmelt-base.cc: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+01.cc: Regenerate.
	* melt/generated/warmelt-debug+02.cc: Regenerate.
	* melt/generated/warmelt-debug.cc: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+01.cc: Regenerate.
	* melt/generated/warmelt-first+02.cc: Regenerate.
	* melt/generated/warmelt-first.cc: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.cc: Regenerate.
	* melt/generated/warmelt-genobj+02.cc: Regenerate.
	* melt/generated/warmelt-genobj+03.cc: Regenerate.
	* melt/generated/warmelt-genobj+04.cc: Regenerate.
	* melt/generated/warmelt-genobj+05.cc: Regenerate.
	* melt/generated/warmelt-genobj+06.cc: Regenerate.
	* melt/generated/warmelt-genobj+07.cc: Regenerate.
	* melt/generated/warmelt-genobj.cc: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+01.cc: Regenerate.
	* melt/generated/warmelt-hooks+02.cc: Regenerate.
	* melt/generated/warmelt-hooks+03.cc: Regenerate.
	* melt/generated/warmelt-hooks.cc: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+01.cc: Regenerate.
	* melt/generated/warmelt-macro+02.cc: Regenerate.
	* melt/generated/warmelt-macro+03.cc: Regenerate.
	* melt/generated/warmelt-macro+04.cc: Regenerate.
	* melt/generated/warmelt-macro+05.cc: Regenerate.
	* melt/generated/warmelt-macro+06.cc: Regenerate.
	* melt/generated/warmelt-macro.cc: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+01.cc: Regenerate.
	* melt/generated/warmelt-modes+02.cc: Regenerate.
	* melt/generated/warmelt-modes+03.cc: Regenerate.
	* melt/generated/warmelt-modes.cc: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+01.cc: Regenerate.
	* melt/generated/warmelt-normal+02.cc: Regenerate.
	* melt/generated/warmelt-normal+03.cc: Regenerate.
	* melt/generated/warmelt-normal+04.cc: Regenerate.
	* melt/generated/warmelt-normal+05.cc: Regenerate.
	* melt/generated/warmelt-normal+06.cc: Regenerate.
	* melt/generated/warmelt-normal.cc: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+01.cc: Regenerate.
	* melt/generated/warmelt-normatch+02.cc: Regenerate.
	* melt/generated/warmelt-normatch+03.cc: Regenerate.
	* melt/generated/warmelt-normatch+04.cc: Regenerate.
	* melt/generated/warmelt-normatch+05.cc: Regenerate.
	* melt/generated/warmelt-normatch+06.cc: Regenerate.
	* melt/generated/warmelt-normatch.cc: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+01.cc: Regenerate.
	* melt/generated/warmelt-outobj+02.cc: Regenerate.
	* melt/generated/warmelt-outobj+03.cc: Regenerate.
	* melt/generated/warmelt-outobj+04.cc: Regenerate.
	* melt/generated/warmelt-outobj+05.cc: Regenerate.
	* melt/generated/warmelt-outobj+06.cc: Regenerate.
	* melt/generated/warmelt-outobj+07.cc: Regenerate.
	* melt/generated/warmelt-outobj.cc: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-07-05  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-first.melt (hook_value_exporter)
	(hook_macro_exporter): Fatal error when no environment.

2013-07-04  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.cc: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+01.cc: Regenerate.
	* melt/generated/warmelt-first+02.cc: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.cc: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-07-04  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.c (melt_dbgbacktrace, melt_dbgshortbacktrace): Show
	the source location in classy frames.

	* melt/warmelt-first.melt (hook_value_exporter): Warns on failure
	and show backtrace.

2013-07-04  Basile Starynkevitch  <basile@starynkevitch.net>

	{{First MELT bootstrap with classy frames, but optimized flavour dont work!}}
	* melt-runtime.h (MELT_HAVE_CLASSY_FRAME): Can be set to 1.
	(Melt_CallProtoFrame): Improve dbgcall_file print.

2013-07-04  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/warmelt-base+01.cc: Regenerate.
	* melt/generated/warmelt-base+02.cc: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.cc: Regenerate.
	* melt/generated/warmelt-debug+01.cc: Regenerate.
	* melt/generated/warmelt-debug+02.cc: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.cc: Regenerate.
	* melt/generated/warmelt-first+01.cc: Regenerate.
	* melt/generated/warmelt-first+02.cc: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.cc: Regenerate.
	* melt/generated/warmelt-genobj+01.cc: Regenerate.
	* melt/generated/warmelt-genobj+02.cc: Regenerate.
	* melt/generated/warmelt-genobj+03.cc: Regenerate.
	* melt/generated/warmelt-genobj+04.cc: Regenerate.
	* melt/generated/warmelt-genobj+05.cc: Regenerate.
	* melt/generated/warmelt-genobj+06.cc: Regenerate.
	* melt/generated/warmelt-genobj+07.cc: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.cc: Regenerate.
	* melt/generated/warmelt-hooks+01.cc: Regenerate.
	* melt/generated/warmelt-hooks+02.cc: Regenerate.
	* melt/generated/warmelt-hooks+03.cc: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.cc: Regenerate.
	* melt/generated/warmelt-macro+01.cc: Regenerate.
	* melt/generated/warmelt-macro+02.cc: Regenerate.
	* melt/generated/warmelt-macro+03.cc: Regenerate.
	* melt/generated/warmelt-macro+04.cc: Regenerate.
	* melt/generated/warmelt-macro+05.cc: Regenerate.
	* melt/generated/warmelt-macro+06.cc: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.cc: Regenerate.
	* melt/generated/warmelt-modes+01.cc: Regenerate.
	* melt/generated/warmelt-modes+02.cc: Regenerate.
	* melt/generated/warmelt-modes+03.cc: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.cc: Regenerate.
	* melt/generated/warmelt-normal+01.cc: Regenerate.
	* melt/generated/warmelt-normal+02.cc: Regenerate.
	* melt/generated/warmelt-normal+03.cc: Regenerate.
	* melt/generated/warmelt-normal+04.cc: Regenerate.
	* melt/generated/warmelt-normal+05.cc: Regenerate.
	* melt/generated/warmelt-normal+06.cc: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.cc: Regenerate.
	* melt/generated/warmelt-normatch+01.cc: Regenerate.
	* melt/generated/warmelt-normatch+02.cc: Regenerate.
	* melt/generated/warmelt-normatch+03.cc: Regenerate.
	* melt/generated/warmelt-normatch+04.cc: Regenerate.
	* melt/generated/warmelt-normatch+05.cc: Regenerate.
	* melt/generated/warmelt-normatch+06.cc: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.cc: Regenerate.
	* melt/generated/warmelt-outobj+01.cc: Regenerate.
	* melt/generated/warmelt-outobj+02.cc: Regenerate.
	* melt/generated/warmelt-outobj+03.cc: Regenerate.
	* melt/generated/warmelt-outobj+04.cc: Regenerate.
	* melt/generated/warmelt-outobj+05.cc: Regenerate.
	* melt/generated/warmelt-outobj+06.cc: Regenerate.
	* melt/generated/warmelt-outobj+07.cc: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.cc: Regenerate.

2013-07-04  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-outobj.melt (outpucod_initialmoduleroutine): Emit
	the typedef for meltinitial_frame_t using
	initial_classy_frame_name.

2013-07-04  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/warmelt-base+01.cc: Regenerate.
	* melt/generated/warmelt-base+02.cc: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.cc: Regenerate.
	* melt/generated/warmelt-debug+01.cc: Regenerate.
	* melt/generated/warmelt-debug+02.cc: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.cc: Regenerate.
	* melt/generated/warmelt-first+01.cc: Regenerate.
	* melt/generated/warmelt-first+02.cc: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.cc: Regenerate.
	* melt/generated/warmelt-genobj+01.cc: Regenerate.
	* melt/generated/warmelt-genobj+02.cc: Regenerate.
	* melt/generated/warmelt-genobj+03.cc: Regenerate.
	* melt/generated/warmelt-genobj+04.cc: Regenerate.
	* melt/generated/warmelt-genobj+05.cc: Regenerate.
	* melt/generated/warmelt-genobj+06.cc: Regenerate.
	* melt/generated/warmelt-genobj+07.cc: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.cc: Regenerate.
	* melt/generated/warmelt-hooks+01.cc: Regenerate.
	* melt/generated/warmelt-hooks+02.cc: Regenerate.
	* melt/generated/warmelt-hooks+03.cc: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.cc: Regenerate.
	* melt/generated/warmelt-macro+01.cc: Regenerate.
	* melt/generated/warmelt-macro+02.cc: Regenerate.
	* melt/generated/warmelt-macro+03.cc: Regenerate.
	* melt/generated/warmelt-macro+04.cc: Regenerate.
	* melt/generated/warmelt-macro+05.cc: Regenerate.
	* melt/generated/warmelt-macro+06.cc: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.cc: Regenerate.
	* melt/generated/warmelt-modes+01.cc: Regenerate.
	* melt/generated/warmelt-modes+02.cc: Regenerate.
	* melt/generated/warmelt-modes+03.cc: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.cc: Regenerate.
	* melt/generated/warmelt-normal+01.cc: Regenerate.
	* melt/generated/warmelt-normal+02.cc: Regenerate.
	* melt/generated/warmelt-normal+03.cc: Regenerate.
	* melt/generated/warmelt-normal+04.cc: Regenerate.
	* melt/generated/warmelt-normal+05.cc: Regenerate.
	* melt/generated/warmelt-normal+06.cc: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.cc: Regenerate.
	* melt/generated/warmelt-normatch+01.cc: Regenerate.
	* melt/generated/warmelt-normatch+02.cc: Regenerate.
	* melt/generated/warmelt-normatch+03.cc: Regenerate.
	* melt/generated/warmelt-normatch+04.cc: Regenerate.
	* melt/generated/warmelt-normatch+05.cc: Regenerate.
	* melt/generated/warmelt-normatch+06.cc: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.cc: Regenerate.
	* melt/generated/warmelt-outobj+01.cc: Regenerate.
	* melt/generated/warmelt-outobj+02.cc: Regenerate.
	* melt/generated/warmelt-outobj+03.cc: Regenerate.
	* melt/generated/warmelt-outobj+04.cc: Regenerate.
	* melt/generated/warmelt-outobj+05.cc: Regenerate.
	* melt/generated/warmelt-outobj+06.cc: Regenerate.
	* melt/generated/warmelt-outobj+07.cc: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.cc: Regenerate.

2013-07-04  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-genobj.melt (class_initialroutineobj): Move the oirout_modulename here.
	(class_initial_extension_routineobj): Remove oiroutx_extendname field.
	(compile2obj_initextendproc): Set the oirout_modulename field.

	* melt/warmelt-outobj.melt (initial_classy_frame_name): New
	utility function needed because the frame class of the initial
	function should be unique...

	(output_curframe_declstruct, translate_macroexpanded_list): Use it.

2013-07-04  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/warmelt-base+01.cc: Regenerate.
	* melt/generated/warmelt-base+02.cc: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.cc: Regenerate.
	* melt/generated/warmelt-debug+01.cc: Regenerate.
	* melt/generated/warmelt-debug+02.cc: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.cc: Regenerate.
	* melt/generated/warmelt-first+01.cc: Regenerate.
	* melt/generated/warmelt-first+02.cc: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.cc: Regenerate.
	* melt/generated/warmelt-genobj+01.cc: Regenerate.
	* melt/generated/warmelt-genobj+02.cc: Regenerate.
	* melt/generated/warmelt-genobj+03.cc: Regenerate.
	* melt/generated/warmelt-genobj+04.cc: Regenerate.
	* melt/generated/warmelt-genobj+05.cc: Regenerate.
	* melt/generated/warmelt-genobj+06.cc: Regenerate.
	* melt/generated/warmelt-genobj+07.cc: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.cc: Regenerate.
	* melt/generated/warmelt-hooks+01.cc: Regenerate.
	* melt/generated/warmelt-hooks+02.cc: Regenerate.
	* melt/generated/warmelt-hooks+03.cc: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.cc: Regenerate.
	* melt/generated/warmelt-macro+01.cc: Regenerate.
	* melt/generated/warmelt-macro+02.cc: Regenerate.
	* melt/generated/warmelt-macro+03.cc: Regenerate.
	* melt/generated/warmelt-macro+04.cc: Regenerate.
	* melt/generated/warmelt-macro+05.cc: Regenerate.
	* melt/generated/warmelt-macro+06.cc: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.cc: Regenerate.
	* melt/generated/warmelt-modes+01.cc: Regenerate.
	* melt/generated/warmelt-modes+02.cc: Regenerate.
	* melt/generated/warmelt-modes+03.cc: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.cc: Regenerate.
	* melt/generated/warmelt-normal+01.cc: Regenerate.
	* melt/generated/warmelt-normal+02.cc: Regenerate.
	* melt/generated/warmelt-normal+03.cc: Regenerate.
	* melt/generated/warmelt-normal+04.cc: Regenerate.
	* melt/generated/warmelt-normal+05.cc: Regenerate.
	* melt/generated/warmelt-normal+06.cc: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.cc: Regenerate.
	* melt/generated/warmelt-normatch+01.cc: Regenerate.
	* melt/generated/warmelt-normatch+02.cc: Regenerate.
	* melt/generated/warmelt-normatch+03.cc: Regenerate.
	* melt/generated/warmelt-normatch+04.cc: Regenerate.
	* melt/generated/warmelt-normatch+05.cc: Regenerate.
	* melt/generated/warmelt-normatch+06.cc: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.cc: Regenerate.
	* melt/generated/warmelt-outobj+01.cc: Regenerate.
	* melt/generated/warmelt-outobj+02.cc: Regenerate.
	* melt/generated/warmelt-outobj+03.cc: Regenerate.
	* melt/generated/warmelt-outobj+04.cc: Regenerate.
	* melt/generated/warmelt-outobj+05.cc: Regenerate.
	* melt/generated/warmelt-outobj+06.cc: Regenerate.
	* melt/generated/warmelt-outobj+07.cc: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.cc: Regenerate.

2013-07-04  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (Melt_CallProtoFrame::Melt_CallProtoFrame): Move
	call to melt_clear_rest_of_frame after the debug printing.

	* melt/warmelt-outobj.melt (output_curframe_declstruct_init): Emit
	a debugprint of the sizeof Melt_InitialFrame...

2013-07-04  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/warmelt-base+01.cc: Regenerate.
	* melt/generated/warmelt-base+02.cc: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.cc: Regenerate.
	* melt/generated/warmelt-debug+01.cc: Regenerate.
	* melt/generated/warmelt-debug+02.cc: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.cc: Regenerate.
	* melt/generated/warmelt-first+01.cc: Regenerate.
	* melt/generated/warmelt-first+02.cc: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.cc: Regenerate.
	* melt/generated/warmelt-genobj+01.cc: Regenerate.
	* melt/generated/warmelt-genobj+02.cc: Regenerate.
	* melt/generated/warmelt-genobj+03.cc: Regenerate.
	* melt/generated/warmelt-genobj+04.cc: Regenerate.
	* melt/generated/warmelt-genobj+05.cc: Regenerate.
	* melt/generated/warmelt-genobj+06.cc: Regenerate.
	* melt/generated/warmelt-genobj+07.cc: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.cc: Regenerate.
	* melt/generated/warmelt-hooks+01.cc: Regenerate.
	* melt/generated/warmelt-hooks+02.cc: Regenerate.
	* melt/generated/warmelt-hooks+03.cc: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.cc: Regenerate.
	* melt/generated/warmelt-macro+01.cc: Regenerate.
	* melt/generated/warmelt-macro+02.cc: Regenerate.
	* melt/generated/warmelt-macro+03.cc: Regenerate.
	* melt/generated/warmelt-macro+04.cc: Regenerate.
	* melt/generated/warmelt-macro+05.cc: Regenerate.
	* melt/generated/warmelt-macro+06.cc: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.cc: Regenerate.
	* melt/generated/warmelt-modes+01.cc: Regenerate.
	* melt/generated/warmelt-modes+02.cc: Regenerate.
	* melt/generated/warmelt-modes+03.cc: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.cc: Regenerate.
	* melt/generated/warmelt-normal+01.cc: Regenerate.
	* melt/generated/warmelt-normal+02.cc: Regenerate.
	* melt/generated/warmelt-normal+03.cc: Regenerate.
	* melt/generated/warmelt-normal+04.cc: Regenerate.
	* melt/generated/warmelt-normal+05.cc: Regenerate.
	* melt/generated/warmelt-normal+06.cc: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.cc: Regenerate.
	* melt/generated/warmelt-normatch+01.cc: Regenerate.
	* melt/generated/warmelt-normatch+02.cc: Regenerate.
	* melt/generated/warmelt-normatch+03.cc: Regenerate.
	* melt/generated/warmelt-normatch+04.cc: Regenerate.
	* melt/generated/warmelt-normatch+05.cc: Regenerate.
	* melt/generated/warmelt-normatch+06.cc: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.cc: Regenerate.
	* melt/generated/warmelt-outobj+01.cc: Regenerate.
	* melt/generated/warmelt-outobj+02.cc: Regenerate.
	* melt/generated/warmelt-outobj+03.cc: Regenerate.
	* melt/generated/warmelt-outobj+04.cc: Regenerate.
	* melt/generated/warmelt-outobj+05.cc: Regenerate.
	* melt/generated/warmelt-outobj+06.cc: Regenerate.
	* melt/generated/warmelt-outobj+07.cc: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.cc: Regenerate.

2013-07-04  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-outobj.melt (output_curframe_declstruct_init): Emit
	classy frame with __FILE__ and __LINE__ ....

2013-07-04  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}

	* melt//generated/warmelt-base+01.cc: Regenerate.
	* melt//generated/warmelt-base+02.cc: Regenerate.
	* melt//generated/warmelt-base+meltdesc.c: Regenerate.
	* melt//generated/warmelt-base+melttime.h: Regenerate.
	* melt//generated/warmelt-base.cc: Regenerate.
	* melt//generated/warmelt-debug+01.cc: Regenerate.
	* melt//generated/warmelt-debug+02.cc: Regenerate.
	* melt//generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt//generated/warmelt-debug+melttime.h: Regenerate.
	* melt//generated/warmelt-debug.cc: Regenerate.
	* melt//generated/warmelt-first+01.cc: Regenerate.
	* melt//generated/warmelt-first+02.cc: Regenerate.
	* melt//generated/warmelt-first+meltdesc.c: Regenerate.
	* melt//generated/warmelt-first+melttime.h: Regenerate.
	* melt//generated/warmelt-first.cc: Regenerate.
	* melt//generated/warmelt-genobj+01.cc: Regenerate.
	* melt//generated/warmelt-genobj+02.cc: Regenerate.
	* melt//generated/warmelt-genobj+03.cc: Regenerate.
	* melt//generated/warmelt-genobj+04.cc: Regenerate.
	* melt//generated/warmelt-genobj+05.cc: Regenerate.
	* melt//generated/warmelt-genobj+06.cc: Regenerate.
	* melt//generated/warmelt-genobj+07.cc: Regenerate.
	* melt//generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt//generated/warmelt-genobj+melttime.h: Regenerate.
	* melt//generated/warmelt-genobj.cc: Regenerate.
	* melt//generated/warmelt-hooks+01.cc: Regenerate.
	* melt//generated/warmelt-hooks+02.cc: Regenerate.
	* melt//generated/warmelt-hooks+03.cc: Regenerate.
	* melt//generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt//generated/warmelt-hooks+melttime.h: Regenerate.
	* melt//generated/warmelt-hooks.cc: Regenerate.
	* melt//generated/warmelt-macro+01.cc: Regenerate.
	* melt//generated/warmelt-macro+02.cc: Regenerate.
	* melt//generated/warmelt-macro+03.cc: Regenerate.
	* melt//generated/warmelt-macro+04.cc: Regenerate.
	* melt//generated/warmelt-macro+05.cc: Regenerate.
	* melt//generated/warmelt-macro+06.cc: Regenerate.
	* melt//generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt//generated/warmelt-macro+melttime.h: Regenerate.
	* melt//generated/warmelt-macro.cc: Regenerate.
	* melt//generated/warmelt-modes+01.cc: Regenerate.
	* melt//generated/warmelt-modes+02.cc: Regenerate.
	* melt//generated/warmelt-modes+03.cc: Regenerate.
	* melt//generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt//generated/warmelt-modes+melttime.h: Regenerate.
	* melt//generated/warmelt-modes.cc: Regenerate.
	* melt//generated/warmelt-normal+01.cc: Regenerate.
	* melt//generated/warmelt-normal+02.cc: Regenerate.
	* melt//generated/warmelt-normal+03.cc: Regenerate.
	* melt//generated/warmelt-normal+04.cc: Regenerate.
	* melt//generated/warmelt-normal+05.cc: Regenerate.
	* melt//generated/warmelt-normal+06.cc: Regenerate.
	* melt//generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt//generated/warmelt-normal+melttime.h: Regenerate.
	* melt//generated/warmelt-normal.cc: Regenerate.
	* melt//generated/warmelt-normatch+01.cc: Regenerate.
	* melt//generated/warmelt-normatch+02.cc: Regenerate.
	* melt//generated/warmelt-normatch+03.cc: Regenerate.
	* melt//generated/warmelt-normatch+04.cc: Regenerate.
	* melt//generated/warmelt-normatch+05.cc: Regenerate.
	* melt//generated/warmelt-normatch+06.cc: Regenerate.
	* melt//generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt//generated/warmelt-normatch+melttime.h: Regenerate.
	* melt//generated/warmelt-normatch.cc: Regenerate.
	* melt//generated/warmelt-outobj+01.cc: Regenerate.
	* melt//generated/warmelt-outobj+02.cc: Regenerate.
	* melt//generated/warmelt-outobj+03.cc: Regenerate.
	* melt//generated/warmelt-outobj+04.cc: Regenerate.
	* melt//generated/warmelt-outobj+05.cc: Regenerate.
	* melt//generated/warmelt-outobj+06.cc: Regenerate.
	* melt//generated/warmelt-outobj+07.cc: Regenerate.
	* melt//generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt//generated/warmelt-outobj+melttime.h: Regenerate.
	* melt//generated/warmelt-outobj.cc: Regenerate.


2013-07-04  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-outobj.melt (output_curframe_declstruct_init): Emit
	a debugprint for start of initial routine.

2013-07-04  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.cc: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.cc: Regenerate.
	* melt/generated/warmelt-first+01.cc: Regenerate.
	* melt/generated/warmelt-first+02.cc: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.cc: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.cc: Regenerate.
	* melt/generated/warmelt-hooks+01.cc: Regenerate.
	* melt/generated/warmelt-hooks+02.cc: Regenerate.
	* melt/generated/warmelt-hooks+03.cc: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.cc: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.cc: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.cc: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.cc: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.cc: Regenerate.
	* melt/generated/warmelt-outobj+02.cc: Regenerate.
	* melt/generated/warmelt-outobj+03.cc: Regenerate.
	* melt/generated/warmelt-outobj+04.cc: Regenerate.
	* melt/generated/warmelt-outobj+05.cc: Regenerate.
	* melt/generated/warmelt-outobj+06.cc: Regenerate.
	* melt/generated/warmelt-outobj+07.cc: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.cc: Regenerate.

2013-07-04  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-outobj.melt (outpucod_initialmoduleroutine): Emit a
	debugeprintf at end of initial routine.

2013-07-04  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup-inc.cc: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.cc: Regenerate.
	* melt/generated/warmelt-base+02.cc: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.cc: Regenerate.
	* melt/generated/warmelt-debug+01.cc: Regenerate.
	* melt/generated/warmelt-debug+02.cc: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.cc: Regenerate.
	* melt/generated/warmelt-first+01.cc: Regenerate.
	* melt/generated/warmelt-first+02.cc: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.cc: Regenerate.
	* melt/generated/warmelt-genobj+01.cc: Regenerate.
	* melt/generated/warmelt-genobj+02.cc: Regenerate.
	* melt/generated/warmelt-genobj+03.cc: Regenerate.
	* melt/generated/warmelt-genobj+04.cc: Regenerate.
	* melt/generated/warmelt-genobj+05.cc: Regenerate.
	* melt/generated/warmelt-genobj+06.cc: Regenerate.
	* melt/generated/warmelt-genobj+07.cc: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.cc: Regenerate.
	* melt/generated/warmelt-hooks+01.cc: Regenerate.
	* melt/generated/warmelt-hooks+02.cc: Regenerate.
	* melt/generated/warmelt-hooks+03.cc: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.cc: Regenerate.
	* melt/generated/warmelt-macro+01.cc: Regenerate.
	* melt/generated/warmelt-macro+02.cc: Regenerate.
	* melt/generated/warmelt-macro+03.cc: Regenerate.
	* melt/generated/warmelt-macro+04.cc: Regenerate.
	* melt/generated/warmelt-macro+05.cc: Regenerate.
	* melt/generated/warmelt-macro+06.cc: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.cc: Regenerate.
	* melt/generated/warmelt-modes+01.cc: Regenerate.
	* melt/generated/warmelt-modes+02.cc: Regenerate.
	* melt/generated/warmelt-modes+03.cc: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.cc: Regenerate.
	* melt/generated/warmelt-normal+01.cc: Regenerate.
	* melt/generated/warmelt-normal+02.cc: Regenerate.
	* melt/generated/warmelt-normal+03.cc: Regenerate.
	* melt/generated/warmelt-normal+04.cc: Regenerate.
	* melt/generated/warmelt-normal+05.cc: Regenerate.
	* melt/generated/warmelt-normal+06.cc: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.cc: Regenerate.
	* melt/generated/warmelt-normatch+01.cc: Regenerate.
	* melt/generated/warmelt-normatch+02.cc: Regenerate.
	* melt/generated/warmelt-normatch+03.cc: Regenerate.
	* melt/generated/warmelt-normatch+04.cc: Regenerate.
	* melt/generated/warmelt-normatch+05.cc: Regenerate.
	* melt/generated/warmelt-normatch+06.cc: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.cc: Regenerate.
	* melt/generated/warmelt-outobj+01.cc: Regenerate.
	* melt/generated/warmelt-outobj+02.cc: Regenerate.
	* melt/generated/warmelt-outobj+03.cc: Regenerate.
	* melt/generated/warmelt-outobj+04.cc: Regenerate.
	* melt/generated/warmelt-outobj+05.cc: Regenerate.
	* melt/generated/warmelt-outobj+06.cc: Regenerate.
	* melt/generated/warmelt-outobj+07.cc: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.cc: Regenerate.

2013-07-04  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-first.melt (hook_intern_symbol): More debug.

	* melt/warmelt-outobj.melt (output_curframe_declstruct_init)
	(outpucod_initialmoduleroutine): Emit clear of meltfram__ only
	without classy frames.

2013-07-03  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup-inc.cc: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.cc: Regenerate.
	* melt/generated/warmelt-base+02.cc: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.cc: Regenerate.
	* melt/generated/warmelt-debug+01.cc: Regenerate.
	* melt/generated/warmelt-debug+02.cc: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.cc: Regenerate.
	* melt/generated/warmelt-first+01.cc: Regenerate.
	* melt/generated/warmelt-first+02.cc: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.cc: Regenerate.
	* melt/generated/warmelt-genobj+01.cc: Regenerate.
	* melt/generated/warmelt-genobj+02.cc: Regenerate.
	* melt/generated/warmelt-genobj+03.cc: Regenerate.
	* melt/generated/warmelt-genobj+04.cc: Regenerate.
	* melt/generated/warmelt-genobj+05.cc: Regenerate.
	* melt/generated/warmelt-genobj+06.cc: Regenerate.
	* melt/generated/warmelt-genobj+07.cc: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.cc: Regenerate.
	* melt/generated/warmelt-hooks+01.cc: Regenerate.
	* melt/generated/warmelt-hooks+02.cc: Regenerate.
	* melt/generated/warmelt-hooks+03.cc: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.cc: Regenerate.
	* melt/generated/warmelt-macro+01.cc: Regenerate.
	* melt/generated/warmelt-macro+02.cc: Regenerate.
	* melt/generated/warmelt-macro+03.cc: Regenerate.
	* melt/generated/warmelt-macro+04.cc: Regenerate.
	* melt/generated/warmelt-macro+05.cc: Regenerate.
	* melt/generated/warmelt-macro+06.cc: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.cc: Regenerate.
	* melt/generated/warmelt-modes+01.cc: Regenerate.
	* melt/generated/warmelt-modes+02.cc: Regenerate.
	* melt/generated/warmelt-modes+03.cc: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.cc: Regenerate.
	* melt/generated/warmelt-normal+01.cc: Regenerate.
	* melt/generated/warmelt-normal+02.cc: Regenerate.
	* melt/generated/warmelt-normal+03.cc: Regenerate.
	* melt/generated/warmelt-normal+04.cc: Regenerate.
	* melt/generated/warmelt-normal+05.cc: Regenerate.
	* melt/generated/warmelt-normal+06.cc: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.cc: Regenerate.
	* melt/generated/warmelt-normatch+01.cc: Regenerate.
	* melt/generated/warmelt-normatch+02.cc: Regenerate.
	* melt/generated/warmelt-normatch+03.cc: Regenerate.
	* melt/generated/warmelt-normatch+04.cc: Regenerate.
	* melt/generated/warmelt-normatch+05.cc: Regenerate.
	* melt/generated/warmelt-normatch+06.cc: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.cc: Regenerate.
	* melt/generated/warmelt-outobj+01.cc: Regenerate.
	* melt/generated/warmelt-outobj+02.cc: Regenerate.
	* melt/generated/warmelt-outobj+03.cc: Regenerate.
	* melt/generated/warmelt-outobj+04.cc: Regenerate.
	* melt/generated/warmelt-outobj+05.cc: Regenerate.
	* melt/generated/warmelt-outobj+06.cc: Regenerate.
	* melt/generated/warmelt-outobj+07.cc: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.cc: Regenerate.

2013-07-03  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (Melt_CallProtoFrame): Use the basename of the
	file name.

	* melt/warmelt-first.melt (hook_intern_symbol): Add debugeprintf.

2013-07-03  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (Melt_CallProtoFrame::_top_call_frame_): Replaced
	by global melt_top_call_frame.
	(Melt_CallFrameWithValues): Ensure mcfr_varptr has at least one
	cell, even for empty frames. Add debuggc messages.
	(melt_curframdepth): Use melt_top_call_frame.
	* melt-runtime.c (melt_top_call_frame): Declare.
	(melt_marking_callback, melt_minor_copying_garbage_collector)
	(melt_dbgbacktrace, melt_dbgshortbacktrace): Use it.

2013-07-03  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (Melt_CallFrameWithValues::melt_forward_values):
	Also forward the current value, that is the hook or closure.
	(Melt_CallFrameWithValues::melt_mark_values):
	Also mark the current value, that is the hook or closure.

2013-07-03  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-outobj.melt (output_curframe_declstruct): Emit
	constructor with file & line arguments when debugging.

	{{Regenerate}}
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/meltrunsup-inc.cc: Regenerate.
	* melt/generated/warmelt-base+01.cc: Regenerate.
	* melt/generated/warmelt-base+02.cc: Regenerate.
	* melt/generated/warmelt-base.cc: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+01.cc: Regenerate.
	* melt/generated/warmelt-debug+02.cc: Regenerate.
	* melt/generated/warmelt-debug.cc: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+01.cc: Regenerate.
	* melt/generated/warmelt-first+02.cc: Regenerate.
	* melt/generated/warmelt-first.cc: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.cc: Regenerate.
	* melt/generated/warmelt-genobj+02.cc: Regenerate.
	* melt/generated/warmelt-genobj+03.cc: Regenerate.
	* melt/generated/warmelt-genobj+04.cc: Regenerate.
	* melt/generated/warmelt-genobj+05.cc: Regenerate.
	* melt/generated/warmelt-genobj+06.cc: Regenerate.
	* melt/generated/warmelt-genobj+07.cc: Regenerate.
	* melt/generated/warmelt-genobj.cc: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+01.cc: Regenerate.
	* melt/generated/warmelt-hooks+02.cc: Regenerate.
	* melt/generated/warmelt-hooks+03.cc: Regenerate.
	* melt/generated/warmelt-hooks.cc: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+01.cc: Regenerate.
	* melt/generated/warmelt-macro+02.cc: Regenerate.
	* melt/generated/warmelt-macro+03.cc: Regenerate.
	* melt/generated/warmelt-macro+04.cc: Regenerate.
	* melt/generated/warmelt-macro+05.cc: Regenerate.
	* melt/generated/warmelt-macro+06.cc: Regenerate.
	* melt/generated/warmelt-macro.cc: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+01.cc: Regenerate.
	* melt/generated/warmelt-modes+02.cc: Regenerate.
	* melt/generated/warmelt-modes+03.cc: Regenerate.
	* melt/generated/warmelt-modes.cc: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+01.cc: Regenerate.
	* melt/generated/warmelt-normal+02.cc: Regenerate.
	* melt/generated/warmelt-normal+03.cc: Regenerate.
	* melt/generated/warmelt-normal+04.cc: Regenerate.
	* melt/generated/warmelt-normal+05.cc: Regenerate.
	* melt/generated/warmelt-normal+06.cc: Regenerate.
	* melt/generated/warmelt-normal.cc: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+01.cc: Regenerate.
	* melt/generated/warmelt-normatch+02.cc: Regenerate.
	* melt/generated/warmelt-normatch+03.cc: Regenerate.
	* melt/generated/warmelt-normatch+04.cc: Regenerate.
	* melt/generated/warmelt-normatch+05.cc: Regenerate.
	* melt/generated/warmelt-normatch+06.cc: Regenerate.
	* melt/generated/warmelt-normatch.cc: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+01.cc: Regenerate.
	* melt/generated/warmelt-outobj+02.cc: Regenerate.
	* melt/generated/warmelt-outobj+03.cc: Regenerate.
	* melt/generated/warmelt-outobj+04.cc: Regenerate.
	* melt/generated/warmelt-outobj+05.cc: Regenerate.
	* melt/generated/warmelt-outobj+06.cc: Regenerate.
	* melt/generated/warmelt-outobj+07.cc: Regenerate.
	* melt/generated/warmelt-outobj.cc: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-07-03  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (Melt_CallProtoFrame): New class, dealing with
	debugging and with linking frames.
	(Melt_CallFrame): Use it.

	* melt-runtime.c: Likewise.

	* toplev.c (general_init): When ENABLE_CHECKING remove the signal
	handlers.

	* melt/warmelt-outobj.melt (output_curframe_declstruct_init): Emit
	file and line information for frames in debugging mode.

2013-07-03  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (Melt_CallFrame): Declare _dbgcall_count_ when
	debugging and use it.
	* melt-runtime.c (Melt_CallFrame::_dbgcall_count_): Define.

2013-07-02  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (Melt_CallFrame): Improve debugging constructors.

2013-07-02  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt//generated/warmelt-base+01.cc: Regenerate.
	* melt//generated/warmelt-base+02.cc: Regenerate.
	* melt//generated/warmelt-base+meltdesc.c: Regenerate.
	* melt//generated/warmelt-base+melttime.h: Regenerate.
	* melt//generated/warmelt-base.cc: Regenerate.
	* melt//generated/warmelt-debug+01.cc: Regenerate.
	* melt//generated/warmelt-debug+02.cc: Regenerate.
	* melt//generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt//generated/warmelt-debug+melttime.h: Regenerate.
	* melt//generated/warmelt-debug.cc: Regenerate.
	* melt//generated/warmelt-first+01.cc: Regenerate.
	* melt//generated/warmelt-first+02.cc: Regenerate.
	* melt//generated/warmelt-first+meltdesc.c: Regenerate.
	* melt//generated/warmelt-first+melttime.h: Regenerate.
	* melt//generated/warmelt-first.cc: Regenerate.
	* melt//generated/warmelt-genobj+01.cc: Regenerate.
	* melt//generated/warmelt-genobj+02.cc: Regenerate.
	* melt//generated/warmelt-genobj+03.cc: Regenerate.
	* melt//generated/warmelt-genobj+04.cc: Regenerate.
	* melt//generated/warmelt-genobj+05.cc: Regenerate.
	* melt//generated/warmelt-genobj+06.cc: Regenerate.
	* melt//generated/warmelt-genobj+07.cc: Regenerate.
	* melt//generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt//generated/warmelt-genobj+melttime.h: Regenerate.
	* melt//generated/warmelt-genobj.cc: Regenerate.
	* melt//generated/warmelt-hooks+01.cc: Regenerate.
	* melt//generated/warmelt-hooks+02.cc: Regenerate.
	* melt//generated/warmelt-hooks+03.cc: Regenerate.
	* melt//generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt//generated/warmelt-hooks+melttime.h: Regenerate.
	* melt//generated/warmelt-hooks.cc: Regenerate.
	* melt//generated/warmelt-macro+01.cc: Regenerate.
	* melt//generated/warmelt-macro+02.cc: Regenerate.
	* melt//generated/warmelt-macro+03.cc: Regenerate.
	* melt//generated/warmelt-macro+04.cc: Regenerate.
	* melt//generated/warmelt-macro+05.cc: Regenerate.
	* melt//generated/warmelt-macro+06.cc: Regenerate.
	* melt//generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt//generated/warmelt-macro+melttime.h: Regenerate.
	* melt//generated/warmelt-macro.cc: Regenerate.
	* melt//generated/warmelt-modes+01.cc: Regenerate.
	* melt//generated/warmelt-modes+02.cc: Regenerate.
	* melt//generated/warmelt-modes+03.cc: Regenerate.
	* melt//generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt//generated/warmelt-modes+melttime.h: Regenerate.
	* melt//generated/warmelt-modes.cc: Regenerate.
	* melt//generated/warmelt-normal+01.cc: Regenerate.
	* melt//generated/warmelt-normal+02.cc: Regenerate.
	* melt//generated/warmelt-normal+03.cc: Regenerate.
	* melt//generated/warmelt-normal+04.cc: Regenerate.
	* melt//generated/warmelt-normal+05.cc: Regenerate.
	* melt//generated/warmelt-normal+06.cc: Regenerate.
	* melt//generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt//generated/warmelt-normal+melttime.h: Regenerate.
	* melt//generated/warmelt-normal.cc: Regenerate.
	* melt//generated/warmelt-normatch+01.cc: Regenerate.
	* melt//generated/warmelt-normatch+02.cc: Regenerate.
	* melt//generated/warmelt-normatch+03.cc: Regenerate.
	* melt//generated/warmelt-normatch+04.cc: Regenerate.
	* melt//generated/warmelt-normatch+05.cc: Regenerate.
	* melt//generated/warmelt-normatch+06.cc: Regenerate.
	* melt//generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt//generated/warmelt-normatch+melttime.h: Regenerate.
	* melt//generated/warmelt-normatch.cc: Regenerate.
	* melt//generated/warmelt-outobj+01.cc: Regenerate.
	* melt//generated/warmelt-outobj+02.cc: Regenerate.
	* melt//generated/warmelt-outobj+03.cc: Regenerate.
	* melt//generated/warmelt-outobj+04.cc: Regenerate.
	* melt//generated/warmelt-outobj+05.cc: Regenerate.
	* melt//generated/warmelt-outobj+06.cc: Regenerate.
	* melt//generated/warmelt-outobj+07.cc: Regenerate.
	* melt//generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt//generated/warmelt-outobj+melttime.h: Regenerate.
	* melt//generated/warmelt-outobj.cc: Regenerate.

2013-07-02  Basile Starynkevitch  <basile@starynkevitch.net>

	* warmelt-outobj.melt (output_curframe_declstruct): Emit only one
	empty constructor.

2013-07-02  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}

	* melt/generated/warmelt-base+01.cc: Regenerate.
	* melt/generated/warmelt-base+02.cc: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.cc: Regenerate.
	* melt/generated/warmelt-debug+01.cc: Regenerate.
	* melt/generated/warmelt-debug+02.cc: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.cc: Regenerate.
	* melt/generated/warmelt-first+01.cc: Regenerate.
	* melt/generated/warmelt-first+02.cc: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.cc: Regenerate.
	* melt/generated/warmelt-genobj+01.cc: Regenerate.
	* melt/generated/warmelt-genobj+02.cc: Regenerate.
	* melt/generated/warmelt-genobj+03.cc: Regenerate.
	* melt/generated/warmelt-genobj+04.cc: Regenerate.
	* melt/generated/warmelt-genobj+05.cc: Regenerate.
	* melt/generated/warmelt-genobj+06.cc: Regenerate.
	* melt/generated/warmelt-genobj+07.cc: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.cc: Regenerate.
	* melt/generated/warmelt-hooks+01.cc: Regenerate.
	* melt/generated/warmelt-hooks+02.cc: Regenerate.
	* melt/generated/warmelt-hooks+03.cc: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.cc: Regenerate.
	* melt/generated/warmelt-macro+01.cc: Regenerate.
	* melt/generated/warmelt-macro+02.cc: Regenerate.
	* melt/generated/warmelt-macro+03.cc: Regenerate.
	* melt/generated/warmelt-macro+04.cc: Regenerate.
	* melt/generated/warmelt-macro+05.cc: Regenerate.
	* melt/generated/warmelt-macro+06.cc: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.cc: Regenerate.
	* melt/generated/warmelt-modes+01.cc: Regenerate.
	* melt/generated/warmelt-modes+02.cc: Regenerate.
	* melt/generated/warmelt-modes+03.cc: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.cc: Regenerate.
	* melt/generated/warmelt-normal+01.cc: Regenerate.
	* melt/generated/warmelt-normal+02.cc: Regenerate.
	* melt/generated/warmelt-normal+03.cc: Regenerate.
	* melt/generated/warmelt-normal+04.cc: Regenerate.
	* melt/generated/warmelt-normal+05.cc: Regenerate.
	* melt/generated/warmelt-normal+06.cc: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.cc: Regenerate.
	* melt/generated/warmelt-normatch+01.cc: Regenerate.
	* melt/generated/warmelt-normatch+02.cc: Regenerate.
	* melt/generated/warmelt-normatch+03.cc: Regenerate.
	* melt/generated/warmelt-normatch+04.cc: Regenerate.
	* melt/generated/warmelt-normatch+05.cc: Regenerate.
	* melt/generated/warmelt-normatch+06.cc: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.cc: Regenerate.
	* melt/generated/warmelt-outobj+01.cc: Regenerate.
	* melt/generated/warmelt-outobj+02.cc: Regenerate.
	* melt/generated/warmelt-outobj+03.cc: Regenerate.
	* melt/generated/warmelt-outobj+04.cc: Regenerate.
	* melt/generated/warmelt-outobj+05.cc: Regenerate.
	* melt/generated/warmelt-outobj+06.cc: Regenerate.
	* melt/generated/warmelt-outobj+07.cc: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.cc: Regenerate.

2013-07-02  Basile Starynkevitch  <basile@starynkevitch.net>

	* warmelt-outobj.melt (output_curframe_declstruct): Emit an empty
	constructor.

2013-07-02  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/warmelt-base+01.cc: Regenerate.
	* melt/generated/warmelt-base+02.cc: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.cc: Regenerate.
	* melt/generated/warmelt-debug+01.cc: Regenerate.
	* melt/generated/warmelt-debug+02.cc: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.cc: Regenerate.
	* melt/generated/warmelt-first+01.cc: Regenerate.
	* melt/generated/warmelt-first+02.cc: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.cc: Regenerate.
	* melt/generated/warmelt-genobj+01.cc: Regenerate.
	* melt/generated/warmelt-genobj+02.cc: Regenerate.
	* melt/generated/warmelt-genobj+03.cc: Regenerate.
	* melt/generated/warmelt-genobj+04.cc: Regenerate.
	* melt/generated/warmelt-genobj+05.cc: Regenerate.
	* melt/generated/warmelt-genobj+06.cc: Regenerate.
	* melt/generated/warmelt-genobj+07.cc: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.cc: Regenerate.
	* melt/generated/warmelt-hooks+01.cc: Regenerate.
	* melt/generated/warmelt-hooks+02.cc: Regenerate.
	* melt/generated/warmelt-hooks+03.cc: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.cc: Regenerate.
	* melt/generated/warmelt-macro+01.cc: Regenerate.
	* melt/generated/warmelt-macro+02.cc: Regenerate.
	* melt/generated/warmelt-macro+03.cc: Regenerate.
	* melt/generated/warmelt-macro+04.cc: Regenerate.
	* melt/generated/warmelt-macro+05.cc: Regenerate.
	* melt/generated/warmelt-macro+06.cc: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.cc: Regenerate.
	* melt/generated/warmelt-modes+01.cc: Regenerate.
	* melt/generated/warmelt-modes+02.cc: Regenerate.
	* melt/generated/warmelt-modes+03.cc: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.cc: Regenerate.
	* melt/generated/warmelt-normal+01.cc: Regenerate.
	* melt/generated/warmelt-normal+02.cc: Regenerate.
	* melt/generated/warmelt-normal+03.cc: Regenerate.
	* melt/generated/warmelt-normal+04.cc: Regenerate.
	* melt/generated/warmelt-normal+05.cc: Regenerate.
	* melt/generated/warmelt-normal+06.cc: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.cc: Regenerate.
	* melt/generated/warmelt-normatch+01.cc: Regenerate.
	* melt/generated/warmelt-normatch+02.cc: Regenerate.
	* melt/generated/warmelt-normatch+03.cc: Regenerate.
	* melt/generated/warmelt-normatch+04.cc: Regenerate.
	* melt/generated/warmelt-normatch+05.cc: Regenerate.
	* melt/generated/warmelt-normatch+06.cc: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.cc: Regenerate.
	* melt/generated/warmelt-outobj+01.cc: Regenerate.
	* melt/generated/warmelt-outobj+02.cc: Regenerate.
	* melt/generated/warmelt-outobj+03.cc: Regenerate.
	* melt/generated/warmelt-outobj+04.cc: Regenerate.
	* melt/generated/warmelt-outobj+05.cc: Regenerate.
	* melt/generated/warmelt-outobj+06.cc: Regenerate.
	* melt/generated/warmelt-outobj+07.cc: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.cc: Regenerate.

2013-07-02  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (Melt_CallFrame): Improve, works with MELT_HAVE_DEBUG.

	* melt/warmelt-outobj.melt (output_curframe_declstruct): Better
	emission of the constructor in debug mode.

2013-07-02  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Classy frame variant compiles but crashes}}

	* melt-runtime.h (Melt_CallFrame::_dbgcall_file_): New static member.
	(Melt_CallFrame): Provide constructors with file and line.
	(Melt_CallFrame::set_debug_file): New function.

	* melt-runtime.c (Melt_CallFrame::_dbgcall_file_): Define.
	(melt_really_initialize): Use GCCMELT_DEBUG_CALL_FRAME environment
	variable for debugging the call frame.
	(melt_do_finalize): clear the debug file for frames.

2013-07-02  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup-inc.cc: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.cc: Regenerate.
	* melt/generated/warmelt-base+02.cc: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.cc: Regenerate.
	* melt/generated/warmelt-debug+01.cc: Regenerate.
	* melt/generated/warmelt-debug+02.cc: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.cc: Regenerate.
	* melt/generated/warmelt-first+01.cc: Regenerate.
	* melt/generated/warmelt-first+02.cc: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.cc: Regenerate.
	* melt/generated/warmelt-genobj+01.cc: Regenerate.
	* melt/generated/warmelt-genobj+02.cc: Regenerate.
	* melt/generated/warmelt-genobj+03.cc: Regenerate.
	* melt/generated/warmelt-genobj+04.cc: Regenerate.
	* melt/generated/warmelt-genobj+05.cc: Regenerate.
	* melt/generated/warmelt-genobj+06.cc: Regenerate.
	* melt/generated/warmelt-genobj+07.cc: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.cc: Regenerate.
	* melt/generated/warmelt-hooks+01.cc: Regenerate.
	* melt/generated/warmelt-hooks+02.cc: Regenerate.
	* melt/generated/warmelt-hooks+03.cc: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.cc: Regenerate.
	* melt/generated/warmelt-macro+01.cc: Regenerate.
	* melt/generated/warmelt-macro+02.cc: Regenerate.
	* melt/generated/warmelt-macro+03.cc: Regenerate.
	* melt/generated/warmelt-macro+04.cc: Regenerate.
	* melt/generated/warmelt-macro+05.cc: Regenerate.
	* melt/generated/warmelt-macro+06.cc: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.cc: Regenerate.
	* melt/generated/warmelt-modes+01.cc: Regenerate.
	* melt/generated/warmelt-modes+02.cc: Regenerate.
	* melt/generated/warmelt-modes+03.cc: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.cc: Regenerate.
	* melt/generated/warmelt-normal+01.cc: Regenerate.
	* melt/generated/warmelt-normal+02.cc: Regenerate.
	* melt/generated/warmelt-normal+03.cc: Regenerate.
	* melt/generated/warmelt-normal+04.cc: Regenerate.
	* melt/generated/warmelt-normal+05.cc: Regenerate.
	* melt/generated/warmelt-normal+06.cc: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.cc: Regenerate.
	* melt/generated/warmelt-normatch+01.cc: Regenerate.
	* melt/generated/warmelt-normatch+02.cc: Regenerate.
	* melt/generated/warmelt-normatch+03.cc: Regenerate.
	* melt/generated/warmelt-normatch+04.cc: Regenerate.
	* melt/generated/warmelt-normatch+05.cc: Regenerate.
	* melt/generated/warmelt-normatch+06.cc: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.cc: Regenerate.
	* melt/generated/warmelt-outobj+01.cc: Regenerate.
	* melt/generated/warmelt-outobj+02.cc: Regenerate.
	* melt/generated/warmelt-outobj+03.cc: Regenerate.
	* melt/generated/warmelt-outobj+04.cc: Regenerate.
	* melt/generated/warmelt-outobj+05.cc: Regenerate.
	* melt/generated/warmelt-outobj+06.cc: Regenerate.
	* melt/generated/warmelt-outobj+07.cc: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.cc: Regenerate.

2013-07-02  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (Melt_CallFrame): Add fields meltcf_dbgfile &
	meltcf_dbgline when debugging. Also add constructor.
	(Melt_CallFrameWithValues): Likewise.
	(MELT_ENTERFRAME_AT): Provide debugging variant.

	* melt/warmelt-outobj.melt (outcinitfill_objinithook)
	(output_curframe_declstruct): Emit the frames with a debugging
	constructor, and add many emitted fromline comments.

2013-07-02  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/warmelt-base+01.cc: Regenerate.
	* melt/generated/warmelt-base+02.cc: Regenerate.
	* melt/generated/warmelt-base.cc: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+01.cc: Regenerate.
	* melt/generated/warmelt-debug+02.cc: Regenerate.
	* melt/generated/warmelt-debug.cc: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+01.cc: Regenerate.
	* melt/generated/warmelt-first+02.cc: Regenerate.
	* melt/generated/warmelt-first.cc: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.cc: Regenerate.
	* melt/generated/warmelt-genobj+02.cc: Regenerate.
	* melt/generated/warmelt-genobj+03.cc: Regenerate.
	* melt/generated/warmelt-genobj+04.cc: Regenerate.
	* melt/generated/warmelt-genobj+05.cc: Regenerate.
	* melt/generated/warmelt-genobj+06.cc: Regenerate.
	* melt/generated/warmelt-genobj+07.cc: Regenerate.
	* melt/generated/warmelt-genobj.cc: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+01.cc: Regenerate.
	* melt/generated/warmelt-hooks+02.cc: Regenerate.
	* melt/generated/warmelt-hooks+03.cc: Regenerate.
	* melt/generated/warmelt-hooks.cc: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+01.cc: Regenerate.
	* melt/generated/warmelt-macro+02.cc: Regenerate.
	* melt/generated/warmelt-macro+03.cc: Regenerate.
	* melt/generated/warmelt-macro+04.cc: Regenerate.
	* melt/generated/warmelt-macro+05.cc: Regenerate.
	* melt/generated/warmelt-macro+06.cc: Regenerate.
	* melt/generated/warmelt-macro.cc: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+01.cc: Regenerate.
	* melt/generated/warmelt-modes+02.cc: Regenerate.
	* melt/generated/warmelt-modes+03.cc: Regenerate.
	* melt/generated/warmelt-modes.cc: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+01.cc: Regenerate.
	* melt/generated/warmelt-normal+02.cc: Regenerate.
	* melt/generated/warmelt-normal+03.cc: Regenerate.
	* melt/generated/warmelt-normal+04.cc: Regenerate.
	* melt/generated/warmelt-normal+05.cc: Regenerate.
	* melt/generated/warmelt-normal+06.cc: Regenerate.
	* melt/generated/warmelt-normal.cc: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+01.cc: Regenerate.
	* melt/generated/warmelt-normatch+02.cc: Regenerate.
	* melt/generated/warmelt-normatch+03.cc: Regenerate.
	* melt/generated/warmelt-normatch+04.cc: Regenerate.
	* melt/generated/warmelt-normatch+05.cc: Regenerate.
	* melt/generated/warmelt-normatch+06.cc: Regenerate.
	* melt/generated/warmelt-normatch.cc: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+01.cc: Regenerate.
	* melt/generated/warmelt-outobj+02.cc: Regenerate.
	* melt/generated/warmelt-outobj+03.cc: Regenerate.
	* melt/generated/warmelt-outobj+04.cc: Regenerate.
	* melt/generated/warmelt-outobj+05.cc: Regenerate.
	* melt/generated/warmelt-outobj+06.cc: Regenerate.
	* melt/generated/warmelt-outobj+07.cc: Regenerate.
	* melt/generated/warmelt-outobj.cc: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-07-02  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-macro.melt (this_line, this_file): New macros.
	(mexpand_this_file, mexpand_this_line): New functions to
	macro-expand them.

	* melt/warmelt-outobj.melt: Also emit using this_line the line
	number emitting every MELT_HAVE_CLASSY_FRAME preprocessor test.

2013-07-02  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/warmelt-base+01.cc: Regenerate.
	* melt/generated/warmelt-base+02.cc: Regenerate.
	* melt/generated/warmelt-base.cc: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+01.cc: Regenerate.
	* melt/generated/warmelt-debug+02.cc: Regenerate.
	* melt/generated/warmelt-debug.cc: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+01.cc: Regenerate.
	* melt/generated/warmelt-first+02.cc: Regenerate.
	* melt/generated/warmelt-first.cc: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.cc: Regenerate.
	* melt/generated/warmelt-genobj+02.cc: Regenerate.
	* melt/generated/warmelt-genobj+03.cc: Regenerate.
	* melt/generated/warmelt-genobj+04.cc: Regenerate.
	* melt/generated/warmelt-genobj+05.cc: Regenerate.
	* melt/generated/warmelt-genobj+06.cc: Regenerate.
	* melt/generated/warmelt-genobj+07.cc: Regenerate.
	* melt/generated/warmelt-genobj.cc: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+01.cc: Regenerate.
	* melt/generated/warmelt-hooks+02.cc: Regenerate.
	* melt/generated/warmelt-hooks+03.cc: Regenerate.
	* melt/generated/warmelt-hooks.cc: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+01.cc: Regenerate.
	* melt/generated/warmelt-macro+02.cc: Regenerate.
	* melt/generated/warmelt-macro+03.cc: Regenerate.
	* melt/generated/warmelt-macro+04.cc: Regenerate.
	* melt/generated/warmelt-macro+05.cc: Regenerate.
	* melt/generated/warmelt-macro+06.cc: Regenerate.
	* melt/generated/warmelt-macro.cc: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+01.cc: Regenerate.
	* melt/generated/warmelt-modes+02.cc: Regenerate.
	* melt/generated/warmelt-modes+03.cc: Regenerate.
	* melt/generated/warmelt-modes.cc: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+01.cc: Regenerate.
	* melt/generated/warmelt-normal+02.cc: Regenerate.
	* melt/generated/warmelt-normal+03.cc: Regenerate.
	* melt/generated/warmelt-normal+04.cc: Regenerate.
	* melt/generated/warmelt-normal+05.cc: Regenerate.
	* melt/generated/warmelt-normal+06.cc: Regenerate.
	* melt/generated/warmelt-normal.cc: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+01.cc: Regenerate.
	* melt/generated/warmelt-normatch+02.cc: Regenerate.
	* melt/generated/warmelt-normatch+03.cc: Regenerate.
	* melt/generated/warmelt-normatch+04.cc: Regenerate.
	* melt/generated/warmelt-normatch+05.cc: Regenerate.
	* melt/generated/warmelt-normatch+06.cc: Regenerate.
	* melt/generated/warmelt-normatch.cc: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+01.cc: Regenerate.
	* melt/generated/warmelt-outobj+02.cc: Regenerate.
	* melt/generated/warmelt-outobj+03.cc: Regenerate.
	* melt/generated/warmelt-outobj+04.cc: Regenerate.
	* melt/generated/warmelt-outobj+05.cc: Regenerate.
	* melt/generated/warmelt-outobj+06.cc: Regenerate.
	* melt/generated/warmelt-outobj+07.cc: Regenerate.
	* melt/generated/warmelt-outobj.cc: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-07-02  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-outobj.melt (output_curframe_declstruct)
	(output_curframe_declstruct_init, outpucod_hookroutine): Improve
	emission related to frame.


2013-07-02  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-outobj.melt (outpucod_hookroutine): Improve emitted
	comments.

	{{Regenerate}}
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+01.cc: Regenerate.
	* melt/generated/warmelt-first+02.cc: Regenerate.
	* melt/generated/warmelt-first.cc: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+01.cc: Regenerate.
	* melt/generated/warmelt-hooks+02.cc: Regenerate.
	* melt/generated/warmelt-hooks+03.cc: Regenerate.
	* melt/generated/warmelt-hooks.cc: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+03.cc: Regenerate.
	* melt/generated/warmelt-outobj+04.cc: Regenerate.
	* melt/generated/warmelt-outobj+05.cc: Regenerate.
	* melt/generated/warmelt-outobj+06.cc: Regenerate.
	* melt/generated/warmelt-outobj+07.cc: Regenerate.
	* melt/generated/warmelt-outobj.cc: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-07-02  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-outobj.melt (outpucod_hookroutine): Fix typo for
	emission of more comments.

2013-07-02  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/meltrunsup-inc.cc: Regenerate.
	* melt/generated/warmelt-base+01.cc: Regenerate.
	* melt/generated/warmelt-base+02.cc: Regenerate.
	* melt/generated/warmelt-base.cc: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+01.cc: Regenerate.
	* melt/generated/warmelt-debug+02.cc: Regenerate.
	* melt/generated/warmelt-debug.cc: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+01.cc: Regenerate.
	* melt/generated/warmelt-first+02.cc: Regenerate.
	* melt/generated/warmelt-first.cc: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.cc: Regenerate.
	* melt/generated/warmelt-genobj+02.cc: Regenerate.
	* melt/generated/warmelt-genobj+03.cc: Regenerate.
	* melt/generated/warmelt-genobj+04.cc: Regenerate.
	* melt/generated/warmelt-genobj+05.cc: Regenerate.
	* melt/generated/warmelt-genobj+06.cc: Regenerate.
	* melt/generated/warmelt-genobj+07.cc: Regenerate.
	* melt/generated/warmelt-genobj.cc: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+01.cc: Regenerate.
	* melt/generated/warmelt-hooks+02.cc: Regenerate.
	* melt/generated/warmelt-hooks+03.cc: Regenerate.
	* melt/generated/warmelt-hooks.cc: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+01.cc: Regenerate.
	* melt/generated/warmelt-macro+02.cc: Regenerate.
	* melt/generated/warmelt-macro+03.cc: Regenerate.
	* melt/generated/warmelt-macro+04.cc: Regenerate.
	* melt/generated/warmelt-macro+05.cc: Regenerate.
	* melt/generated/warmelt-macro+06.cc: Regenerate.
	* melt/generated/warmelt-macro.cc: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+01.cc: Regenerate.
	* melt/generated/warmelt-modes+02.cc: Regenerate.
	* melt/generated/warmelt-modes+03.cc: Regenerate.
	* melt/generated/warmelt-modes.cc: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+01.cc: Regenerate.
	* melt/generated/warmelt-normal+02.cc: Regenerate.
	* melt/generated/warmelt-normal+03.cc: Regenerate.
	* melt/generated/warmelt-normal+04.cc: Regenerate.
	* melt/generated/warmelt-normal+05.cc: Regenerate.
	* melt/generated/warmelt-normal+06.cc: Regenerate.
	* melt/generated/warmelt-normal.cc: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+01.cc: Regenerate.
	* melt/generated/warmelt-normatch+02.cc: Regenerate.
	* melt/generated/warmelt-normatch+03.cc: Regenerate.
	* melt/generated/warmelt-normatch+04.cc: Regenerate.
	* melt/generated/warmelt-normatch+05.cc: Regenerate.
	* melt/generated/warmelt-normatch+06.cc: Regenerate.
	* melt/generated/warmelt-normatch.cc: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+01.cc: Regenerate.
	* melt/generated/warmelt-outobj+02.cc: Regenerate.
	* melt/generated/warmelt-outobj+03.cc: Regenerate.
	* melt/generated/warmelt-outobj+04.cc: Regenerate.
	* melt/generated/warmelt-outobj+05.cc: Regenerate.
	* melt/generated/warmelt-outobj+06.cc: Regenerate.
	* melt/generated/warmelt-outobj+07.cc: Regenerate.
	* melt/generated/warmelt-outobj.cc: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-07-02  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-outobj.melt (output_curframe_declstruct)
	(outpucod_hookroutine): Emit more comments.

2013-06-28  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/warmelt-base+01.cc: Regenerate.
	* melt/generated/warmelt-base+02.cc: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.cc: Regenerate.
	* melt/generated/warmelt-debug+01.cc: Regenerate.
	* melt/generated/warmelt-debug+02.cc: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.cc: Regenerate.
	* melt/generated/warmelt-first+01.cc: Regenerate.
	* melt/generated/warmelt-first+02.cc: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.cc: Regenerate.
	* melt/generated/warmelt-genobj+01.cc: Regenerate.
	* melt/generated/warmelt-genobj+02.cc: Regenerate.
	* melt/generated/warmelt-genobj+03.cc: Regenerate.
	* melt/generated/warmelt-genobj+04.cc: Regenerate.
	* melt/generated/warmelt-genobj+05.cc: Regenerate.
	* melt/generated/warmelt-genobj+06.cc: Regenerate.
	* melt/generated/warmelt-genobj+07.cc: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.cc: Regenerate.
	* melt/generated/warmelt-hooks+01.cc: Regenerate.
	* melt/generated/warmelt-hooks+02.cc: Regenerate.
	* melt/generated/warmelt-hooks+03.cc: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.cc: Regenerate.
	* melt/generated/warmelt-macro+01.cc: Regenerate.
	* melt/generated/warmelt-macro+02.cc: Regenerate.
	* melt/generated/warmelt-macro+03.cc: Regenerate.
	* melt/generated/warmelt-macro+04.cc: Regenerate.
	* melt/generated/warmelt-macro+05.cc: Regenerate.
	* melt/generated/warmelt-macro+06.cc: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.cc: Regenerate.
	* melt/generated/warmelt-modes+01.cc: Regenerate.
	* melt/generated/warmelt-modes+02.cc: Regenerate.
	* melt/generated/warmelt-modes+03.cc: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.cc: Regenerate.
	* melt/generated/warmelt-normal+01.cc: Regenerate.
	* melt/generated/warmelt-normal+02.cc: Regenerate.
	* melt/generated/warmelt-normal+03.cc: Regenerate.
	* melt/generated/warmelt-normal+04.cc: Regenerate.
	* melt/generated/warmelt-normal+05.cc: Regenerate.
	* melt/generated/warmelt-normal+06.cc: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.cc: Regenerate.
	* melt/generated/warmelt-normatch+01.cc: Regenerate.
	* melt/generated/warmelt-normatch+02.cc: Regenerate.
	* melt/generated/warmelt-normatch+03.cc: Regenerate.
	* melt/generated/warmelt-normatch+04.cc: Regenerate.
	* melt/generated/warmelt-normatch+05.cc: Regenerate.
	* melt/generated/warmelt-normatch+06.cc: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.cc: Regenerate.
	* melt/generated/warmelt-outobj+01.cc: Regenerate.
	* melt/generated/warmelt-outobj+02.cc: Regenerate.
	* melt/generated/warmelt-outobj+03.cc: Regenerate.
	* melt/generated/warmelt-outobj+04.cc: Regenerate.
	* melt/generated/warmelt-outobj+05.cc: Regenerate.
	* melt/generated/warmelt-outobj+06.cc: Regenerate.
	* melt/generated/warmelt-outobj+07.cc: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.cc: Regenerate.

2013-06-28  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-outobj.melt (output_curframe_declstruct): repeat
	the class for non-initial routines.

2013-06-28  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/warmelt-base+01.cc: Regenerate.
	* melt/generated/warmelt-base+02.cc: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.cc: Regenerate.
	* melt/generated/warmelt-debug+01.cc: Regenerate.
	* melt/generated/warmelt-debug+02.cc: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.cc: Regenerate.
	* melt/generated/warmelt-first+01.cc: Regenerate.
	* melt/generated/warmelt-first+02.cc: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.cc: Regenerate.
	* melt/generated/warmelt-genobj+01.cc: Regenerate.
	* melt/generated/warmelt-genobj+02.cc: Regenerate.
	* melt/generated/warmelt-genobj+03.cc: Regenerate.
	* melt/generated/warmelt-genobj+04.cc: Regenerate.
	* melt/generated/warmelt-genobj+05.cc: Regenerate.
	* melt/generated/warmelt-genobj+06.cc: Regenerate.
	* melt/generated/warmelt-genobj+07.cc: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.cc: Regenerate.
	* melt/generated/warmelt-hooks+01.cc: Regenerate.
	* melt/generated/warmelt-hooks+02.cc: Regenerate.
	* melt/generated/warmelt-hooks+03.cc: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.cc: Regenerate.
	* melt/generated/warmelt-macro+01.cc: Regenerate.
	* melt/generated/warmelt-macro+02.cc: Regenerate.
	* melt/generated/warmelt-macro+03.cc: Regenerate.
	* melt/generated/warmelt-macro+04.cc: Regenerate.
	* melt/generated/warmelt-macro+05.cc: Regenerate.
	* melt/generated/warmelt-macro+06.cc: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.cc: Regenerate.
	* melt/generated/warmelt-modes+01.cc: Regenerate.
	* melt/generated/warmelt-modes+02.cc: Regenerate.
	* melt/generated/warmelt-modes+03.cc: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.cc: Regenerate.
	* melt/generated/warmelt-normal+01.cc: Regenerate.
	* melt/generated/warmelt-normal+02.cc: Regenerate.
	* melt/generated/warmelt-normal+03.cc: Regenerate.
	* melt/generated/warmelt-normal+04.cc: Regenerate.
	* melt/generated/warmelt-normal+05.cc: Regenerate.
	* melt/generated/warmelt-normal+06.cc: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.cc: Regenerate.
	* melt/generated/warmelt-normatch+01.cc: Regenerate.
	* melt/generated/warmelt-normatch+02.cc: Regenerate.
	* melt/generated/warmelt-normatch+03.cc: Regenerate.
	* melt/generated/warmelt-normatch+04.cc: Regenerate.
	* melt/generated/warmelt-normatch+05.cc: Regenerate.
	* melt/generated/warmelt-normatch+06.cc: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.cc: Regenerate.
	* melt/generated/warmelt-outobj+01.cc: Regenerate.
	* melt/generated/warmelt-outobj+02.cc: Regenerate.
	* melt/generated/warmelt-outobj+03.cc: Regenerate.
	* melt/generated/warmelt-outobj+04.cc: Regenerate.
	* melt/generated/warmelt-outobj+05.cc: Regenerate.
	* melt/generated/warmelt-outobj+06.cc: Regenerate.
	* melt/generated/warmelt-outobj+07.cc: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.cc: Regenerate.

2013-06-28  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-outobj.melt (output_curframe_declstruct): Emit
	semicolon after end of class Melt_InitialFrame.

2013-06-28  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/warmelt-base+01.cc: Regenerate.
	* melt/generated/warmelt-base+02.cc: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.cc: Regenerate.
	* melt/generated/warmelt-debug+01.cc: Regenerate.
	* melt/generated/warmelt-debug+02.cc: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.cc: Regenerate.
	* melt/generated/warmelt-first+01.cc: Regenerate.
	* melt/generated/warmelt-first+02.cc: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.cc: Regenerate.
	* melt/generated/warmelt-genobj+01.cc: Regenerate.
	* melt/generated/warmelt-genobj+02.cc: Regenerate.
	* melt/generated/warmelt-genobj+03.cc: Regenerate.
	* melt/generated/warmelt-genobj+04.cc: Regenerate.
	* melt/generated/warmelt-genobj+05.cc: Regenerate.
	* melt/generated/warmelt-genobj+06.cc: Regenerate.
	* melt/generated/warmelt-genobj+07.cc: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.cc: Regenerate.
	* melt/generated/warmelt-hooks+01.cc: Regenerate.
	* melt/generated/warmelt-hooks+02.cc: Regenerate.
	* melt/generated/warmelt-hooks+03.cc: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.cc: Regenerate.
	* melt/generated/warmelt-macro+01.cc: Regenerate.
	* melt/generated/warmelt-macro+02.cc: Regenerate.
	* melt/generated/warmelt-macro+03.cc: Regenerate.
	* melt/generated/warmelt-macro+04.cc: Regenerate.
	* melt/generated/warmelt-macro+05.cc: Regenerate.
	* melt/generated/warmelt-macro+06.cc: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.cc: Regenerate.
	* melt/generated/warmelt-modes+01.cc: Regenerate.
	* melt/generated/warmelt-modes+02.cc: Regenerate.
	* melt/generated/warmelt-modes+03.cc: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.cc: Regenerate.
	* melt/generated/warmelt-normal+01.cc: Regenerate.
	* melt/generated/warmelt-normal+02.cc: Regenerate.
	* melt/generated/warmelt-normal+03.cc: Regenerate.
	* melt/generated/warmelt-normal+04.cc: Regenerate.
	* melt/generated/warmelt-normal+05.cc: Regenerate.
	* melt/generated/warmelt-normal+06.cc: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.cc: Regenerate.
	* melt/generated/warmelt-normatch+01.cc: Regenerate.
	* melt/generated/warmelt-normatch+02.cc: Regenerate.
	* melt/generated/warmelt-normatch+03.cc: Regenerate.
	* melt/generated/warmelt-normatch+04.cc: Regenerate.
	* melt/generated/warmelt-normatch+05.cc: Regenerate.
	* melt/generated/warmelt-normatch+06.cc: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.cc: Regenerate.
	* melt/generated/warmelt-outobj+01.cc: Regenerate.
	* melt/generated/warmelt-outobj+02.cc: Regenerate.
	* melt/generated/warmelt-outobj+03.cc: Regenerate.
	* melt/generated/warmelt-outobj+04.cc: Regenerate.
	* melt/generated/warmelt-outobj+05.cc: Regenerate.
	* melt/generated/warmelt-outobj+06.cc: Regenerate.
	* melt/generated/warmelt-outobj+07.cc: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.cc: Regenerate.

2013-06-28  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-outobj.melt (output_curframe_declstruct)
	(outpucod_initialmoduleroutine): Emit typedef for classy initial
	frame.

2013-06-28  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup-inc.cc: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.cc: Regenerate.
	* melt/generated/warmelt-base+02.cc: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.cc: Regenerate.
	* melt/generated/warmelt-debug+01.cc: Regenerate.
	* melt/generated/warmelt-debug+02.cc: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.cc: Regenerate.
	* melt/generated/warmelt-first+01.cc: Regenerate.
	* melt/generated/warmelt-first+02.cc: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.cc: Regenerate.
	* melt/generated/warmelt-genobj+01.cc: Regenerate.
	* melt/generated/warmelt-genobj+02.cc: Regenerate.
	* melt/generated/warmelt-genobj+03.cc: Regenerate.
	* melt/generated/warmelt-genobj+04.cc: Regenerate.
	* melt/generated/warmelt-genobj+05.cc: Regenerate.
	* melt/generated/warmelt-genobj+06.cc: Regenerate.
	* melt/generated/warmelt-genobj+07.cc: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.cc: Regenerate.
	* melt/generated/warmelt-hooks+01.cc: Regenerate.
	* melt/generated/warmelt-hooks+02.cc: Regenerate.
	* melt/generated/warmelt-hooks+03.cc: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.cc: Regenerate.
	* melt/generated/warmelt-macro+01.cc: Regenerate.
	* melt/generated/warmelt-macro+02.cc: Regenerate.
	* melt/generated/warmelt-macro+03.cc: Regenerate.
	* melt/generated/warmelt-macro+04.cc: Regenerate.
	* melt/generated/warmelt-macro+05.cc: Regenerate.
	* melt/generated/warmelt-macro+06.cc: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.cc: Regenerate.
	* melt/generated/warmelt-modes+01.cc: Regenerate.
	* melt/generated/warmelt-modes+02.cc: Regenerate.
	* melt/generated/warmelt-modes+03.cc: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.cc: Regenerate.
	* melt/generated/warmelt-normal+01.cc: Regenerate.
	* melt/generated/warmelt-normal+02.cc: Regenerate.
	* melt/generated/warmelt-normal+03.cc: Regenerate.
	* melt/generated/warmelt-normal+04.cc: Regenerate.
	* melt/generated/warmelt-normal+05.cc: Regenerate.
	* melt/generated/warmelt-normal+06.cc: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.cc: Regenerate.
	* melt/generated/warmelt-normatch+01.cc: Regenerate.
	* melt/generated/warmelt-normatch+02.cc: Regenerate.
	* melt/generated/warmelt-normatch+03.cc: Regenerate.
	* melt/generated/warmelt-normatch+04.cc: Regenerate.
	* melt/generated/warmelt-normatch+05.cc: Regenerate.
	* melt/generated/warmelt-normatch+06.cc: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.cc: Regenerate.
	* melt/generated/warmelt-outobj+01.cc: Regenerate.
	* melt/generated/warmelt-outobj+02.cc: Regenerate.
	* melt/generated/warmelt-outobj+03.cc: Regenerate.
	* melt/generated/warmelt-outobj+04.cc: Regenerate.
	* melt/generated/warmelt-outobj+05.cc: Regenerate.
	* melt/generated/warmelt-outobj+06.cc: Regenerate.
	* melt/generated/warmelt-outobj+07.cc: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.cc: Regenerate.


2013-06-28  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-outobj.melt (output_curframe_declstruct): Better
	handling of initial frames.  Emit appropriate meltinitial_frame_t
	typedef.

	* melt-runtime.h (melt_curframdepth): Provide a classy frame
	implementation.

2013-06-28  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+01.cc: Regenerate.
	* melt/generated/warmelt-first+02.cc: Regenerate.
	* melt/generated/warmelt-first.cc: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+01.cc: Regenerate.
	* melt/generated/warmelt-hooks+02.cc: Regenerate.
	* melt/generated/warmelt-hooks+03.cc: Regenerate.
	* melt/generated/warmelt-hooks.cc: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+03.cc: Regenerate.
	* melt/generated/warmelt-outobj+04.cc: Regenerate.
	* melt/generated/warmelt-outobj+05.cc: Regenerate.
	* melt/generated/warmelt-outobj+06.cc: Regenerate.
	* melt/generated/warmelt-outobj+07.cc: Regenerate.
	* melt/generated/warmelt-outobj.cc: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-06-28  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-outobj.melt (outpucod_hookroutine): Emit the
	marking routine wrapped with #if !MELT_HAVE_CLASSY_FRAME, etc...

2013-06-28  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/warmelt-base+03.cc: Remove.
	* melt/generated/warmelt-base+01.cc: Regenerate.
	* melt/generated/warmelt-base+02.cc: Regenerate.
	* melt/generated/warmelt-base.cc: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+01.cc: Regenerate.
	* melt/generated/warmelt-debug+02.cc: Regenerate.
	* melt/generated/warmelt-debug.cc: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+01.cc: Regenerate.
	* melt/generated/warmelt-first+02.cc: Regenerate.
	* melt/generated/warmelt-first.cc: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.cc: Regenerate.
	* melt/generated/warmelt-genobj+02.cc: Regenerate.
	* melt/generated/warmelt-genobj+03.cc: Regenerate.
	* melt/generated/warmelt-genobj+04.cc: Regenerate.
	* melt/generated/warmelt-genobj+05.cc: Regenerate.
	* melt/generated/warmelt-genobj+06.cc: Regenerate.
	* melt/generated/warmelt-genobj+07.cc: Regenerate.
	* melt/generated/warmelt-genobj.cc: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+01.cc: Regenerate.
	* melt/generated/warmelt-hooks+02.cc: Regenerate.
	* melt/generated/warmelt-hooks+03.cc: Regenerate.
	* melt/generated/warmelt-hooks.cc: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+01.cc: Regenerate.
	* melt/generated/warmelt-macro+02.cc: Regenerate.
	* melt/generated/warmelt-macro+03.cc: Regenerate.
	* melt/generated/warmelt-macro+04.cc: Regenerate.
	* melt/generated/warmelt-macro+05.cc: Regenerate.
	* melt/generated/warmelt-macro+06.cc: Regenerate.
	* melt/generated/warmelt-macro.cc: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+01.cc: Regenerate.
	* melt/generated/warmelt-modes+02.cc: Regenerate.
	* melt/generated/warmelt-modes+03.cc: Regenerate.
	* melt/generated/warmelt-modes.cc: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+01.cc: Regenerate.
	* melt/generated/warmelt-normal+02.cc: Regenerate.
	* melt/generated/warmelt-normal+03.cc: Regenerate.
	* melt/generated/warmelt-normal+04.cc: Regenerate.
	* melt/generated/warmelt-normal+05.cc: Regenerate.
	* melt/generated/warmelt-normal+06.cc: Regenerate.
	* melt/generated/warmelt-normal.cc: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+01.cc: Regenerate.
	* melt/generated/warmelt-normatch+02.cc: Regenerate.
	* melt/generated/warmelt-normatch+03.cc: Regenerate.
	* melt/generated/warmelt-normatch+04.cc: Regenerate.
	* melt/generated/warmelt-normatch+05.cc: Regenerate.
	* melt/generated/warmelt-normatch+06.cc: Regenerate.
	* melt/generated/warmelt-normatch.cc: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+01.cc: Regenerate.
	* melt/generated/warmelt-outobj+02.cc: Regenerate.
	* melt/generated/warmelt-outobj+03.cc: Regenerate.
	* melt/generated/warmelt-outobj+04.cc: Regenerate.
	* melt/generated/warmelt-outobj+05.cc: Regenerate.
	* melt/generated/warmelt-outobj+06.cc: Regenerate.
	* melt/generated/warmelt-outobj+07.cc: Regenerate.
	* melt/generated/warmelt-outobj.cc: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-06-28  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/generated/warmelt-first+03.cc: Remove file, because unused.

	* melt/warmelt-outobj.melt (output_curframe_declstruct_init): Emit
	C++ comment about frame declarator closure.

	* melt-upgrade.sh: Backup files, and remove those in
	melt/generated who don't exist anymore.

2013-06-28  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}

	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.cc: Regenerate.
	* melt/generated/warmelt-base+02.cc: Regenerate.
	* melt/generated/warmelt-base.cc: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+01.cc: Regenerate.
	* melt/generated/warmelt-debug+02.cc: Regenerate.
	* melt/generated/warmelt-debug.cc: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+01.cc: Regenerate.
	* melt/generated/warmelt-first+02.cc: Regenerate.
	* melt/generated/warmelt-first.cc: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.cc: Regenerate.
	* melt/generated/warmelt-genobj+02.cc: Regenerate.
	* melt/generated/warmelt-genobj+03.cc: Regenerate.
	* melt/generated/warmelt-genobj+04.cc: Regenerate.
	* melt/generated/warmelt-genobj+05.cc: Regenerate.
	* melt/generated/warmelt-genobj+06.cc: Regenerate.
	* melt/generated/warmelt-genobj+07.cc: Regenerate.
	* melt/generated/warmelt-genobj.cc: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+01.cc: Regenerate.
	* melt/generated/warmelt-hooks+02.cc: Regenerate.
	* melt/generated/warmelt-hooks+03.cc: Regenerate.
	* melt/generated/warmelt-hooks.cc: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+01.cc: Regenerate.
	* melt/generated/warmelt-macro+02.cc: Regenerate.
	* melt/generated/warmelt-macro+03.cc: Regenerate.
	* melt/generated/warmelt-macro+04.cc: Regenerate.
	* melt/generated/warmelt-macro+05.cc: Regenerate.
	* melt/generated/warmelt-macro+06.cc: Regenerate.
	* melt/generated/warmelt-macro.cc: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+01.cc: Regenerate.
	* melt/generated/warmelt-modes+02.cc: Regenerate.
	* melt/generated/warmelt-modes+03.cc: Regenerate.
	* melt/generated/warmelt-modes.cc: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+01.cc: Regenerate.
	* melt/generated/warmelt-normal+02.cc: Regenerate.
	* melt/generated/warmelt-normal+03.cc: Regenerate.
	* melt/generated/warmelt-normal+04.cc: Regenerate.
	* melt/generated/warmelt-normal+05.cc: Regenerate.
	* melt/generated/warmelt-normal+06.cc: Regenerate.
	* melt/generated/warmelt-normal.cc: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+01.cc: Regenerate.
	* melt/generated/warmelt-normatch+02.cc: Regenerate.
	* melt/generated/warmelt-normatch+03.cc: Regenerate.
	* melt/generated/warmelt-normatch+04.cc: Regenerate.
	* melt/generated/warmelt-normatch+05.cc: Regenerate.
	* melt/generated/warmelt-normatch+06.cc: Regenerate.
	* melt/generated/warmelt-normatch.cc: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+01.cc: Regenerate.
	* melt/generated/warmelt-outobj+02.cc: Regenerate.
	* melt/generated/warmelt-outobj+03.cc: Regenerate.
	* melt/generated/warmelt-outobj+04.cc: Regenerate.
	* melt/generated/warmelt-outobj+05.cc: Regenerate.
	* melt/generated/warmelt-outobj+06.cc: Regenerate.
	* melt/generated/warmelt-outobj+07.cc: Regenerate.
	* melt/generated/warmelt-outobj.cc: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.


2013-06-28  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (melt_low_stderr_value_at): Always perform the
	output.
	(Melt_CallFrame): Improve meltcast in current_closure &
	current_hook...

	* melt-runtime.c (melt_marking_callback): Becoming non-static. Use
	mcf->current() for classy frames.
	(meltgc_reference_put, meltgc_readmacrostringsequence)
	(meltgc_new_file, meltgc_output_file, melt_val2passflag): Add cast to melt_ptr_t.
	(melt_dbgbacktrace): Fix typo for classy frames.
	(meltgc_walkstmt_cb, meltgc_walktree_cb): Fix for classy frames.

	* melt/warmelt-outobj.melt (output_curframe_declstruct): For
	classy frames emit a mcfr_varnum field.

2013-06-28  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (melt_low_stderr_value)
	(melt_low_stderr_value_at): New macros.
	(Melt_CallFrame): current_closure, current_hook: New member
	functions.
	* melt-runtime.c (melt_errprint_dladdr): New utility function.
	(melt_dbgbacktrace, melt_dbgshortbacktrace): Show backtrace with
	classy frames. Use melt_errprint_dladdr.

	* melt/warmelt-modes.melt (generate_runtypesupport_enum_objmagic):
	Emit newline.

2013-06-28  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/meltrunsup-inc.cc: Regenerate.
	* melt/generated/warmelt-base+01.cc: Regenerate.
	* melt/generated/warmelt-base+02.cc: Regenerate.
	* melt/generated/warmelt-base.cc: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+01.cc: Regenerate.
	* melt/generated/warmelt-debug+02.cc: Regenerate.
	* melt/generated/warmelt-debug.cc: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+01.cc: Regenerate.
	* melt/generated/warmelt-first+02.cc: Regenerate.
	* melt/generated/warmelt-first.cc: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.cc: Regenerate.
	* melt/generated/warmelt-genobj+02.cc: Regenerate.
	* melt/generated/warmelt-genobj+03.cc: Regenerate.
	* melt/generated/warmelt-genobj+04.cc: Regenerate.
	* melt/generated/warmelt-genobj+05.cc: Regenerate.
	* melt/generated/warmelt-genobj+06.cc: Regenerate.
	* melt/generated/warmelt-genobj+07.cc: Regenerate.
	* melt/generated/warmelt-genobj.cc: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+01.cc: Regenerate.
	* melt/generated/warmelt-hooks+02.cc: Regenerate.
	* melt/generated/warmelt-hooks+03.cc: Regenerate.
	* melt/generated/warmelt-hooks.cc: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+01.cc: Regenerate.
	* melt/generated/warmelt-macro+02.cc: Regenerate.
	* melt/generated/warmelt-macro+03.cc: Regenerate.
	* melt/generated/warmelt-macro+04.cc: Regenerate.
	* melt/generated/warmelt-macro+05.cc: Regenerate.
	* melt/generated/warmelt-macro+06.cc: Regenerate.
	* melt/generated/warmelt-macro.cc: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+01.cc: Regenerate.
	* melt/generated/warmelt-modes+02.cc: Regenerate.
	* melt/generated/warmelt-modes+03.cc: Regenerate.
	* melt/generated/warmelt-modes.cc: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+01.cc: Regenerate.
	* melt/generated/warmelt-normal+02.cc: Regenerate.
	* melt/generated/warmelt-normal+03.cc: Regenerate.
	* melt/generated/warmelt-normal+04.cc: Regenerate.
	* melt/generated/warmelt-normal+05.cc: Regenerate.
	* melt/generated/warmelt-normal+06.cc: Regenerate.
	* melt/generated/warmelt-normal.cc: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+01.cc: Regenerate.
	* melt/generated/warmelt-normatch+02.cc: Regenerate.
	* melt/generated/warmelt-normatch+03.cc: Regenerate.
	* melt/generated/warmelt-normatch+04.cc: Regenerate.
	* melt/generated/warmelt-normatch+05.cc: Regenerate.
	* melt/generated/warmelt-normatch+06.cc: Regenerate.
	* melt/generated/warmelt-normatch.cc: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+01.cc: Regenerate.
	* melt/generated/warmelt-outobj+02.cc: Regenerate.
	* melt/generated/warmelt-outobj+03.cc: Regenerate.
	* melt/generated/warmelt-outobj+04.cc: Regenerate.
	* melt/generated/warmelt-outobj+05.cc: Regenerate.
	* melt/generated/warmelt-outobj+06.cc: Regenerate.
	* melt/generated/warmelt-outobj+07.cc: Regenerate.
	* melt/generated/warmelt-outobj.cc: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-06-28  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-predef.list (HOOK_LOW_STDERR_VALUE_AT): New.

	* melt-runtime.h (Melt_CallFrame): Add member functions
	top_call_frame, previous_frame, srcloc, current.

	* melt-runtime.c (melt_dbgbacktrace): adding classy call frame
	support.

	* melt/warmelt-debug.melt (debug_msg_fun): Cosmetical changes.

	* melt/warmelt-hooks.melt (hook_low_stderr_value_at): New hook.

2013-06-27  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}
	* melt/generated/meltrunsup-inc.cc: Regenerate.
	* melt/generated/warmelt-base+01.cc: Regenerate.
	* melt/generated/warmelt-base+02.cc: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.cc: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.cc: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-06-27  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.c: Add casts to melt_ptr_t for most assignement to
	local pointers in MELT call frames.
	(melt_dbgbacktrace, melt_dbgshortbacktrace): Add warning to
	rewrite them for classy call frames.

	* melt/warmelt-base.melt (valdesc_strbuf): Add cast in clone
	chunk.

2013-06-27  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.h (meltgc_new_mult1, meltgc_new_mult2)
	(meltgc_new_mult3, meltgc_new_mult4, meltgc_new_mult5)
	(meltgc_new_mult6, meltgc_new_mult7): Remove declarations.

	* melt-runtime.c (meltgc_new_mult1, meltgc_new_mult2)
	(meltgc_new_mult3, meltgc_new_mult4, meltgc_new_mult5)
	(meltgc_new_mult6, meltgc_new_mult7): Remove function definitions.

2013-06-27  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}
	* melt/generated/meltrunsup-inc.cc: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.cc: Regenerate.
	* melt/generated/warmelt-base+02.cc: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.cc: Regenerate.
	* melt/generated/warmelt-debug+01.cc: Regenerate.
	* melt/generated/warmelt-debug+02.cc: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.cc: Regenerate.
	* melt/generated/warmelt-first+01.cc: Regenerate.
	* melt/generated/warmelt-first+02.cc: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.cc: Regenerate.
	* melt/generated/warmelt-genobj+01.cc: Regenerate.
	* melt/generated/warmelt-genobj+02.cc: Regenerate.
	* melt/generated/warmelt-genobj+03.cc: Regenerate.
	* melt/generated/warmelt-genobj+04.cc: Regenerate.
	* melt/generated/warmelt-genobj+05.cc: Regenerate.
	* melt/generated/warmelt-genobj+06.cc: Regenerate.
	* melt/generated/warmelt-genobj+07.cc: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.cc: Regenerate.
	* melt/generated/warmelt-hooks+01.cc: Regenerate.
	* melt/generated/warmelt-hooks+02.cc: Regenerate.
	* melt/generated/warmelt-hooks+03.cc: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.cc: Regenerate.
	* melt/generated/warmelt-macro+01.cc: Regenerate.
	* melt/generated/warmelt-macro+02.cc: Regenerate.
	* melt/generated/warmelt-macro+03.cc: Regenerate.
	* melt/generated/warmelt-macro+04.cc: Regenerate.
	* melt/generated/warmelt-macro+05.cc: Regenerate.
	* melt/generated/warmelt-macro+06.cc: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.cc: Regenerate.
	* melt/generated/warmelt-modes+01.cc: Regenerate.
	* melt/generated/warmelt-modes+02.cc: Regenerate.
	* melt/generated/warmelt-modes+03.cc: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.cc: Regenerate.
	* melt/generated/warmelt-normal+01.cc: Regenerate.
	* melt/generated/warmelt-normal+02.cc: Regenerate.
	* melt/generated/warmelt-normal+03.cc: Regenerate.
	* melt/generated/warmelt-normal+04.cc: Regenerate.
	* melt/generated/warmelt-normal+05.cc: Regenerate.
	* melt/generated/warmelt-normal+06.cc: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.cc: Regenerate.
	* melt/generated/warmelt-normatch+01.cc: Regenerate.
	* melt/generated/warmelt-normatch+02.cc: Regenerate.
	* melt/generated/warmelt-normatch+03.cc: Regenerate.
	* melt/generated/warmelt-normatch+04.cc: Regenerate.
	* melt/generated/warmelt-normatch+05.cc: Regenerate.
	* melt/generated/warmelt-normatch+06.cc: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.cc: Regenerate.
	* melt/generated/warmelt-outobj+01.cc: Regenerate.
	* melt/generated/warmelt-outobj+02.cc: Regenerate.
	* melt/generated/warmelt-outobj+03.cc: Regenerate.
	* melt/generated/warmelt-outobj+04.cc: Regenerate.
	* melt/generated/warmelt-outobj+05.cc: Regenerate.
	* melt/generated/warmelt-outobj+06.cc: Regenerate.
	* melt/generated/warmelt-outobj+07.cc: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.cc: Regenerate.


2013-06-27  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.h (Melt_CallFrame): The melt_marking_callback is a
	friend.

	* melt-runtime.c (meltgc_make_special, meltgc_make_specialdata)
	(meltgc_new_int, meltgc_new_mixint, meltgc_new_mixloc)
	(meltgc_new_mixbigint_mpz, meltgc_new_routine, meltgc_new_closure)
	(meltgc_new_strbuf, meltgc_new_raw_object, meltgc_new_multiple)
	(meltgc_new_subseq_multiple, meltgc_new_mult1, meltgc_new_mult2)
	(meltgc_new_mult3, meltgc_new_mult4, meltgc_new_mult5)
	(meltgc_new_mult6, meltgc_new_mult7, meltgc_new_list)
	(meltgc_new_pair, meltgc_prepend_list, meltgc_new_mapobjects)
	(meltgc_new_mapstrings, meltgc_raw_new_mappointers)
	(meltgc_new_string_raw_len, meltgc_new_longsbucket): Calls to
	meltgc_allocate are casted.

	* melt/warmelt-base.melt (valdesc_mapobjects, valdesc_mapstrings)
	(valdesc_multiple, valdesc_string, valdesc_list): Add casts in
	cloning part.

2013-06-27  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/meltrunsup-inc.cc: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+01.cc: Regenerate.
	* melt/generated/warmelt-modes+02.cc: Regenerate.
	* melt/generated/warmelt-modes+03.cc: Regenerate.
	* melt/generated/warmelt-modes.cc: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.


2013-06-27  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-modes.melt (generate_runtypesupport_gty): Better
	operator conversion.

2013-06-27  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-modes.melt (generate_runtypesupport_gty): Only
	explicit meltcast_... conversions.

2013-06-27  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-modes.melt (generate_runtypesupport_gty): Improve
	emission of conversion operator wrapped with #ifndef
	MELT_NO_CONVERSION_OPERATOR.

2013-06-27  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.c (melt_check_call_frames_at): Do nothing for
	classy frames.

	* melt/warmelt-modes.melt (generate_runtypesupport_enum_objmagic):
	Improve emitted comment.
	(generate_runtypesupport_gty): Emit conversion operator wrapped
	with #ifndef MELT_NO_CONVERSION_OPERATOR.

	* melt/generated/meltrunsup-inc.cc: Temporary manual edits.

2013-06-27  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/meltrunsup-inc.cc: Regenerate.
	* melt/generated/warmelt-base+01.cc: Regenerate.
	* melt/generated/warmelt-base+02.cc: Regenerate.
	* melt/generated/warmelt-base.cc: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+01.cc: Regenerate.
	* melt/generated/warmelt-debug+02.cc: Regenerate.
	* melt/generated/warmelt-debug.cc: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+01.cc: Regenerate.
	* melt/generated/warmelt-first+02.cc: Regenerate.
	* melt/generated/warmelt-first.cc: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.cc: Regenerate.
	* melt/generated/warmelt-genobj+02.cc: Regenerate.
	* melt/generated/warmelt-genobj+03.cc: Regenerate.
	* melt/generated/warmelt-genobj+04.cc: Regenerate.
	* melt/generated/warmelt-genobj+05.cc: Regenerate.
	* melt/generated/warmelt-genobj+06.cc: Regenerate.
	* melt/generated/warmelt-genobj+07.cc: Regenerate.
	* melt/generated/warmelt-genobj.cc: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+01.cc: Regenerate.
	* melt/generated/warmelt-hooks+02.cc: Regenerate.
	* melt/generated/warmelt-hooks+03.cc: Regenerate.
	* melt/generated/warmelt-hooks.cc: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+01.cc: Regenerate.
	* melt/generated/warmelt-macro+02.cc: Regenerate.
	* melt/generated/warmelt-macro+03.cc: Regenerate.
	* melt/generated/warmelt-macro+04.cc: Regenerate.
	* melt/generated/warmelt-macro+05.cc: Regenerate.
	* melt/generated/warmelt-macro+06.cc: Regenerate.
	* melt/generated/warmelt-macro.cc: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+01.cc: Regenerate.
	* melt/generated/warmelt-modes+02.cc: Regenerate.
	* melt/generated/warmelt-modes+03.cc: Regenerate.
	* melt/generated/warmelt-modes.cc: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+01.cc: Regenerate.
	* melt/generated/warmelt-normal+02.cc: Regenerate.
	* melt/generated/warmelt-normal+03.cc: Regenerate.
	* melt/generated/warmelt-normal+04.cc: Regenerate.
	* melt/generated/warmelt-normal+05.cc: Regenerate.
	* melt/generated/warmelt-normal+06.cc: Regenerate.
	* melt/generated/warmelt-normal.cc: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+01.cc: Regenerate.
	* melt/generated/warmelt-normatch+02.cc: Regenerate.
	* melt/generated/warmelt-normatch+03.cc: Regenerate.
	* melt/generated/warmelt-normatch+04.cc: Regenerate.
	* melt/generated/warmelt-normatch+05.cc: Regenerate.
	* melt/generated/warmelt-normatch+06.cc: Regenerate.
	* melt/generated/warmelt-normatch.cc: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+01.cc: Regenerate.
	* melt/generated/warmelt-outobj+02.cc: Regenerate.
	* melt/generated/warmelt-outobj+03.cc: Regenerate.
	* melt/generated/warmelt-outobj+04.cc: Regenerate.
	* melt/generated/warmelt-outobj+05.cc: Regenerate.
	* melt/generated/warmelt-outobj+06.cc: Regenerate.
	* melt/generated/warmelt-outobj+07.cc: Regenerate.
	* melt/generated/warmelt-outobj.cc: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-06-27  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (MELT_ENTERFRAME_AT): For classy frames, pass
	their explicit size to constructor.

	* melt/warmelt-modes.melt (generate_runtypesupport_boxingfun):
	Emit explicit casts.

2013-06-27  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-run.proto.h: Just include from "c-family/c-pragma.h" since
	GCC 4.6 support is gone...

	* melt-runtime.h: More comments for #if and #endif.
	(MELT_FLEXIBLE_DIM): Keep only C++ case.  Reorganized oldstyle
	frames so that mcfr_flocs is always defined. MELT_LOCATION* macros
	simplified with "if (MELT_HAVE_DEBUG)"....

	* melt/warmelt-outobj.melt (output_curframe_declstruct): Field
	declaration mcfr_flocs is always emitted.

2013-06-27  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (melt_warning_at_strbuf) Typos in comments.
	(melt_dynobjstruct_getfield_object_at)
	(melt_dynobjstruct_putfield_object_at, melt_getfield_object_at)
	(melt_putfield_object_at): Mention MELT in error messages.
	(Melt_CallFrame::melt_clear_rest_of_frame): New member function.
	(Melt_CallFrameWithValues): Call it.

2013-06-27  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.c (melt_really_initialize): When
	ENABLE_GC_ALWAYS_COLLECT inform about slowdown.

2013-06-26  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup-inc.cc: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+02.cc: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.


2013-06-26  Basile Starynkevitch  <basile@starynkevitch.net>
	{{merge with trunk [4.9] svn rev. 196654-200426}}
	* melt-runtime.c (melt_val2passflag): TODO_ggc_collect &
	TODO_do_not_ggc_collect are conditionalized.

	* melt/generated/warmelt-first+03.cc: Manually remove calls to
	MELT_TRACE_EXIT_LOCATION macro.

	* melt/generated/warmelt-base+03.cc: Ditto.

2013-06-26  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.h (MELT_TRACE_LOCATION, MELT_TRACE_EXIT_LOCATION):
	Completely remove.

2013-06-26  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup-inc.cc: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.cc: Regenerate.
	* melt/generated/warmelt-base+02.cc: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.cc: Regenerate.
	* melt/generated/warmelt-debug+01.cc: Regenerate.
	* melt/generated/warmelt-debug+02.cc: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.cc: Regenerate.
	* melt/generated/warmelt-first+01.cc: Regenerate.
	* melt/generated/warmelt-first+02.cc: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.cc: Regenerate.
	* melt/generated/warmelt-genobj+01.cc: Regenerate.
	* melt/generated/warmelt-genobj+02.cc: Regenerate.
	* melt/generated/warmelt-genobj+03.cc: Regenerate.
	* melt/generated/warmelt-genobj+04.cc: Regenerate.
	* melt/generated/warmelt-genobj+05.cc: Regenerate.
	* melt/generated/warmelt-genobj+06.cc: Regenerate.
	* melt/generated/warmelt-genobj+07.cc: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.cc: Regenerate.
	* melt/generated/warmelt-hooks+01.cc: Regenerate.
	* melt/generated/warmelt-hooks+02.cc: Regenerate.
	* melt/generated/warmelt-hooks+03.cc: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.cc: Regenerate.
	* melt/generated/warmelt-macro+01.cc: Regenerate.
	* melt/generated/warmelt-macro+02.cc: Regenerate.
	* melt/generated/warmelt-macro+03.cc: Regenerate.
	* melt/generated/warmelt-macro+04.cc: Regenerate.
	* melt/generated/warmelt-macro+05.cc: Regenerate.
	* melt/generated/warmelt-macro+06.cc: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.cc: Regenerate.
	* melt/generated/warmelt-modes+01.cc: Regenerate.
	* melt/generated/warmelt-modes+02.cc: Regenerate.
	* melt/generated/warmelt-modes+03.cc: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.cc: Regenerate.
	* melt/generated/warmelt-normal+01.cc: Regenerate.
	* melt/generated/warmelt-normal+02.cc: Regenerate.
	* melt/generated/warmelt-normal+03.cc: Regenerate.
	* melt/generated/warmelt-normal+04.cc: Regenerate.
	* melt/generated/warmelt-normal+05.cc: Regenerate.
	* melt/generated/warmelt-normal+06.cc: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.cc: Regenerate.
	* melt/generated/warmelt-normatch+01.cc: Regenerate.
	* melt/generated/warmelt-normatch+02.cc: Regenerate.
	* melt/generated/warmelt-normatch+03.cc: Regenerate.
	* melt/generated/warmelt-normatch+04.cc: Regenerate.
	* melt/generated/warmelt-normatch+05.cc: Regenerate.
	* melt/generated/warmelt-normatch+06.cc: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.cc: Regenerate.
	* melt/generated/warmelt-outobj+01.cc: Regenerate.
	* melt/generated/warmelt-outobj+02.cc: Regenerate.
	* melt/generated/warmelt-outobj+03.cc: Regenerate.
	* melt/generated/warmelt-outobj+04.cc: Regenerate.
	* melt/generated/warmelt-outobj+05.cc: Regenerate.
	* melt/generated/warmelt-outobj+06.cc: Regenerate.
	* melt/generated/warmelt-outobj+07.cc: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.cc: Regenerate.

2013-06-25  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (MELT_TRACE_LOCATION, MELT_TRACE_EXIT_LOCATION):
	Removing them, temporarily defined as a no-op.

	* melt-runtime.c (melt_loctrace_file): Remove variable.
	(melt_really_initialize): Ditto, and remove usage of
	GCCMELT_TRACE_LOCATION environment variable.
	(melt_do_finalize): Likewise.

	* melt/warmelt-outobj.melt (outpucod_procroutine): Remove emission
	of MELT_TRACE_EXIT_LOCATION.

2013-06-25  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h: Requires a C++ compiler.
	(MELT_HAVE_CLASSY_FRAME): Default to 0 if not defined.
	(Melt_CallFrameWithValues): Minor improvements.

	* melt-runtime.c: Requires MELT_ENTERFRAME to be defined.

2013-06-25  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (Melt_CallFrame): Add melt_clear_rest_of_frame
	member private function. Rename some fields to be compatible with
	old practice.
	(Melt_CallFrameWithValues): Rename _meltcf_valtab as mcfr_varptr.

	* melt-run.proto.h (meltfptr,meltfnum,meltfclos,meltfrout): Same
	for classy and old frames.

2013-06-25  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (MELT_ENTERFRAME, MELT_ENTEREMPTYFRAME)
	(MELT_EXITFRAME, MELT_LOCATION, MELT_LOCATION_HERE)
	(MELT_LOCATION_HERE_PRINTF): Define macros when
	MELT_HAVE_CLASSY_FRAME.

	* melt-runtime.c (Melt_CallFrame::_top_call_frame_): Initialize to
	NULL.
	(melt_marking_callback, melt_minor_copying_garbage_collector):
	Code when MELT_HAVE_CLASSY_FRAME.

2013-06-25  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup-inc.cc: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.cc: Regenerate.
	* melt/generated/warmelt-base+02.cc: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.cc: Regenerate.
	* melt/generated/warmelt-debug+01.cc: Regenerate.
	* melt/generated/warmelt-debug+02.cc: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.cc: Regenerate.
	* melt/generated/warmelt-first+01.cc: Regenerate.
	* melt/generated/warmelt-first+02.cc: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.cc: Regenerate.
	* melt/generated/warmelt-genobj+01.cc: Regenerate.
	* melt/generated/warmelt-genobj+02.cc: Regenerate.
	* melt/generated/warmelt-genobj+03.cc: Regenerate.
	* melt/generated/warmelt-genobj+04.cc: Regenerate.
	* melt/generated/warmelt-genobj+05.cc: Regenerate.
	* melt/generated/warmelt-genobj+06.cc: Regenerate.
	* melt/generated/warmelt-genobj+07.cc: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.cc: Regenerate.
	* melt/generated/warmelt-hooks+01.cc: Regenerate.
	* melt/generated/warmelt-hooks+02.cc: Regenerate.
	* melt/generated/warmelt-hooks+03.cc: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.cc: Regenerate.
	* melt/generated/warmelt-macro+01.cc: Regenerate.
	* melt/generated/warmelt-macro+02.cc: Regenerate.
	* melt/generated/warmelt-macro+03.cc: Regenerate.
	* melt/generated/warmelt-macro+04.cc: Regenerate.
	* melt/generated/warmelt-macro+05.cc: Regenerate.
	* melt/generated/warmelt-macro+06.cc: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.cc: Regenerate.
	* melt/generated/warmelt-modes+01.cc: Regenerate.
	* melt/generated/warmelt-modes+02.cc: Regenerate.
	* melt/generated/warmelt-modes+03.cc: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.cc: Regenerate.
	* melt/generated/warmelt-normal+01.cc: Regenerate.
	* melt/generated/warmelt-normal+02.cc: Regenerate.
	* melt/generated/warmelt-normal+03.cc: Regenerate.
	* melt/generated/warmelt-normal+04.cc: Regenerate.
	* melt/generated/warmelt-normal+05.cc: Regenerate.
	* melt/generated/warmelt-normal+06.cc: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.cc: Regenerate.
	* melt/generated/warmelt-normatch+01.cc: Regenerate.
	* melt/generated/warmelt-normatch+02.cc: Regenerate.
	* melt/generated/warmelt-normatch+03.cc: Regenerate.
	* melt/generated/warmelt-normatch+04.cc: Regenerate.
	* melt/generated/warmelt-normatch+05.cc: Regenerate.
	* melt/generated/warmelt-normatch+06.cc: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.cc: Regenerate.
	* melt/generated/warmelt-outobj+01.cc: Regenerate.
	* melt/generated/warmelt-outobj+02.cc: Regenerate.
	* melt/generated/warmelt-outobj+03.cc: Regenerate.
	* melt/generated/warmelt-outobj+04.cc: Regenerate.
	* melt/generated/warmelt-outobj+05.cc: Regenerate.
	* melt/generated/warmelt-outobj+06.cc: Regenerate.
	* melt/generated/warmelt-outobj+07.cc: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.cc: Regenerate.

2013-06-26  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-outobj.melt (output_curframe_declstruct_init)
	(outpucod_procroutine): Emit code when MELT_HAVE_CLASSY_FRAME.

2013-06-25  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup-inc.cc: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.cc: Regenerate.
	* melt/generated/warmelt-base+02.cc: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.cc: Regenerate.
	* melt/generated/warmelt-debug+01.cc: Regenerate.
	* melt/generated/warmelt-debug+02.cc: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.cc: Regenerate.
	* melt/generated/warmelt-first+01.cc: Regenerate.
	* melt/generated/warmelt-first+02.cc: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.cc: Regenerate.
	* melt/generated/warmelt-genobj+01.cc: Regenerate.
	* melt/generated/warmelt-genobj+02.cc: Regenerate.
	* melt/generated/warmelt-genobj+03.cc: Regenerate.
	* melt/generated/warmelt-genobj+04.cc: Regenerate.
	* melt/generated/warmelt-genobj+05.cc: Regenerate.
	* melt/generated/warmelt-genobj+06.cc: Regenerate.
	* melt/generated/warmelt-genobj+07.cc: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.cc: Regenerate.
	* melt/generated/warmelt-hooks+01.cc: Regenerate.
	* melt/generated/warmelt-hooks+02.cc: Regenerate.
	* melt/generated/warmelt-hooks+03.cc: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.cc: Regenerate.
	* melt/generated/warmelt-macro+01.cc: Regenerate.
	* melt/generated/warmelt-macro+02.cc: Regenerate.
	* melt/generated/warmelt-macro+03.cc: Regenerate.
	* melt/generated/warmelt-macro+04.cc: Regenerate.
	* melt/generated/warmelt-macro+05.cc: Regenerate.
	* melt/generated/warmelt-macro+06.cc: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.cc: Regenerate.
	* melt/generated/warmelt-modes+01.cc: Regenerate.
	* melt/generated/warmelt-modes+02.cc: Regenerate.
	* melt/generated/warmelt-modes+03.cc: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.cc: Regenerate.
	* melt/generated/warmelt-normal+01.cc: Regenerate.
	* melt/generated/warmelt-normal+02.cc: Regenerate.
	* melt/generated/warmelt-normal+03.cc: Regenerate.
	* melt/generated/warmelt-normal+04.cc: Regenerate.
	* melt/generated/warmelt-normal+05.cc: Regenerate.
	* melt/generated/warmelt-normal+06.cc: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.cc: Regenerate.
	* melt/generated/warmelt-normatch+01.cc: Regenerate.
	* melt/generated/warmelt-normatch+02.cc: Regenerate.
	* melt/generated/warmelt-normatch+03.cc: Regenerate.
	* melt/generated/warmelt-normatch+04.cc: Regenerate.
	* melt/generated/warmelt-normatch+05.cc: Regenerate.
	* melt/generated/warmelt-normatch+06.cc: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.cc: Regenerate.
	* melt/generated/warmelt-outobj+01.cc: Regenerate.
	* melt/generated/warmelt-outobj+02.cc: Regenerate.
	* melt/generated/warmelt-outobj+03.cc: Regenerate.
	* melt/generated/warmelt-outobj+04.cc: Regenerate.
	* melt/generated/warmelt-outobj+05.cc: Regenerate.
	* melt/generated/warmelt-outobj+06.cc: Regenerate.
	* melt/generated/warmelt-outobj+07.cc: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.cc: Regenerate.

2013-06-25  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-outobj.melt (outcinitfill_objinithook): Partly reverted change.

2013-06-25  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (Melt_CallFrame): Has also a melthook_ptr_t.
	(Melt_CallFrameWithValues): Add constructor for hook.

	* melt-run.proto.h (meltfptr, meltfnum, meltfclos, meltfrout):
	Give definition when MELT_HAVE_CLASSY_FRAME.

	* melt/warmelt-genobj.melt (compile2obj_hook): The hook data
	parameter is named melthookdatap.

	* melt/warmelt-outobj.melt (outcinitfill_objinitroutine): Improve.
	(outcinitfill_objinithook): Improve.
	(output_curframe_declstruct): Emit variant for MELT_HAVE_CLASSY_FRAME.
	(output_curframe_declstruct_init): Ditto.
	(outpucod_procroutine): Slighty improved emission.

	* melt/warmelt-modes.melt (generate_runtypesupport_gty): Emit
	generation of safe casting functions.


2013-06-25  Basile Starynkevitch  <basile@starynkevitch.net>
	{{begin having classy frames, ie. MELT frames which are C++ classes}}
	* melt-runtime.h (Melt_CallFrame, Melt_CallFrameWithValues): New
	classes, when MELT_HAVE_CLASSY_FRAME
	(MELT_CATCH, MELT_THROW): Remove those commented macros.
	* melt-runtime.c (Melt_CallFrame::_top_call_frame_): Define, when
	MELT_HAVE_CLASSY_FRAME.
	(melt_minor_copying_garbage_collector): Made non-static.
	(melt_output_cfile_decl_impl_secondary_option): Mention C++ in and
	gcc-melt.org in emitted comment.
	* melt/warmelt-outobj.melt (output_curframe_declstruct): Also emit
	code when MELT_HAVE_CLASSY_FRAME.

2013-06-24  Basile Starynkevitch  <basile@starynkevitch.net>
	{{regenerated, as C++ files only}}
	* melt-upgrade.sh: Work ok...
	* melt/generated/meltrunsup-inc.cc: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.cc: Regenerate.
	* melt/generated/warmelt-base+02.cc: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.cc: Regenerate.
	* melt/generated/warmelt-debug+01.cc: Regenerate.
	* melt/generated/warmelt-debug+02.cc: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.cc: Regenerate.
	* melt/generated/warmelt-first+01.cc: Regenerate.
	* melt/generated/warmelt-first+02.cc: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.cc: Regenerate.
	* melt/generated/warmelt-genobj+01.cc: Regenerate.
	* melt/generated/warmelt-genobj+02.cc: Regenerate.
	* melt/generated/warmelt-genobj+03.cc: Regenerate.
	* melt/generated/warmelt-genobj+04.cc: Regenerate.
	* melt/generated/warmelt-genobj+05.cc: Regenerate.
	* melt/generated/warmelt-genobj+06.cc: Regenerate.
	* melt/generated/warmelt-genobj+07.cc: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.cc: Regenerate.
	* melt/generated/warmelt-hooks+01.cc: Regenerate.
	* melt/generated/warmelt-hooks+02.cc: Regenerate.
	* melt/generated/warmelt-hooks+03.cc: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.cc: Regenerate.
	* melt/generated/warmelt-macro+01.cc: Regenerate.
	* melt/generated/warmelt-macro+02.cc: Regenerate.
	* melt/generated/warmelt-macro+03.cc: Regenerate.
	* melt/generated/warmelt-macro+04.cc: Regenerate.
	* melt/generated/warmelt-macro+05.cc: Regenerate.
	* melt/generated/warmelt-macro+06.cc: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.cc: Regenerate.
	* melt/generated/warmelt-modes+01.cc: Regenerate.
	* melt/generated/warmelt-modes+02.cc: Regenerate.
	* melt/generated/warmelt-modes+03.cc: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.cc: Regenerate.
	* melt/generated/warmelt-normal+01.cc: Regenerate.
	* melt/generated/warmelt-normal+02.cc: Regenerate.
	* melt/generated/warmelt-normal+03.cc: Regenerate.
	* melt/generated/warmelt-normal+04.cc: Regenerate.
	* melt/generated/warmelt-normal+05.cc: Regenerate.
	* melt/generated/warmelt-normal+06.cc: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.cc: Regenerate.
	* melt/generated/warmelt-normatch+01.cc: Regenerate.
	* melt/generated/warmelt-normatch+02.cc: Regenerate.
	* melt/generated/warmelt-normatch+03.cc: Regenerate.
	* melt/generated/warmelt-normatch+04.cc: Regenerate.
	* melt/generated/warmelt-normatch+05.cc: Regenerate.
	* melt/generated/warmelt-normatch+06.cc: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.cc: Regenerate.
	* melt/generated/warmelt-outobj+01.cc: Regenerate.
	* melt/generated/warmelt-outobj+02.cc: Regenerate.
	* melt/generated/warmelt-outobj+03.cc: Regenerate.
	* melt/generated/warmelt-outobj+04.cc: Regenerate.
	* melt/generated/warmelt-outobj+05.cc: Regenerate.
	* melt/generated/warmelt-outobj+06.cc: Regenerate.
	* melt/generated/warmelt-outobj+07.cc: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.cc: Regenerate.

2013-06-24  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-upgrade.sh: Correct typos...
2013-06-24  Basile Starynkevitch  <basile@starynkevitch.net>
	{{make upgrade-warmelt don't really work}}
	* melt-upgrade.sh: New file.
	* Makefile.in (upgrade-warmelt): Use it.

2013-06-24  Basile Starynkevitch  <basile@starynkevitch.net>

	* Makefile.in (upgrade-warmelt): Use "astyle --style=gnu" instead
	of "astyle -gnu" ...

	* melt/warmelt-outobj.melt (outpucod_initialmoduleroutine): Emit
	better the forward declaration of melt_start_this_module & struct
	melt_initial_frame_st...

	* melt-module.mk ($(GCCMELTGEN_BUILD)%.quicklybuilt.meltmdsumedpic.o): Correct typo.

2013-06-24  Basile Starynkevitch  <basile@starynkevitch.net>
	{{The header meltrunsup.h cannot be renamed as meltrunsup.hh
	because gengtype don't allow that. But we rename the generated
	meltrunsup-inc.c as meltrunsup-inc.cc...}}
	* Makefile.in (melt-runtime.args, GTFILES, upgrade-warmelt): Use
	meltrunsup-inc.cc file.

	* melt/generated/meltrunsup-inc.c: Rename as...
	* melt/generated/meltrunsup-inc.cc: New name for this file.

	* melt-runtime.h: Mention meltrunsup-inc.cc in comments.
	* melt-runtime.c: Include "meltrunsup-inc.cc".

	* melt/warmelt-modes.melt (runtypesupport_docmd): Generate
	meltrunsup.h & meltrunsup-inc.cc files.


2013-06-24  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Fully switching to C++; first, emit C++ file names; the
	generated *+meltdesc.c file stays in plain C}}

	* melt/generated/: Rename all warmelt*.c files as warmelt*.cc...
	files. Also hand-replaced some ".c" with ".cc" in
	warmelt-outobj*.cc files.

	* Makefile.in (upgrade-warmelt): Process *.cc files and use astyle, not indent.

	* melt-module.mk: Handle *.cc files not *.c ones.
	* melt-build-script.tpl: Likewise.
	* melt-build-script.sh: Regenerate.
	* melt-module.mk: Handle *.cc files not *.c ones.
	* melt-runtime.h (meltgc_new_string_generated_c_filename) Rename as...
	(meltgc_new_string_generated_cc_filename): Rename, also add macro
	meltgc_new_string_generated_c_filename for compatibility.
	* melt-runtime.c: Ensure that we have GCC 4.7 at least.
	(meltgc_new_string_generated_c_filename) Rename as...
	(meltgc_new_string_generated_cc_filename): Rename.
	(meltgc_run_c_extension): Renamse as...
	(meltgc_run_cc_extension): Rename, also add macro
	meltgc_run_c_extension for compatibility
	(melt_load_module_index): Wants *.cc.
	(melt_output_cfile_decl_impl_secondary_option): Likewise.
	* melt/warmelt-base.melt (make_string_generated_c_filename):
	Rename as ...
	(make_string_generated_cc_filename): Renamed.
	* melt/warmelt-genobj.melt (compile2obj_initextendproc): Change comment.
	* melt/warmelt-outobj.melt (class_secondary_c_file)
	(translate_to_c_module_melt_sources): Rename as..
	(class_secondary_cc_file, translate_to_cc_module_melt_sources):
	New. Adapt for *.cc emission.
	(output_melt_descriptor): Adapt for *.cc emission.
	* melt/warmelt-modes.melt (runfile_docmd, runtypesupport_docmd): Likewise.


2013-06-23  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.h (MELT_VERSION_STRING): Bump to 0.9.9-post.

2013-06-22  Basile Starynkevitch  <basile@starynkevitch.net>
	{{MELT plugin release 0.9.9}}
	* melt-runtime.h (MELT_VERSION_STRING): Bump to 0.9.9 release.

	* melt-module.mk (GCCMELT_OPTIMIZED_FLAGS): Use -O2, not -O1.

2013-06-22  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate, for 0.9.9 release}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+06.c: Regenerate.
	* melt/generated/warmelt-genobj+07.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2013-06-22  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (MELT_VERSION_STRING): Bump to 0.9.9-quasi...

	* melt/warmelt-first.melt (debug_msg_fun): Remove.
	(melt_low_debug): New primitive.

2013-06-22  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-genobj.melt (compile2obj_initproc): The emitted
	warning for no parent environment is meaningful only when
	MELT_HAS_INITIAL_ENVIRONMENT.

2013-06-22  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+02.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+06.c: Regenerate.
	* melt/generated/warmelt-genobj+07.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-hooks+01.c: Regenerate.
	* melt/generated/warmelt-hooks+02.c: Regenerate.
	* melt/generated/warmelt-hooks+03.c: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.c: Regenerate.
	* melt/generated/warmelt-macro+06.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+03.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+06.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+06.c: Regenerate.
	* melt/generated/warmelt-outobj+07.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2013-06-22  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-debug.melt (dbgout_list_method): Works better.

2013-06-22  Basile Starynkevitch  <basile@starynkevitch.net>
	{{REPL mode works, even with a piped input like from shell command
	printf "(list 'a 'b)\n\n" ....}}

	* melt/warmelt-macro.melt (mexpand_debug_msg): Should fail unless
	bootstrapping.

	* melt/warmelt-hooks.melt (hook_poll_inputs): Calls poll -for
	sleeping- even without any listening input channel.
	(is_polling_inputs, every_polling_input, get_polling_input): New
	functions.
	* melt/warmelt-modes.melt (repl_processor, repl_docmd): Stops on
	eof on stdin.

	* testsuite/melt/ttuplist.melt: Improve to make it work again.

2013-06-22  Basile Starynkevitch  <basile@starynkevitch.net>
	{{REPL mode works, but LIST macro don't work well in it}}

	* melt/warmelt-debug.melt (dbg_out): Simplified test to output.

	* melt/warmelt-outobj.melt (translate_run_melt_expressions): The
	temporary raw fileprefix contains the pid to ensure unicity.

	* melt/warmelt-hooks.melt (melt_invoke_input_callbacks): 0
	i.e. stdin is a permissible file descriptor, useful for REPL.

	* melt/warmelt-modes.melt (repl_processor, repl_docmd): More debug
	and increase poll time to 60 seconds.

2013-06-22  Basile Starynkevitch  <basile@starynkevitch.net>
	{{REPL mode does not seems to work correctly}}

	* melt-runtime.h (MELT_VERSION_STRING): Bump to 0.9.9-pre.

	* melt-runtime.c (melt_marking_callback): Add casts to reduce
	warnings.
	(melt_garbcoll): Increase default and min,max threshold numbers to
	reduce spurious full GC... Add casts.
	(melt_warn_for_no_expected_secondary_results): Spelling typo.
	(melt_handle_melt_attribute): Remove curlocbuf.

	* params.def (PARAM_MELT_FULL_THRESHOLD, PARAM_MELT_FULL_PERIOD):
	Increase.

	* melt/warmelt-normal.melt (normexp_cheader, normexp_cimplement):
	Returns twice nil.

	* melt/warmelt-genobj.melt (compile2obj_initproc) Don't warn about
	creating a fresh environment.

2013-06-21  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+07.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+06.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+06.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2013-06-21  Basile Starynkevitch  <basile@starynkevitch.net>
	{{tests t-meltgcmewint.c & thook-7.melt passing}}

	* melt/warmelt-normal.melt (normalize_lambda): Set insideflag
	correctly. More debug.
	(normexp_lambda): More debug.

2013-06-21  Basile Starynkevitch  <basile@starynkevitch.net>

	* testsuite/melt/thook-7.melt: New test.

	* melt/warmelt-normal.melt (normalize_lambda, normexp_lambda): More debug.

2013-06-21  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-normal.melt (class_nrep_hookproc): Remove field
	nrhook_mapdata.
	(add_nctx_data): Don't handle hooks particularily, because no more
	nrhook_mapdata field.
	(normexp_defhook): Don't create or fill the nmapdata, likewise.

2013-06-21  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+02.c: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+06.c: Regenerate.
	* melt/generated/warmelt-genobj+07.c: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+02.c: Regenerate.
	* melt/generated/warmelt-hooks+03.c: Regenerate.
	* melt/generated/warmelt-hooks.c: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+06.c: Regenerate.
	* melt/generated/warmelt-outobj+07.c: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-06-21  Basile Starynkevitch  <basile@starynkevitch.net>

	{{removing nrhook_mapdata field which is useless and confusing}}
	* melt/warmelt-genobj.melt (compile2obj_hook, compilobj_datahook): Don't use nrhook_mapdata.

2013-06-21  Basile Starynkevitch  <basile@starynkevitch.net>

	{{updated test thook-6 fails, and hook_gimple_gate from
	warmelt-hooks.melt is miscompiled!}}
	* melt/warmelt-debug.melt (dbgout_hook_method, dbgout_closure_method): Improve output.

	* melt/warmelt-hooks.melt (hook_gimple_gate): Add debug.

	* melt/xtramelt-ana-simple.melt (meltframe_docmd): Debug display the hook_gimple_gate.

	* testsuite/melt/thook-6.melt: Add a lambda so crash MELT svn rev.200288....

2013-06-21  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-outobj.melt (autobox_normal_return): Handle :void
	ctype by returning nil.

2013-06-21  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+06.c: Regenerate.
	* melt/generated/warmelt-genobj+07.c: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+02.c: Regenerate.
	* melt/generated/warmelt-hooks+03.c: Regenerate.
	* melt/generated/warmelt-hooks.c: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-06-21  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-genobj.melt (compile2obj_hook): More debug.

	* melt/warmelt-hooks.melt (hook_gimple_gate, hook_gimple_execute): More debug.

	* melt/xtramelt-ana-base.melt (melthk_gimple_gate, melthk_gimple_execute): More debug.

	* melt/xtramelt-ana-simple.melt: Improve copyright year.
	(meltframe_gate): More debug.

	* melt/xtramelt-playground.melt: Remove most useless code.

	* testsuite/melt/t-meltgcnewint.c: Improve comment for running.

	* testsuite/melt/thook-6.melt: Ditto.

2013-06-21  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-hooks.melt (hook_gimple_gate, hook_gimple_execute):
	Add debug.

	* melt/xtramelt-ana-base.melt: Update copyright year.

	* melt/xtramelt-ana-simple.melt (meltframe_gate): Better.

2013-06-21  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+02.c: Regenerate.
	* melt/generated/warmelt-hooks+03.c: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-06-21  Basile Starynkevitch  <basile@starynkevitch.net>

	{{checkruntime does run but find 0 melt routines...}}
	* melt/warmelt-hooks.melt (hook_exit_finalizer): Simplified, so
	works again...

2013-06-20  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerated -with manual copy- and unstable and brittle; fail to run checkruntime...}}
	* melt/generated/warmelt-base+01.c: Regenerate and copy manually.
	* melt/generated/warmelt-base+02.c: Regenerate and copy manually.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate and copy manually.
	* melt/generated/warmelt-base+melttime.h: Regenerate and copy manually.
	* melt/generated/warmelt-base.c: Regenerate and copy manually.
	* melt/generated/warmelt-debug+01.c: Regenerate and copy manually.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate and copy manually.
	* melt/generated/warmelt-debug+melttime.h: Regenerate and copy manually.
	* melt/generated/warmelt-debug.c: Regenerate and copy manually.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate and copy manually.
	* melt/generated/warmelt-first+melttime.h: Regenerate and copy manually.
	* melt/generated/warmelt-first.c: Regenerate and copy manually.
	* melt/generated/warmelt-genobj+01.c: Regenerate and copy manually.
	* melt/generated/warmelt-genobj+02.c: Regenerate and copy manually.
	* melt/generated/warmelt-genobj+03.c: Regenerate and copy manually.
	* melt/generated/warmelt-genobj+04.c: Regenerate and copy manually.
	* melt/generated/warmelt-genobj+05.c: Regenerate and copy manually.
	* melt/generated/warmelt-genobj+06.c: Regenerate and copy manually.
	* melt/generated/warmelt-genobj+07.c: Regenerate and copy manually.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate and copy manually.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate and copy manually.
	* melt/generated/warmelt-genobj.c: Regenerate and copy manually.
	* melt/generated/warmelt-hooks+02.c: Regenerate and copy manually.
	* melt/generated/warmelt-hooks+03.c: Regenerate and copy manually.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate and copy manually.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate and copy manually.
	* melt/generated/warmelt-hooks.c: Regenerate and copy manually.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate and copy manually.
	* melt/generated/warmelt-macro+melttime.h: Regenerate and copy manually.
	* melt/generated/warmelt-macro.c: Regenerate and copy manually.
	* melt/generated/warmelt-modes+01.c: Regenerate and copy manually.
	* melt/generated/warmelt-modes+02.c: Regenerate and copy manually.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate and copy manually.
	* melt/generated/warmelt-modes+melttime.h: Regenerate and copy manually.
	* melt/generated/warmelt-modes.c: Regenerate and copy manually.
	* melt/generated/warmelt-normal+02.c: Regenerate and copy manually.
	* melt/generated/warmelt-normal+04.c: Regenerate and copy manually.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate and copy manually.
	* melt/generated/warmelt-normal+melttime.h: Regenerate and copy manually.
	* melt/generated/warmelt-normal.c: Regenerate and copy manually.
	* melt/generated/warmelt-normatch+05.c: Regenerate and copy manually.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate and copy manually.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate and copy manually.
	* melt/generated/warmelt-normatch.c: Regenerate and copy manually.
	* melt/generated/warmelt-outobj+01.c: Regenerate and copy manually.
	* melt/generated/warmelt-outobj+02.c: Regenerate and copy manually.
	* melt/generated/warmelt-outobj+03.c: Regenerate and copy manually.
	* melt/generated/warmelt-outobj+04.c: Regenerate and copy manually.
	* melt/generated/warmelt-outobj+05.c: Regenerate and copy manually.
	* melt/generated/warmelt-outobj+06.c: Regenerate and copy manually.
	* melt/generated/warmelt-outobj+07.c: Regenerate and copy manually.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate and copy manually.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate and copy manually.
	* melt/generated/warmelt-outobj.c: Regenerate and copy manually.

2013-06-20  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Unstable}}
	* make-melt-predefh.awk: Emit MELT_HAS_PREDEFINED macro calls...

	* melt-predef.list: Change eof comment.

	* melt-runtime.h (enum melt_globalix_en): Use MELT_HAS_PREDEFINED.
	(melt_predefined_index_by_name): Declare new function.

	* melt-runtime.c (melt_predefined_index_by_name): Define new function.

	* melt/warmelt-base.melt (melt_predefined_by_name, melt_predefined_get): New.

	* melt/warmelt-hooks.melt (hook_exit_finalizer): Add debug.

	* testsuite/melt/thook-6.melt: Improve.

2013-06-20  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Unstable}}
	* melt/warmelt-genobj.melt (compile2obj_hook): Don't really use
	the nmapdata, but for each closed value, fetch it..

	* melt/warmelt-outobj.melt (outdeclinit_root): Give also an
	explanatory error.

2013-06-19  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+06.c: Regenerate.
	* melt/generated/warmelt-genobj+07.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+06.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+01.c: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+03.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+06.c: Regenerate.
	* melt/generated/warmelt-outobj+07.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2013-06-19  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-normal.melt (add_nctx_data): More debug.

	* melt/warmelt-genobj.melt (compile2obj_hook): Change emitted
	offset in ofetchdata.

	* melt/warmelt-outobj.melt (outpucod_objhooknth): Improve emitted
	message.

2013-06-19  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (MELT_HOOK_NTH_SLOT, melt_ensuremsg): New macros.

	* melt/warmelt-outobj.melt (outpucod_objhooknth): Use them in
	emitted code.

2013-06-19  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+02.c: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+06.c: Regenerate.
	* melt/generated/warmelt-genobj+07.c: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+01.c: Regenerate.
	* melt/generated/warmelt-hooks+02.c: Regenerate.
	* melt/generated/warmelt-hooks+03.c: Regenerate.
	* melt/generated/warmelt-hooks.c: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+06.c: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+06.c: Regenerate.
	* melt/generated/warmelt-outobj+07.c: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.


2013-06-19  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Unstable}}
	* melt-runtime.c (melt_low_debug_for_gdb): New function, to be
	called from gdb only.

	* melt/warmelt-debug (dbgout_hook_method): Slightly better output.

	* melt/warmelt-normal.melt (normexp_defhook): More debug.

	* melt/warmelt-genobj.melt (compilobj_datahook): Only put the
	ndhook_closv in the datahook.

	* melt/warmelt-outobj.melt (outpucod_objputhookconst): Emit more
	checks.

	* testsuite/melt/thook-6.melt: Temporarily simplified by commenting.

2013-06-19  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-normal.melt (add_nctx_data): More debug.
	(normalize_tuple): Use a foreach_in_multiple loop. More debug.
	(normexp_defhook): The closvtup was incorrectly sized. Fix that.
	(normexp_quote): More debug.

	* testsuite/melt/thook-6.melt: Better indented.

2013-06-18  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-normal.melt (normal_symbol_data): More debug.

2013-06-18  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}

	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+07.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-hooks+03.c: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+06.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+01.c: Regenerate.
	* melt/generated/warmelt-normatch+02.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+06.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.


2013-06-18  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-normal.melt (normbind_anybind, normexp_symbol):
	More debug.

2013-06-18  Basile Starynkevitch  <basile@starynkevitch.net>

	* testsuite/melt/thook-1.melt: Improve running command comment.
	* testsuite/melt/thook-2.melt: Improve running command comment.
	* testsuite/melt/thook-6.melt: New test.

	* melt/warmelt-first.melt (class_normalization_context): Is now a
	subclass of class_proped.

	* melt/warmelt-normal.melt (create_normcontext)
	(create_normal_extending_context): More debug.

2013-06-16  Basile Starynkevitch  <basile@starynkevitch.net>

	* testsuite/melt/tplaygr-1.melt: New test.
	* melt/warmelt-hooks.melt: Export melt_invoke_input_callbacks.

2013-06-16  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+06.c: Regenerate.
	* melt/generated/warmelt-genobj+07.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+06.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+01.c: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+03.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+06.c: Regenerate.
	* melt/generated/warmelt-outobj+07.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

	* melt/xtramelt-playground.melt: Minor change.

2013-06-16  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-normal.melt (normal_keyword_data): More debug.

	* melt/warmelt-genobj.melt (compile2obj_hook)
	(compil_data_and_slots_fill, compilobj_datasymbol)
	(compilobj_datainstance): More debug.

	* melt/xtramelt-playground.melt: Temporary code for testing...

2013-06-15  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-build-script.def: Add xtramelt-playground application file.

	* melt-build-script.sh: Regenerate.

	* melt/warmelt-normal.melt (normexp_keyword): More debug.

	* melt/warmelt-outobj.melt (outcinitfill_objinithook): Emit the
	right argument to MELT_PREDEF etc...

	* melt/xtramelt-opengpu.melt: Copyright as range of years.

	* melt/xtramelt-playground.melt: New file. Should be left mostly
	empty -except for comments- for releases.

2013-06-15  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+06.c: Regenerate.
	* melt/generated/warmelt-genobj+07.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-hooks+01.c: Regenerate.
	* melt/generated/warmelt-hooks+02.c: Regenerate.
	* melt/generated/warmelt-hooks+03.c: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.c: Regenerate.
	* melt/generated/warmelt-macro+02.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+06.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+06.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2013-06-15  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-normal.melt (class_nrep_hookproc, normexp_defhook):
	Remove field nrhook_closedbindlist replaced by inherited
	nrclop_clobindlist.
	(normbind_anybind): Change error message.
	(normexp_defhook): Handle both closbindlist & constlist to build
	the closvtup.
	(normexp_keyword): Use and update nrclop_constlist &
	nrclop_objconstcachemap field of the current procedure.

	* melt/warmelt-genobj.melt (ompilobj_nrep_closedocc): Better
	debug.

	* testsuite/melt/thook-5.melt: Improve.

2013-06-15  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-normal.melt (class_nrep_routproc, normexp_defun)
	(normexp_lambda): Remove nrpro_const field, replaced by inherited
	nrclop_constlist field.

2013-06-15  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+06.c: Regenerate.
	* melt/generated/warmelt-genobj+07.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+06.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-06-15  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-genobj.melt (compilobj_nrep_constocc)
	(compilobj_nrep_quasiconstant, compilobj_dataroutine)
	(compilobj_nrep_update_current_module_environment_reference)
	(compilobj_nrep_check_running_module_environment_container):
	Replace nrpro_const with nrclop_constlist.

2013-06-15  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+06.c: Regenerate.
	* melt/generated/warmelt-genobj+07.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+06.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+06.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2013-06-15  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-normal.melt (class_nrep_closproc): Add
	nrclop_constlist & nrclop_objconstcachemap fields.
	(normbind_anybind, normexp_symbol, normexp_keyword, normexp_defun)
	(normexp_lambda, normexp_defhook): Use or fill them.

	* melt/warmelt-genobj.melt: Change unsafe gets of :nrpro_const to
	safe gets.

2013-06-14  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+02.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+06.c: Regenerate.
	* melt/generated/warmelt-genobj+07.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-hooks+01.c: Regenerate.
	* melt/generated/warmelt-hooks+02.c: Regenerate.
	* melt/generated/warmelt-hooks+03.c: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.c: Regenerate.
	* melt/generated/warmelt-macro+01.c: Regenerate.
	* melt/generated/warmelt-macro+02.c: Regenerate.
	* melt/generated/warmelt-macro+03.c: Regenerate.
	* melt/generated/warmelt-macro+04.c: Regenerate.
	* melt/generated/warmelt-macro+05.c: Regenerate.
	* melt/generated/warmelt-macro+06.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+03.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+06.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+01.c: Regenerate.
	* melt/generated/warmelt-normatch+02.c: Regenerate.
	* melt/generated/warmelt-normatch+03.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch+06.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+01.c: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+03.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+06.c: Regenerate.
	* melt/generated/warmelt-outobj+07.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2013-06-14  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-normalt.melt (class_nrep_hookproc): Remove fields
	nrhook_name, nrhook_inb, nrhook_closedbindlist which are replaced
	by nrclop_name, nrclop_argbindtuple, nrclop_clobindlist inherited
	fields.
	(class_nrep_routproc): Remove fields nrpro_name, nrpro_argb,
	nrpro_closedb which are replaced by nrclop_name,
	nrclop_argbindtuple, nrclop_clobindlist inherited fields.

2013-06-14  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+02.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+06.c: Regenerate.
	* melt/generated/warmelt-genobj+07.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-hooks+01.c: Regenerate.
	* melt/generated/warmelt-hooks+02.c: Regenerate.
	* melt/generated/warmelt-hooks+03.c: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.c: Regenerate.
	* melt/generated/warmelt-macro+01.c: Regenerate.
	* melt/generated/warmelt-macro+02.c: Regenerate.
	* melt/generated/warmelt-macro+03.c: Regenerate.
	* melt/generated/warmelt-macro+04.c: Regenerate.
	* melt/generated/warmelt-macro+05.c: Regenerate.
	* melt/generated/warmelt-macro+06.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+03.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+06.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+01.c: Regenerate.
	* melt/generated/warmelt-normatch+02.c: Regenerate.
	* melt/generated/warmelt-normatch+03.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch+06.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+01.c: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+03.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+06.c: Regenerate.
	* melt/generated/warmelt-outobj+07.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2013-06-14  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-normal.melt: Export class_nrep_closproc.

	* melt/warmelt-genobj.melt (compile2obj_hook)
	(compile2obj_procedure): Use nrclop_name & nrclop_argbindtuple.

	* melt/warmelt-outobj.melt (outcinitfill_objinithook)
	(output_hooks_with_modvar): Use nrclop_name & nrclop_argbindtuple.

2013-06-14  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+02.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+06.c: Regenerate.
	* melt/generated/warmelt-genobj+07.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+06.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+01.c: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+03.c: Regenerate.
	* melt/generated/warmelt-outobj+06.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-06-14  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-normal.melt (class_nrep_closproc): New class with
	fields nrclop_name, nrclop_argbindtuple, nrclop_clobindlist.
	(class_nrep_hookproc, class_nrep_routproc): Inherit from
	class_nrep_closproc.
	(normexp_symbol): Use nrclop_clobindlist instead of
	nrhook_closedbindlist and nrpro_closedb.
	(normexp_ifvariadic): Use nrclop_argbindtuple instead of nrpro_argb.
	(normexp_defun, normexp_lambda, normexp_defhook): Fill both fields.

2013-06-14  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-normal.melt (normal_symbol): Slightly better local
	variable names...

2013-06-14  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-debug.melt (dbgout_mapobject_method)
	(dbgout_mapstring_method): Improve.

	* melt/warmelt-normal.melt (normal_keyword_data): More debug.

	* melt/warmelt-genobj.melt (compilobj_datasymbol): more debug.

2013-06-14  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-genobj.melt: More debug.

2013-06-13  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-genobj.melt: More debug.

2013-06-13  Basile Starynkevitch  <basile@starynkevitch.net>

	{{still buggy, REPL mode don't work because of a metabug}}
	* melt/warmelt-genobj.melt (compilobj_nrep_unsafe_put_fields)
	(compilobj_nrep_makeinst, compil_data_and_slots_fill): Less
	multiple_every, more foreach_in_multiple iterations and debug
	messages.

2013-06-13  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+02.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+06.c: Regenerate.
	* melt/generated/warmelt-genobj+07.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-hooks+01.c: Regenerate.
	* melt/generated/warmelt-hooks+02.c: Regenerate.
	* melt/generated/warmelt-hooks+03.c: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.c: Regenerate.
	* melt/generated/warmelt-macro+01.c: Regenerate.
	* melt/generated/warmelt-macro+02.c: Regenerate.
	* melt/generated/warmelt-macro+03.c: Regenerate.
	* melt/generated/warmelt-macro+04.c: Regenerate.
	* melt/generated/warmelt-macro+05.c: Regenerate.
	* melt/generated/warmelt-macro+06.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+06.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+01.c: Regenerate.
	* melt/generated/warmelt-normatch+02.c: Regenerate.
	* melt/generated/warmelt-normatch+03.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+06.c: Regenerate.
	* melt/generated/warmelt-outobj+07.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2013-06-13  Basile Starynkevitch  <basile@starynkevitch.net>

        * melt/warmelt-outobj.melt (outpucod_objputslot): More debug.

2013-06-13  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-outobj.melt (outpucod_objputslot): Emit improved
	messages in asserts...

2013-06-13  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-outobj.melt (outpucod_objputslot): Emit some name
	in the assert message..


2013-06-12  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.h (MELT_VERSION_STRING): Bump to 0.9.9-rc3p

2013-06-12  Basile Starynkevitch  <basile@starynkevitch.net>
	{0.9.9 rc3 release candidate}}
	* melt-runtime.h (MELT_VERSION_STRING): Bump to 0.9.9-rc3

	* melt/warmelt-first.melt (class_initial_system_data): Remove
	sysdata_obsolete1, sysdata_alarm_hook, sysdata_child_hook.

2013-06-12  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+03.c: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-06-12  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-hooks.melt: Don't use sysdata_alarm_hook.

2013-06-12  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+02.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+07.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-hooks+01.c: Regenerate.
	* melt/generated/warmelt-hooks+02.c: Regenerate.
	* melt/generated/warmelt-hooks+03.c: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+06.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2013-06-12  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.c (meltgc_handle_sigalrm, meltgc_handle_sigchld):
	Remove since replaced by hooks.
	(melt_handle_signal): Call melthookproc_HOOK_HANDLE_SIGALRM &
	melthookproc_HOOK_HANDLE_SIGCHLD.

2013-06-12  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-hooks.melt (melt_alarmbucket): New variable.
	(hook_handle_sigalrm): Samel as old handle_alarm_signal but use melt_alarmbucket.
	(handle_alarm_signal): Remove.
	(register_alarm_timer): Use melt_alarmbucket.
	(melt_childbuck): New variable.
	(child_process_sigchld_handler): Remove function.
	(hook_handle_sigchld): Use melt_childbuck.

2013-06-12  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (meltgc_poll_inputs): Remove declaration.

	* melt-runtime.c (meltgc_poll_inputs): Remove stub.

	* melt/warmelt-base.melt (poll_all_inputs): Remove.

2013-06-12  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+02.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+06.c: Regenerate.
	* melt/generated/warmelt-genobj+07.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-hooks+03.c: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.c: Regenerate.
	* melt/generated/warmelt-macro+01.c: Regenerate.
	* melt/generated/warmelt-macro+02.c: Regenerate.
	* melt/generated/warmelt-macro+03.c: Regenerate.
	* melt/generated/warmelt-macro+04.c: Regenerate.
	* melt/generated/warmelt-macro+05.c: Regenerate.
	* melt/generated/warmelt-macro+06.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+03.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+06.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+01.c: Regenerate.
	* melt/generated/warmelt-normatch+02.c: Regenerate.
	* melt/generated/warmelt-normatch+03.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch+06.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+01.c: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+03.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+06.c: Regenerate.
	* melt/generated/warmelt-outobj+07.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2013-06-12  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-macro.melt (mexpand_debug): Put a (void) in both
	then and else branches of cppif.

2013-06-12  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-first.melt (class_initial_system_data): Replace
	sysdata_inchannel_data with sysdata_obsolete1.

	* melt/warmelt-base.melt (poll_all_inputs): Obsolete primitive.

	* melt/warmelt-hooks.melt (hook_poll_inputs): Is predefined and
	exported.

	* melt/warmelt-modes.melt (repl_docmd): Use hook_poll_inputs
	instead of poll_all_inputs.

	* melt/xtramelt-probe.melt (probe_at_exit): Likewise.

2013-06-12  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+06.c: Regenerate.
	* melt/generated/warmelt-genobj+07.c: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+01.c: Regenerate.
	* melt/generated/warmelt-hooks+02.c: Regenerate.
	* melt/generated/warmelt-hooks+03.c: Regenerate.
	* melt/generated/warmelt-hooks.c: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+01.c: Regenerate.
	* melt/generated/warmelt-macro+02.c: Regenerate.
	* melt/generated/warmelt-macro+03.c: Regenerate.
	* melt/generated/warmelt-macro+04.c: Regenerate.
	* melt/generated/warmelt-macro+05.c: Regenerate.
	* melt/generated/warmelt-macro+06.c: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+03.c: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+06.c: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+01.c: Regenerate.
	* melt/generated/warmelt-normatch+02.c: Regenerate.
	* melt/generated/warmelt-normatch+03.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch+06.c: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+01.c: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+03.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+06.c: Regenerate.
	* melt/generated/warmelt-outobj+07.c: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.


2013-06-12  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-predef.list (HOOK_POLL_INPUTS): New.

	* melt/runtime.c (meltgc_poll_inputs): Removing it, by making an
	aborting stub.
	(meltgc_handle_sigio): Removing it.
	(melt_handle_signal): Call melthookproc_HOOK_HANDLE_SIGIO instead
	of meltgc_handle_sigio.

	* melt/warmelt-first.melt (class_initial_system_data):
	sysdata_inchannel_data is becoming obsolete.

	* melt/warmelt-hooks.melt (hook_poll_inputs): New, doing most of
	hook_handle_sigio.
	(hook_handle_sigio): Simply call hook_poll_inputs.
	(melt_inpchanbuck): New variable
	(register_input_channel_handler): Use it.

2013-06-12  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-hooks.melt (melt_invoke_input_callbacks): Completed
	function.

2013-06-12  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-macros.melt (mexpand_debug): Add an explicit (void)
	in the expansion to force :void type.

	* melt/warmelt-hooks.melt (melt_invoke_input_callbacks): New
	incomplete utility function.
	(hook_handle_sigio): Use it.

2013-06-12  Basile Starynkevitch  <basile@starynkevitch.net>

	{{eval works again}}
	* melt/warmelt-genobj.melt (compile2obj_initextendproc): Don't
	assume no import values, because we are importing literal
	values...

2013-06-12  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-normal.melt (normal_import): Handle both imported
	values instances of class_nrep_importedval and literal named
	values instances of class_nrep_literalvalue.
	(create_normal_extending_context): Correct assert on modctx.

2013-06-12  Basile Starynkevitch  <basile@starynkevitch.net>

	{{eval mode don't work well}}
	* melt/warmelt-hooks.melt (hook_handle_sigio): More but
	incomplete, temporarily exported to be eval-able.

2013-06-12  Basile Starynkevitch  <basile@s(tarynkevitch.net>

	{{Regenerate}}
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+01.c: Regenerate.
	* melt/generated/warmelt-hooks+02.c: Regenerate.
	* melt/generated/warmelt-hooks+03.c: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+03.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+06.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-06-12  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-hooks.melt (register_alarm_timer)
	(register_child_process_handler, register_input_channel_handler)
	(unregister_alarm_timer, unregister_child_process_handler): New
	functions, moved from warmelt-modes.melt file.

	* melt/warmelt-modes.melt  (register_alarm_timer)
	(register_child_process_handler, register_input_channel_handler)
	(unregister_alarm_timer, unregister_child_process_handler): Move
	functiont to warmelt-hooks.melt file.

2013-06-12  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+01.c: Regenerate.
	* melt/generated/warmelt-hooks+02.c: Regenerate.
	* melt/generated/warmelt-hooks+03.c: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+06.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.


2013-06-12  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-predef.list (HOOK_POLL_INPUTS): Remove.
	(HOOK_HANDLE_SIGIO): Add.

	* melt/warmelt-hooks.melt (hook_poll_inputs): Remove.

2013-06-12  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+06.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.c: Regenerate.
	* melt/generated/warmelt-macro+01.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+06.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-06-12  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-predef.list (HOOK_POLL_INPUTS): Poison it.

	* melt/warmelt-hooks.melt (hook_poll_inputs): Should be removed.
	We need a sigio handler.

2013-06-12  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-macro.melt (lambda_arg_bindings): Improve.

	* testsuite/melt/thook-5.melt: New test that works.


2013-06-11  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+01.c: Regenerate.
	* melt/generated/warmelt-hooks+02.c: Regenerate.
	* melt/generated/warmelt-hooks+03.c: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+06.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-06-11  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-predef.list (HOOK_HANDLE_SIGALRM, HOOK_HANDLE_SIGCHLD): New.

	* melt/warmelt-hooks.melt (hook_handle_sigalrm)
	(hook_handle_sigchld): Empty stubs.

2013-06-11  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+01.c: Regenerate.
	* melt/generated/warmelt-hooks+02.c: Regenerate.
	* melt/generated/warmelt-hooks+03.c: Regenerate.
	* melt/generated/warmelt-hooks.c: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+06.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-06-11  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Unstable}}
	* melt/warmelt-hooks.melt (hook_poll_inputs): Mostly commented....

	* melt/warmelt-modes.melt (generate_runtypesupport_forwcopy_fun):
	Emit better fatal error message on corruption.

2013-06-11  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-predef.list (HOOK_POLL_INPUTS): New.

	* melt/warmelt-hooks.melt (hook_poll_inputs): New.

2013-06-11  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+06.c: Regenerate.
	* melt/generated/warmelt-genobj+07.c: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.c: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+06.c: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-06-11  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-first.melt (class_initial_system_data): Remove all
	the sysdata_obsolete* fields.

2013-06-11  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.c: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+03.c: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-06-11  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-first.melt (class_initial_system_data): Reordered
	some fields to put the sysdata_obsolete* fields at end.

2013-06-11  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.c (melt_handle_melt_attribute): Simply call
	melthookproc_HOOK_MELT_ATTRIBUTE_DEFINER without using
	:sysdata_meltattr_definer field.

	* melt/warmelt-first.melt (class_initial_system_data): Remove
	sysdata_meltattr_definer field, replace by sysdata_obsolete8.

2013-06-11  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-hooks.melt (hook_melt_attribute_definer): Change
	signature.
	{{Regenerate}}
	* melt/generated/warmelt-hooks+03.c: New generated file.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+07.c: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+01.c: Regenerate.
	* melt/generated/warmelt-hooks+02.c: Regenerate.
	* melt/generated/warmelt-hooks.c: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+06.c: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-06-11  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-predef.list (HOOK_MELT_ATTRIBUTE_DEFINER): New.

	* melt-runtime.c (melt_garbcoll): Declare needfullreason as const
	char* string...

	* melt/warmelt-hooks.melt (hook_melt_attribute_definer): New.
	(attribute_definer_delayed_queue, at_melt_attribute_first)
	(at_melt_attribute_last): New.

2013-06-11  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+01.c: Regenerate.
	* melt/generated/warmelt-hooks+02.c: Regenerate.
	* melt/generated/warmelt-hooks.c: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+06.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-06-11  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.c (meltgc_run_meltpass_after_hook): Remove.

	* melt/warmelt-first.melt (class_initial_system_data): Field
	sysdata_meltpass_after_hook renamed as sysdata_obsolete7.
	(end_melt_pass_execution_delayed_queue, end_melt_pass_runner)
	(at_end_melt_pass_first, at_end_melt_pass_last): Remove.

	* melt/warmelt-hooks.melt (endmeltpass_delayed_queue)
	(run_endmeltpass_functions, at_end_of_this_melt_pass_first)
	(at_end_of_this_melt_pass_last): New.
	(hook_gimple_execute, hook_rtl_execute, hook_simple_ipa_execute):
	call run_endmeltpass_functions.

	* melt/xtramelt-ana-base.melt (install_melt_pass_in_gcc): Always
	install the execute function, because of the endmeltpass things.
	(melthk_gimple_gate, melthk_gimple_execute)
	(melthk_simple_ipa_gate, melthk_simple_ipa_execute)
	(melthk_rtl_gate, melthk_rtl_execute): declare with
	MELT_MODULE_VISIBILITY only.
	(free_dominance_info, free_post_dominance_info): Becomes internal
	functions, not primitives. Use at_end_of_this_melt_pass_last to
	call them.

2013-06-11  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.c (melt_do_finalize): Call melthookproc_HOOK_EXIT_FINALIZER.

	* melt/warmelt-first.melt (class_initial_system_data): field
	sysdata_exit_finalizer renamed as sysata_obsolete6.

2013-06-11  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+01.c: Regenerate.
	* melt/generated/warmelt-hooks+02.c: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+06.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.


2013-06-11  Basile Starynkevitch  <basile@starynkevitch.net>

	{{move exit finalization to warmelt-hooks.melt}}
	* melt-predef.list (HOOK_EXIT_FINALIZER): New.
	* melt/warmelt-first.melt (final_delayed_queue)
	(init_exitfinalizer): Remove.
	(initial_system_data): Don't fill sysdata_exit_finalizer

	* melt/warmelt-hooks.melt (final_exit_delayed_queue)
	(hook_exit_finalizer): New hook.
	(at_exit_first, at_exit_last): Moved here from
	'warmelt-first.melt' file.

2013-06-10  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-first.melt (class_initial_system_data): Rename
	field sysdata_patmacro_exporter as sysdata_obsolete5.
	(initpatmacro_exporter): Remove function.
	(initial_system_data): Remove initialization of
	sysdata_patmacro_exporter.

2013-06-10  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+06.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+01.c: Regenerate.
	* melt/generated/warmelt-macro+02.c: Regenerate.
	* melt/generated/warmelt-macro+03.c: Regenerate.
	* melt/generated/warmelt-macro+04.c: Regenerate.
	* melt/generated/warmelt-macro+05.c: Regenerate.
	* melt/generated/warmelt-macro+06.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+06.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+06.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-06-10  Basile Starynkevitch  <basile@starynkevitch.net>

	{{use the hook_patmacro_exporter}}
	* melt/warmelt-normal.melt: Re-indented some classes.
	(normal_patmacro_exporter): Remove.
	(normal_exported_patmacro): Remove nexp formal. Emit call to the
	hook_patmacro_exporter hook.
	(normexp_export_patmacro): Improve accordingly.

2013-06-10  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+06.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+06.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-06-10  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-first.melt (class_initial_system_data): Field
	sysdata_macro_exporter renamed as sysdata_obsolete3...
	(initmacro_exporter): Remove function.

2013-06-10  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+01.c: Regenerate.
	* melt/generated/warmelt-macro+02.c: Regenerate.
	* melt/generated/warmelt-macro+03.c: Regenerate.
	* melt/generated/warmelt-macro+04.c: Regenerate.
	* melt/generated/warmelt-macro+05.c: Regenerate.
	* melt/generated/warmelt-macro+06.c: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+06.c: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-06-10  Basile Starynkevitch  <basile@starynkevitch.net>

	{{don't use sysdata_macro_exporter...}}
	* melt/warmelt-normal.melt (normal_exported_macro): Remove
	argument nmacroxp. Call the hook_macro_exporter.
	(normal_macro_exporter): Remove function.
	(normexp_export_macro): Don't call normal_macro_exporter, and
	don't use sysdata_macro_exporter anymore..

2013-06-10  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-first.melt (class_initial_system_data): Rename
	sysdata_value_importer as sysdata_obsolete3.

2013-06-10  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+06.c: Regenerate.
	* melt/generated/warmelt-genobj+07.c: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.c: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-06-10  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-first.melt (class_system_data): Field
	sysdata_value_importer is now empty and becoming obsolete.
	(initvalue_importer): Remove function.

	* melt/warmelt-genobj.melt (compile2obj_initproc): Don't use
	sysdata_value_importer. Use only new import mechanism thru hook.

2013-06-10  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+02.c: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+02.c: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+06.c: Regenerate.
	* melt/generated/warmelt-genobj+07.c: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+01.c: Regenerate.
	* melt/generated/warmelt-hooks+02.c: Regenerate.
	* melt/generated/warmelt-hooks.c: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+01.c: Regenerate.
	* melt/generated/warmelt-macro+02.c: Regenerate.
	* melt/generated/warmelt-macro+03.c: Regenerate.
	* melt/generated/warmelt-macro+04.c: Regenerate.
	* melt/generated/warmelt-macro+05.c: Regenerate.
	* melt/generated/warmelt-macro+06.c: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+03.c: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+06.c: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+01.c: Regenerate.
	* melt/generated/warmelt-normatch+02.c: Regenerate.
	* melt/generated/warmelt-normatch+03.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch+06.c: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+01.c: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+03.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+06.c: Regenerate.
	* melt/generated/warmelt-outobj+07.c: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-06-10  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-genobj.melt (compile2obj_initproc): Compile each
	component of importexprs.
	(compile2obj_initextendproc): Check that we have no imports.

2013-06-10  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+06.c: Regenerate.
	* melt/generated/warmelt-genobj+07.c: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.c: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+06.c: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-06-10  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-normal.melt (normal_import): Gives a setq.

	* melt/warmelt-genobj.melt (compile2obj_initproc): Import only if
	imported value is not yet known.

2013-06-10  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-normal.melt (normal_import): Remove the temporary
	tests.

2013-06-10  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+06.c: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+06.c: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-06-10  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-normal.melt (normal_import): Also takes an env
	formal argument. So temporarily need to test ncx before using it
	in normal_predef or normexp_symbol.

	* melt/warmelt-outobj.melt (translate_macroexpanded_list): Pass
	the inienv to normal_import.

2013-06-10  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+06.c: Regenerate.
	* melt/generated/warmelt-genobj+07.c: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.c: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+06.c: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+01.c: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+03.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+06.c: Regenerate.
	* melt/generated/warmelt-outobj+07.c: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.


2013-06-10  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-normal.melt (class_nrep_initproc): Add
	ninit_importexprs field.
	(normal_import): Export that function.

	* melt/warmelt-outobj.melt (translate_macroexpanded_list): Fill
	ninit_importexprs using normal_import.

2013-06-09  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-first.melt (hook_symbol_importer): Improve comment.

	* melt/warmelt-normal.melt (normal_import): New function, incomplete.

	* melt/warmelt-genobj.melt (compile2obj_initproc): With both old
	and new ways of import. Transitional, new import not working yet.

2013-06-08  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+06.c: Regenerate.
	* melt/generated/warmelt-genobj+07.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+06.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-06-08  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-genobj.melt (compile2obj_initproc)
	(compile2obj_initextendproc): Don't get the importvalues thru
	arguments but get it inside the initial procedure.

2013-06-08  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-outobj.melt (translate_macroexpanded_list): Don't
	pass the importvalues to the iniproctransl.

2013-06-08  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+06.c: Regenerate.
	* melt/generated/warmelt-genobj+07.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+06.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+06.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.


2013-06-08  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.c (melt_assert_failed): Display again the debug
	counter.

	* melt/warmelt-normal.melt (class_nrep_initproc): Add ninit_imports field.

	* melt/warmelt-genobj.melt (compile2obj_initproc)
	(compile2obj_initextendproc): When importvalues is null get it
	thru ninit_imports.

	* melt/warmelt-outobj.melt (translate_macroexpanded_list): Put
	ninit_imports in initial procedure.

2013-06-07  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+06.c: Regenerate.
	* melt/generated/warmelt-genobj+07.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-06-07  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-predef.list (HOOK_VALUE_IMPORTER): Remove entirely.

	* melt/warmelt-genobj.melt (compile2obj_initproc): More debug.

2013-06-07  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+02.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+07.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

	* melt/warmelt-first.melt (hook_symbol_importer): Explicit nil in
	return.

2013-06-07  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-predef.list (HOOK_VALUE_IMPORTER): Poisoned.
	(HOOK_SYMBOL_IMPORTER): New.

	* melt/warmelt-first.melt (hook_value_importer): Remove.
	(hook_symbol_importer): New, with slightly different semantics and
	interface.

2013-06-07  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-base.melt (informsg_strv): Remove definition, since
	already defined in warmelt-first.melt file.

2013-06-07  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt-build-script.sh
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+06.c: Regenerate.
	* melt/generated/warmelt-genobj+07.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2013-06-07  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-first.melt (hook_value_importer): Add comment.

	* melt/warmelt-genobj.melt (compile2obj_initproc): Don't need
	ovalueexporter.

2013-06-07  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-first.melt (class_initial_system_data): Field
	sysdata_value_export is obsolete, so renamed as sysdata_obsolete2.
	(initvalue_exporter): Remove function.
	(initial_system_data): Remove sysdata_value_export field
	initialization.

2013-06-07  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+02.c: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+02.c: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+06.c: Regenerate.
	* melt/generated/warmelt-genobj+07.c: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+01.c: Regenerate.
	* melt/generated/warmelt-hooks+02.c: Regenerate.
	* melt/generated/warmelt-hooks.c: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+01.c: Regenerate.
	* melt/generated/warmelt-macro+02.c: Regenerate.
	* melt/generated/warmelt-macro+03.c: Regenerate.
	* melt/generated/warmelt-macro+04.c: Regenerate.
	* melt/generated/warmelt-macro+05.c: Regenerate.
	* melt/generated/warmelt-macro+06.c: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+03.c: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+06.c: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+01.c: Regenerate.
	* melt/generated/warmelt-normatch+02.c: Regenerate.
	* melt/generated/warmelt-normatch+03.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch+06.c: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+01.c: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+03.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+06.c: Regenerate.
	* melt/generated/warmelt-outobj+07.c: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-06-07  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-first.melt (initvalue_importer): Remove #warning in
	code chunk.
	* melt/warmelt-normal.melt (normal_value_exporter): Remove function.
	(normal_exported_value): Remove nvaluexp formal argument.
	(normexp_export_synonym, normexp_export_values)
	(normexp_export_class): Update accordingly.

2013-06-07  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-first.melt (class_initial_system_data): Rename
	field sysdata_obsolete_cont_fresh_env as sysdata_obsolete1.

	* melt/warmelt-normal.melt (normal_predef): Handle non-object
	predefined like hooks.
	(normal_value_exporter): Use the hook_value_exporter.

2013-06-07  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-06-07  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-build-script.tpl: echo blank lines before each stage...
	* melt-build-script.sh: Regenerate.

	* melt/warmelt-first.melt (class_initial_system_data): Rename
	field sysdata_cont_fresh_env as sysdata_obsolete_cont_fresh_env
	before removing it.
	(hook_value_importer): Improve.

2013-06-07  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+02.c: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+02.c: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+06.c: Regenerate.
	* melt/generated/warmelt-genobj+07.c: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+01.c: Regenerate.
	* melt/generated/warmelt-hooks+02.c: Regenerate.
	* melt/generated/warmelt-hooks.c: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+01.c: Regenerate.
	* melt/generated/warmelt-macro+02.c: Regenerate.
	* melt/generated/warmelt-macro+03.c: Regenerate.
	* melt/generated/warmelt-macro+04.c: Regenerate.
	* melt/generated/warmelt-macro+05.c: Regenerate.
	* melt/generated/warmelt-macro+06.c: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+03.c: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+06.c: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+01.c: Regenerate.
	* melt/generated/warmelt-normatch+02.c: Regenerate.
	* melt/generated/warmelt-normatch+03.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch+06.c: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+01.c: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+03.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+06.c: Regenerate.
	* melt/generated/warmelt-outobj+07.c: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

	* melt/warmelt-first.melt (hook_value_importer): Corrected to use
	symnamv in errbadimport chunk.

2013-06-07  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/xtramelt-ana-tree.melt (foreach_maptree): Add cast to int
	in chunk.

2013-06-07  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-first.melt
	(hook_fresh_environment_reference_maker): Move definition before
	invocation of update_current_module_environment_reference.
	(hook_fresh_environment_reference_maker)
	(hook_macro_exporter, hook_patmacro_exporter, hook_value_exporter)
	(hook_value_importer): Export these hooks.
	* melt/warmelt-normal.melt
	(normexp_update_current_module_environment_reference): Gives a
	call to the hook_fresh_environment_reference_maker hook, not the
	melt_make_fresh_environment_reference primitive.
	* melt/warmelt-outobj.melt (normalize_macroexpanded_list): Don't
	prepend a magical update_current_module_environment_reference for
	the very initial module.

2013-06-07  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+02.c: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+02.c: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+06.c: Regenerate.
	* melt/generated/warmelt-genobj+07.c: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+01.c: Regenerate.
	* melt/generated/warmelt-hooks+02.c: Regenerate.
	* melt/generated/warmelt-hooks.c: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+01.c: Regenerate.
	* melt/generated/warmelt-macro+02.c: Regenerate.
	* melt/generated/warmelt-macro+03.c: Regenerate.
	* melt/generated/warmelt-macro+04.c: Regenerate.
	* melt/generated/warmelt-macro+05.c: Regenerate.
	* melt/generated/warmelt-macro+06.c: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+03.c: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+06.c: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+01.c: Regenerate.
	* melt/generated/warmelt-normatch+02.c: Regenerate.
	* melt/generated/warmelt-normatch+03.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch+06.c: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+01.c: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+03.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+06.c: Regenerate.
	* melt/generated/warmelt-outobj+07.c: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.


2013-06-07  Basile Starynkevitch  <basile@starynkevitch.net>
	{{test thookcall.melt passes}}
	* melt/warmelt-outobj.melt (translate_macroexpanded_list): Do
	emit called hook declarations correctly.

2013-06-07  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-first.melt (class_any_module_context): Add
	mocx_hookdict field.

	* melt/warmelt-normal.melt (class_nrep_hook_call): Add nhook_descr
	field.
	(normexp_hook_call): Fill it.

	* melt/warmelt-genobj.melt (compilobj_nrep_hook_call): Use
	nhook_descr to grow mocx_hookdict.

	* melt/warmelt-outobj.melt (translate_macroexpanded_list): Should
	emit called hook declarations.

2013-06-07  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-debug.melt (dbgout_mapstring_method): Improve.

	* melt/warmelt-normal.melt (normexp_hook_call): Fix
	parenthesizing.

	* testsuite/melt/thookcall.melt: Improve.

2013-06-07  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-outobj.melt (eval): New function.

2013-06-07  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+06.c: Regenerate.
	* melt/generated/warmelt-genobj+07.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+06.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2013-06-07  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-genobj.melt (compilobj_nrep_hook_call): Emit better
	code.

	* testsuite/melt/thookcall.melt: Improve.

2013-06-06  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-genobj.melt (compilobj_nrep_hook_call): Use
	commampstr i.e. ", &" for output arguments. 

2013-06-06  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-normal.melt (normexp_hook_call): Check that output
	variables are local.

	* melt/warmelt-genobj.melt (compilobj_nrep_hook_call): Done.

2013-06-06  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-normal.melt (normexp_hook_call): Compute the hksymb
	and the nhook.

	* melt/warmelt-genobj.melt (compilobj_nrep_hook_call): Still
	unimplemented, but more.

2013-06-06  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-normal.melt (normexp_hook_call): Completed.

2013-06-06  Basile Starynkevitch  <basile@starynkevitch.net>

	* params.def (PARAM_MELT_FULL_PERIOD): Increased a lot.

	* melt-runtime.c (melt_garbcoll): melt_fullperiod increased.

2013-06-06  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.c: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+06.c: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.


2013-06-06  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-normal.melt (normexp_defhook): Add the name
	string data correctly.

	* testsuite/melt/thook-3.melt: Improve test. The hook data does
	contain the name.

2013-06-06  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+02.c: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+02.c: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+06.c: Regenerate.
	* melt/generated/warmelt-genobj+07.c: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+01.c: Regenerate.
	* melt/generated/warmelt-hooks+02.c: Regenerate.
	* melt/generated/warmelt-hooks.c: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+01.c: Regenerate.
	* melt/generated/warmelt-macro+02.c: Regenerate.
	* melt/generated/warmelt-macro+03.c: Regenerate.
	* melt/generated/warmelt-macro+04.c: Regenerate.
	* melt/generated/warmelt-macro+05.c: Regenerate.
	* melt/generated/warmelt-macro+06.c: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+03.c: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+06.c: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+01.c: Regenerate.
	* melt/generated/warmelt-normatch+02.c: Regenerate.
	* melt/generated/warmelt-normatch+03.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch+06.c: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+01.c: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+03.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+06.c: Regenerate.
	* melt/generated/warmelt-outobj+07.c: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-06-06  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-base.melt (some_hook_with_data): New cmatcher.

	* melt/warmelt-normal.melt (normexp_defhook): More.

	* melt/warmelt-genobj.melt (compile2obj_procedure): Add underscore
	inside generated name.

2013-06-06  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.h (melt_kilowords_forwarded): New variable
	declaration.

	* melt-runtime.c (melt_kilowords_sincefull)
	(melt_nb_fullgc_because_asked, melt_nb_fullgc_because_periodic)
	(melt_nb_fullgc_because_threshold, melt_nb_fullgc_because_copied):
	New variable definitions.
	(melt_garbcoll): Display the needfullreason on verbose messages.
	Increase the default melt_fullthresholdkilow & melt_fullperiod.
	(melt_do_finalize): Display GC stats when no quiet_flag.
	Call fflush.

	* params.def (PARAM_MELT_FULL_THRESHOLD, PARAM_MELT_FULL_PERIOD):
	Increase.

2013-06-06  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-base.melt (valdesc_routine): Typo in its
	:valdesc_forwchunk.

	{{Regenerate}}
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+02.c: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+02.c: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+06.c: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-06-06  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.c (melt_forwarded_copy_byte_count): New static
	variable, will be incremented by MELT generated forwarding code.

	* melt/warmelt-base.melt: Add increment of
	melt_forwarded_copy_byte_count in every :valdesc_forwchunk field
	of descriptors like valdesc_object, etc...

	* melt/warmelt-debug.melt (dbgout_mapstring_method): Don't output
	content of deep and big string maps.

	* melt/warmelt-normal.melt (normexp_hook_call): More debug.

2013-06-06  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-normal.melt (normexp_hook_call): Almost complete,
	but needs to get the normalized hook...
.
2013-06-05  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-normal.melt (normexp_hook_call): More, but still
	incomplete.
	(normexp_arithmetic_variadic_operation): Correct assert on recv
	reciever.
	* testsuite/melt/thookcall.melt: Have in & out arguments, using
	variadic arithmetic...

2013-06-05  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Unstable & regenerated}}

	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+02.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+02.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+06.c: Regenerate.
	* melt/generated/warmelt-genobj+07.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-hooks+01.c: Regenerate.
	* melt/generated/warmelt-hooks+02.c: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.c: Regenerate.
	* melt/generated/warmelt-macro+01.c: Regenerate.
	* melt/generated/warmelt-macro+02.c: Regenerate.
	* melt/generated/warmelt-macro+03.c: Regenerate.
	* melt/generated/warmelt-macro+04.c: Regenerate.
	* melt/generated/warmelt-macro+05.c: Regenerate.
	* melt/generated/warmelt-macro+06.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+03.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+06.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+01.c: Regenerate.
	* melt/generated/warmelt-normatch+02.c: Regenerate.
	* melt/generated/warmelt-normatch+03.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch+06.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+01.c: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+03.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+06.c: Regenerate.
	* melt/generated/warmelt-outobj+07.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2013-06-04  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-genobj.melt (compile2obj_procedure): Use
	symbol_cname for the generated name.
	(compilobj_nrep_hook_call): New method stub for compile_obj on
	class_nrep_hook_call.

2013-06-05  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Unstable & regenerated}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+02.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+02.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+06.c: Regenerate.
	* melt/generated/warmelt-genobj+07.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-hooks+01.c: Regenerate.
	* melt/generated/warmelt-hooks+02.c: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.c: Regenerate.
	* melt/generated/warmelt-macro+01.c: Regenerate.
	* melt/generated/warmelt-macro+02.c: Regenerate.
	* melt/generated/warmelt-macro+03.c: Regenerate.
	* melt/generated/warmelt-macro+04.c: Regenerate.
	* melt/generated/warmelt-macro+05.c: Regenerate.
	* melt/generated/warmelt-macro+06.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+03.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+06.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+01.c: Regenerate.
	* melt/generated/warmelt-normatch+02.c: Regenerate.
	* melt/generated/warmelt-normatch+03.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch+06.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+01.c: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+03.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+06.c: Regenerate.
	* melt/generated/warmelt-outobj+07.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2013-06-05  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Adding ability to call hooks in MELT expressions}}
	* melt-runtime.c (meltgc_add_out_cident): Common special
	characters are mangled with two lowercase letters.

	* melt/warmelt-base.melt (symbol_cname): New function.

	* melt/warmelt-macro.melt (class_source_hook_call): New class with
	shook_called field.
	(expand_hook): New function.
	(macroexpand_1): Add :doc string, and call expand_hook when needed.
	(mexpand_defhook): Check the length of the name to fit in
	MELT_HOOKNAME_LEN chars.

	* melt/warmelt-normal.melt (class_nrep_hook_call): New class with
	nhook_called & nhook_outs fields.
	(normexp_symbol): On failure, abort when bootstrapping with more debug outputs.
	(normexp_hook_call): Incomplete stub method for normal_exp on
	class_source_hook_call.

	* testsuite/melt/thookcall.melt: New test case.

2013-06-04  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Unstable & regenerated}}

	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-06-04  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-first.melt (initfresh_contenvmaker): Remove
	function.
	(initial_system_data): Remove setting of sysdata_cont_fresh_env
	field.

2013-06-04  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Unstable & regenerated}}

	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+06.c: Regenerate.
	* melt/generated/warmelt-genobj+07.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.


2013-06-04  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Unstable}}
	* melt/warmelt-first.melt (initvalue_importer): Becoming obsolete.

	* melt/warmelt-genobj.melt (compile2obj_initproc): Emit call to
	melthookproc_HOOK_FRESH_ENVIRONMENT_REFERENCE_MAKER
	i.e. hook_fresh_environment_reference_maker... No more usage of
	sysdata_cont_fresh_env.

2013-06-04  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Unstable & regenerated}}
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+07.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-hooks+01.c: Regenerate.
	* melt/generated/warmelt-hooks+02.c: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+06.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.


2013-06-04  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Unstable}}
	* melt/warmelt-first.melt (hook_fresh_environment_reference_maker)
	(hook_value_importer, hook_value_exporter)
	(hook_patmacro_exporter): Hook moved from warmelt-hooks.melt

	* melt/warmelt-normal.melt
	(normexp_update_current_module_environment_reference):invoke thru
	melt_make_fresh_environment_reference primitive the
	hook_fresh_environment_reference_maker.

	* melt/warmelt-hooks.melt (hook_fresh_environment_reference_maker)
	(hook_value_importer, hook_value_exporter)
	(hook_patmacro_exporter): Hook moved to warmelt-first.melt.

2013-06-04  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+02.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+07.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-hooks+01.c: Regenerate.
	* melt/generated/warmelt-hooks+02.c: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2013-06-04  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-base.melt (melt_make_fresh_environment_reference):
	New primitive for guru bootstrapping.

	* melt/warmelt-hooks.melt
	(hook_fresh_environment_reference_maker): Improve comment and
	documentation.

2013-06-04  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+06.c: Regenerate.
	* melt/generated/warmelt-genobj+07.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-hooks+01.c: Regenerate.
	* melt/generated/warmelt-hooks+02.c: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-06-04  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-hooks.melt (hook_value_exporter)
	(hook_macro_exporter, hook_patmacro_exporter): New hooks.

2013-06-04  Basile Starynkevitch  <basile@starynkevitch.net>
	{{test thook-4.melt passes}}
	* melt/warmelt-genobj.melt: Only assign the return when available.

	* melt-build-script.tpl: Also emit module-makefile in
	meltbuild-common.args.

	* melt-build-script.sh: Regenerate.

2013-06-04  Basile Starynkevitch  <basile@starynkevitch.net>

	* testsuite/melt/thook-4.melt: New test, failing in svn.rev. 199649

2013-06-04  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-hooks.melt (hook_value_importer): New hook.

2013-06-04  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-hooks.melt
	(hook_fresh_environment_reference_maker): New hook.

2013-06-04  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+06.c: Regenerate.
	* melt/generated/warmelt-genobj+07.c: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.c: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+06.c: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+03.c: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+06.c: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-06-04  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.c (melt_minor_copying_garbage_collector): Clear
	melt_touchedglobalchunk.

	* melt-predef.list (HOOK_FRESH_ENVIRONMENT_REFERENCE_MAKER)
	(HOOK_VALUE_IMPORTER, HOOK_VALUE_EXPORTER, HOOK_MACRO_EXPORTER)
	(HOOK_PATMACRO_EXPORTER). New, not used yet.

	* melt/warmelt-first.melt (class_initial_system_data)
	(initial_system_data): Remove fields sysdata_pre_genericize,
	sysdata_passexec_hook, sysdata_finishtype_hook,
	sysdata_finishdecl_hook, sysdata_all_passes_start_hook,
	sysdata_all_passes_end_hook.
	(initfresh_contenvmaker, initvalue_exporter, initvalue_importer)
	(initmacro_exporter, initpatmacro_exporter): Soon becoming
	obsolete.

	* melt/warmelt-macro.melt (return)
	(current_module_environment_reference, parent_module_environment):
	Mention limitations for hooks in their :doc string.

	* melt/warmelt-normal.melt
	(normexp_current_module_environment_reference)
	(normexp_parent_module_environment): Give error if used inside
	hooks.

	* melt/warmelt-genobj.melt
	(compilobj_quasidata_current_module_environment_reference)
	(compilobj_quasidata_parent_module_environment): More debug, add
	comment.

	* melt/warmelt-mode.melt (makedoc_genhook): Improve output.


2013-06-04  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-modes.melt (makedoc_genoutput): Date of generation
	is in more readable format.
	(makedoc_docmd): Initialize mkdoc_hooks field.

2013-06-04  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-modes.melt (makedoc_genhook): New function.
	(makedoc_genoutput): Emit generation date and version string. Call
	makedoc_genhook to document hooks.

2013-06-04  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.h (MELT_VERSION_STRING): Bump to 0.9.9-rc2p

	* melt-build-script.tpl (GCCMELT_LASTSTAGE): Better.
	Also, generate the meltbuild-common.args file.

	* melt-build-script.sh: Regenerate.

2013-06-03  Basile Starynkevitch  <basile@starynkevitch.net>
	{{MELT Plugin 0.9.9 rc2}}
	* melt-runtime.h (MELT_VERSION_STRING): Bump to 0.9.9-rc2

2013-06-03  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+02.c: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.


2013-06-03  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-hooks.melt (enable_finish_decl): PLUGIN_FINISH_DECL
	does not exist in GCC 4.6

2013-06-03  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.


2013-06-03  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-outobj.melt (outpucod_initialmoduleroutine):
	Another missing struct in emitted code.

2013-06-03  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2013-06-03  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-outobj.melt (outpucod_initialmoduleroutine):
	Missing struct in emitted code.

2013-06-03  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+06.c: Regenerate.
	* melt/generated/warmelt-genobj+07.c: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.c: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+01.c: Regenerate.
	* melt/generated/warmelt-macro+02.c: Regenerate.
	* melt/generated/warmelt-macro+03.c: Regenerate.
	* melt/generated/warmelt-macro+04.c: Regenerate.
	* melt/generated/warmelt-macro+05.c: Regenerate.
	* melt/generated/warmelt-macro+06.c: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+06.c: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+06.c: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-06-03  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-macro.melt (mexpand_plus, mexpand_minus)
	(mexpand_times, mexpand_div): New macro expanders for +,-, *, /
	variadic operators.

	* melt/warmelt-normal.melt
	(normexp_arithmetic_variadic_operation): New method for normal_exp
	on class_source_arithmetic_variadic_operation.

2013-06-03  Basile Starynkevitch  <basile@starynkevitch.net>
	{{rename current_environment_container as
	current_environment_reference everywhere...}}

	* melt/warmelt-first.melt: Call update_current_module_environment_reference.
	(post_initialization): Call current_module_environment_reference.

	* melt/warmelt-macro.melt
	(class_source_current_module_environment_container): Rename as ...
	(class_source_current_module_environment_reference): New name.
	(class_source_update_current_module_environment_container): Rename as ...
	(class_source_update_current_module_environment_reference): New name.
	Also export_synonym the old names.

	* melt/warmelt-normal.melt
	(class_nrep_quasiconst_current_module_environment_container): Rename as ...
	(class_nrep_quasiconst_current_module_environment_reference): New
	name.
	(class_nrep_quasidata_current_module_environment_container): Rename as ...
	(class_nrep_quasidata_current_module_environment_reference): New name.
	(class_nrep_update_current_module_environment_container): Rename as ...
	(class_nrep_update_current_module_environment_reference): New name.
	(create_normcontext, create_normal_extending_context)
	(normal_exported_value): Update accordingly.

	* melt/warmelt-genobj.melt
	(compilobj_nrep_quasiconst_current_module_environment_container):
	Rename as...
	(compilobj_nrep_quasiconst_current_module_environment_reference):
	New name.
	(compilobj_quasidata_current_module_environment_container): Rename as...
	(compilobj_quasidata_current_module_environment_reference): New name.
	(compilobj_nrep_update_current_module_environment_container): Rename as...
	(compilobj_nrep_update_current_module_environment_reference): New
	name.

	* melt/warmelt-outobj.melt (normalize_macroexpanded_list): Update
	accordingly.

	* melt/warmelt-modes.melt (makedoc_docmd): Ditto.


2013-06-03  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+07.c: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.c: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+01.c: Regenerate.
	* melt/generated/warmelt-macro+02.c: Regenerate.
	* melt/generated/warmelt-macro+03.c: Regenerate.
	* melt/generated/warmelt-macro+04.c: Regenerate.
	* melt/generated/warmelt-macro+05.c: Regenerate.
	* melt/generated/warmelt-macro+06.c: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.


2013-06-03  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-macro.melt
	(class_source_arithmetic_variadic_operation): New, with fields
	sarithvar_neutral & sarithvar_primitive.

	(current_module_environment_container)
	(mexpand_current_module_environment_container)
	(update_current_module_environment_container): Rename as
	(current_module_environment_reference)
	(mexpand_current_module_environment_reference)
	(update_current_module_environment_reference): Renamed.
	(mexpand_update_current_module_environment_reference): Error when
	not bootstrapping.

2013-06-03  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.h (MELT_VERSION_STRING): Bump to 0.9.9-rc1p

	* melt/warmelt-outobj.melt (outpucod_initialmoduleroutine): Add
	explicit struct in emitted code, with startiniframdecl comment.

2013-06-01  Basile Starynkevitch  <basile@starynkevitch.net>
	{{MELT plugin 0.9.9 rc1 release candidate}}
	* melt-runtime.h (MELT_VERSION_STRING): Bump to 0.9.9-rc1

	* melt/warmelt-macro.melt (defhook, expr_chunk): Improve very
	significantly the documentation of these macros.

2013-06-01  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerated.
	* melt/generated/meltrunsup.h: Regenerated.
	* melt/generated/warmelt-base+meltdesc.c: Regenerated.
	* melt/generated/warmelt-base+melttime.h: Regenerated.
	* melt/generated/warmelt-base.c: Regenerated.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerated.
	* melt/generated/warmelt-debug+melttime.h: Regenerated.
	* melt/generated/warmelt-first+meltdesc.c: Regenerated.
	* melt/generated/warmelt-first+melttime.h: Regenerated.
	* melt/generated/warmelt-genobj+06.c: Regenerated.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerated.
	* melt/generated/warmelt-genobj+melttime.h: Regenerated.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerated.
	* melt/generated/warmelt-hooks+melttime.h: Regenerated.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerated.
	* melt/generated/warmelt-macro+melttime.h: Regenerated.
	* melt/generated/warmelt-modes+01.c: Regenerated.
	* melt/generated/warmelt-modes+02.c: Regenerated.
	* melt/generated/warmelt-modes+03.c: Regenerated.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerated.
	* melt/generated/warmelt-modes+melttime.h: Regenerated.
	* melt/generated/warmelt-modes.c: Regenerated.
	* melt/generated/warmelt-normal+03.c: Regenerated.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerated.
	* melt/generated/warmelt-normal+melttime.h: Regenerated.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerated.
	* melt/generated/warmelt-normatch+melttime.h: Regenerated.
	* melt/generated/warmelt-outobj+01.c: Regenerated.
	* melt/generated/warmelt-outobj+02.c: Regenerated.
	* melt/generated/warmelt-outobj+03.c: Regenerated.
	* melt/generated/warmelt-outobj+04.c: Regenerated.
	* melt/generated/warmelt-outobj+05.c: Regenerated.
	* melt/generated/warmelt-outobj+06.c: Regenerated.
	* melt/generated/warmelt-outobj+07.c: Regenerated.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerated.
	* melt/generated/warmelt-outobj+melttime.h: Regenerated.
	* melt/generated/warmelt-outobj.c: Regenerated.

2013-06-01  Basile Starynkevitch  <basile@starynkevitch.net>
	{{tdefvar-2.melt with a hook with module variable works!}}
	* melt/warmelt-genobj.melt (compilobj_datahook): Put the hook
	itself in the module variable when relevant.

	* melt/warmelt-outobj.melt (output_hooks_with_modvar): Correct to
	make it work.

2013-05-31  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-mode.melt
	(generate_runtypesupport_predefined_hooks): Should work even
	without input arguments...

	* melt/warmelt-outobj.melt (output_hooks_with_modvar): Done.

2013-05-31  Basile Starynkevitch  <basile@starynkevitch.net>
	{{tdefvar-2.melt reaches output_hooks_with_modvar}}
	* melt/warmelt-normal.melt (normexp_defhook): Correct call to
	find_env.

	* melt/warmelt-outobj.melt (translate_macroexpanded_list): Find
	the hook routines with module variable.

	* testsuite/melt/tdefvar-2.melt: Slightly improved.

2013-05-31  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+06.c: Regenerate.
	* melt/generated/warmelt-genobj+07.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+06.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+01.c: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+03.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+06.c: Regenerate.
	* melt/generated/warmelt-outobj+07.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2013-05-31  Basile Starynkevitch  <basile@starynkevitch.net>
	{{tdefvar-1.melt test passes, but tdefvar-2.melt fails!}}
	* melt/warmelt-outobj.melt: Correct emission of definition of
	module variables related array.

2013-05-31  Basile Starynkevitch  <basile@starynkevitch.net>
	{{tdefvar-1.melt test still fails!}}
	* melt/warmelt-normal.melt (normalize_tuple): Add dirty hack to
	put module variables inside local bindings, because meltgc_apply
	is passing by reference, so we cannot emit melt_module_var_fetch
	in function application arguments.
	(normexp_symbol): Use nmodvar, not nstvar whose name is
	misleading.

	* melt/warmelt-genobj.melt (compilobj_nrep_modulevarocc):
	Explicitly set the obv_type of the result.

	* melt/warmelt-outobj.melt (translate_macroexpanded_list): Less
	typos in emitted code relative to module variables.

2013-05-31  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+02.c: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+02.c: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+06.c: Regenerate.
	* melt/generated/warmelt-genobj+07.c: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+01.c: Regenerate.
	* melt/generated/warmelt-hooks+02.c: Regenerate.
	* melt/generated/warmelt-hooks.c: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+01.c: Regenerate.
	* melt/generated/warmelt-macro+02.c: Regenerate.
	* melt/generated/warmelt-macro+03.c: Regenerate.
	* melt/generated/warmelt-macro+04.c: Regenerate.
	* melt/generated/warmelt-macro+05.c: Regenerate.
	* melt/generated/warmelt-macro+06.c: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+03.c: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+06.c: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+01.c: Regenerate.
	* melt/generated/warmelt-normatch+02.c: Regenerate.
	* melt/generated/warmelt-normatch+03.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch+06.c: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+01.c: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+03.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+06.c: Regenerate.
	* melt/generated/warmelt-outobj+07.c: New generated file.
	* melt/generated/warmelt-outobj.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-05-31  Basile Starynkevitch  <basile@starynkevitch.net>
	{{defhook can have :var annotation, but that don't work yet.}}
	* testsuite/melt/tdefvar-2.melt: New test with a hook and :var
	annotation inside. Don't work yet.

	* melt/warmelt-macro.melt (class_source_defhook): Add shook_variable field.
	(mexpand_defhook): Fill it.

	* melt/warmelt-normal.melt (class_nrep_datahook): Add ndhook_modvarbind field.
	(normexp_defhook): Fill it.

	* melt/warmelt-genobj.melt (class_objinithook): Add
	oihk_modvarbind field.
	(compilobj_datahook): Fill it.

	* melt/warmelt-outobj.melt (output_hooks_with_modvar): New utility
	stub function. Incomplete.
	(translate_macroexpanded_list): Collect the objinithook-s with a
	module variable, and call output_hooks_with_modvar.

2013-05-31  Basile Starynkevitch  <basile@starynkevitch.net>
	{{convention naming change: use melt_forwarding_module_data and
	melt_marking_module_data; speak of module variables, not static
	variables...}}
	* melt-runtime.c (struct melt_module_info_st)
	(struct melt_extension_info_st): Update comment.
	(melt_load_module_index, meltgc_run_c_extension): Update for the
	changing convention.

	* melt/warmelt-first.melt (class_any_module_context): Improve
	comment.

	* melt/warmelt-macro.melt (class_source_defvar, mexpand_defvar)
	(defvar): Improve comment and documentation.

	* melt/warmelt-normal.melt (class_normal_variable_binding):
	Remove, since renamed as...
	(class_normal_module_variable_binding): Changed name.
	(class_nrep_staticvarocc): Remove, since renamed as...
	(class_nrep_modulevarocc): Changed name.
	(class_nrep_putstaticvar): Remove, since renamed as...
	(class_nrep_putmodulevar): Changed name.
	(normexp_symbol, normexp_setq, normexp_defvar): Update
	accordingly.
	(gectyp_statvarocc): Rename as...
	(gectyp_modvarocc): New name.

	* melt/warmelt-genobj.melt (class_objfetchmodvar): New class with
	field obfetchmodvar_bind.
	(class_objputmodvar): New class with fields obputmodvar_bind &
	obputmodvar_val.
	(compilobj_nrep_staticvarocc, compilobj_nrep_putstaticvar): Rename
	as...
	(compilobj_nrep_modulevarocc, compilobj_nrep_putmodulevar): New,
	use the classes above.

	* melt/warmelt-outobj.melt (out_enumix_modvarbind): New utility function.
	(outpucod_objfetchmodvar): New method for output_c_code of
	class_objfetchmodvar.
	(outpucod_objputmodvar): New method for output_c_code of
	class_objputmodvar.
	(output_melt_descriptor): Emit melt_module_nb_module_vars.
	(translate_macroexpanded_list): Emit declaration and
	implementation for module variables. Emit enumeration of module
	variable indexes.

	* melt/warmelt-hooks.melt: Improve comment.

2013-05-31  Basile Starynkevitch  <basile@starynkevitch.net>

	{{add convention about melt_marking_here and melt_forwarding_here
	in generated code}}
	* melt-runtime.c (melt_forwarding_rout_t, melt_marking_rout_t):
	New signatures.
	(struct melt_module_info_st): Add mmi_forwardrout &
	mmi_markingrout fields.
	(struct melt_extension_info_st): Add mmx_forwardrout &
	mmx_markingrout fields.
	(melt_marking_callback): Call the mmi_markingrout &
	mmx_markingrout for modules and extensions.
	(melt_minor_copying_garbage_collector): Call the forwarding of
	every module and extension.
	(melt_load_module_index, meltgc_run_c_extension): Get the
	melt_forwarding_here & melt_marking_here dynamic routines.

	* melt/warmelt-first.melt (class_module_context): Renamed as...
	(class_any_module_context).
	(class_module_context): New class, subclass of class_any_module_context.
	(class_extension_generation_context): Make it a subclass of
	class_any_module_context.

	* melt/warmelt-macro.melt: Check for class_any_module_context, not
	class_module_context.

	* melt/warmelt-normal.melt: Likewise.

	* melt/warmelt-genobj.melt: Likewise.

	* melt/warmelt-outobj.melt (translate_macroexpanded_list): Emit
	the melt_marking_here and melt_forwarding_here routines. Declare
	the module-visible arrays and flags for MELT static
	variables. Emit melt_static_var_fetch & melt_static_var_put routine.
	Emission of the enum is missing.

2013-05-30  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-normal.melt (class_nrep_putstaticvar): New class
	with fields nputstatic_destvar & nputstatic_value.
	(normexp_symbol, normexp_setq): Handle static occurrences of
	variables.
	(gectyp_statvarocc): New method for get_ctype on
	class_nrep_staticvarocc.

	* melt/warmelt-genobj.melt (compilobj_nrep_staticvarocc): New
	method stub for compile_obj on class_nrep_staticvarocc.
	(compilobj_nrep_putstaticvar): New method stub for compile_obj on
	compilobj_nrep_putstaticvar.

2013-05-30  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-first.melt (find_bind): Return immediately binding when found.
	(find_enclosing_env): Return secondarily the enclosing procedures
	and the containing environment.

	* melt/warmelt-macro.melt (mexpand_defvar): Gives a
	class_source_defvar instance.

	* melt/warmelt-normal.melt (normexp_symbol): Adapt call to
	find_enclosing_env.
	(normexp_defvar): Extend the environment.

2013-05-30  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-first.melt (class_module_context): Add fields
	mocx_varcount & mocx_varlist.

	* melt/warmelt-normal.melt (normexp_defvar): New method for
	normal_exp on class_source_defvar.
	(normexp_symbol): Unimplemented case for static variables.

	* melt/warmelt-outobj.melt (compile_list_sexpr)
	(translate_run_melt_expressions): Initialize mocx_varcount &
	mocx_varlist fields.

	* gcc/testsuite/melt/tdefvar-1.melt: New file.

2013-05-30  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (meltgc_notify_sysdata_passexec_hook)
	(meltgc_notify_finish_type_hook, meltgc_notify_finish_decl_hook):
	Remove.

	* melt-runtime.c (meltgc_notify_finish_type_hook)
	(meltgc_notify_finish_decl_hook): Remove.

	* melt/warmelt-hooks.melt (melt_finish_decl_hook_callback)
	(melt_pass_execution_hook_callback): Really call appropriate
	hooks.

2013-05-30  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+02.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+02.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+06.c: Regenerate.
	* melt/generated/warmelt-genobj+07.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-hooks+01.c: Regenerate.
	* melt/generated/warmelt-hooks+02.c: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.c: Regenerate.
	* melt/generated/warmelt-macro+01.c: Regenerate.
	* melt/generated/warmelt-macro+02.c: Regenerate.
	* melt/generated/warmelt-macro+03.c: Regenerate.
	* melt/generated/warmelt-macro+04.c: Regenerate.
	* melt/generated/warmelt-macro+05.c: Regenerate.
	* melt/generated/warmelt-macro+06.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+03.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+06.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+01.c: Regenerate.
	* melt/generated/warmelt-normatch+02.c: Regenerate.
	* melt/generated/warmelt-normatch+03.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch+06.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+01.c: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+03.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+06.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2013-05-30  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Start implementing defvar}}

	* melt-runtime.c (meltgc_finishtype_callback)
	(meltgc_finishdecl_callback): Remove.
	(meltgc_notify_finish_type_hook): Obsolete.
	(meltgc_notify_finish_decl_hook): Obsolete.

	* melt/warmelt-first.melt (class_variable_binding): New class,
	without any own fields.

	* melt/warmelt-base.melt (register_finish_decl_hook_first)
	(register_finish_decl_hook_last, register_finish_type_hook_first)
	(register_finish_type_hook_last): Remove.

	* melt/warmelt-macro.melt (class_source_defvar): New class,
	without any own fields.
	(mexpand_defvar): New macro expander, for...
	(defvar): New macro.

	* melt/warmelt-normal.melt (normexp_defvar): Empty stub method for
	normal_exp on class_source_defvar.

	* melt/warmelt-outobj.melt (outpucod_initialmoduleroutine): Emit
	incomplete declaration of struct melt_initial_frame_st.

	* melt/warmelt-hooks.melt: Support for FINISH_DECL plugin event,
	only for GCC 4.7 and later.
	(finishdecl queue, melthk_finish_decl_registered_flag)
	(melt_finish_decl_hook_callback, enable_finish_decl)
	(hook_finish_decl, register_finish_decl_first)
	(register_finish_decl_last).


2013-05-30  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+07.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-hooks+01.c: Regenerate.
	* melt/generated/warmelt-hooks+02.c: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2013-05-30  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-predef.list (HOOK_FINISH_TYPE): New.

	* melt/warmelt-hooks.melt: Support FINISH_TYPE plugin event.
	(finishtype_delayed_queue, melthk_finish_type_registered_flag)
	(melt_finish_type_hook_callback, enable_finish_type)
	(hook_finish_type, register_finish_type_first)
	(register_finish_type_last): New.

2013-05-30  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (meltgc_register_pass): Remove declaration. See
	install_melt_pass_in_gcc in melt/xtramelt-ana-base.melt.

	* melt-runtime.c (meltgc_gimple_gate, meltgc_gimple_execute)
	(meltgc_rtl_gate, meltgc_rtl_execute, meltgc_simple_ipa_gate)
	(meltgc_simple_ipa_execute, meltgc_register_pass): Remove
	functions.

	* melt/xtramelt-ana-simple.melt: Pass a quoted string as the
	reference pass name for install_melt_pass_in_gcc.
	* melt/xtramelt-c-generator.melt: Ditto.
	* melt/xtramelt-opengpu.melt: Ditto.
	* melt/xtramelt-probe.melt: Ditto.

2013-05-30  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (MELT_VERSION_STRING): Change to 0.9.9-rc.
	(melt_val2passflag): New declaration.

	* melt-runtime.c (melt_val2passflag): No more static.

	* melt/xtramelt-ana-base.melt (install_melt_gcc_pass): Becoming obsolete.
	(melthk_gimple_gate, melthk_gimple_execute)
	(melthk_simple_ipa_gate, melthk_simple_ipa_execute)
	(melthk_rtl_gate, melthk_rtl_execute): New C wrapping hook
	functions in cheader-s.
	(install_melt_pass): Rename as...
	(install_melt_pass_in_gcc): New function. Should work.

	* melt/xtramelt-ana-simple.melt: Call install_melt_pass_in_gcc
	instead of install_melt_gcc_pass.

	* melt/xtramelt-c-generator.melt: Ditto.

	* melt/xtramelt-opengpu.melt: Ditto.

	* melt/xtramelt-probe.melt: Ditto.

2013-05-29  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.c (meltgc_rtl_gate, meltgc_rtl_execute)
	(meltgc_simple_ipa_gate, meltgc_simple_ipa_execute): Becoming
	obsolete, since just calling their corresponding hooks.

2013-05-29  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+01.c: Regenerate.
	* melt/generated/warmelt-hooks+02.c: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.


2013-05-29  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.c (meltgc_gimple_execute, meltgc_simple_ipa_gate):
	Becoming obsolete.

	* melt/warmelt-hooks.melt (hook_gimple_gate, hook_gimple_execute)
	(hook_rtl_gate, hook_rtl_execute, hook_simple_ipa_gate)
	(hook_simple_ipa_execute): Implemented.

2013-05-29  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (meltgc_set_dump_file, meltgc_restore_dump_file):
	Declare functions, because they are used in
	melt/warmelt-hooks.melt.

	* melt-runtime.c (meltgc_set_dump_file, meltgc_restore_dump_file):
	Now public functions.
	(meltgc_gimple_gate): Just call melthookproc_HOOK_GIMPLE_GATE.
	(meltgc_gimple_execute): Just call
	melthookproc_HOOK_GIMPLE_EXECUTE.

	* melt/warmelt-hooks.melt (hook_gimple_gate, hook_gimple_execute):
	Implemented.

2013-05-29  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+01.c: Regenerate.
	* melt/generated/warmelt-hooks+02.c: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+06.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-05-29  Basile Starynkevitch  <basile@starynkevitch.net>

	{{more hooks for pass gate & execution}}
	* melt-predef.list (HOOK_GIMPLE_EXECUTE, HOOK_GIMPLE_GATE)
	(HOOK_SIMPLE_IPA_EXECUTE, HOOK_SIMPLE_IPA_GATE, HOOK_RTL_EXECUTE)
	(HOOK_RTL_GATE): New.

	* melt-runtime.c (meltgc_gimple_gate, meltgc_gimple_execute)
	(meltgc_rtl_gate, meltgc_rtl_execute, meltgc_simple_ipa_gate)
	(meltgc_simple_ipa_execute): Add comment mentionning the hooks.

	* melt/warmelt-hooks.melt (hook_gimple_gate, hook_gimple_execute)
	(hook_rtl_gate, hook_rtl_execute, hook_simple_ipa_gate)
	(hook_simple_ipa_execute): Add stub.

2013-05-28  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+07.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-hooks+01.c: Regenerate.
	* melt/generated/warmelt-hooks+02.c: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.c: Regenerate.
	* melt/generated/warmelt-macro+01.c: Regenerate.
	* melt/generated/warmelt-macro+02.c: Regenerate.
	* melt/generated/warmelt-macro+03.c: Regenerate.
	* melt/generated/warmelt-macro+04.c: Regenerate.
	* melt/generated/warmelt-macro+05.c: Regenerate.
	* melt/generated/warmelt-macro+06.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2013-05-28  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-predef.list (HOOK_REGISTER_PASS): New.

	* melt/warmelt-macro.melt: Add explicit argument to
	lambda_arg_bindings calls.
	(mexpand_defhook): More checks on input
	and output formals.

	* melt/warmelt-hooks.melt:
	(melt_early_gimple_passes_start_hook_callback): Call
	melthookproc_HOOK_EARLY_GIMPLE_PASSES_START.
	(melt_early_gimple_passes_end_hook_callback): Call
	melthookproc_HOOK_EARLY_GIMPLE_PASSES_END.
	(melt_pre_genericize_hook_callback): Call
	melthookproc_HOOK_PRE_GENERICIZE.
	Handle PASS_EXECUTION plugin event.
	(pass_execution_delayed_queue)
	(melthk_pass_execution_registered_flag)
	(melt_pass_execution_hook_callback, hook_pass_execution)
	(register_pass_execution_first, register_pass_execution_last)
	(hook_register_pass): New.

	* melt/xtramelt-ana-base.melt (install_melt_pass): New but
	incomplete...

2013-05-28  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+02.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+07.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-hooks+01.c: Regenerate.
	* melt/generated/warmelt-hooks+02.c: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: New generated file.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.


2013-05-28  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-hooks.melt
	(melt_early_gimple_passes_start_hook_callback)
	(melt_early_gimple_passes_end_hook_callback)
	(melt_pre_genericize_hook_callback)
	(melt_early_gimple_passes_start_hook_callback)
	(melt_early_gimple_passes_end_hook_callback)
	(melt_pre_genericize_hook_callback): Temporarily add an abort.

2013-05-28  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Unstable}}
	* melt/warmelt-hooks.melt: Re-implement PLUGIN_PRE_GENERICIZE
	plugin event.
	(pregenericize_delayed_queue)
	(melthk_pre_genericize_registered_flag)
	(melt_pre_genericize_hook_callback, enable_pre_genericize)
	(hook_pre_genericize, register_pre_genericize_first)
	(register_pre_genericize_last, register_pre_genericize_last): New.

2013-05-28  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-hooks.melt: Re-implement EARLY_GIMPLE_PASSES_START
	& EARLY_GIMPLE_PASSES_END plugin events.
	(early_gimple_passes_start_delayed_queue)
	(melthk_early_gimple_passes_start_registered_flag)
	(hook_early_gimple_passes_start)
	(melt_early_gimple_passes_start_hook_callback)
	(enable_early_gimple_passes_start)
	(register_early_gimple_passes_start_first)
	(register_early_gimple_passes_start_last)
	(early_gimple_passes_end_delayed_queue)
	(melthk_early_gimple_passes_end_registered_flag)
	(hook_early_gimple_passes_end)
	(melt_early_gimple_passes_end_hook_callback)
	(enable_early_gimple_passes_end)
	(register_early_gimple_passes_end_first)
	(register_early_gimple_passes_end_last): Add functions.

2013-05-28  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Unstable, because some hooks not yet re-implemented}}
	* melt-predef.list (HOOK_EARLY_GIMPLE_PASSES_START)
	(HOOK_EARLY_GIMPLE_PASSES_END, HOOK_PASS_EXECUTION)
	(HOOK_PRE_GENERICIZE): Adding new hooks.

	* melt-runtime.c (melt_pre_genericize_callback)
	(meltgc_passexec_callback)
	(meltgc_early_gimple_passes_start_callback)
	(meltgc_early_gimple_passes_end_callback): Remove.
	(melt_really_initialize): Don't register them.

	* melt/warmelt-first.melt (sysdata_pre_genericize)
	(sysdata_passexec_hook): Obsolete.

	* melt/warmelt-base.melt (pass_execution_reference)
	(run_all_pass_execution_hooks, register_pass_execution_hook)
	(unregister_pass_execution_hook, pregenericize_delayed_queue)
	(register_pre_genericize_hook_first)
	(register_pre_genericize_hook_last, pre_genericize_hook_runner)
	(early_gimple_passes_start_delayed_queue)
	(melt_early_gimple_passes_start_runner)
	(register_early_gimple_passes_start_hook_first)
	(register_early_gimple_passes_start_hook_last)
	(early_gimple_passes_end_delayed_queue)
	(register_early_gimple_passes_end_hook_first)
	(register_early_gimple_passes_end_hook_last): Remove, they are
	going into warmelt-hooks.melt.



2013-05-24  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-hooks.melt: Really call the all_ipa_passes* hooks.

2013-05-24  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+02.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+07.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-hooks+01.c: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+03.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2013-05-24  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-predef.list (HOOK_ALL_IPA_PASSES_START, HOOK_ALL_IPA_PASSES_END): New.

	* melt-runtime.c (meltgc_all_ipa_passes_start_callback)
	(meltgc_all_ipa_passes_end_callback): Remove functions.
	(melt_really_initialize): Don't register_callback them.

	* melt/warmelt-first.melt (class_initial_system_data): remove
	sysdata_all_ipa_passes_start_hook &
	sysdata_all_ipa_passes_end_hook.

	* melt/warmelt-base.melt: Move *all_ipa_passes* functions.

	* melt/warmelt-hooks.melt: To here. Add relevant hooks.


2013-05-23  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.c (meltgc_all_passes_start_callback)
	(meltgc_all_passes_end_callback): Remove, since done in
	warmelt-hooks.melt.
	(melt_really_initialize): Don't register them...

	* melt/warmelt-hooks.melt (melt_startunithook_callback)
	(melt_finishunithook_callback): New in cheader & cimplement.
	(enable_start_unit, enable_finish_unit): register them for
	PLUGIN_START_UNIT & PLUGIN_FINISH_UNIT.

2013-05-23  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+02.c: Regenerate.
	* melt/generated/warmelt-base+03.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+01.c: Generate new file.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+06.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2013-05-23  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-first.melt (at_finish_unit_first)
	(at_finish_unit_last, at_start_unit_first, at_start_unit_last):
	Move to warmelt-hooks.melt.

	* melt/warmelt-base.melt (register_all_passes_end_hook_first)
	(register_all_passes_end_hook_last)
	(register_all_passes_start_hook_first)
	(register_all_passes_start_hook_last): Move to warmelt-hooks.melt.

	* melt/warmelt-hooks.melt (at_finish_unit_first)
	(at_finish_unit_last, at_start_unit_first, at_start_unit_last)
	(register_all_passes_end_first, register_all_passes_end_last)
	(register_all_passes_start_first, register_all_passes_start_last):
	Move from elsewhere. Some things missing, see generated #warnings.

	* melt/warmelt-modes.melt (repl_docmd): Call
	register_all_passes_end_first not
	register_all_passes_end_hook_first.

2013-05-23  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-outobj.melt (compile_list_sexpr)
	(translate_run_melt_expressions): Initialize field
	:mocx_cimplementlist to an empty list.

	* melt/warmelt-hooks.melt (melthk_override_gate_registered_flag) C
	flag declared thru cheader and implemented thru cimplement.
	(enable_override_gate, maybe_disable_override_gate): Use it.

2013-05-23  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+02.c: Regenerate.
	* melt/generated/warmelt-base+03.c: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+02.c: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+03.c: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+06.c: Regenerate.
	* melt/generated/warmelt-genobj+07.c: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.c: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+01.c: Regenerate.
	* melt/generated/warmelt-macro+02.c: Regenerate.
	* melt/generated/warmelt-macro+03.c: Regenerate.
	* melt/generated/warmelt-macro+04.c: Regenerate.
	* melt/generated/warmelt-macro+05.c: Regenerate.
	* melt/generated/warmelt-macro+06.c: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+03.c: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+06.c: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+01.c: Regenerate.
	* melt/generated/warmelt-normatch+02.c: Regenerate.
	* melt/generated/warmelt-normatch+03.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch+06.c: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+01.c: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+03.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+06.c: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-05-23  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-outobj.melt (normadeclb_macroexpanded_list): Rename as
	(normalize_macroexpanded_list): New name, and don't give a declbuf
	as a secondary result.
	(translate_macroexpanded_list): Output the extra cheaders &
	cimplementations...

2013-05-23  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-normal.melt (normexp_cimplement): New method for
	normal_exp on class_source_cimplement.

2013-05-23  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+02.c: Regenerate.
	* melt/generated/warmelt-base+03.c: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+03.c: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+07.c: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.c: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+01.c: Regenerate.
	* melt/generated/warmelt-macro+02.c: Regenerate.
	* melt/generated/warmelt-macro+03.c: Regenerate.
	* melt/generated/warmelt-macro+04.c: Regenerate.
	* melt/generated/warmelt-macro+05.c: Regenerate.
	* melt/generated/warmelt-macro+06.c: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+03.c: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+06.c: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+06.c: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-05-23  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-predef.list (HOOK_ALL_PASSES_START, HOOK_ALL_PASSES_END)
	(HOOK_FINISH_UNIT, HOOK_START_UNIT): New.

	* melt/warmelt-first.melt (class_module_context): Add
	mocx_cimplementlist & mocx_startcomment fields.
	(initvalue_importer): Warning, not error, when import fails on
	bootstrapping.

	* melt/warmelt-macro.melt (class_source_code_string): New abstract
	class with sc_codestring field.
	(class_source_cheader): Inherit from it, remove field
	scheader_codestring which is now sc_codestring.
	(class_source_cimplement): New class.
	(mexpand_cheader): Improve.
	(mexpand_cimplement): New macro expander for cimplement.

	* melt/warmelt-outobj.melt (normadeclb_macroexpanded_list): Use
	sc_codestring.

2013-05-23  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-first.melt (class_initial_system_data): Remove
	sysdata__obsolete1, sysdata__obsolete2, sysdata__obsolete3, and
	sysdata__obsolete4 fields.

2013-05-23  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-first.melt (initial_system_data): Remove
	sysdata__obsolete* fields initializations to nil.

2013-05-22  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-first.melt (class_initial_system_data)
	(initial_system_data): Remove sysdata_internsymbol &
	sysdata_internkeyw replacing them with sysdata__obsolete3 &
	sysdata__obsolete4.

	* melt-runtime.h (meltgc_intern_symbol, meltgc_intern_keyword):
	Remove declarations.

	* melt-runtime.c (meltgc_intern_symbol, meltgc_intern_keyword):
	Remove definitions.

2013-05-22  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+03.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2013-05-22  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.c (meltgc_intern_symbol): Just call
	melthookproc_HOOK_INTERN_SYMBOL.
	(meltgc_intern_keyword): Just call
	melthookproc_HOOK_INTERN_KEYWORD.

	* melt/warmelt-first.melt (intern_symbol, intern_keyword): Remove.
	(:sysdata_internsymbol, :sysdata_internkeyw): Clear.

	* melt/warmelt-outobj.melt (outpucod_objinternsymbol): Emit call
	to melthookproc_HOOK_INTERN_SYMBOL.
	(outpucod_objinternkeyword): Emit call to
	melthookproc_HOOK_INTERN_KEYWORD.

2013-05-22  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+03.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+07.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2013-05-22  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-predef.list (HOOK_INTERN_SYMBOL, HOOK_INTERN_KEYWORD): New.
	reorder in alphabetical order.

	* melt/warmelt-first.melt (hook_intern_symbol)
	(hook_intern_keyword): New hooks.

2013-05-22  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+03.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-05-22  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (meltgc_named_keyword): Remove declaration.

	* melt-runtime.c (meltgc_named_keyword): Remove function.

	* melt/warmelt-first.melt (class_initial_system_data)
	(initial_system_data): Remove sysdata_addkeyw renamed as
	sysdata__obsolete2.
	(add_new_keyword_token): Remove obsolete function.

2013-05-22  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+03.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2013-05-22  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.c (meltgc_named_keyword): Always call
	melthookproc_HOOK_NAMED_KEYWORD. Obsolete function.
	(meltgc_readval): Call melthookproc_HOOK_NAMED_KEYWORD.

	* melt/warmelt-first.melt (get_keywordstr, create_keywordstr): Use
	melthookproc_HOOK_NAMED_KEYWORD.

	* melt/warmelt-outobj.melt (outpucod_objgetnamedkeyword): Emit
	call to melthookproc_HOOK_NAMED_KEYWORD instead of
	meltgc_named_keyword.

2013-05-22  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+03.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+06.c: Regenerate.
	* melt/generated/warmelt-genobj+07.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2013-05-22  Basile Starynkevitch  <basile@starynkevitch.net>

	{{hookifiying meltgc_named_keyword}}
	* melt-predef.list (HOOK_NAMED_KEYWORD): New.

	* melt/warmelt-first.melt (hook_named_keyword): New.
	(add_new_keyword_token): Becoming obsolete.

	* melt/warmelt-outobj.melt (outpucod_hookroutine): The emitted
	melthookmark* routine has module visibility.

2013-05-21  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+03.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+06.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+03.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-05-21  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-modes.melt
	(generate_runtypesupport_predefined_hooks) Remove the emission of
	the check of the data hash.

	* melt/generated/meltrunsup-inc.c: Manual edition;
	(melthookproc_HOOK_NAMED_SYMBOL): Manually remove that check.

2013-05-21  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (meltgc_named_symbol): Remove declaration.

	* melt-runtime.c (meltgc_named_symbol): Remove function.
	(meltgc_readmacrostringsequence, meltgc_readval)
	(meltgc_set_user_options): Use melthookproc_HOOK_NAMED_SYMBOL
	instead of meltgc_named_symbol.

	* melt/warmelt-first.melt (class_initial_system_data): Remove
	sysdata_addsymbol field, temporarily replacing it with
	sysdata__obsolete1.
	(add_new_symbol_token): Remove function.
	(initial_system_data): Don't use sysdata_addsymbol.

2013-05-21  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (MELT_NAMED_SYMBOL_USE_HOOK): Remove that
	temporary kludge.

	* melt-runtime.c (meltgc_named_symbol): Warn, not just inform,
	when without HOOK_NAMED_SYMBOL.

2013-05-21  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate all}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+03.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+06.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+06.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.


2013-05-21  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-first.melt (add_new_symbol_token): Don't #if
	MELT_NAMED_SYMBOL_USE_HOOK anymore.

	* melt/warmelt-outobj.melt (outpucod_objgetnamedsymbol): Always
	emit with melthookproc_HOOK_NAMED_SYMBOL.

2013-05-21  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (MELT_NAMED_SYMBOL_USE_HOOK): Temporarily define
	it to check that it is working.

2013-05-21  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate all}}
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+06.c: Regenerate.
	* melt/generated/warmelt-genobj+07.c: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.c: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+06.c: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-05-21  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-outobj.melt (outpucod_objgetnamedsymbol): Emit an
	#error when without environment -i.e. when translating
	warmelt-first, because this should never happen.

2013-05-21  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-genobj.melt (compile2obj_initproc): Don't build
	symbol or keyword getters or importers for the first initial
	module.

	* melt/warmelt-outobj.melt (compile_list_sexpr): Better debug.

2013-05-21  Basile Starynkevitch  <basile@starynkevitch.net>

	{{unstable}}
	* melt/warmelt-outobj.melt (outpucod_objgetnamedsymbol): Emit a
	warning when without initial environment.

2013-05-20  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+03.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.c: Regenerate.
	* melt/generated/warmelt-macro+02.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+03.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+01.c: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+03.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+06.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2013-05-20  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.c (meltgc_named_symbol): Protect invocation of
	melthookproc_HOOK_NAMED_SYMBOL with a #if
	MELT_NAMED_SYMBOL_USE_HOOK.
	* melt/warmelt-first.melt (add_new_symbol_token): Protect the
	warning likewise.

2013-05-20  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.c (meltgc_named_symbol): Use hook_named_symbol when
	possible. Add temporary information message.

	* melt/warmelt-first.melt (get_symbolstr, create_symbolstr)
	(get_raw_symbol): Use melthookproc_HOOK_NAMED_SYMBOL.

	* melt/warmelt-genobj.melt (compile2obj_initproc)
	(compile2obj_initextendproc): Emit better comment about get
	symbols...

	* melt/warmelt-outobj.melt (outpucod_objgetnamedsymbol) Emit call
	to melthookproc_HOOK_NAMED_SYMBOL protected by #if
	MELT_NAMED_SYMBOL_USE_HOOK.

	* melt/warmelt-modes.melt
	(generate_runtypesupport_predefined_hooks): Better check messages.

2013-05-20  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+03.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+07.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2013-05-20  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-first.melt (hook_named_symbol): Add and uncomment
	it.

2013-05-20  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+02.c: Regenerate.
	* melt/generated/warmelt-base+03.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+02.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+03.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+06.c: Regenerate.
	* melt/generated/warmelt-genobj+07.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.c: Regenerate.
	* melt/generated/warmelt-macro+01.c: Regenerate.
	* melt/generated/warmelt-macro+02.c: Regenerate.
	* melt/generated/warmelt-macro+03.c: Regenerate.
	* melt/generated/warmelt-macro+04.c: Regenerate.
	* melt/generated/warmelt-macro+05.c: Regenerate.
	* melt/generated/warmelt-macro+06.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+03.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+06.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+01.c: Regenerate.
	* melt/generated/warmelt-normatch+02.c: Regenerate.
	* melt/generated/warmelt-normatch+03.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch+06.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+01.c: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+03.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+06.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2013-05-20  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-module.mk
	($(GCCMELTGEN_BUILD)%.quicklybuilt.meltmdsumedpic.o): On GCC
	compilation failure, recompile with line numbering to also give
	error messages in the generated file.

	* melt/warmelt-first.melt (hook_named_symbol): Commented
	temporarily, moved from warmelt-hooks.melt.
	(block_signals, ignore, void): Move from warmelt-base.melt.
	(melt_callcount): Better
	(the_meltcallcount): Deprecated synonym.

	* melt/warmelt-base.melt (block_signals, ignore, void): Remove,
	since moved to warmelt-first.

	* melt/warmelt-macro.melt (mexpand_debug_msg, mexpand_debug): Use
	melt_callcount instead of the_meltcallcount.

	* melt/warmelt-normal.melt (normexp_or): Use melt_callcount.

	* melt/warmelt-outobj.melt (output_curframe_declstruct_init): Emit
	melt_thiscallcounter__ not thiscallcounter__...
	(outpucod_hookroutine): Emit #undef meltcallcount.
	(emit_syntax_testing_routine): Likewise.

2013-05-20  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-hooks.melt (hook_named_symbol): Missing increment in
	upcasing loop...

2013-05-19  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+07.c: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.c: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+01.c: Regenerate.
	* melt/generated/warmelt-macro+02.c: Regenerate.
	* melt/generated/warmelt-macro+03.c: Regenerate.
	* melt/generated/warmelt-macro+04.c: Regenerate.
	* melt/generated/warmelt-macro+05.c: Regenerate.
	* melt/generated/warmelt-macro+06.c: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+06.c: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-05-19  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-predef.list (HOOK_GET_NAMED_SYMBOL)
	(HOOK_CREATE_NAMED_SYMBOL): Remove.
	(HOOK_NAMED_SYMBOL): Add.
	* melt/generated/warmelt-normal.c: Manually edit for above change.
	* melt/warmelt-hooks.melt (hook_create_named_symbol): Rename as
	(hook_named_symbol).

2013-05-19  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-macro.melt (mexpand_expr_chunk): Shift after keyword.
	* melt/warmelt-normal.melt (normexp_expr_chunk): Correct assert on
	reciever's class. Handle symbol.
	* testsuite/melt/tchunk-compo.melt: Improve with test for expr_chunk.

2013-05-18  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-normal.melt (normexp_expr_chunk): Implement, by
	normalizing sub-expressions and chunking the rest.

2013-05-18  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-normal.melt (normexp_expr_chunk): New stub method for
	normal_exp on class_source_exprchunk.

2013-05-18  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Start adding expr_chunk}}
	* melt/warmelt-macro.melt
	(class_source_protochunk): New class, like previous class_source_codechunk.
	(class_source_codechunk): Inherit from class_source_protochunk.
	(class_source_exprchunk): New class with sxch_ctype field.
	(mexpand_defprimitive): Use when instead of if progn...
	(expand_macrostring_pairs): Improve debug.
	(mexpand_code_chunk): Improve documentation.
	(mexpand_expr_chunk): New function.
	(expr_chunk): New macro.

2013-05-18  Basile Starynkevitch  <basile@starynkevitch.net>

	{{The improved tchunk-compo.melt passes}}
	* melt/warmelt-macro.melt (expand_macrostring_pairs): New utility
	function.
	(mexpand_code_chunk): Use it.
	* testsuite/melt/tchunk-compo.melt: Improve with a nested chunk.

2013-05-18  Basile Starynkevitch  <basile@starynkevitch.net>

	{{tchunk-compo.melt passes}}
	{{Regenerate all}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.


2013-05-18  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.c (meltgc_readmacrostringsequence): Improve.
	(melt_macrostring_flush_sbufv): New local macro.

2013-05-18  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-hooks.melt (hook_override_gate): Re-enable it.

2013-05-18  Basile Starynkevitch  <basile@starynkevitch.net>

	{{tchunk-lowdebug.melt works}}
	{{Regenerate all}}
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+01.c: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+03.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+06.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2013-05-18  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-outobj.melt (outcinitfill_objinithook): Emit
	MELT_HOOK_SET_ROUTCODE on the right cdata.
	(output_curframe_cdat_struct): Emit an initial gap.

2013-05-18  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate all}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+03.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-05-18  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-modes.melt
	(generate_runtypesupport_predefined_hooks): Emit a variable
	melthkp.

2013-05-18  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate all}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+03.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+01.c: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+03.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+06.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2013-05-18  Basile Starynkevitch  <basile@starynkevitch.net>
	* Makefile.in (upgrade-warmelt): recompile the runtime with new
	generated meltrunsup* files.

2013-05-18  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-modes.melt
	(generate_runtypesupport_predefined_hooks): Correct formal output
	parameter emission of melthookproc_... Better assert message about
	nonbootstrapping hook data check.

2013-05-18  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (melt_caught_assign_at): Remove useless
	expression.

	* melt/warmelt-outobj.melt (outcinitfill_objinithook): Improve
	emitted code, by setting the output stack location only when the
	hook is initialized.

	* melt/warmelt-hooks.melt (hook_override_gate): Temporarily
	forbidden.

	* melt/warmelt-modes.melt
	(generate_runtypesupport_predefined_hooks): Emit more comments and
	checks.

2013-05-17  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+03.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+06.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2013-05-17  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-outobj.melt (outpucod_hookroutine): Use meltfram__
	as the real name of the frame to ease gdb.

	* testsuite/melt/tchunk-lowdebug.melt: Add more debug.

2013-05-17  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-05-17  Basile Starynkevitch  <basile@starynkevitch.net>

	* testsuite/melt/tchunk-lowdebug.melt: New file.

	* melt/warmelt-hooks.melt (hook_low_debug_value_at): Add doc.

2013-05-17  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.c (meltgc_read_file): Add read debugs.

2013-05-17  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (melt_low_debug_value_at): Use
	melthookproc_HOOK_LOW_DEBUG_VALUE_AT to make it work.

	* melt-runtime.c (melt_string_hex_md5sum_file_to_hexbuf): Define
	and use MD5HEX_SIZE.
	(melt_read_debug): New variable, when MELT_HAVE_DEBUG.
	(melt_dbgread_value, melt_dbgread_printf): New macros.
	(melrtgc_readhashescape): Typo, rename as meltgc_readhashescape.
	(meltgc_readhashescape): Renamed.
	(meltgc_readseqlist, meltgc_makesexpr, meltgc_readstring)
	(meltgc_readmacrostringsequence, meltgc_readhashescape)
	(meltgc_readval): Use them.

2013-05-17  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+03.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+02.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+03.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+06.c: Regenerate.
	* melt/generated/warmelt-genobj+07.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.c: Regenerate.
	* melt/generated/warmelt-macro+01.c: Regenerate.
	* melt/generated/warmelt-macro+02.c: Regenerate.
	* melt/generated/warmelt-macro+03.c: Regenerate.
	* melt/generated/warmelt-macro+04.c: Regenerate.
	* melt/generated/warmelt-macro+05.c: Regenerate.
	* melt/generated/warmelt-macro+06.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+03.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+06.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+01.c: Regenerate.
	* melt/generated/warmelt-normatch+02.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch+06.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+01.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+06.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2013-05-17  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Adding melt_low_debug_value}}

	* melt-predef.list (HOOK_LOW_DEBUG_VALUE_AT): New.

	* melt-runtime.h (melt_low_debug_value, melt_low_debug_value_at):
	New macros.

	* melt/warmelt-hooks.melt (hook_low_debug_value_at): New hook.

2013-05-17  Basile Starynkevitch  <basile@starynkevitch.net>

	{{the reader is probably buggy for sexpr inside macrostrings, so
	tchunk-compo.melt is wrongly parsed}}
	* melt/warmelt-debug.melt (dbgout_string_method): Nicer output for
	verbatim strings.
	(dbgout_multiple_method, dbgout_list_method): Better indentation.

	* melt/warmelt-macro.melt (mexpand_code_chunk): More debug.

	* melt/warmelt-normal.melt (normexp_code_chunk): More debug.

	* melt/warmelt-genobj.melt (compilobj_nrep_chunk): More debug.

	* melt/warmelt-outobj.melt (outpucod_objlocatedexpv): Don't box
	depth+1.

2013-05-16  Basile Starynkevitch  <basile@starynkevitch.net>

	{{test tchunk-compo.melt still fails}}
	* melt/warmelt-normal.melt (discr_normalizing_closure): New discriminant.
	(class_normal_magic_binding): New class with nmagic_value.
	(normbind_constructbind): Improve debug.
	(normexp_symbol): Handle class_normal_magic_binding &
	discr_normalizing_closure.
	(normexp_code_chunk): Improve but still buggy for composite chunks.

	* melt/warmelt-genobj.melt (compilobj_nrep_chunk): More debug.
	* testsuite/melt/tchunk-compo.melt: Improve.

2013-05-16  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-predef.list (HOOK_GET_NAMED_SYMBOL)
	(HOOK_CREATE_NAMED_SYMBOL): New, not yet implemented.

	* melt/warmelt-first.melt (cstring_is_null, cstring_non_empty):
	New primitives.

	* melt/warmelt-macro.melt (mexpand_code_chunk): Define an internal
	recursive mexp_macrostring to enable several arguments and complex
	code chunks.

	* melt/warmelt-normal.melt (normexp_code_chunk): Should handle
	composite code_chunks. To be implemented.

	* melt/warmelt-hooks.melt: Should add new hooks, e.g. for symbol
	creation & fetching.

	* testsuite/melt/tchunk-compo.melt: New file.

	* melt-runtime.c: Add comment about sorting.
	(MAXDEPTH_APPLY_MELT): Increase to 512.

2013-05-16  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate all}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+06.c: Regenerate.
	* melt/generated/warmelt-genobj+07.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+06.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+01.c: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+03.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+06.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2013-05-16  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (melt_plugin_name): New public variable.

2013-05-16  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-hooks.melt (registered_flag_override_gate): New
	instance.
	(enable_override_gate, maybe_disable_override_gate): New internal
	functions.
	(register_override_gate_first, register_override_gate_last)
	(unregister_override_gate_first, unregister_override_gate_last):
	New public functions.

2013-05-16  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-outobj.melt (outpucod_objputhookconst): Improve
	emitted checks.

2013-05-16  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-hooks.melt: Uncomment the temporarily commented
	code, which compiles ok.

2013-05-16  Basile Starynkevitch  <basile@starynkevitch.net>

	{{test thook-3.melt passes}}
	* melt/warmelt-genobj.melt (compilobj_datahook): More
	debug. Compile correctly the closed data...

2013-05-15  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-normal.melt (add_nctx_data): A hook could have no
	nrhook_mapdata yet, because it is set later.
	(normexp_defhook): Put the nrhook_mapdata just before normalizing
	the body.

	* melt/warmelt-outobj.melt (outdeclinit_objinithook): Use the
	correct size, given by :oihk_cloval length.
	(outpucod_objputhookconst, outpucod_objputhookdata): Emit a
	melt_assertmsg check.

2013-05-15  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-genobj.melt (compilobj_datahook): Compute the oclo
	correctly...


	* melt/warmelt-hooks.melt: Temporarily comment out nearly
	everything.
	(hook_override_gate): Temporarily remove.


2013-05-15  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-genobj.melt (class_objhooknth): New class with
	ohknth_hook & ohknth_off fields.
	(compile2obj_hook): Use it to fill the compicache for data inside
	hooks then forgetting these.

	* melt/warmelt-outobj.melt (outpucod_objhooknth): New method for
	output_c_code on class_objhooknth.

2013-05-15  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-genobj.melt (compilobj_datahook): fill the
	ndatatup.

2013-05-15  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+06.c: Regenerate.
	* melt/generated/warmelt-genobj+07.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+06.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+03.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+06.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2013-05-15  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-normal.melt (add_nctx_data): Don't add into
	nrhook_mapdata the hook itself or its data...
	(normexp_defhook): Set earlier the nrhook_datahook.

2013-05-15  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-genobj.melt: More debug with nmapdata.

2013-05-15  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-outobj.melt (outpucod_objlabelinstr): Emit correct
	code inside #if MELTDEBUG_MATCHING conditional code.

2013-05-15  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+06.c: Regenerate.
	* melt/generated/warmelt-genobj+07.c: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.c: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+06.c: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+01.c: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+03.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+06.c: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-05-15  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-genobj.melt (compile2obj_hook): Debug it.

2013-05-15  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-normal.melt (class_nrep_hookproc): New field
	nrhook_mapdata.
	(add_nctx_data): Update it for hooks.
	(normexp_defhook): Initialize it.

2013-05-15  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-normal.melt (add_nctx_data, create_normcontext)
	(create_normal_extending_context, normal_keyword_data): More
	debug.

2013-05-15  Basile Starynkevitch  <basile@starynkevitch.net>

	* testsuite/melt/thook-3.melt: Improve, by calling the hook and
	asserting that a quoted number is indeed a boxed integer.
	Still failing test....

2013-05-15  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-genobj.melt (compile2obj_hook): Parenthesis
	mistake...

	* melt/warmelt-outobj.melt (outpucod_null): Add backtrace.
	(translate_macroexpanded_list) add more asserts and debugs.

2013-05-14  Basile Starynkevitch  <basile@starynkevitch.net>

	* testsuite/melt/thook-3.melt: New file.

2013-05-14  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-normal.melt (normal_symbol_data): Better debug.

	* melt/warmelt-outobj.melt (normadeclb_macroexpanded_list):
	Replace every_list by foreach_in_list, and if with when...

2013-05-14  Basile Starynkevitch  <basile@starynkevitch.net>

	* testsuite/melt/thook-2.melt: Use quoted symbols, strings,
	keywords, ...

	* melt/warmelt-normal.melt (normexp_quote, normexp_keyword): More
	debug.

2013-05-14  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+03.c: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+06.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-05-14  Basile Starynkevitch  <basile@starynkevitch.net>

	* testsuite/melt/thook-2.melt: Improve.

2013-05-13  Basile Starynkevitch  <basile@starynkevitch.net>

	{{thook-2.melt probably still don't work, and uncommented warmelt-hooks.melt don't work...}}
	* melt/warmelt-first.melt (initvalue_importer): Add code chunks to
	report errors for bad parenv.

2013-05-13  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+06.c: Regenerate.
	* melt/generated/warmelt-genobj+07.c: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.c: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-05-13  Basile Starynkevitch  <basile@starynkevitch.net>

	{{thook-2.melt test passes}}
	* melt/warmelt-genobj.melt (class_any_start_routineobj): New
	intermediate abstract superclass.
	(class_hookroutineobj, class_initialroutineobj): Inherit from it.
	(compil_data_and_slots_fill): Check for it. Remove ifilllis,
	because it is unused.
	(compilobj_datasymbol, compilobj_datainstance)
	(compilobj_datatuple, compilobj_datastring)
	(compilobj_databoxedinteger, compilobj_dataclosure)
	(compilobj_dataroutine, compilobj_datahook): Check for
	class_any_start_routineobj.


2013-05-13  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.c: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+03.c: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-05-13  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-mode.melt
	(generate_runtypesupport_predefined_hooks): Improve declaration
	emission.

2013-05-13  Basile Starynkevitch  <basile@starynkevitch.net>
	* testsuite/melt/thook-2.melt: Correct typo, fails.

2013-05-13  Basile Starynkevitch  <basile@starynkevitch.net>
	* testsuite/melt/thook-2.melt: Add new file.

	* testsuite/melt/thook-1.melt: Improve gccmelt_cflags in build
	comment.

	* testsuite/melt/tmatch-5.melt: Ditto.

	* testsuite/melt/tmatch-tuple.melt: Ditto.

2013-05-13  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-hooks.melt (hook_override_gate): Temporarily
	commented most of the code, which does not compile in svn
	rev. 198475.

2013-05-13  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-hooks.melt (hook_override_gate): Add doc.
	(melt_override_gate_callback): New in a cheader.

	* melt/warmelt-mode.melt
	(generate_runtypesupport_predefined_hooks): The emitted
	declaration should have output arguments as pointers!

2013-04-30  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate again, now predefined hooks work ok...}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-04-30  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}
	* generated/meltrunsup-inc.c: Regenerate then manually edit.
	* generated/meltrunsup.h: Regenerate.
	* generated/warmelt-base+01.c: Regenerate.
	* generated/warmelt-base+meltdesc.c: Regenerate.
	* generated/warmelt-base+melttime.h: Regenerate.
	* generated/warmelt-base.c: Regenerate.
	* generated/warmelt-debug+01.c: Regenerate.
	* generated/warmelt-debug+meltdesc.c: Regenerate.
	* generated/warmelt-debug+melttime.h: Regenerate.
	* generated/warmelt-debug.c: Regenerate.
	* generated/warmelt-first+meltdesc.c: Regenerate.
	* generated/warmelt-first+melttime.h: Regenerate.
	* generated/warmelt-first.c: Regenerate.
	* generated/warmelt-genobj+01.c: Regenerate.
	* generated/warmelt-genobj+02.c: Regenerate.
	* generated/warmelt-genobj+03.c: Regenerate.
	* generated/warmelt-genobj+04.c: Regenerate.
	* generated/warmelt-genobj+05.c: Regenerate.
	* generated/warmelt-genobj+06.c: Regenerate.
	* generated/warmelt-genobj+07.c: Regenerate.
	* generated/warmelt-genobj+meltdesc.c: Regenerate.
	* generated/warmelt-genobj+melttime.h: Regenerate.
	* generated/warmelt-genobj.c: Regenerate.
	* generated/warmelt-hooks+meltdesc.c: Regenerate.
	* generated/warmelt-hooks+melttime.h: Regenerate.
	* generated/warmelt-hooks.c: Regenerate.
	* generated/warmelt-macro+meltdesc.c: Regenerate.
	* generated/warmelt-macro+melttime.h: Regenerate.
	* generated/warmelt-macro.c: Regenerate.
	* generated/warmelt-modes+01.c: Regenerate.
	* generated/warmelt-modes+02.c: Regenerate.
	* generated/warmelt-modes+03.c: Regenerate.
	* generated/warmelt-modes+meltdesc.c: Regenerate.
	* generated/warmelt-modes+melttime.h: Regenerate.
	* generated/warmelt-modes.c: Regenerate.
	* generated/warmelt-normal+meltdesc.c: Regenerate.
	* generated/warmelt-normal+melttime.h: Regenerate.
	* generated/warmelt-normal.c: Regenerate.
	* generated/warmelt-normatch+05.c: Regenerate.
	* generated/warmelt-normatch+meltdesc.c: Regenerate.
	* generated/warmelt-normatch+melttime.h: Regenerate.
	* generated/warmelt-normatch.c: Regenerate.
	* generated/warmelt-outobj+01.c: Regenerate.
	* generated/warmelt-outobj+02.c: Regenerate.
	* generated/warmelt-outobj+03.c: Regenerate.
	* generated/warmelt-outobj+04.c: Regenerate.
	* generated/warmelt-outobj+05.c: Regenerate.
	* generated/warmelt-outobj+06.c: Regenerate.
	* generated/warmelt-outobj+meltdesc.c: Regenerate.
	* generated/warmelt-outobj+melttime.h: Regenerate.
	* generated/warmelt-outobj.c: Regenerate.

	* melt/warmelt-modes.melt
	(generate_runtypesupport_predefined_hooks): Missing * in signature
	for output parameters.

2013-04-30  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-mode.melt
	(generate_runtypesupport_predefined_hooks): Correct typo in emission.

2013-04-30  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-mode.melt
	(generate_runtypesupport_predefined_hooks): Good emission.

2013-04-30  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-mode.melt
	(generate_runtypesupport_predefined_hooks): Better emission.

2013-04-30  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-genobj.melt (class_objputhookdata): New class with
	fields ophkdata_hook & ophkdata_data.
	(compilobj_datahook): Use it.

	* melt/warmelt-outobj.melt (outpucod_objputhookdata): New method
	for output_c_code on class_objputhookdata.

2013-04-30  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-mode.melt
	(generate_runtypesupport_predefined_hooks): Emit a warning if no
	hook data.

	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+03.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+06.c: Regenerate.
	* melt/generated/warmelt-genobj+07.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Regenerate.
	* melt/generated/warmelt-hooks.c: Regenerate.
	* melt/generated/warmelt-macro+02.c: Regenerate.
	* melt/generated/warmelt-macro+03.c: Regenerate.
	* melt/generated/warmelt-macro+04.c: Regenerate.
	* melt/generated/warmelt-macro+05.c: Regenerate.
	* melt/generated/warmelt-macro+06.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+03.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+06.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+01.c: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+03.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+06.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2013-04-30  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-normal.melt (class_nrep_datahook): Add ndhook_data
	field.
	(normexp_defhook): Fill it.

	* melt/warmelt-genobj.melt (class_objinithook): Add oihk_data field.
	(compilobj_datahook): Fill it.

	* melt/warmelt-outobj.melt (outcinitfill_objinithook): Emit it.

	* melt/warmelt-modes.melt (generate_runtypesupport_predefined_hooks): Implemented.

2013-04-30  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.c (melt_intern_cstring): Thoe index returned by
	melt_raw_interned_cstring_index can be 0.

	* melt/warmelt-first.melt  (class_hook_descriptor): New predefined class
	with fields hookdesc_in_formals hookdesc_out_formals
	hookdesc_ctype hookdesc_hook.

	* melt/warmelt-macro.melt (mexpand_defhook): Clear hookbind_defhook.

	* melt/warmelt-normal.melt (normexp_defhook): Compile-time build
	of the hook descriptor, still incomplete.

	* melt/warmelt-genobj.melt (compilobj_datatuple): Accept string name.

	* melt/warmelt-modes.melt
	(generate_runtypesupport_predefined_hooks): Add backtrace.

2013-04-30  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-predef.list (HOOK_OVERRIDE_GATE): New.

	* melt/warmelt-hooks.melt: New file.

	* melt/warmelt-first.melt: Update copyright dates and comment.

	* melt/warmelt-mode.melt
	(generate_runtypesupport_predefined_hooks): New incomplete
	function.
	(runtypesupport_docmd): Call it.

	* melt-build-script.tpl: Add comments.

	* melt-build-script.def: Add warmelt-hooks.

	* melt-build-script.sh: Regenerate.

	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+02.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+03.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+07.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-hooks+meltdesc.c: Add and regenerate.
	* melt/generated/warmelt-hooks+melttime.h: Add and regenerate.
	* melt/generated/warmelt-hooks.c: Add and regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+03.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+01.c: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+03.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+06.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2013-04-30  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-debug.melt (dbgout_hook_method): Better output
	indentation.

	* melt/warmelt-outobj.melt (outcinitfill_objinithook): Better
	output. Emit use of MELT_HOOK_SET_ROUTCODE macro.


2013-04-29  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate all}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+02.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+03.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+06.c: Regenerate.
	* melt/generated/warmelt-genobj+07.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+06.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+01.c: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+03.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+06.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2013-04-29  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-outobj.melt (outcinitpredef_objinithook):
	Implemented.

2013-04-29  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-predef.list (_ZXTRA1PREDEF, _ZXTRA2PREDEF, _ZXTRA3PREDEF):
	New pseudo predefined for testing purposes.

	* melt-runtime.h (MELT_VERSION_STRING): Bump to 0.9.9-pre.

	* melt-runtime.c (melt_really_initialize): Typo in comment.

	* melt/warmelt-debug.melt (dbgout_hook_method): Tiny improvement
	in output.

	* melt/warmelt-normal.melt (class_nrep_datahook): Add ndhook_predef field.
	(normexp_defhook): Fill it.

	* melt/warmelt-genobj.melt (class_objinithook): Add oihk_predef
	field.
	(compil_data_and_slots_fill): Use ndhook_predef.
	(compilobj_datahook): Use it.

	* melt/warmelt-outobj.melt (outcinitpredef_objinithook): New stub.
	(outcinitfill_objinithook): Emit comment for predefined.

	* testsuite/melt/thook-1.melt (anotherhook): Make it predefined.


2013-04-29  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (melt_closure_nth): return NULL not 0 for readability.
	(melt_hook_size, melt_hook_nth, melt_hook_data): New inlined functions.
	(meltgc_set_hook_data, melt_hook_interned_name)
	(meltgc_hook_name_string): New declarations.

	* melt-runtime.c (meltgc_set_hook_data, melt_hook_interned_name)
	(meltgc_hook_name_string): New functions.

	* melt/warmelt-first.melt (hook_data, hook_every, hook_name)
	(hook_nth, hook_put_data, hook_size, is_hook): New primitives and
	functions.

	* melt/warmelt-debug.melt (dbgout_hook_method): New method for
	dbg_output on discr_hook.

	* melt/warmelt-normal.melt (normbind_fixbind): More debug.
	(normexp_defhook): Update the shobind.

	* melt/warmelt-outobj.melt (outcinitfill_objinithook): Improve
	emitted comments. Emit the strncpy of the hookname.

	* testsuite/melt/thook-1.melt: Add final debug to display the hook.

2013-04-29  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate all}}
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+06.c: Regenerate.
	* melt/generated/warmelt-genobj+07.c: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+06.c: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+06.c: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-04-29  Basile Starynkevitch  <basile@starynkevitch.net>

	{{thook-1.melt anotherhook passes}}
	* melt/warmelt-normal.melt (normexp_defun): Better debug.
	(normexp_defhook): Moved appending of nctxproclist...
	(normalize_lambda): More debug.

	* melt/warmelt-genobj.melt (compile2obj_hook): More debug.

	* melt/warmelt-outobj.melt (translate_macroexpanded_list): More
	debug.

	* testsuite/melt/thook-1.melt: Better indentation.

2013-04-16  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-genobj.melt (compile2obj_procedure)
	(compilobj_datasymbol, compilobj datatuple)
	(compilobj_databoxedinteger, compilobj_dataclosure)
	(compilobj_dataroutine, compilobj_datahook): More debug, notably
	for compicache.

	* melt/warmelt-outobj.melt (translate_macroexpanded_list): Ditto.

	* testsuite/melt/thook-1.melt (justahook): Comment out
	temporarily.

2013-04-16  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-genobj.melt (compile2obj_hook): Update the compicache.
	(compilobj_nrep_lambda): More debug.

	* melt/warmelt-outobj.melt (translate_macroexpanded_list): Unbox
	countbox as count.

2013-04-15  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-genobj.melt (compilobj_dataroutine): Compute and
	check oinipro.

2013-04-15  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate all}}
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+06.c: Regenerate.
	* melt/generated/warmelt-genobj+07.c: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+01.c: Regenerate.
	* melt/generated/warmelt-macro+02.c: Regenerate.
	* melt/generated/warmelt-macro+03.c: Regenerate.
	* melt/generated/warmelt-macro+04.c: Regenerate.
	* melt/generated/warmelt-macro+05.c: Regenerate.
	* melt/generated/warmelt-macro+06.c: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+06.c: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+01.c: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+03.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+06.c: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-04-15  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-normal.melt (normexp_defhook): More debug.
	(normalize_lambda): Use put_fields not unsafe_put_fields.

	* melt/warmelt-genobj.melt (compilobj_dataroutine): More
	debug. Use get_field not unsafe_get_field.

	* melt/warmelt-outobj.melt (output_centraldecl_hookroutine): get
	the oretctype thru the hookproc.

2013-04-12  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-macro.melt (mexpand_when): Was defined twice,
	remove the old definition.

	* melt/warmelt-normal.melt (normexp_defun): More debug.

	* melt/warmelt-genobj.melt (compilobj_dataroutine): Tentative
	probably wrong, remove of an assert...

	* testsuite/melt/thook-1.melt: Add more code.


2013-04-11  Basile Starynkevitch  <basile@starynkevitch.net>
	* testsuite/melt/thook-1.melt: uncomment anotherhook containing a
	lambda, which is not yet translated correctly...

	* melt/warmelt-genobj.melt (compile2obj_procedure)
	(compile2obj_initproc, compilobj_nrep_lambda): More debug.

2013-04-11  Basile Starynkevitch  <basile@starynkevitch.net>

	{{thook-1.melt justahook seems to be correctly translated}}
	* melt/warmelt-normal.melt (normexp_symbol): More debug.
	(normexp_defhook): Restore the ncx before normalizing the closed
	values...
	* melt/warmelt-outobj.melt (compilobj_datahook): More debug.

2013-04-08  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate all}}
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+02.c: Regenerate.
	* melt/generated/warmelt-base+03.c: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+02.c: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+03.c: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+06.c: Regenerate.
	* melt/generated/warmelt-genobj+07.c: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+01.c: Regenerate.
	* melt/generated/warmelt-macro+02.c: Regenerate.
	* melt/generated/warmelt-macro+03.c: Regenerate.
	* melt/generated/warmelt-macro+04.c: Regenerate.
	* melt/generated/warmelt-macro+05.c: Regenerate.
	* melt/generated/warmelt-macro+06.c: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+03.c: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+06.c: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+01.c: Regenerate.
	* melt/generated/warmelt-normatch+02.c: Regenerate.
	* melt/generated/warmelt-normatch+03.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch+06.c: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+01.c: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+03.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+06.c: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.


2013-04-09  Basile Starynkevitch  <basile@starynkevitch.net>

	* testsuite/melt/thook-1.melt (justahook): Add itr input :tree
	formal.

2013-04-09  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-genobj.melt (compilobj_datahook): Still wrong.

2013-04-09  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-outobj.melt (outpucod_marker): mark closure only
	for procedures. Use meltix as the index.
	(output_curframe_declstruct_init, outpucod_initialmoduleroutine)
	(output_curframe_cdat_fill, outpucod_hookroutine): Emit
	declaration of meltix.

2013-04-09  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-outobj.melt (outpucod_objputoutarg): Coded.


2013-04-09  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-genobj.melt (class_objputoutarg): New class, with
	field oboutarg_formal.
	(compile2obj_hook) Use that class.
	(compilobj_nrep_return): Still ugly hack about expected but not
	given secondary result.

	* melt/warmelt-outobj.melt (outpucod_objputoutarg): New stub
	method for output_c_code on class_objputoutarg...

2013-04-09  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.c (melt_compile_source): Add debug print just
	before calling melt_run_make_for_plugin or
	melt_run_make_for_branch.

2013-04-09  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-genobj.melt (compilobj_datahook): Add an
	:oie_locvar to the objinithook.


2013-04-09  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-outobj.melt (outpucod_objputhookconst): Done.


2013-04-08  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate all}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+02.c: Regenerate.
	* melt/generated/warmelt-base+03.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+02.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+03.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+06.c: Regenerate.
	* melt/generated/warmelt-genobj+07.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-macro+01.c: Regenerate.
	* melt/generated/warmelt-macro+02.c: Regenerate.
	* melt/generated/warmelt-macro+03.c: Regenerate.
	* melt/generated/warmelt-macro+04.c: Regenerate.
	* melt/generated/warmelt-macro+05.c: Regenerate.
	* melt/generated/warmelt-macro+06.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+03.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+06.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+01.c: Regenerate.
	* melt/generated/warmelt-normatch+02.c: Regenerate.
	* melt/generated/warmelt-normatch+03.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch+06.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+01.c: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+03.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+06.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2013-04-08  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-genobj.melt (class_objinithook): Add perhaps
	uselesee oihk_cloval field.
	(compilobj_datahook): Fill it.
	* melt/warmelt-outobj.melt (outcinitfill_objinithook): Done.
	(outpucod_objputhookconst): Incomplete.

2013-04-08  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-outobj.melt (output_curframe_declstruct_init): Also
	handle hook routine.  More debug.
	(outpucod_initialmoduleroutine): Don't emit the #define
	meltmarking_melt_start_this_module any more.
	(outpucod_hookroutine): Complete.

2013-04-08  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-outobj.melt (outpucod_objcformal): New method for
	output_c_code on class_objcformal.

2013-04-04  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+02.c: Regenerate.
	* melt/generated/warmelt-base+03.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+02.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+03.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+06.c: Regenerate.
	* melt/generated/warmelt-genobj+07.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-macro+01.c: Regenerate.
	* melt/generated/warmelt-macro+02.c: Regenerate.
	* melt/generated/warmelt-macro+03.c: Regenerate.
	* melt/generated/warmelt-macro+04.c: Regenerate.
	* melt/generated/warmelt-macro+05.c: Regenerate.
	* melt/generated/warmelt-macro+06.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+03.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+06.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+01.c: Regenerate.
	* melt/generated/warmelt-normatch+02.c: Regenerate.
	* melt/generated/warmelt-normatch+03.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch+06.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+01.c: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+03.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+06.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.


2013-04-04  Basile Starynkevitch  <basile@starynkevitch.net>
	(outpucod_hookroutine): Incomplete, but a bit more. Missing
	marking routine generation.

2013-04-04  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-outobj.melt (output_curframe_declstruct): The
	generated struct name is fixed to melt_initial_frame_st for
	initial routines. Use the meltframe_ prefix otherwise.
	(output_curframe_declstruct_init): Use the meltframe_ prefix.
	(outpucod_initialmoduleroutine): Declare the opaque initial frame.
	Generate it in the implementation buffer, using
	meltinitial_frame_t name. Generate appropriately the initial
	routines' chunk's signatures and calls.
	(outpucod_hookroutine): Incomplete, but a bit more.

2013-04-04  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+06.c: Regenerate.
	* melt/generated/warmelt-genobj+07.c: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+06.c: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+01.c: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+03.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+06.c: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-04-04  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-outobj.melt (output_curframe_declstruct_init)
	(output_curframe_cdat_struct, output_curframe_cdat_fill)
	(outpucod_initialmoduleroutine): Emit meltcdat instead of cdat and
	meltcdata_st instead of cdata_st etc...

2013-04-04  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-outobj.melt (output_centraldecl_hookroutine): New
	utility function.
	(outpucod_hookroutine): Us it. More, still incomplete.

2013-04-02  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-outobj.melt (outpucod_hookroutine): More, still
	incomplete.

2013-04-02  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-outobj.melt (outdeclinit_objinithook): New method
	for output_c_declinit on class_objinithook instances.
	(outcinitfill_objinithook): New incomplete stub method for
	output_c_initial_fill on class_objinithook instances.


2013-04-02  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-outobj.melt (outpucod_objputhookconst): New
	incomplete stub method for output_c_code on class_objputhookconst
	instances.


2013-04-02  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-genobj.melt (class_objputhookconst): New class with
	fields ophconst_hook ophconst_off ophconst_cval.
	(compilobj_datahook): Complete, with more debug.

2013-03-29  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-normal.melt (normexp_defhook): Probably complete.
	(normalize_lambda): Reindent.

	* melt/warmelt-genobj.melt (class_objinithook): New class with
	field oihk_prochook.
	(compilobj_datahook): Still incomplete.

	* testsuite/melt/thook-1.melt (myref): New definstance, to have a
	closed value in the hook.

2013-03-29  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+03.c: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+06.c: Regenerate.
	* melt/generated/warmelt-genobj+07.c: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+06.c: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-03-29  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-first.melt (list_to_multiple): Improve and use
	foreach_in_list instead of list_every.

	* melt/warmelt-genobj.melt (compilobj_catchall_nrep): More debug.
	(compilobj_datahook): New stub method for compile_obj on
	class_nrep_datahook.

	* testsuite/melt/thook-1.melt (anotherhook): Comment it
	temporarily.

2013-03-29  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-normal.melt (normexp_defun, normalize_lambda)
	(normexp_lambda): More debug.

	* melt/warmelt-genobj.melt (compile2obj_hook): More debug.
	(compilobj_nrep_lambda): More debug, use a foreach_in_multiple
	instead of multiple_every.
	(compilobj_dataroutine): More debug. Use foreach_in_list instead
	of list_every.


2013-03-29  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-genobj.melt (compile2obj_hook): input & output
	formals are growing the locmap.
	(compilobj_dataroutine): More debug.

2013-03-28  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-genobj.melt (compilobj_nrep_let): Replace carefully
	multiple_every with foreach_in_multiple.


2013-03-28  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+06.c: Regenerate.
	* melt/generated/warmelt-genobj+07.c: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+06.c: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+01.c: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+03.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+06.c: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.


2013-03-28  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-genobj.melt (compilobj_nrep_let): Replace some but
	not all multiple_every by foreach_in_multiple.

2013-03-28  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-genobj.melt (compilobj_nrep_constocc): Handle both
	hooks and routines..


2013-03-28  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-genobj.melt (class_objclohookv): New class.

	* melt/warmelt-outobj.melt (outpucod_objclohookv): New method for
	output_c_code of class_objclohookv.


2013-03-28  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-normal.melt (normexp_symbol): Handle constants in
	hooks but not yet closed variables...

	* melt/warmelt-genobj.melt (compilobj_nrep_constocc): Don't handle
	yet hooks.

	* testsuite/melt/thook-1.melt: Better indentations, with more
	lines...


2013-03-28  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-normal.melt (class_nrep_hookproc): Add field
	nrhook_closedbindlist.
	(normbind_constructbind): Use when instead of if.
	(normexp_symbol): Improve the comment.  Better debugs. Incomplete
	handling of hook procedure for closed constants. Also replace some
	every_list by foreach_in_list.
	(normexp_defhook): Initialize the :nrhook_clsedbindlist to an
	empty list.

	* testsuite/melt/thook-1.melt (anotherhook): Add.

2013-03-26  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-normal.melt (normexp_symbol): Better debug.

2013-03-26  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-normal.melt (normbind_anybind): Better debug.
	(normexp_symbol): Replace list_every with foreach_in_list.

2013-03-26  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+02.c: Regenerate.
	* melt/generated/warmelt-base+03.c: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+02.c: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+03.c: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+06.c: Regenerate.
	* melt/generated/warmelt-genobj+07.c: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+01.c: Regenerate.
	* melt/generated/warmelt-macro+02.c: Regenerate.
	* melt/generated/warmelt-macro+03.c: Regenerate.
	* melt/generated/warmelt-macro+04.c: Regenerate.
	* melt/generated/warmelt-macro+05.c: Regenerate.
	* melt/generated/warmelt-macro+06.c: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+03.c: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+06.c: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+01.c: Regenerate.
	* melt/generated/warmelt-normatch+02.c: Regenerate.
	* melt/generated/warmelt-normatch+03.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch+06.c: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+01.c: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+03.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+06.c: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-03-26  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-genobj.melt (class_hookroutineobj): Add
	ohookrout_epilog field.
	(compile2obj_hook): Done, but not tested.

	* melt/warmelt-outobj.melt (outpucod_procroutine)
	(outpucod_initialmoduleroutine): Generated labels start with
	meltlab_...
	(outpucod_hookroutine): New stub method for output_c_code of
	class_hookroutineobj.

2013-03-26  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-genobj.melt (compile2obj_hook): More, but still
	incomplete.

2013-03-26  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-outobj.melt (translate_macroexpanded_list): Test
	first for hooks.

2013-03-22  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+02.c: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+06.c: Regenerate.
	* melt/generated/warmelt-genobj+07.c: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+01.c: Regenerate.
	* melt/generated/warmelt-macro+02.c: Regenerate.
	* melt/generated/warmelt-macro+03.c: Regenerate.
	* melt/generated/warmelt-macro+04.c: Regenerate.
	* melt/generated/warmelt-macro+05.c: Regenerate.
	* melt/generated/warmelt-macro+06.c: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+06.c: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+01.c: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+03.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+06.c: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-03-22  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-normal.melt (normexp_defhook): Return the nproc.

	* melt/warmelt-genobj.melt (compile2obj_hook): Add incomplete
	stub.

	* melt/warmelt-outobj.melt (translate_macroexpanded_list): Call
	compile2obj_hook for hooks.

	* testsuite/melt/thook-1.melt: Improve.

2013-03-22  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-macro.melt (mexpand_defhook): Extend the current
	-not the new- environment with the hook binding.

	* melt/warmelt-normal.melt (normexp_defhook): More debug.

2013-03-22  Basile Starynkevitch  <basile@starynkevitch.net>

	{{defhook wants a result ctype}}
	* melt/warmelt-macro.melt (class_source_defhook): Add shook_ctype
	field.
	(mexpand_defprimitive): More checks.
	(mexpand_defhook): parse the ctype of result.

	* melt/warmelt-normal.melt (class_nrep_hookproc): Add nrhook_ctype
	field.
	(normexp_defhook): More code.

	* testsuite/melt/thook-1.melt: More code, since result.

2013-03-21  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-normal.melt (normexp_defhook): More, now
	normalizing the body...

2013-03-21  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-debug.melt (dbgout_fields): Revert the change from
	svn rev 196877.

2013-03-21  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}

	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+02.c: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+03.c: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+07.c: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+06.c: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-03-21  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-first.melt (discr_hook): Export it.
	* melt/warmelt-debug.melt (dbgout_fields): Add an indent if depth
	is at most 1.
	* melt/warmelt-normal.melt (normexp_defhook): Still incomplete.

2013-03-21  Basile Starynkevitch  <basile@starynkevitch.net>

	* testsuite/melt/thook-1.melt: New file.
	* melt/warmelt-normal.melt (normexp_defhook): Still incomplete.

2013-03-21  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-normal.melt (class_nrep_hookproc): New class with
	fields nrhook_name, nrhook_inb, nrhook_outb, nrhook_datahook.
	(class_nrep_datahook): New class with fields ndhook_proc,
	ndhook_closv.
	(normexp_defhook): New incomplete method for normal_exp of
	class_source_defhook.

2013-03-21  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-predef.list (DISCR_HOOK): New predefined.

	* melt/warmelt-first.melt (discr_hook): New discriminant for hook
	values.

2013-03-21  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+03.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+03.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+07.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-macro+01.c: Regenerate.
	* melt/generated/warmelt-macro+02.c: Regenerate.
	* melt/generated/warmelt-macro+03.c: Regenerate.
	* melt/generated/warmelt-macro+04.c: Regenerate.
	* melt/generated/warmelt-macro+05.c: Regenerate.
	* melt/generated/warmelt-macro+06.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2013-03-21  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (MELT_HOOKNAME_LEN): New macro constant.

	* melt/warmelt-base.melt (valdesc_routine): Also forward routdata
	in struct melt_routine_st.
	(valdesc_hook): New value descriptor.

2013-03-21  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-first.melt (class_hook_binding): New class
	with hookbind_defhook field.

	* melt/warmelt-macro.melt (mexpand_defhook): Complete.

2013-03-19  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate all}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+02.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+07.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-macro+01.c: Regenerate.
	* melt/generated/warmelt-macro+02.c: Regenerate.
	* melt/generated/warmelt-macro+03.c: Regenerate.
	* melt/generated/warmelt-macro+04.c: Regenerate.
	* melt/generated/warmelt-macro+05.c: Regenerate.
	* melt/generated/warmelt-macro+06.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+01.c: Regenerate.
	* melt/generated/warmelt-normatch+02.c: Regenerate.
	* melt/generated/warmelt-normatch+03.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch+06.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+03.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+06.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2013-03-19  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-macro.melt (mexpand_defhook): New very incomplete.
	(class_source_defhook): New class with fields shook_out_formals
	shook_predef shook_body.

2013-03-19  Basile Starynkevitch  <basile@starynkevitch.net>
	{{grouped GC predefined roots in chunks}}
	* melt-runtime.h (melt_globarr): Remove declaration.
	(MELT_GLOBAL_ENTRY_CHUNK, MELT_NB_GLOBAL_CHUNKS, MELT_NB_GLOBALS):
	New macros.
	(melt_globalptrs): New array declaration.
	(melt_touchedglobalchunk): New boolean array for changes of global
	predefined roots.
	(melt_fetch_predefined): Use melt_globalptrs instead of melt_globarr.
	(melt_store_predefined): Likewise, and update
	melt_touchedglobalchunk.
	* melt-runtime.c (melt_globarr): Remove definition.
	(melt_globalptrs, melt_touchedglobalchunk): Add definitions.
	(melt_minor_copying_garbage_collector): Forward only the touched
	globals, by chunks. Use melt_globalptrs & melt_touchedglobalchunk.

2013-03-14  Basile Starynkevitch  <basile@starynkevitch.net>
	{{tmatch-5 is still not working....}}
	* melt/warmelt-normatch.melt (translate_andpat, translate_orpat):
	More debug messages.

2013-03-14  Basile Starynkevitch  <basile@starynkevitch.net>
	{{tmatch-5 is still not working....}}
	* melt/warmelt-normatch.melt (scanpat_srcpatand, normpat_andpat)
	(translate_andpat): More debug messages.
	* melt/warmelt-outobj.melt (outpucod_objlabelinstr): Emit #if
	MELTDEBUG_MATCH instead of MELTDEBUG_LABEL.
	* testsuite/melt/tmatch-5.melt: not working yet. Reordored
	slightly, use MELTDEBUG_MATCH...

2013-03-12  Basile Starynkevitch  <basile@starynkevitch.net>
	{{still different issue with mstep_else, tmatch-5.melt is now
	indefinitely looping wrongly}}
	* melt/warmelt-normatch.melt (translate_matchcase): Add
	put_else_match, but tmatch-5.melt is incorrectly looping.

	* melt/warmelt-outobj.melt (outpucod_objlabelinstr): Emit a
	debugging mesage for labels wrapped by #if MELTDEBUG_LABEL.

	* testsuite/melt/tmatch-5.melt: not working yet. Looping!

2013-03-12  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-debug.melt (dbgout_mapobject_method): Avoid dumping
	large maps when deep printing.

	{{still the issue with mstep_else.}}
	* melt/warmelt-normatch.melt: More debugging.
	(translate_matchcase) probably needs the put_else_match near line
	5074, which was explicitly removed at some time in the past.

2013-03-01  Basile Starynkevitch  <basile@starynkevitch.net>
	{{still an issue with mstep_else somewhere}}
	* melt/warmelt-normatch.melt: More debug.

2013-03-01  Basile Starynkevitch  <basile@starynkevitch.net>

	{{some mstep_else are missing for tmatch-5.melt case tmini5}}
	* melt/warmelt-normatch.melt (set_new_tester_all_elses)
	(normvarpat_genreusetest, normpat_tuplepat, normpat_andpat)
	(normpat_constpat, putelse_matchstepthen, putelse_matchtest)
	(putelse_matchgroup, translpat_andpat, translpat_constpat)
	(normexp_matchalt): More debug.
	(class_nrep_altmatch): Remove synonym.

2013-02-28  Basile Starynkevitch  <basile@starynkevitch.net>
	* Makefile.in (upgrade-warmelt): Make a backup copy only of
	already existing files.

	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+02.c: Regenerate.
	* melt/generated/warmelt-base+03.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+02.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+03.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+06.c: Regenerate.
	* melt/generated/warmelt-genobj+07.c: New generated file.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-macro+01.c: Regenerate.
	* melt/generated/warmelt-macro+02.c: Regenerate.
	* melt/generated/warmelt-macro+03.c: Regenerate.
	* melt/generated/warmelt-macro+04.c: Regenerate.
	* melt/generated/warmelt-macro+05.c: Regenerate.
	* melt/generated/warmelt-macro+06.c: New generated file.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+03.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+06.c: New generated file.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+01.c: Regenerate.
	* melt/generated/warmelt-normatch+02.c: Regenerate.
	* melt/generated/warmelt-normatch+03.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch+06.c: New generated file.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+01.c: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+03.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+06.c: New generated file.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2013-02-28  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-normatch.melt (normstep_mtestinstance): More
	debugging.

	* melt/warmelt-genobj.melt: Add comment about threshold for
	splitting.
	(compile2obj_procedure): Lowered the number of functions per
	secondary files to 20 and increased the offset for the primary
	file to 12.
	(compilobj_nrep_matchalt): More debug.

2013-02-27  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.c (melt_load_module_index): Remove useless clear of
	dlh.

2013-02-27  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-normatch.melt (normstep_mtestmatcher): Works better
	because the appropriate jumps are generated and inserted. tmatch-5
	tmini5 passes for t1, but not yet for t2...

2013-02-27  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-normatch.melt (normstep_msuccwhenflag): End the
	actions with a jump to end, and jump to the then part if the flag
	is cleared. But still tmini5 in tmatch-5.melt don't pass.

2013-02-26  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-module.mk (melt_workspace): Also display GCCMELT_CFLAGS.

	* melt/warmelt-normatch.melt (normstep_msuccwhenflag): Don't
	complete_normstep_if the jumpthen... More debug.

	* testsuite/melt/tmatch-5.melt (tmini5): test still not working.

2013-02-25  Basile Starynkevitch  <basile@starynkevitch.net>
	* testsuite/melt/tmatch-5.melt (tmini5): test not yet working.

2013-02-25  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.c (melt_argument): Use a switch for the MELT
	branch.

2013-02-25  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.c (melt_argument): Sort the compares for MELT
	branch.

2013-02-25  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.c (melt_argument): Sort the compares for MELT
	branch.

2013-02-07  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+02.c: Regenerate.
	* melt/generated/warmelt-base+03.c: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+06.c: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+01.c: Regenerate.
	* melt/generated/warmelt-normatch+02.c: Regenerate.
	* melt/generated/warmelt-normatch+03.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-02-07  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-base.melt (complete_sequence_as_list)
	(complete_sequence_as_tuple): New exported functions.

	* melt/warmelt-normatch.melt (normstep_mflagset): Use it.

2013-02-07  Basile Starynkevitch  <basile@starynkevitch.net>

	* gdbinit.in: Explicitly set the number of printed elements

	* melt-runtime.c (melt_compile_source): More debug.

2013-02-05  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-normatch.melt (complete_normstep_if_last): Check
	that no jumps are involved...

	(normstep_mtestvar): Simply use the jumps...

2013-02-01  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-normatch.melt (complete_normstep_if_last): Does not
	make sense when normstep is a jump....

	* melt/warmelt-genobj.melt (compilobj_nrep_matchedata): Better
	debug...

2013-01-31  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-normatch.melt (match_data_update_steps_index)
	(normstep_mtestmultiple, normstep_msuccwhenflag)
	(normstep_mtestmatcher): More debug.

2013-01-31  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-normatch.melt (complete_normstep_if_last): Adding
	more debug.

2013-01-29  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-normatch.melt (normstep_mflagset)
	(normstep_mflagconj, normstep_mtestinstance): More debug.

2013-01-29  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-normatch.melt (normstep_mtestvar)
	(complete_normstep_if_last): Adding more debugs.

	* testsuite/melt/tmatch-5.melt: Reindent.

2013-01-25  Basile Starynkevitch  <basile@starynkevitch.net>

	* testsuite/melt/tmatch-5.melt: Simplified, still failing.

	* melt/warmelt-normatch.melt (complete_normstep_if_last): Added
	more debug, probably still wrong or wrongly called.

2013-01-25  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-genobj.melt (dispose_objloc, compilobj_nrep_progn)
	(compilobj_nrep_matchdatafinal): More debug.

2013-01-25  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-normatch.melt (scanstepdata_testvariable): New
	method for scan_step_data of class_match_step_test_variable.

2013-01-23  Basile Starynkevitch  <basile@starynkevitch.net>
	{{improved tmatch-5.melt still fails}}

	* melt-runtime.c (melt_dbgshortbacktrace): Improve output.

	* melt/warmelt-genobj.melt (dispose_objloc): More debug.
	(compilobj_nrep_progn): More debug.
	(compilobj_nrep_matchdatafinal): Don't clear the data, just
	dispose it.

2013-01-23  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-genobj.melt (compilobj_nrep_matchdatafinal):
	Implement and dispose the compiled location for the data.

2013-01-23  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-genobj.melt (compilobj_nrep_matchdatafinal): New
	incomplete method for compile_obj on
	class_nrep_match_data_finalizer.

2013-01-23  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-normatch.melt (normstep_mtestvar): Better debug
	print.

	* melt/warmelt-genobj.melt (compilobj_nrep_ifsame): Implement.

2013-01-23  Basile Starynkevitch  <basile@starynkevitch.net>
	* gcc/testsuite/melt/tmatch-5.melt: Use referenced_value field
	everywhere, and change to current MELT dialect...

	* melt/warmelt-genobj.melt (compilobj_nrep_ifsame): New incomplete
	method for compile_obj on class_nrep_ifsame.

2013-01-22  Basile Starynkevitch  <basile@starynkevitch.net>
	* gcc/testsuite/melt/tmatch-5.melt: Change to altmatch.

2013-01-22  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+06.c: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-01-22  Basile Starynkevitch  <basile@starynkevitch.net>

	{{tmatch-tuple.melt test running ok}}
	* testsuite/melt/tmatch-tuple.melt: Improve comment.
	* melt/warmelt-normatch.melt (class_nrep_matchalt): Add
	namatch_startlabel field.
	(class_match_normalization_context): Add matnorx_startlabel field.
	(matchalt_normalize_match_context): More debug printing. Compute
	the firststeplab and put it into the context.
	(normexp_matchalt): Use the start label.

	* melt/warmelt-genobj.melt (compilobj_nrep_matchalt): Handle the
	start label by forcibly generate a useless jump to it to make GCC
	compiling the emitted code happier.

2013-01-22  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+06.c: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+01.c: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+03.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.


2013-01-22  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-outobj.melt (outpucod_objflag): Implement.
	(outpucod_objmatchflagblock): Better emitted indentation.

2013-01-22  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-outobj.melt (outpucod_objflag): New stub method for
	output_c_code of class_objflag.

2013-01-22  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-genobj.melt (class_objflag): Export it.

	* melt/warmelt-outobj.melt (outpucod_objmatchflagblock): Complete.

2013-01-17  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-genobj.melt (compilobj_nrep_matchalt): Make a block
	of class_objmatchflagblock.

	* melt/warmelt-outobj.melt (outpucod_objmatchflagblock): New
	unimplemented method for output_c_code of class_objmatchflagblock.

2013-01-17  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-normatch.melt (normexp_matchalt): Append the result to body.
	* melt/warmelt-genobj.melt (compilobj_nrep_matchlabelend): New
	method for compile_obj of class_nrep_match_label_end.
	(compilobj_nrep_matchalt): Append the result.

2013-01-17  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-genobj.melt (compilobj_nrep_matchjump): Correct typo.

2013-01-17  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-normatch.melt (mg_altdraw_graphviz): Add comment.

	* melt/warmelt-genobj.melt (compilobj_nrep_matchjump): Generate a
	goto instruction.

2013-01-17  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-normatch.melt (mg_altdraw_graphviz): Change format
	of number display.

	* melt/warmelt-genobj.melt (class_alternate_match_nrep_data): Add
	altmatchn_number & altmatchn_stepmap & altmatchn_labprefix fields.
	(compilobj_nrep_matchalt): Fill them. Generate the stepmap to
	uniquely number steps.
	(compilobj_nrep_matchlabel): Generate a label instruction.

2013-01-16  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-module.mk: Update copyright year.
	Comment debug $(info ...) messages.

	{{Regenerate}}
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+02.c: Regenerate.
	* melt/generated/warmelt-base+03.c: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+02.c: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+03.c: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+06.c: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+01.c: Regenerate.
	* melt/generated/warmelt-macro+02.c: Regenerate.
	* melt/generated/warmelt-macro+03.c: Regenerate.
	* melt/generated/warmelt-macro+04.c: Regenerate.
	* melt/generated/warmelt-macro+05.c: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+03.c: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+01.c: Regenerate.
	* melt/generated/warmelt-normatch+02.c: Regenerate.
	* melt/generated/warmelt-normatch+03.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+01.c: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+03.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-01-16  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-debug.melt: Update copyright year.
	(dbgout_anyobject_method): Use get_int to retrieve the obj_num.

	* melt/warmelt-normatch.melt (normexp_match): More debug & asserts.
	(translpat_constpat): Use get_field not unsafe_get_field. Check
	steplist.
	(translpat_varpat, translpat_patmat): Likewise.
	(match_data_update_data_steps_index)
	(matchalt_handle_normalized_mdata): Better debug.

	* melt/warmelt-genobj.melt (compilobj_nrep_matchalt): Bette
	rdebug.
	(compilobj_nrep_matchjump): Still incomplete. Add failing assert
	to stop here.

2013-01-15  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-genobj.melt (compilobj_nrep_matchjump): Still incomplete.

	* testsuite/melt/tmatch-tuple.melt: More options in comment.

2013-01-15  Basile Starynkevitch  <basile@starynkevitch.net>

	* common.opt (-fmelt-keep-temporary-files): New flag.

	* melt-runtime.c: Update copyright years.
	(melt_flag_keep_temporary_files): New variable in plugin.
	(melt_argument): Handle it.
	(tempdir_melt): Rename as ...
	(melt_tempdir, melt_made_tempdir): New variables.
	(melt_tempdir_path): Use it.
	(do_finalize_melt): Rename as melt_do_finalize.
	(melt_finishall_callback): Call it.
	(melt_load_module_index): Use melt_tempdir.
	(melt_do_finalize): Renamed function. Don't remove temporary files
	when melt_flag_keep_temporary_files.
	(melt_really_initialize): Set melt_flag_keep_temporary_files in plugin.
	(melt_finalize): Call melt_do_finalize.
	(melt_output_cfile_decl_impl_secondary_option): Use remove not
	unlink.


2013-01-15  Basile Starynkevitch  <basile@starynkevitch.net>
	{{mini-milestone: bad C code emitted for matchalt!}}
	* melt/warmelt-normatch.melt (normexp_matchalt): Missing binding
	in clocc for matchaltres_ local symbol.

2013-01-15  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-genobj.melt (compilobj_nrep_let): Remplace some
	multiple_every with a foreach_in_multiple.
	(compilobj_nrep_matchalt): Return the oblock.

2013-01-08  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-genobj.melt (compilobj_nrep_matchalt): Return the
	obodyl. Perhaps incomplete.

2013-01-07  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-normal.melt (normalize_tuple): Improve debug and asserts.

	* melt/warmelt-normatch.melt (normexp_matchalt): More complete.

2013-01-04  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-normal.melt (normalize_tuple): Better debug.
	Use foreach_in_list, not list_every.

	* melt/warmelt-outobj.melt (outpucod_objchecksignal): Use
	output_raw_location.

2013-01-04  Basile Starynkevitch  <basile@starynkevitch.net>
	* testsuite/melt/tmatch-tuple.melt: Uopdate comment giving command.
	Use matchalt.

2013-01-04  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-normatch.melt (class_nrep_altmatch, normexp_altmatch): Rename as
	(class_nrep_matchalt, normexp_matchalt).
	(alternate_match_optset): Exchange the match & altmatch normalizations.

	* melt/warmelt-genobj.melt (compilobj_nrep_altmatch): Rename as
	(compilobj_nrep_matchalt): and install it as compilation of
	class_nrep_matchalt.

2013-01-04  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+01.c: Regenerate.
	* melt/generated/warmelt-macro+02.c: Regenerate.
	* melt/generated/warmelt-macro+03.c: Regenerate.
	* melt/generated/warmelt-macro+04.c: Regenerate.
	* melt/generated/warmelt-macro+05.c: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2013-01-04  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-macro.melt (class_source_matchalt): New temporary
	class, subclass of CLASS_SOURCE_MATCH.
	(mexpand_matchalt): New temporary macro expander.
	(matchalt): New temporary macro.

2013-01-04  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.h (MELT_VERSION_STRING): Bump to 0.9.8-post

2012-12-22  Basile Starynkevitch  <basile@starynkevitch.net>
	{{MELT plugin 0.9.8 release}}
	* melt-runtime.h (MELT_VERSION_STRING): Bump to 0.9.8
	* melt-runtime.c (ggc_alloc_cleared_melt_valuevector_st): Macro
	defined if not gengtype generated.
	(melt_resize_scangcvect): Use it.
	(melt_intern_cstring): Declare ix, oix outside of for loop. Force
	the const cast.

2012-12-21  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.c (do_finalize_melt): Properly remove files in
	temporary directory, by rebuilding their full path and handling
	symlinks.

2012-12-21  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.h (MELT_VERSION_STRING): Bump to 0.9.8-rc3

	* melt-runtime.c (do_finalize_melt): Improve message when rmdir of
	tempdir fails.

2012-12-14  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.c (melt_finishall_callback)
	(meltgc_all_passes_start_callback, meltgc_all_passes_end_callback)
	(meltgc_all_ipa_passes_start_callback)
	(meltgc_all_ipa_passes_end_callback)
	(meltgc_early_gimple_passes_start_callback)
	(meltgc_early_gimple_passes_end_callback): Add debug printing.

2012-12-14  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-module.mk: Typo in message "GCCMELTGEN_BUILD set"...

2012-12-11  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.h (MELT_VERSION_STRING): Bump to 0.9.8-rc2.

2012-12-11  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.h (MELT_VERSION_STRING): Late bump to 0.9.8-rc1.

	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+04.c: Regenerate.
	* melt/generated/warmelt-macro+05.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.


2012-12-11  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-normal.melt (normexp_unbox): New method for
	normal_exp on class_source_unbox.

2012-12-11  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/xtramelt-ana-gimple.melt (dbgout_mapgimple_method): Add
	assert.

2012-12-11  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/xtramelt-ana-gimple.melt (dbgout_mapgimple_method): New
	method for dbg_output on discr_map_gimples.

2012-12-11  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-macro.melt (mexpand_unbox): Done.

2012-12-10  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-macro.melt (mexpand_unbox): Even more.

2012-12-10  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-macro.melt (mexpand_unbox): Some more.

2012-12-10  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/warmelt-base+02.c: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+01.c: Regenerate.
	* melt/generated/warmelt-macro+02.c: Regenerate.
	* melt/generated/warmelt-macro+03.c: Regenerate.
	* melt/generated/warmelt-macro+04.c: Regenerate.
	* melt/generated/warmelt-macro+05.c: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2012-12-10  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-base.melt: Several plugin hooks were running the
	wrong delayed queue.
	(melt_all_passes_start_runner)
	(register_all_passes_start_hook_first)
	(register_all_passes_start_hook_last): Use
	all_passes_start_delayed_queue.
	(register_all_passes_end_hook_first)
	(register_all_passes_end_hook_last): Use
	all_passes_end_delayed_queue.
	(melt_early_gimple_passes_start_runner)
	(register_early_gimple_passes_start_hook_first)
	(register_early_gimple_passes_start_hook_last): Use
	early_gimple_passes_start_delayed_queue.

2012-12-06  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-macro.melt (class_source_unbox): New, with fields
	sunbox_ctype & sunbox_expr.
	(constant_box): Typo in its expander.
	(mexpand_unbox): Incomplete.

2012-12-04  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+03.c: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+01.c: Regenerate.
	* melt/generated/warmelt-macro+02.c: Regenerate.
	* melt/generated/warmelt-macro+03.c: Regenerate.
	* melt/generated/warmelt-macro+04.c: Regenerate.
	* melt/generated/warmelt-macro+05.c: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+03.c: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2012-12-04  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-first.melt (discr_constant_tree): Typo in its
	named_name.

2012-12-04  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-modes.melt (generate_runtypesupport_boxingfun):
	Emit correct cast.

2012-12-04  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (MELT_VERSION_STRING): Bump to 0.9.8-rc0

2012-12-04  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-normal.melt (normexp_constbox): New method for
	class_source_constant_box.

2012-12-04  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-modes.melt (generate_runtypesupport_boxingfun):
	Better.

2012-12-04  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-modes.melt (generate_runtypesupport_boxingfun):
	Avoid updating ctype of ctype_autoconstboxdiscr...

2012-12-04  Basile Starynkevitch  <basile@starynkevitch.net>
	{{all debug output shows the discriminant at depth 0}}
	* melt/warmelt-debug.melt (dbgout_string_method)
	(dbgout_mixint_method, dbgout_mixloc_method)
	(dbgout_multiple_method, dbgout_routine_method)
	(dbgout_closure_method, dbgout_list_method, dbgout_pair_method)
	(dbgout_mapobject_method, dbgout_mapstring_method): Show
	discriminant at depth 0.

2012-12-04  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-normal.melt (normexp_box): Works.

2012-12-04  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.c (MELT_DEFAULT_DEBUG_DEPTH): Increase to 9.
	(MELT_MAXIMAL_DEBUG_DEPTH): Increase to 28.

	* melt/warmelt-normal.melt (normexp_box): More, but still not
	working.

	* melt/warmelt-modes.melt (eval_docmd, evalfile_docmd)
	(repl_processor): The :dbgi_maxdepth uses debug_depth.


2012-12-03  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-first.melt (class_ctype_plain): Export that class.

	* melt/warmelt-normal.melt (normexp_box): More but still
	incomplete.

2012-12-03  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-macro.melt (mexpand_box, mexpand_constant_box): put
	the macro-expanded argument inside the class_source_box etc...

2012-12-03  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-macro.melt (class_source_quasi_box)
	(class_source_box, class_source_constant_box): New classes with
	sboxed field.
	(mexpand_box, mexpand_constant_box): New methods.
	(box, constant_box): New macros.

	* melt/warmelt-normal.melt (normexp_box): New incomplete method.

2012-12-02  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-first.melt (class_ctype_gty, ctype_tree)
	(ctype_gimple, ctype_gimple_seq, ctype_basic_block, ctype_edge)
	(ctype_loop, ctype_rtx, ctype_bitmap, ctype_rtvec): Remove use of
	obsolete ctypg_boxdiscr field.

2012-12-02  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+03.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2012-12-02  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-first.melt: Use dash for copyright years.
	(ctype_rtx, ctype_bitmap, ctype_rtvec): Give the
	:ctype_autoboxdiscr.

2012-12-02  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-first.melt (discr_constant_tree)
	(discr_constant_gimple, discr_constant_gimple_seq)
	(discr_constant_edge, discr_constant_basic_block)
	(discr_constant_loop): New.
	(ctype_tree, ctype_gimple, ctype_gimple_seq, ctype_edge)
	(ctype_basic_block, ctype_loop): Mention them.
	(ctypg_boxdiscr): Obsolete field.

	* melt/warmelt-outobj.melt (autobox_normal_return): Use
	:ctype_autoboxdiscr not :ctypg_boxdiscr.

	* melt/warmelt-modes.melt (generate_runtypesupport_boxingfun):
	Ditto.

	* melt-predef.list (DISCR_CONSTANT_BASIC_BLOCK)
	(DISCR_CONSTANT_EDGE, DISCR_CONSTANT_GIMPLE)
	(DISCR_CONSTANT_GIMPLE_SEQ, DISCR_CONSTANT_LOOP)
	(DISCR_CONSTANT_TREE): New.

2012-11-30  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+03.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-macro+04.c: Regenerate.
	* melt/generated/warmelt-macro+05.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2012-11-30  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-first.melt (class_ctype): Add ctype_autoboxdiscr &
	ctype_autoconstboxdiscr fields.

2012-11-30  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-macro.melt (mexpand_let): Default ctype is :auto...

2012-11-29  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+01.c: Regenerate.
	* melt/generated/warmelt-macro+02.c: Regenerate.
	* melt/generated/warmelt-macro+03.c: Regenerate.
	* melt/generated/warmelt-macro+04.c: Regenerate.
	* melt/generated/warmelt-macro+05.c: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2012-11-29  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-normal.melt (normexp_let): More debugging, use a
	foreach_in_multiple loop...

2012-11-29  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-macro.melt (lambda_arg_bindings): Reject :auto in formals.

	* melt/warmelt-normal.melt (normexp_let): Handle quasi_ctype_auto.

2012-11-27  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+03.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-macro+01.c: Regenerate.
	* melt/generated/warmelt-macro+04.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+01.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+03.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.


2012-11-27  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-first.melt (class_quasi_ctype): New class, above class_ctype.
	(quasi_ctype_auto): New instance.

	* melt/warmelt-macro.melt (mexpand_letbinding): Accept :auto...

2012-11-27  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2012-11-27  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/xtramelt-ana-base.melt: Painfully merged to new 4.8 trunk,
	with incompatible use of vectors provided in vec.h.
	(foreach_superloop, foreach_dominated_unsafe)
	(each_cgraph_fun_call_flow_graph, loop_body_tuple)
	(foreach_loop_exit_edges): #if specific code for GCC 4.8 with its
	vec<> template.

2012-11-27  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-outobj.melt (syntestgen_primitive)
	(syntestgen_citerator, syntestgen_cmatcher): Identifiers emitted
	in syntax checking routines should have a melt prefix.

2012-11-27  Basile Starynkevitch  <basile@starynkevitch.net>

	{{no more DEF_VEC in melt-runtime.*}}
	* melt-runtime.c (meltchar_p): Remove type, and its DEF_VEC_P.
	(parsedmeltfilevect): Remove static variable.
	(melt_skipspace_getc): Use melt_intern_cstring for newpathdup.
	(meltgc_read_file): Use melt_intern_cstring for the path.
	(melt_really_initialize): Remove parsedmeltfilevect.
	(do_finalize_melt): Use a xcalloc-ed array for temporary directory
	entries.

2012-11-26  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (melt_intern_cstring): New function declaration.

	* melt-runtime.c (melt_intstrhtab): New static variable.
	(melt_raw_interned_cstring_index): New static function.
	(melt_intern_cstring): New function.

2012-11-26  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-modes.melt (eval_docmd, evalfile_docmd)
	(repl_processor): Increase the dbgi_maxdepth from 8 to 12.

2012-11-26  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.c: Don't use vectors anymore for module & extension
	information, because they are not compatible in GCC 4.7 & GCC 4.8.
	(melt_modinfvec, melt_extinfvec): Remove variable.
	(melt_modulinfo, melt_extinfo): Add new static variable.
	(melt_dlsym_all, melt_load_module_index, meltgc_run_c_extension)
	(meltgc_start_module_by_index, melt_fatal_info): Use and update them.

2012-11-23  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+03.c: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2012-11-23  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-modes.melt (generate_runtypesupport_forwcopy_fun):
	Emit code using melt_scangcvect.

2012-11-23  Basile Starynkevitch  <basile@starynkevitch.net>
	{{removing rare use of vec.h vectors in the runtime, because the
	API changed incompatibly between GCC 4.7 and GCC 4.8}}

	* melt-runtime.h: Don't use DEF_VEC_P anymore, notably for
	melt_ptr_t and meltobject_ptr_t.

	* melt-runtime.c (melt_bscanvec): Remove vector variable.
	(struct melt_valuevector_st): New internal GTY-ed type.
	(melt_scangcvect): New GTY-ed static variable, replacing
	melt_bscanvec.
	(melt_resize_scangcvect): New static function declaration and
	implementation.
	(melt_minor_copying_garbage_collector): initialize, allocate, use,
	fill, and free melt_scangcvect instead of melt_bscanvec.

	* melt/generated/meltrunsup-inc.c (melt_forwarded_copy):
	Hand-edited to use melt_scangcvect instead of melt_bscanvec.

2012-11-23  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (melt_objectvec_t, melt_valvec_t): Remove useless
	typedef-s.

2012-11-18  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-module.mk (GCCMELT_MODULE_VERBOSE_BUILD): Could be set
	externally.
	(GCCMELT_VERBOSE_ECHO): New internal variable, use it everywhere.

2012-11-12  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/xtramelt-ana-gimple.melt (error_at_gimple): New primitive.

	* melt/xtramelt-ana-tree.melt (error_at_tree)
	(tree_create_artificial_label): New primitives.
	(tree_label_decl): New cmatcher.

2012-11-08  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (meltgc_read_file): Improve comment about - as
	stdin.

2012-11-07  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.c (meltgc_read_file): Handle specially - as stdin.

	* melt/warmelt-modes.melt (eval_docmd): Output terminating comment.
	(eval_mode): Improve help message.
	(evalfile_docmd): New function.
	(evalfile_mode): New mode 'evalfile'.

2012-10-28  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/xtramelt-ana-tree.melt (tree_addr_expr): Can be used to
	build trees.
	(tree_va_arg_expr): New cmatcher.

2012-10-24  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/xtramelt-probe.melt (scanprobe_exec): Use output_tree, not
	output_tree_briefly, to show trees..

2012-10-24  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/xtramelt-probe.melt (start_probe): Adding a small usleep to
	let the probe show some windows.

2012-10-23  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/xtramelt-ana-gimple.melt (gimple_assign_bit_and)
	(gimple_assign_bit_ior, gimple_assign_bit_not)
	(gimple_assign_bit_xor, gimple_assign_lrotate)
	(gimple_assign_lshift, gimple_assign_max, gimple_assign_min)
	(gimple_assign_rrotate, gimple_assign_rshift)
	(gimple_assign_widen_mult): New cmatchers.

2012-10-18  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/warmelt-base+02.c: Regenerate.
	* melt/generated/warmelt-base+03.c: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+01.c: Regenerate.
	* melt/generated/warmelt-macro+02.c: Regenerate.
	* melt/generated/warmelt-macro+03.c: Regenerate.
	* melt/generated/warmelt-macro+04.c: Regenerate.
	* melt/generated/warmelt-macro+05.c: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2012-10-18  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-macro.melt (expand_cmatchexpr): Correct detection
	of arity mismatch. Signal an error in that case, not a warning.

2012-10-18  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/xtramelt-ana-tree.melt (tree_type_addr_space, tree_type_p):
	New.

2012-10-17  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-base.melt (register_all_passes_start_hook_first)
	(register_all_passes_start_hook_last)
	(register_all_passes_end_hook_first)
	(register_all_passes_end_hook_last)
	(register_all_ipa_passes_start_hook_first)
	(register_all_ipa_passes_start_hook_last)
	(register_all_ipa_passes_end_hook_first)
	(register_all_ipa_passes_end_hook_last): Correct documentation
	about the closure's signature.

2012-10-16  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/xtramelt-ana-tree.melt (tree_array_type): In expression
	call build_array_type.
	(tree_reference_type): In expression call build_reference_type.

2012-10-12  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (MELT_VERSION_STRING): Bump to 0.9.7-post

	* melt/xtramelt-ana-tree.melt (tree_types_compatible_p)
	(tree_useless_type_conversion_p): New primitives.

2012-10-10  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (MELT_VERSION_STRING): Bump to 0.9.7

2012-10-10  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.


2012-10-10  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.c (melt_really_initialize): tracepath is not
	static.

2012-10-09  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.h (MELT_VERSION_STRING): Bump to 0.9.7-rc4

2012-10-04  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.


2012-10-04  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.h (MELT_VERSION_STRING): Bump to 0.9.7-pre-rc4

2012-10-04  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.h (melt_mark_special_data): Macro, same as
	melt_mark_specialdata.

	* melt/warmelt-base.melt (valdesc_special_data): Use
	melt_mark_specialdata.

2012-10-04  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Probe is showing some SSA gimple also}}
	* melt/xtramelt-probe.melt (scanssaprobe_exec)
	(install_scanssaprobe_pass): New functions
	(probe_docmd): Use them.

2012-10-04  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}

	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+02.c: Regenerate.
	* melt/generated/warmelt-base+03.c: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+02.c: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+03.c: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+06.c: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+01.c: Regenerate.
	* melt/generated/warmelt-macro+02.c: Regenerate.
	* melt/generated/warmelt-macro+03.c: Regenerate.
	* melt/generated/warmelt-macro+04.c: Regenerate.
	* melt/generated/warmelt-macro+05.c: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+03.c: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+01.c: Regenerate.
	* melt/generated/warmelt-normatch+02.c: Regenerate.
	* melt/generated/warmelt-normatch+03.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+01.c: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+03.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2012-10-04  Alexandre Lissy  <alissy@mandriva.com>

	* melt-runtime.c (meltgc_make_special, meltgc_make_specialdata):
	Cast to struct meltspecialdata_st*, not to meltspecialdata_st* for
	C compatibility with GCC 4.6.

2012-10-04  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-debug.melt (class_debug_output_information): New class.
	(dbg_outobject, dbgout_fields)
	(dbgoutagain_fields, dbgout_integer_method, dbgout_mixint_method)
	(dbgout_mixloc_method, dbgout_mixbigint_method)
	(dbgout_routine_method, dbgout_list_method)
	(dbgout_closure_method, dbgout_pair_method)
	(dbgout_mapobject_method, dbgout_anyobject_method)
	(dbgout_environment_method, dbgout_anybinding_method): Test it in
	most debug output methods.
	(display_debug_message): Use it.

	* melt/warmelt-modes.melt (eval_docmd): Use
	class_debug_output_information.

2012-10-04  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.h (MELT_INITFRAME_AT): Show the current __func__.
	(MELT_TRACE_EXIT_LOCATION_AT, MELT_TRACE_EXIT_LOCATION): New macros.
	(MELT_EXITFRAME): Use it.

	* melt/warmelt-outobj.melt (outpucod_procroutine): Emit
	MELT_TRACE_EXIT_LOCATION.

	* melt/warmelt-modes.melt (eval_docmd): Add chunk for location.

2012-10-04  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.c (do_finalize_melt): Improve notice about melt
	location trace.

2012-10-04  Basile Starynkevitch  <basile@starynkevitch.net>

	{{very low level trace location facility}}
	* melt-runtime.h (melt_loctrace_file): New variable.
	(MELT_TRACE_LOCATION): New macro.
	(MELT_INITFRAME_AT, MELT_LOCATION, MELT_LOCATION_HERE_AT)
	(MELT_LOCATION_HERE_PRINTF_AT): Use it.

	* melt-runtime.c (melt_really_initialize, do_finalize_melt): Set
	and handle melt_loctrace_file using GCCMELT_TRACE_LOCATION
	environment variable.

2012-10-03  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-macro+01.c: Regenerate.
	* melt/generated/warmelt-macro+02.c: Regenerate.
	* melt/generated/warmelt-macro+03.c: Regenerate.
	* melt/generated/warmelt-macro+04.c: Regenerate.
	* melt/generated/warmelt-macro+05.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+03.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2012-10-03  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-macro.melt (s_expr_weight): New exported function.
	(mexpand_debug): Use it to warn for heavy debug expressions.

	* melt/warmelt-normal.melt (create_normal_extending_context): Re-indent.

2012-10-03  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.h (MELT_VERSION_STRING): revert to 0.9.7-rc3b

	* melt/warmelt-macro.melt (mexpand_debug): Inform about long debug
	expressions.

2012-10-03  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-outobj.melt (autobox_normal_return): Emit a
	DISCR_CONSTANT_INTEGER.

2012-10-03  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.c (meltgc_add_out_raw_len): Missing break.

2012-10-03  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-modes.melt (repl_docmd): Move the replwelcome_chk
	chunk before.

	* melt-runtime.h (MELT_VERSION_STRING): Bump to 0.9.7-pre.

2012-10-03  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (MELT_MAX_RUNTIME_EXTENSIONS): Decrease to
	3000000.
	(MELT_VERSION_STRING): Bump to 0.9.7-rc3.

	* melt-runtime.c (melt_delete_unmarked_old_specialdata): Improve
	comment by mentionning
	http://gcc.gnu.org/ml/gcc-patches/2012-10/msg00164.html

2012-10-02  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}

	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2012-10-02  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-base.melt (valdesc_special_data): Correct the
	copying chunk again.

2012-10-02  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h: Remove MELT_HAS_OBMAG_SPEC everywhere.

	* melt-runtime.c: Likewise.

2012-10-02  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (melt_mark_specialdata): New function.

	* melt-runtime.c (meltgc_set_dump_file, meltgc_restore_dump_file):
	Improve.

	* melt/warmelt-base.melt (valdesc_special_data): Correct the
	copying chunk.

	{{Painfully regenerate, perhaps needing hand-editing}}
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/warmelt-base+03.c: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2012-10-02  Basile Starynkevitch  <basile@starynkevitch.net>

	{{trying to disable MELT_HAS_OBMAG_SPEC everywhere, so reorganizing some code}}
	* melt-runtime.h (melt_newspeclist, melt_oldspeclist): Declared as MELT_EXTERN.
	(melt_newspecdatalist, melt_oldspecdatalist): New declaration.

	* melt-runtime.c (melt_newspecdatalist, melt_oldspecdatalist): New
	definitions.
	(melt_delete_specialdata, delete_special, meltgc_make_special)
	(meltgc_make_specialdata, melt_delete_unmarked_new_special)
	(melt_delete_unmarked_new_specialdata, melt_clear_old_special)
	(melt_clear_old_specialdata): New or improve function.
	(melt_minor_copying_garbage_collector, melt_garbcoll): Call helper
	functions above.

	* melt/generated/meltrunsup-inc.c (melt_forwarded_copy): Hand-edit
	to almost remove MELTOBMAG_SPEC_FILE & MELTOBMAG_SPEC_RAWFILE cases.

2012-10-01  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-base.melt (valdesc_special_data): Typo in the copy
	chunk.

2012-10-01  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (meltgc_specialdata_sprint): New declaration.
	(melt_is_out): Always check the magic discr.

	* melt-runtime.c (meltgc_specialdata_sprint): New function.
	(meltpydescr_file, meltpydescr_rawfile): Don't use designated
	field initializers.
	(meltpayload_rawfile_destroy, meltpayload_rawfile_sprint)
	(meltpayload_file_destroy, meltpayload_file_sprint): Implement.
	(meltgc_set_dump_file, meltgc_restore_dump_file): New static
	functions.
	(meltgc_gimple_gate, meltgc_gimple_execute, meltgc_rtl_gate)
	(meltgc_rtl_execute, meltgc_simple_ipa_gate)
	(meltgc_simple_ipa_execute): Use them.

2012-10-01  Alexandre Lissy  <alissy@mandriva.com>

	* melt-build-script.tpl: Use >&2 instead of >/dev/stderr
	everywhere.

	* melt-build-script.sh: Regenerate.

2012-09-26  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-first.melt (discr_file, discr_rawfile): Use
	MELTOBMAG_SPECIAL_DATA.

2012-09-26  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.c (meltgc_new_file): Handle special data case.

2012-09-26  Basile Starynkevitch  <basile@starynkevitch.net>
	(melt_clear_special): Remove.

	* melt-runtime.h (MELT_HAS_OBMAG_SPEC): Set to 0, so disable old
	specials.

	* melt/warmelt-base.melt (valdesc_special_file)
	(valdesc_special_raw_file): Remove.

2012-09-26  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+03.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2012-09-26  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (MELT_VERSION_STRING): Bump to 0.9.7-pre-rc3
	(MELT_HAS_OBMAG_SPEC): New configurable macro.
	(meltpydkind_file, meltpydkind_rawfile, meltpydkind_mpfr): New
	enum moved from melt-runtime.c.
	(melt_special_kind): New function.
	(melt_is_out, melt_is_file, melt_get_file): Improve to use
	MELT_HAS_OBMAG_SPEC.
	(melt_clear_special): Remove.
	Remove mpfr related things.

	* melt-runtime.c (MELTPYD_MAX_RANK, meltpyd_array): New.
	(delete_special, meltgc_make_special): Improve to use
	MELT_HAS_OBMAG_SPEC.
	(meltgc_make_specialdata): New.
	(meltpydrank_file, meltpydrank_rawfile, meltpydrank_mpfr): Remove,
	since moved to melt-runtime.h and renamed as meltpydkind_file etc.
	(melt_output_length, meltgc_add_out_raw_len)
	(meltgc_out_add_indent, melt_readsimplelong, meltgc_ppout_gimple)
	(meltgc_ppout_gimple_seq, meltgc_ppout_tree_perhaps_briefly)
	(meltgc_out_edge, meltgc_out_loop, meltgc_new_file): Improve to
	use MELT_HAS_OBMAG_SPEC.
	(melt_clear_special): Remove.

	* melt-predef.list: add DISCR_FILE & DISCR_RAWFILE.

	* melt/warmelt-first.melt (discr_file, discr_rawfile): predefine.

	* melt/warmelt-base.melt (valdesc_special_mpfr): Remove.

	* melt/xtramelt-ana-base.melt (clear_special): Remove.


2012-09-25  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (MELT_VERSION_STRING): Bump to 0.9.7-rc2

2012-09-25  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (MELT_PAYLOAD_DESCRIPTOR_MAGIC): New.
	(struct melt_payload_descriptor_st): New.
	(melt_payload_register_descriptor): New declaration.

	* melt-runtime.c (MELTPYD_MAX_RANK, meltpydrank_file)
	(meltpydrank_rawfile, meltpydrank_mpfr): New constants.
	(meltpydescr_file, meltpydescr_rawfile, meltpydescr_mpfr): New
	static payload descriptors.
	(meltpyd_array): New static array.
	(melt_payload_initialize_static_descriptors): Its initialization
	routine.
	(melt_really_initialize): Call it.

2012-09-25  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (melt_mark_special, melt_get_file): Use
	specialmark & specialpayload fields.
	* melt-runtime.c (delete_special, meltgc_make_special)
	(melt_minor_copying_garbage_collector, melt_garbcoll)
	(meltgc_add_out_raw_len, meltgc_out_add_indent)
	(meltgc_ppout_gimple, meltgc_ppout_gimple_seq)
	(meltgc_ppout_tree_perhaps_briefly, meltgc_out_edge)
	(meltgc_out_loop, meltgc_new_file, meltgc_gimple_gate)
	(meltgc_gimple_execute, meltgc_rtl_gate, meltgc_rtl_execute)
	(meltgc_simple_ipa_gate, meltgc_simple_ipa_execute): Likewise.

	* melt/warmelt-base.melt (valdesc_special_data): Better copy
	chunk.

	{{Regenerate, going to specialdata}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+03.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2012-09-25  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (struct meltspecialpayload_st): New.

	* melt/warmelt-base.melt (valdesc_special_data): New.

2012-09-25  Basile Starynkevitch  <basile@starynkevitch.net>
	{{mark_hook GTY annotation don't work, so need a hack around that.}}

	* melt-runtime.h (melt_mark_special, melt_mark_decay):
	Re-introduced these mark_hook-s which mistakingly are not emitted
	by gengtype.

	* melt-runtime.c (melt_garbcoll): Clear explicitly the mark on old
	special list. Use both mark fields and ggc_marked_p to delete
	them, since gengtype don't honor mark_hook.
	(meltgc_read_file): Re-order local pointer in frame.

2012-09-25  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Read errors are not fatal any more}}
	* melt-runtime.c (struct reading_st): Rename as...
	(struct melt_reading_st): also add readmagic & readjmpbuf fields.
	(MELT_READING_MAGIC): New macro.
	(melt_read_got_error_at): New declaration and function.
	(MELT_READ_ERROR): Call it.
	(melt_skipspace_getc, melt_readsimplename, melt_readsimplelong)
	(meltgc_readseqlist, meltgc_makesexpr, meltgc_readsexpr)
	(meltgc_readstring, meltgc_readmacrostringsequence)
	(melrtgc_readhashescape, meltgc_readval, meltgc_read_file)
	(meltgc_read_from_rawstring, meltgc_read_from_rawstring)
	(meltgc_read_from_val): Check or initialize the magic. When
	initializing melt_reading_st, do a setjmp to catch errors.
	(meltgc_load_one_module, meltgc_poll_inputs): Add a CONST_CAST.

2012-09-25  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/warmelt-base+02.c: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+06.c: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+01.c: Regenerate.
	* melt/generated/warmelt-macro+02.c: Regenerate.
	* melt/generated/warmelt-macro+04.c: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+02.c: Regenerate.
	* melt/generated/warmelt-normatch+03.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+01.c: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+03.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2012-09-25  Basile Starynkevitch  <basile@starynkevitch.net>

	{{eval of trivial name, e.g. class_source, is working}}
	* melt/warmelt-genobj.melt (make_objexpandpureval): Correct result.

2012-09-25  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-genobj.melt (make_objexpandpureval): New exported function.
	(compilobj_nrep_literalvalue): Use it.

2012-09-25  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.c (meltgc_add_out_cstr_len): Introduce curlinoff.

	* melt/warmelt-base.melt (string4out): Better doc.

	* melt/warmelt-genobj.melt (class_objexpandpureval): New class
	with fields oxpurval_loc oxpurval_comm oxpurval_cont.

	* melt/warmelt-outobj.melt (outpucod_objexpandpureval): New method
	for output_c_code on class_objexpandpureval.

2012-09-25  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.c (meltgc_add_out_cstr_len): Increase thresholds to
	auto-add escaped newline.

2012-09-24  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (MELT_VERSION_STRING): Bump to 0.9.7-pre-rc2

	* melt-runtime.c (meltgc_add_out_cstr_len): Output some occasional
	newlines for readability.  Grow the encstr buffer dynamically when
	needed.

	* melt/warmelt-genobj.melt (compile2obj_initextendproc): More
	debugging.

	* melt/warmelt-outobj.melt (outpucod_initialextensionroutine):
	More debugging.

2012-09-20  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (MELT_VERSION_STRING): Bump to 0.9.7-rc1
	Use hyphen in copyright notice.

2012-09-20  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-outobj.melt
	(translate_run_melt_expressions/normalextend): Add autoboxing and
	working return of last value.

2012-09-20  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+02.c: Regenerate.
	* melt/generated/warmelt-base+03.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+02.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+03.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+06.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-macro+01.c: Regenerate.
	* melt/generated/warmelt-macro+02.c: Regenerate.
	* melt/generated/warmelt-macro+03.c: Regenerate.
	* melt/generated/warmelt-macro+04.c: Regenerate.
	* melt/generated/warmelt-macro+05.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+03.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+01.c: Regenerate.
	* melt/generated/warmelt-normatch+02.c: Regenerate.
	* melt/generated/warmelt-normatch+03.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+01.c: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+03.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2012-09-20  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+02.c: Regenerate.
	* melt/generated/warmelt-base+03.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+02.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+03.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+06.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-macro+01.c: Regenerate.
	* melt/generated/warmelt-macro+02.c: Regenerate.
	* melt/generated/warmelt-macro+03.c: Regenerate.
	* melt/generated/warmelt-macro+04.c: Regenerate.
	* melt/generated/warmelt-macro+05.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+03.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+01.c: Regenerate.
	* melt/generated/warmelt-normatch+02.c: Regenerate.
	* melt/generated/warmelt-normatch+03.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+01.c: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+03.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2012-09-20  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+02.c: Regenerate.
	* melt/generated/warmelt-base+03.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+02.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+03.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+06.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-macro+01.c: Regenerate.
	* melt/generated/warmelt-macro+02.c: Regenerate.
	* melt/generated/warmelt-macro+03.c: Regenerate.
	* melt/generated/warmelt-macro+04.c: Regenerate.
	* melt/generated/warmelt-macro+05.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+03.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+01.c: Regenerate.
	* melt/generated/warmelt-normatch+02.c: Regenerate.
	* melt/generated/warmelt-normatch+03.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+01.c: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+03.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2012-09-20  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-outobj.melt
	(translate_run_melt_expressions/normalextend): Use
	autobox_normal_return.

2012-09-20  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-first.melt (ctype_long): Use meltgc_new_int to box.

	* melt/warmelt-outobj.melt (autobox_normal_return): New function.

2012-09-20  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-outobj.melt (translate_run_melt_expressions):
	Change the head of last pair when adding a return.
	Should auto-box non values.

2012-09-19  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.c (melt_print_version_info): Improve output.
	(melt_run_make_for_plugin): Pass BUILD_WITH_CXX_ARG=YesPlugin.
	(melt_run_make_for_branch): Pass BUILD_WITH_CXX_ARG=YesBranch.
	(meltgc_poll_inputs): REPL mode requires accepting 0 as the file
	descriptor.

	* melt-module.mk (GCCMELTGEN_BUILD): Default to realpath of
	GCCMELT_MODULE_WORKSPACE.
	(%.runextend.meltmdsumedpic.o): Improve command.

	* melt/warmelt-base.melt (list_remove_last_element): New.

	* melt/warmelt-outobj.melt
	(translate_run_melt_expressions/normalextend): Remove and replace
	last with a return.

	* melt/warmelt-modes.melt (repl_docmd): The wait function is
	polling for 30 seconds.


2012-09-19  Basile Starynkevitch  <basile@starynkevitch.net>

	* Makefile.in (install-melt-mk): Better sed with ! not / for sed
	command.

2012-09-19  Basile Starynkevitch  <basile@starynkevitch.net>

	* Makefile.in (all-melt): New target

2012-09-19  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+02.c: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+06.c: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+03.c: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2012-09-19  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.h (MELT_VERSION_STRING): Bump to 0.9.7-rc0

2012-09-19  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-modes.melt (repl_mode)
	(class_read_eval_print_loop_data, repl_docmd): Moved from ...
	* melt/xtramelt-ana-simple.melt: Read Eval Print Loop removed,
	since moved to warmelt-modes.melt.

2012-09-19  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.c (melt_load_module_index): melt_modinfvec handling
	slightly different in 4.8 or in earlier GCC.
	(meltgc_run_c_extension): Likewise for melt_extinfvec.
	Add check of melt_versionstr in extension.

2012-09-19  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-base.melt (register_all_passes_end_hook_first):
	Improve doc.

	* melt/xtramelt-ana-simple.melt (repl_mode): New mode repl for
	Read Eval Print Loop.

2012-09-18  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-genobj.melt (compile2obj_initextendproc): Don't
	compile again the instances of class_nrep_routproc in the top
	normal nbody.

	* melt/warmelt-outobj.melt
	(translate_run_melt_expressions/normalextend): Should auto-box
	non-values.

2012-09-18  Basile Starynkevitch  <basile@starynkevitch.net>

	{{The eval mode seems to work on simple input like (quote 1) for
	the first time!}}
	* melt/warmelt-genobj.melt (compile2obj_initextendproc): Also
	compiles the body.

	* melt/warmelt-outobj.melt (compilobj_nrep_return): Reject
	secondary returns for initial routine. Emit
	melt_warn_for_no_expected_secondary_results only for non-initial
	routines.

	* melt/warmelt-modes.melt (eval_docmd): Print the result to stdout.

2012-09-18  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+06.c: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+05.c: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+03.c: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2012-09-18  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.c (meltgc_new_string_nakedbasename): Use CONST_CAST
	to avoid warning.
	(meltgc_new_string_tempname_suffixed): Likewise.
	(meltgc_run_c_extension): Fill the empty melt_extension_info_t.
	(melt_really_initialize): Fill the empty melt_module_info_t.

2012-09-18  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-outobj.melt (normadeclb_macroexpanded_list): Also
	return a bindlist.
	(translate_macroexpanded_list): More debug. The normalisthandler
	also gets the bindlist.
	(translate_run_melt_expressions): The normalextend also gets the bindlist.

2012-09-17  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-macro.melt (current_module_environment_container)
	(update_current_module_environment_container): Mention future
	names current_module_environment_box and
	update_current_module_environment_box in :doc string.

	* melt/warmelt-genobj.melt
	(compilobj_nrep_check_running_module_environment_container): Use
	the environment box to update the routines' constants for current
	environment boxes.

2012-09-17  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-genobj.melt: Use hyphens in copyright dates.
	(compilobj_nrep_update_current_module_environment_container): Use a foreach loop.
	(compilobj_nrep_check_running_module_environment_container): Complete.

2012-09-17  Basile Starynkevitch  <basile@starynkevitch.net>

	{{when merging trunk svn rev 191371}}
	* melt-runtime.c (melt_load_module_index): Push an empty slot, not
	a null pointer, into melt_modinfvec.
	(meltgc_run_c_extension): Push an empty slot, not
	a null pointer, into melt_extinfvec.
	(melt_really_initialize): Better indentation, and increase maximal
	minore size to 32768Kwords. Push an empty slot, not a null
	pointer, into melt_modinfvec.

2012-09-15  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.c (meltgc_read_from_val): Change the location name
	to <parsed-string#%ld> format.

	* melt/warmelt-normal.melt
	(class_nrep_check_running_module_environment_container): New.
	(normexp_update_current_module_environment_container): Instanciate
	it for runtime extension.

	* melt/warmelt-genobj.melt
	(compilobj_nrep_check_running_module_environment_container): New
	method for compile_obj of
	class_nrep_check_running_module_environment_container.

	* melt/warmelt-outobj.melt (translate_run_melt_expressions): More
	debug.

	* melt/warmelt-modes.melt (eval_docmd): Eval in a fresh environment.

2012-09-15  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt-build-script.sh: Regenerate.
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+02.c: Regenerate.
	* melt/generated/warmelt-base+03.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+02.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+03.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+06.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-macro+01.c: Regenerate.
	* melt/generated/warmelt-macro+02.c: Regenerate.
	* melt/generated/warmelt-macro+03.c: Regenerate.
	* melt/generated/warmelt-macro+04.c: Regenerate.
	* melt/generated/warmelt-macro+05.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+03.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+01.c: Regenerate.
	* melt/generated/warmelt-normatch+02.c: Regenerate.
	* melt/generated/warmelt-normatch+03.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+01.c: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+03.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2012-09-14  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-genobj.melt (compilobj_nrep_literalvalue): New
	method for compile_obj of class_nrep_literalvalue.

	* melt/warmelt-outobj.melt (translate_macroexpanded_list): Fill
	the nprocy_body with the result of the normalisthandler.

2012-09-14  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-outobj.melt (translate_macroexpanded_list)
	(translate_run_melt_expressions): More debug.

	* melt/warmelt-modes.melt (eval_docmd): return true.

2012-09-14  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.c (meltgc_run_c_extension): compmd5buf should be
	bigger than 32 chars for the null terminating byte.

2012-09-13  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-build-script.tpl: Add meltbuild_notice function using
	GCCMELT_BUILD_NOTIFICATION.

	* melt-build-script.sh: Regenerate.

	* melt-runtime.h (melt_runtime_build_date, melt_gccversionstr)
	(melt_gcc_version, melt_plugin_gcc_version)
	(melt_gccplugin_version, melt_count_runtime_extensions): Move or
	add declaration using MELT_EXTERN.
	(MELT_MAX_RUNTIME_EXTENSIONS): New macro.

	* melt-runtime.c (melt_count_runtime_extensions): New variable.
	(melt_extension_info_st, melt_extension_info_t): New struct and
	type.
	(melt_extinfvec): New variable.
	(melt_dlsym_all): Use it.
	(meltgc_run_c_extension): Done.

	* melt/warmelt-outobj.melt (translate_run_melt_expressions):
	Coded, but should be tested.

2012-09-13  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-genobj.melt (compile2obj_initextendproc):
	Better emission of check.
	* melt/warmelt-outobj.melt (translate_run_melt_expressions):
	First element of literal list is null.

2012-09-13  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.c (melt_run_make_for_plugin): Correct call to
	obstack_grow for BUILD_WITH_CXX_ARG.

2012-09-13  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (meltgc_start_all_new_modules): Improve comment.
	(meltgc_run_c_extension): New declaration.

	* melt-runtime.c (meltgc_run_c_extension): Gets also the literal
	value tuple. Still incomplete.

2012-09-13  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-genobj.melt (compile2obj_initextendproc):
	Emit checking of the literal value tuple's length.

	* melt/warmelt-outobj.melt (translate_run_melt_expressions):
	Build the literal value tuple.

2012-09-13  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-outobj.melt (outpucod_initialextensionroutine):
	Emit return of the initial extension routine.

2012-09-13  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-outobj.melt (outpucod_initialextensionroutine):
	Emit marking & forwarding function for the initial routine.

2012-09-12  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-outobj.melt (output_curframe_declstruct_init): Emit
	tricky code for special initial routines, with marking routine...

2012-09-12  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-genobj.melt (compile2obj_initextendproc): Emission
	of nicer indented code.

	* melt/warmelt-outobj.melt (output_curframe_declstruct)
	(output_curframe_declstruct_init): Both module and extension
	initialization routines are specially handed.

2012-09-12  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-genobj.melt (compile2obj_initextendproc): Imported
	values use literal values.
	* melt/warmelt-outobj.melt (outpucod_initialextensionroutine): The
	frame of the initial extension routine is a global structure, so
	can have its marking routine.

2012-09-12  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+03.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2012-09-12  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-normal.melt (class_nrep_literalvalue)
	(class_nrep_literalnamedvalue): New classes.
	(normexp_symbol): Make instance of them for runtime extension
	modules.

2012-09-11  Basile Starynkevitch  <basile@starynkevitch.net>
	{{generated runtime extension compilable by C, but incomplete &
	wrong; it has too much useless initial data...
	}}
	* melt/warmelt-genobj.melt (compile2obj_initextendproc): get
	correctly the box of curenv & the litvaltup thru parameters.
	* melt/warmelt-outobj.melt (outpucod_initialextensionroutine):
	Less incorrect emitted C code.

2012-09-11  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}
	*  melt/generated/meltrunsup.h: Regenerate.
	*  melt/generated/meltrunsup-inc.c: Regenerate.
	*  melt/generated/warmelt-base.c: Regenerate.
	*  melt/generated/warmelt-base+meltdesc.c: Regenerate.
	*  melt/generated/warmelt-base+melttime.h: Regenerate.
	*  melt/generated/warmelt-debug.c: Regenerate.
	*  melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	*  melt/generated/warmelt-debug+melttime.h: Regenerate.
	*  melt/generated/warmelt-first.c: Regenerate.
	*  melt/generated/warmelt-first+meltdesc.c: Regenerate.
	*  melt/generated/warmelt-first+melttime.h: Regenerate.
	*  melt/generated/warmelt-genobj+01.c: Regenerate.
	*  melt/generated/warmelt-genobj+02.c: Regenerate.
	*  melt/generated/warmelt-genobj+03.c: Regenerate.
	*  melt/generated/warmelt-genobj+04.c: Regenerate.
	*  melt/generated/warmelt-genobj+05.c: Regenerate.
	*  melt/generated/warmelt-genobj+06.c: Regenerate.
	*  melt/generated/warmelt-genobj.c: Regenerate.
	*  melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	*  melt/generated/warmelt-genobj+melttime.h: Regenerate.
	*  melt/generated/warmelt-macro.c: Regenerate.
	*  melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	*  melt/generated/warmelt-macro+melttime.h: Regenerate.
	*  melt/generated/warmelt-modes.c: Regenerate.
	*  melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	*  melt/generated/warmelt-modes+melttime.h: Regenerate.
	*  melt/generated/warmelt-normal+01.c: Regenerate.
	*  melt/generated/warmelt-normal+02.c: Regenerate.
	*  melt/generated/warmelt-normal+03.c: Regenerate.
	*  melt/generated/warmelt-normal+04.c: Regenerate.
	*  melt/generated/warmelt-normal+05.c: Regenerate.
	*  melt/generated/warmelt-normal.c: Regenerate.
	*  melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	*  melt/generated/warmelt-normal+melttime.h: Regenerate.
	*  melt/generated/warmelt-normatch+04.c: Regenerate.
	*  melt/generated/warmelt-normatch.c: Regenerate.
	*  melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	*  melt/generated/warmelt-normatch+melttime.h: Regenerate.
	*  melt/generated/warmelt-outobj+04.c: Regenerate.
	*  melt/generated/warmelt-outobj+05.c: Regenerate.
	*  melt/generated/warmelt-outobj.c: Regenerate.
	*  melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	*  melt/generated/warmelt-outobj+melttime.h: Regenerate.

2012-09-11  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-outobj.melt (output_melt_descriptor): Remove the
	generation of old fashioned make dependencies with the .meltmod at
	end of file paths.

2012-09-11  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-outobj.melt (output_melt_descriptor): When run-time
	extension, only emit runextend & optimized make dependencies.

2012-09-11  Basile Starynkevitch  <basile@starynkevitch.net>

	{{adding flavor runextend}}
	* melt-module.mk: Add runextend flavor.

	* melt-runtime.c (melt_compile_source): Accept runextend flavor.

	* melt/warmelt-outobj.melt (translate_run_melt_expressions):
	Generate a runextend flavor of the module.

2012-09-11  Basile Starynkevitch  <basile@starynkevitch.net>
	* Makefile.in (melt-runtime.i): Correct command.
	(melt-runtime-raw.i): New target.
	(melt.encap): Needs melt-runtime.i

	* melt-build-script.tpl: check runtime uses and checks
	melt-runtime.i, can be disabled with melt-no-check-runtime file or
	MELTGCC_NO_CHECK_RUNTIME environment variable.

	* melt-build-script.sh: Regenerate.


2012-09-10  Basile Starynkevitch  <basile@starynkevitch.net>
	* Makefile.in (melt.encap): Also depend upon stmp-int-hdrs.

2012-09-08  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.c (BUILD_WITH_CXX_ARG) New.
	(melt_run_make_for_plugin, melt_run_make_for_branch) use it to
	force when relevant C++ compilation of generated code.

2012-09-08  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-genobj.melt (compile2obj_initextendproc): Importing
	values thru literal values.

2012-09-08  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-first.melt
	(class_running_extension_module_context): Improve documentation.

	* melt/warmelt-normal.melt (class_literal_value): New class.
	(register_literal_value): New function.

	* melt/warmelt-outobj.melt (translate_run_melt_expressions): Fill
	the :morcx_countlitval field correctly.

2012-09-08  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+03.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+06.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2012-09-08  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-first.melt (class_running_extension_module_context): New.
	(class_normalization_context): Improve doc.

	* melt/warmelt-genobj.melt (compile2obj_initextendproc): No more imports.
	Use literal value machinery.

	* melt/warmelt-outobj.melt (buffer_limit_cont): Increase to 2^25.
	(translate_run_melt_expressions): make a
	class_running_extension_module_context.

2012-09-08  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-outobj.melt (translate_run_melt_expressions): The
	same binbasename is used for both the basename of C files, and for
	basename of modules.

2012-09-08  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-outobj.melt (translate_run_melt_expressions):
	Compile the generated C code -which does not compile correctly
	yet.

2012-09-08  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+01.c: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+03.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2012-09-08  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-outobj.melt (outpucod_initialextensionroutine):
	More code, but generating incomplete C code.

2012-09-08  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-outobj.melt (outpucod_initialextensionroutine):
	More code, but very incomplete.

2012-09-08  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-first.melt (ctype_long, ctype_cstring): Add boxing
	& unboxing.

	* melt/warmelt-normal.melt (normexp_definstance): Check that
	fields get values.

	* melt/warmelt-outobj.melt (translate_run_melt_expressions): Note
	that we should box the stuff returned last..

2012-09-08  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+03.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+06.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2012-09-08  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.h (melt_unbox_int): New unlined function.

	* melt-predef.list (CLASS_CTYPE_PLAIN): New.

	* melt/warmelt-first.melt (class_ctype_plain): New with fields
	ctypp_boxing & ctypp_unboxing.

	* melt/warmelt-genobj.melt (compile2obj_initextendproc): Partly
	completed.

	* melt/warmelt-outobj.melt (translate_macroexpanded_list): Improve
	comments.
	(translate_run_melt_expressions): More code.

2012-09-08  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+03.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+06.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+01.c: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+03.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2012-09-07  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-genobj.melt (compile2obj_initextendproc): normal
	list closure is appending nil with warning if last expression
	don't give a value.

2012-09-07  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-genobj.melt (translate_macroexpanded_list): Get
	normalisthandler as additional parameter.
	(compile2obj_initproc): Pass nil as the normalisthandler.
	(compile2obj_initextendproc): Pass a normal list handler closure.

2012-09-07  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-genobj.melt (compile2obj_initextendproc): More code.

2012-09-06  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-genobj.melt (compile2obj_initextendproc): More code.

2012-09-06  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.c (melt_start_runext_rout_t): New type and signature.
	(meltgc_run_c_extension): Wants a melt_start_run_extension function.

	* melt/warmelt-first.melt (class_initial_generation_context): Better doc.
	(class_extension_generation_context): New class.

	* melt/warmelt-genobj.melt (compile2obj_initextendproc): More code.
	(compilobj_quasidata_current_module_environment_container)
	(compilobj_quasidata_parent_module_environment): Use safer field
	access.

2012-09-06  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-first.melt (class_initial_generation_context):
	Improve comment.

	* melt/warmelt-genobj.melt (compile2obj_initextendproc): More code.

2012-09-06  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-normal.melt (normal_exp): Document it.
	(normexp_any_object): New incomplete method for normal_exp of any
	object of class_root.
	(normexp_any_value): New incomplete method for normal_exp of any value.

2012-09-06  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-genobj.melt (make_objlocatedexp): loc can be a mixed integer.
	(compile2obj_initextendproc): Copy-pasted some code from
	compile2obj_initproc but incomplete.

2012-09-06  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+01.c: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+03.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2012-09-06  Basile Starynkevitch  <basile@starynkevitch.net>

	* testsuite/melt/tcheader.melt: Working again.

2012-09-06  Basile Starynkevitch  <basile@starynkevitch.net>
	{{ cheader working again! }}
	* melt/warmelt-outobj.melt (normadeclb_macroexpanded_list): Move
	normalization before cheader emission.
	(compile_list_sexpr): Remove low-level debug message.
	(translate_macroexpanded_list): Add debug.

2012-09-06  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-outobj.melt (compile_list_sexpr): Tempory low level
	debug message.

2012-09-06  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-build-script.tpl: Also generate
	meltbuild-sources/warmelt.*.modlis files.
	* melt-build-script.sh: Regenerate.

	* melt-runtime.h (melt_dbgtrace_written_object_at): Typo.

2012-09-06  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate, with debugtracing of writes in objects}}
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+02.c: Regenerate.
	* melt/generated/warmelt-base+03.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+02.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+03.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+06.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-macro+01.c: Regenerate.
	* melt/generated/warmelt-macro+02.c: Regenerate.
	* melt/generated/warmelt-macro+03.c: Regenerate.
	* melt/generated/warmelt-macro+04.c: Regenerate.
	* melt/generated/warmelt-macro+05.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+03.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+01.c: Regenerate.
	* melt/generated/warmelt-normatch+02.c: Regenerate.
	* melt/generated/warmelt-normatch+03.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+01.c: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+03.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.


2012-09-06  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-genobj.melt (compilobj_nrep_unsafe_put_fields)
	(compilobj_nrep_makeinst, compil_data_and_slots_fill): Uncomment
	the addition of class_objdbgtracewriteobj instance.

2012-09-06  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+02.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+06.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-macro+01.c: Regenerate.
	* melt/generated/warmelt-macro+02.c: Regenerate.
	* melt/generated/warmelt-macro+03.c: Regenerate.
	* melt/generated/warmelt-macro+04.c: Regenerate.
	* melt/generated/warmelt-macro+05.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+01.c: Regenerate.
	* melt/generated/warmelt-normatch+02.c: Regenerate.
	* melt/generated/warmelt-normatch+03.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+03.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2012-09-06  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-genobj.melt (class_objtouchedobj): Remove.
	(compilobj_nrep_unsafe_put_fields, compilobj_nrep_makeinst)
	(compil_data_and_slots_fill): Comment the addition of
	class_objdbgtracewriteobj instance, which does not work yet.

	* melt/warmelt-outobj.melt (outpucod_dbgtracewriteobj): Correct
	typo in emitted code.

2012-09-06  Basile Starynkevitch  <basile@starynkevitch.net>

	* Makefile.in (upgrade-warmelt): Only indent C files which are not
	+melt* files.

	{{Regenerate}}
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+02.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+06.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-macro+01.c: Regenerate.
	* melt/generated/warmelt-macro+02.c: Regenerate.
	* melt/generated/warmelt-macro+03.c: Regenerate.
	* melt/generated/warmelt-macro+04.c: Regenerate.
	* melt/generated/warmelt-macro+05.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+01.c: Regenerate.
	* melt/generated/warmelt-normatch+02.c: Regenerate.
	* melt/generated/warmelt-normatch+03.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+01.c: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+03.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2012-09-06  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (melt_dbgtrace_touched_object_at)
	(melt_dbgtrace_touched_object): Rename, since badly named, as...
	(melt_dbgtrace_written_object_at, melt_dbgtrace_written_object):
	new function & macro.

	* melt/warmelt-genobj.melt (class_objtouchedobj): Obsolete since
	badly named.
	(class_objdbgtracewriteobj): New class, superseding previous one.

	* melt/warmelt-outobj.melt (outpucod_objtouchedobj): Rename as ...
	(outpucod_dbgtracewriteobj): Method for class_objdbgtracewriteobj.

2012-09-06  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+06.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+01.c: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+03.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2012-09-06  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (tracedptr1, traceptr2): Remove.
	(melt_alptr_1, melt_alptr_2, melt_objhash_1, melt_objhash_2): extern variables.
	(melt_break_alptr_1, melt_break_alptr_2, melt_break_objhash_1)
	(melt_break_objhash_2): Move macros from melt-runtime.c ...
	(melt_dbgtrace_touched_object_at): New inline function.
	(melt_dbgtrace_touched_object): New macro.
	(meltgc_allocate, melt_allocatereserved): Call melt_alptr_1,
	... macros.

	* melt-runtime.c (melt_alptr_1, melt_alptr_2, melt_objhash_1)
	(melt_objhash_2, melt_break_alptr_1, melt_break_alptr_2)
	(melt_break_objhash_1, melt_break_objhash_2)
	(melt_break_objhash_2): Move to melt-runtime.h file.
	(melt_alptr_1, melt_alptr_2, melt_objhash_1, melt_objhash_2):
	Define and initialize here.

	* melt/warmelt-genobj.melt (class_objtouchedobj): New class, not
	yet used.

	* melt/warmelt-outobj.melt (outpucod_objtouch): Typo in debug message.
	(outpucod_objtouchedobj): New method for output_c_code on
	class_objtouchedobj.

2012-09-06  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.


2012-09-06  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.c (melt_objhash_1, melt_objhash_2): New variables
	for low-level gdb debugging.
	(melt_break_objhash_1, melt_break_objhash_2): New macros for
	low-level gdb debugging.
	(melt_break_objhash_1_at, melt_break_objhash_2_at): New helper
	functions for low-level gdb debugging.

	* melt/warmelt-base.melt (valdesc_object): Use above for low-level
	gdb debugging.

	* gcc/testsuite/melt/tcheader.melt: Example uses MELT_URL, not
	BASILE_EMAIL macro string.

2012-09-05  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-normal.melt (normexp_cheader): More debug.

	* melt/warmelt-outobj.melt (normadeclb_macroexpanded_list): More
	debug.


2012-09-05  Basile Starynkevitch  <basile@starynkevitch.net>

	* testsuite/melt/tcheader.melt: Improve test, failing on svn rev
	190968.

2012-09-05  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-run.proto.h (frame_start_this_module_melt_st): Remove
	temporary disgusting hack.

2012-09-05  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+02.c: Regenerate.
	* melt/generated/warmelt-base+03.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+02.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+03.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+06.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-macro+01.c: Regenerate.
	* melt/generated/warmelt-macro+02.c: Regenerate.
	* melt/generated/warmelt-macro+03.c: Regenerate.
	* melt/generated/warmelt-macro+04.c: Regenerate.
	* melt/generated/warmelt-macro+05.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+03.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+01.c: Regenerate.
	* melt/generated/warmelt-normatch+02.c: Regenerate.
	* melt/generated/warmelt-normatch+03.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+01.c: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+03.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2012-09-05  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.c (melt_output_cfile_decl_impl_secondary_option):
	Emit constant meltrun_used_md5_melt & meltrun_used_md5_melt_f2...

	* melt/warmelt-genobj.melt (compile2obj_initproc): Improve comment
	about the "melt_start_this_module" name.

	* melt/warmelt-outobj.melt (output_curframe_cdat_fill)
	(outpucod_initialmoduleroutine): Hardwire emission of struct
	frame_melt_start_this_module_st.

2012-09-05  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+02.c: Regenerate.
	* melt/generated/warmelt-base+03.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+02.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+03.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+06.c: New, generate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-macro+01.c: Regenerate.
	* melt/generated/warmelt-macro+02.c: Regenerate.
	* melt/generated/warmelt-macro+03.c: Regenerate.
	* melt/generated/warmelt-macro+04.c: Regenerate.
	* melt/generated/warmelt-macro+05.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+03.c: New, generate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+01.c: Regenerate.
	* melt/generated/warmelt-normatch+02.c: Regenerate.
	* melt/generated/warmelt-normatch+03.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+01.c: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+03.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2012-09-05  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-run.proto.h (frame_start_this_module_melt_st): Temporary
	disgusting hack.

	* melt-runtime.c (melt_really_initialize): Deal correctly with
	-fmelt-debugging=all on the MELT branch.

	* melt/warmelt-macro.melt
	(class_source_current_module_environment_container): Improve
	comment.

	* melt/warmelt-genobj.melt (class_initial_module_routineobj): New
	class, field oirout_modulename moved inside.
	(class_initial_extension_routineobj): New class.
	(compile2obj_initproc): Make an instance of
	class_initial_module_routineobj named melt_start_this_module, not
	start_module_melt.
	(compile2obj_initrunproc): Rename, so remove, as...
	(compile2obj_initextendproc): Renamed incomplete function...

	* melt/warmelt-outobj.melt: Add cheader, which probably don't work.
	(outpucod_initialroutine):Rename as...
	(outpucod_initialmoduleroutine): Install as method for
	class_initial_module_routineobj.
	(outpucod_initialextensionroutine): New unimplemented method for
	class_initial_extension_routineobj.

	* melt/xtramelt-ana-simple.melt (meltframe_gate): Look for
	function named melt_start_this_module, not start_module_melt.

2012-09-05  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (MELT_FLEXIBLE_DIM): ISO C++ dont have flexible
	dimensions.

2012-09-04  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.c (meltgc_run_c_extension): New incomplete function.

	* melt/warmelt-outobj.melt (translate_run_melt_expressions): New incomplete function.

	* melt/warmelt-modes.melt (eval_docmd, eval_mode): New function and mode.

2012-09-04  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-genobj.melt (create_normal_extending_context):
	Lower initial sizes of maps, etc...

	* melt/warmelt-genobj.melt (compile2obj_initrunproc): New
	incomplete function stub.

	* melt/warmelt-outobj.melt (translate_run_melt_expressions): New
	incomplete function stub.

2012-09-04  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-outobj.melt
	(translate_to_c_one_or_more_melt_files): Remove old synonym.

2012-09-04  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+02.c: Regenerate.
	* melt/generated/warmelt-base+03.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+02.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+03.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-macro+01.c: Regenerate.
	* melt/generated/warmelt-macro+02.c: Regenerate.
	* melt/generated/warmelt-macro+03.c: Regenerate.
	* melt/generated/warmelt-macro+04.c: Regenerate.
	* melt/generated/warmelt-macro+05.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+01.c: Regenerate.
	* melt/generated/warmelt-normatch+02.c: Regenerate.
	* melt/generated/warmelt-normatch+03.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+01.c: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+03.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2012-09-04  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-modes.melt (runfile_docmd)
	(translate_to_flavored_module): Call
	translate_to_c_module_melt_sources instead of
	translate_to_c_one_or_more_melt_files.

2012-09-04  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-outobj.melt (compile_list_sexpr): Improve error
	message when inienv is null but not bootstrapping.
	(read_melt_expressions): New internal function.
	(translate_to_c_one_or_more_melt_files): Renamed as, and synonym
	of ...
	(translate_to_c_module_melt_sources): Use read_melt_expressions.

2012-09-04  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-outobj.melt (translate_macroexpanded_list): Got a
	new formal for the translation if the initial procedure.
	(fatal_compile_error): New internal utility function.
	(compile_list_sexpr): Use fatal_compile_error and pass
	compile2obj_initproc to translate_macroexpanded_list.

2012-09-04  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-outobj.melt (normadeclb_macroexpanded_list): New
	internal function.
	(translate_macroexpanded_list): Move some code in above function,
	and call that.

	* Makefile.in (upgrade-warmelt): Use unifdef with
	-DMELTGCC_NOLINENUMBERING so to remove #line directives in
	melt/generated/ files.

2012-09-04  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+02.c: Regenerate.
	* melt/generated/warmelt-base+03.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+03.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+01.c: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+03.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2012-09-04  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-first.melt (class_module_context): Add
	mocx_errorhandler field.

	* melt/warmelt-outobj.melt (translate_macroexpanded_list): Use it,
	removeing the errorsarefatal flag argument.
	(compile_list_sexpr): Fill :mocx_errorhandler field.

2012-09-04  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-normal.melt (create_normal_extending_context): New
	function.

	* melt/warmelt-outobj.melt (translate_macroexpanded_list): Minor
	improvements.

2012-09-04  Basile Starynkevitch  <basile@starynkevitch.net>
	{{split this ChangeLog.MELT file so older entries are in ChangeLog.MELT-2008-2011}}

2012-09-04  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-run.proto.h (melt_string_knows_length): Remove temporary
	macro.

	* melt-runtime.c (melt_check_call_frames_at, melt_garbcoll):
	Improve error messages.
	(melt_fatal_info): Informative messages are not errors but
	notices.

	* melt/warmelt-base.melt (melt_argument, melt_error_counter): Add
	primitives.

	* melt/warmelt-outobj.melt (melt_argument): Move above.
	(translate_macroexpanded_list): Add errorsarefatal parameter flag.
	(compile_list_sexpr): Give it.

2012-09-03  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.h (melt_string_length): Add cast.

	{{Regenerate}}

	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+02.c: Regenerate.
	* melt/generated/warmelt-base+03.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2012-09-03  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-base.melt (string_nth): New primitive.

2012-09-03  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (melt_string_length): Remove dirty hack.

2012-09-03  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (melt_string_length): Temporary dirty hack to
	bootstrap.

	* melt-runtime.c (meltgc_new_stringdup)
	(meltgc_new_string_without_suffix)
	(meltgc_new_string_generated_c_filename): Call
	meltgc_new_string_raw_len.

	* melt/warmelt-outobj.melt (outcinitfill_objinitstring): Always
	emit slen assignment for both small and big strings.

	{{Regenerate}}
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+01.c: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+03.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2012-09-03  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Unstable!!!}}
	* melt-runtime.h (melt_string_length, melt_string_is_ending): Use
	the slen field.
	(melt_string_nth): New function.

	* melt-runtime.c (meltgc_new_string_raw_len, meltgc_new_stringdup)
	(meltgc_new_string_generated_c_filename)
	(meltgc_new_string_nakedbasename): Set the slen field.

	* melt-run.proto.h (melt_string_knows_length): Temporarily defined.

	* melt/warmelt-outobj.melt (outcinitfill_objinitstring): Emit
	assignment of slen unconditionally.

2012-09-03  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}

	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+01.c: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+03.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2012-09-03  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-base.melt (valdesc_string): Add an slen field in
	string for memoizing the length.

	* melt/warmelt-outobj.melt (outcinitfill_objinitstring): Emit code
	#if melt_string_knows_length to fill that slen field.

2012-09-03  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}

	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+03.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2012-09-03  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-build-script.tpl: When emitting generation of
	meltbuild-sources use (for-index) to choose translateinit.

	* melt-build-script.sh: Regenerate.

	* melt//warmelt-first.melt: Use #error in chunk testing that
	MELT_HAS_INITIAL_ENVIRONMENT is cleared.

2012-09-03  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}

	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+01.c: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+03.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2012-09-03  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-first.melt: Better warning message for
	warmelt-first with MELT_HAS_INITIAL_ENVIRONMENT.

	* melt/warmelt-outobj.melt (translate_macroexpanded_list): Show
	dbgcounter in message about generating C code... Add debug.

2012-09-03  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+02.c: Regenerate.
	* melt/generated/warmelt-base+03.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+02.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+03.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-macro+01.c: Regenerate.
	* melt/generated/warmelt-macro+02.c: Regenerate.
	* melt/generated/warmelt-macro+03.c: Regenerate.
	* melt/generated/warmelt-macro+04.c: Regenerate.
	* melt/generated/warmelt-macro+05.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+01.c: Regenerate.
	* melt/generated/warmelt-normatch+02.c: Regenerate.
	* melt/generated/warmelt-normatch+03.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+01.c: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+03.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2012-09-03  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-first.melt: Add chunk to emit test of #if
	MELT_HAS_INITIAL_ENVIRONMENT.

	* melt/warmelt-outobj.melt (output_melt_descriptor) Improve
	descriptor file by removing spurious semi-colon emission.
	(translate_macroexpanded_list): Emit MELT_HAS_INITIAL_ENVIRONMENT
	appropriately.
	(compile_list_sexpr): More debug messages.

	* melt/warmelt-modes.melt (translateinitmodule_flavored): Pass a
	null initial environment.

2012-09-03  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-base.melt (foreach_in_string): New iterator.

2012-08-31  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/xtramelt-ana-tree.melt
	(tree_boolean_false_node, tree_boolean_true_node)
	(tree_boolean_type_node, tree_char_type_node)
	(tree_const_ptr_type_node, tree_double_type_node)
	(tree_float_type_node, tree_int128_integer_type_node)
	(tree_int128_unsigned_type_node, tree_integer_minus_one_node)
	(tree_integer_one_node, tree_integer_type_node)
	(tree_integer_zero_node, tree_long_double_type_node)
	(tree_long_integer_type_node, tree_long_long_integer_type_node)
	(tree_long_long_unsigned_type_node, tree_long_unsigned_type_node)
	(tree_null_pointer_node, tree_ptr_type_node)
	(tree_short_integer_type_node, tree_short_unsigned_type_node)
	(tree_signed_char_type_node, tree_size_type_node)
	(tree_unsigned_char_type_node, tree_unsigned_type_node)
	(tree_void_type_node): New cmatchers.

2012-08-30  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (meltgc_walk_gimple_seq): Improve comment.

	* melt/xtramelt-ana-gimple.melt (walk_gimple_seq)
	(walk_gimple_seq_unique_tree): Add doc string.

2012-08-30  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (meltgc_cached_string_path_of_source_location):
	New declaration.

	* melt-runtime.c (meltgc_cached_string_path_of_source_location):
	New function.

	* melt/xtramelt-ana-tree.melt (tree_decl_at_source_location)
	(tree_expr_at_source_location): New cmatchers.

	* melt/xtramelt-ana-gimple.melt (gimple_at_source_location):
	New cmatcher.

2012-08-30  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate all}}

	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+03.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2012-08-30  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-first.melt (class_initial_system_data): New
	sysdata_src_loc_file_dict field.
	(initial_system_data): Initialize it.

2012-08-29  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.c (meltgc_start_module_by_index): Use address-of &
	on VEC_index only for GCC 4.8, not for earlier version, to be
	compilable as a GCC 4.6 plugin.

2012-08-29  Basile Starynkevitch  <basile@starynkevitch.net>
	{{merging with trunk, converted to C++}}

	* melt-runtime.h (MELT_FLEXIBLE_DIM): Set when C++.

	* melt-runtime.c (melt_tempdir_path): Don't use choose_tmpdir from
	libiberty.
	(meltgc_start_module_by_index): Use address-of & on VEC_index.
	(melt_really_initialize): When printing builtin settings, handle
	GCC 4.8 as with implicit ENABLE_BUILD_WITH_CXX.
	(meltgc_out_edge): Provide additional flag TDF_DETAILS for dump_edge_info.
	(melt_val2passflag): Handle PROP_referenced_vars only when defined.

	* melt-module.mk: Use GCCMELT_COMPILER instead of GCCMELT_CC.

	* melt-build-script.tpl: Transmit GCCMELT_COMPILER on every make
	using melt-module.mk and improve the error message.

	* melt-build-script.sh: Regenerate.

2012-08-29  Basile Starynkevitch  <basile@starynkevitch.net>

	* Makefile.in (melt-runtime.args): Add -I include and -I include-fixed.
	(melt-build-param.sh): Emit GCCMELT_CC1PLUS.

	* melt-build-script.tpl: Check runtime step should use
	GCCMELT_CC1PLUS when GCC is compiled in C++.

	* melt-build-script.sh: Regenerate.

	* melt-newbuild.tpl: Remove file.

	* melt-newbuild.def: Remove file.

	* melt-newbuild.mk: Remove generated file.

2012-08-28  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}

	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+02.c: Regenerate.
	* melt/generated/warmelt-base+03.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+02.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+03.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-macro+01.c: Regenerate.
	* melt/generated/warmelt-macro+02.c: Regenerate.
	* melt/generated/warmelt-macro+03.c: Regenerate.
	* melt/generated/warmelt-macro+04.c: Regenerate.
	* melt/generated/warmelt-macro+05.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+01.c: Regenerate.
	* melt/generated/warmelt-normatch+02.c: Regenerate.
	* melt/generated/warmelt-normatch+03.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+01.c: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+03.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2012-08-28  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-build-script.tpl: Pass module-cflags argument for check
	runtime & helloworld tests.

	* melt-build-script.sh: Regenerate.

2012-08-28  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-run.proto.h: Don't include "ppl_c.h" anymore.

2012-08-28  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.h (MELT_EXTERN): New macro.

	* melt/warmelt-outobj.melt (output_exported_offsets): Emit it.

2012-08-28  Basile Starynkevitch  <basile@starynkevitch.net>

	* Makefile.in (melt-runtime.o, melt-runtime.i): Use $(COMPILER)
	not $(CC).

2012-08-28  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h: Remove inclusion of "ppl_c.h"
	(union melt_special_un): Remove ppl members.
	(meltgc_ppstrbuf_ppl_varnamvect)
	(melt_raw_new_ppl_empty_constraint_system)
	(melt_raw_new_ppl_unsatisfiable_constraint_system)
	(melt_ppl_coefficient_content, melt_ppl_coefficient_put_content)
	(melt_ppl_linear_expression_content)
	(melt_ppl_linear_expression_put_content)
	(melt_ppl_constraint_content, melt_ppl_constraint_put_content)
	(melt_ppl_constraint_system_content)
	(melt_ppl_constraint_system_put_content)
	(melt_ppl_generator_content, melt_ppl_generator_put_content)
	(melt_ppl_generator_system_content)
	(melt_ppl_generator_system_put_content)
	(melt_ppl_polyhedron_content, melt_ppl_polyhedron_put_content):
	Remove.

	* melt-runtime.c ...
	(melt_make_ppl_coefficient_from_tree)
	(melt_make_ppl_coefficient_from_tree)
	(meltgc_new_ppl_constraint_system)
	(meltgc_clone_ppl_constraint_system)
	(melt_insert_ppl_constraint_in_boxed_system)
	(melt_make_ppl_NNC_Polyhedron_from_Constraint_System)
	(meltgc_new_ppl_polyhedron, melt_make_ppl_linear_expression)
	(melt_make_ppl_constraint_cstrtype)
	(meltgc_new_ppl_linear_expression)
	(ppl_melt_variable_output_function)
	(meltgc_ppstrbuf_ppl_varnamvect): Remove.

2012-08-28  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}

	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+03.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2012-08-28  Basile Starynkevitch  <basile@starynkevitch.net>
	{{removing PPL from runtime, by putting stubs}}
	* melt-runtime.h (meltgc_ppstrbuf_ppl_varnamvect)
	(melt_raw_new_ppl_empty_constraint_system)
	(melt_raw_new_ppl_unsatisfiable_constraint_system)
	(melt_ppl_coefficient_content, melt_ppl_coefficient_put_content)
	(melt_ppl_linear_expression_content)
	(melt_ppl_linear_expression_put_content)
	(melt_ppl_constraint_content, melt_ppl_constraint_put_content)
	(melt_ppl_constraint_system_content)
	(melt_ppl_constraint_system_put_content)
	(melt_ppl_generator_content, melt_ppl_generator_put_content)
	(melt_ppl_generator_system_content)
	(melt_ppl_generator_system_put_content)
	(melt_ppl_polyhedron_content, melt_ppl_polyhedron_put_content):
	Remove body of inline function by replacing it by error stub.

	* melt-runtime.c (ALL_MELTOBMAG_SPECIAL_CASES): Remove SPECPPL
	cases...
	(delete_special): Remove SPECPPL cases.
	(melt_readsimplelong): Remove SPECPPL names.
	(melt_really_initialize): Remove PPL initialization.
	(melt_make_ppl_coefficient_from_tree)
	(melt_make_ppl_coefficient_from_tree)
	(meltgc_new_ppl_constraint_system)
	(meltgc_clone_ppl_constraint_system)
	(melt_insert_ppl_constraint_in_boxed_system)
	(melt_make_ppl_NNC_Polyhedron_from_Constraint_System)
	(meltgc_new_ppl_polyhedron, melt_make_ppl_linear_expression)
	(melt_make_ppl_constraint_cstrtype)
	(meltgc_new_ppl_linear_expression)
	(ppl_melt_variable_output_function)
	(meltgc_ppstrbuf_ppl_varnamvect): Remove body of functions by
	replacing it by error stub.
	(melt_ppl_error_handler): Remove function.

2012-08-28  Basile Starynkevitch  <basile@starynkevitch.net>
	{{removing PPL}}

	* melt/warmelt-first.melt (ctype_ppl_coefficient)
	(ctype_ppl_constraint, ctype_ppl_constraint_system)
	(ctype_ppl_linear_expression, discr_ppl_constraint_system)
	(discr_ppl_polyhedron): Remove.

	* melt/warmelt-base.melt (valdesc_special_ppl_coefficient)
	(valdesc_special_ppl_constraint)
	(valdesc_special_ppl_constraint_system)
	(valdesc_special_ppl_generator)
	(valdesc_special_ppl_generator_system)
	(valdesc_special_ppl_linear_expression)
	(valdesc_special_ppl_polyhedron): Remove.

	* melt/xtramelt-ana-base.melt (debug_ppl_coefficient)
	(debug_ppl_constraint, debug_ppl_linear_expression)
	(debug_ppl_polyhedron, insert_ppl_constraint_in_boxed_system)
	(make_ppl_constraint, make_ppl_linear_expression)
	(make_ppl_polyhedron_cloned, make_ppl_polyhedron_same)
	(ppl_Constraint_System_insert_Constraint)
	(ppl_Linear_Expression_add_to_coefficient)
	(ppl_Linear_Expression_add_to_inhomogeneous)
	(ppl_NNC_Polyhedron_from_Constraint_System)
	(ppl_Polyhedron_add_constraint, ppl_Polyhedron_is_empty)
	(ppl_clone_constraint_system, ppl_coefficient_content)
	(ppl_coefficient_from_long, ppl_coefficient_from_tree)
	(ppl_constraint_content, ppl_constraint_system_content)
	(ppl_delete_Coefficient, ppl_delete_Constraint)
	(ppl_delete_Linear_Expression, ppl_delete_Polyhedron)
	(ppl_new_empty_constraint_system)
	(ppl_new_unsatisfiable_constraint_system, ppl_polyhedron_content)
	(ppl_ppstrbuf, raw_new_ppl_empty_constraint_system)
	(raw_new_ppl_unsatisfiable_constraint_system): Remove.

	* melt/xtramelt-ana-simple.melt: Remove the smallana_mode which
	used PPL.

2012-08-28  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.h (MELT_VERSION_STRING): Bump to 0.9.7-pre

2012-08-03  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}

	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+01.c: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+03.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.


2012-08-03  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.h (MELT_VERSION_STRING): Bump to 0.9.6-d
	* melt-runtime.c (meltgc_passexec_callback): Better debugprintf,
	and location.
	(melt_really_initialize): Add fflush.

	* melt/warmelt-outobj.melt (outpucod_objputroutconst): Emit check
	with if MELT_HAS_INITIAL_ENVIRONMENT.
	(translate_macroexpanded_list): Add inienv argument.
	(compile_list_sexpr): Pass it.

2012-08-02  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.c (melt_really_initialize): Plugin can run with
	debugging.

2012-08-02  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-build-script.tpl: Symlink meltrunsup.h ...

	* melt-build-script.sh: Regenerate.

2012-08-02  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.c (meltgc_longsbucket_put)
	(meltgc_longsbucket_remove): Add casts or signed integers to avoid
	warnings about signed vs unsigned compare.

2012-08-02  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate all}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+02.c: Regenerate.
	* melt/generated/warmelt-base+03.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+02.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+03.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-macro+01.c: Regenerate.
	* melt/generated/warmelt-macro+02.c: Regenerate.
	* melt/generated/warmelt-macro+03.c: Regenerate.
	* melt/generated/warmelt-macro+04.c: Regenerate.
	* melt/generated/warmelt-macro+05.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+01.c: Regenerate.
	* melt/generated/warmelt-normatch+02.c: Regenerate.
	* melt/generated/warmelt-normatch+03.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+01.c: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+03.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2012-08-02  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-first.melt: Mention that PPL binding is obsolete.
	* melt/warmelt-base.melt: Ditto.

2012-08-02  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.h (MELT_VERSION_STRING): Bump to 0.9.6.c version.

2012-08-02  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-first.melt: Improve comment about translateinit.

	* melt/warmelt-normatch.melt (mg_draw_match_graphviz_file): Avoid
	mixing declaration and code in chunk.

	* melt/warmelt-outobj.melt (compile_list_sexpr): Handle specially
	the case when inienv is null, emitting a 0 for
	MELT_HAS_INITIAL_ENVIRONMENT.

	* melt/warmelt-modes.melt (translateinit_mode): Pass a null
	initial environment to trigger the magic above.

2012-08-02  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.c (meltgc_longsbucket_put)
	(meltgc_longsbucket_remove): Use signed indexes to avoid buffer
	underflow.

2012-08-02  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.c (meltgc_out_edge): Put a warning on below patch,
	because it will be needed only on next trunk to MELT branch merge.

2012-08-02  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.c (meltgc_out_edge): Add TDF_DETAILS to
	dump_edge_info calls for GCC 4.8.

2012-08-01  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate all}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2012-08-01  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-base.melt (valdesc_strbuf, valdesc_mixint):
	Removing GTY annotation on non-pointer data which makes recent
	gengtype scream.

2012-08-01  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-build.tpl: Remove file.

	* melt-build.def: Remove file.

	* melt-build.mk: Remove file.

	* melt-build-script.tpl: Add hello world running in checkruntime step.

	* melt-build-script.sh: Regenerate.

2012-07-31  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (MELT_VERSION_STRING): Bump to 0.9.6.b

	* melt-runtime.c (melt_load_module_index): Use appropriate file
	name for melt_compile_source invocation.

2012-07-31  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (MELT_VERSION_STRING): Bump to 0.9.6

2012-07-31  Basile Starynkevitch  <basile@starynkevitch.net>

	* Makefile.in (melt-build-param.sh): Typo on emission
	GCCMELT_RUNTIME_C. Emit quoted assignments for GCCMELT_COMPILER &
	GCCMELT_LINKER.

	* melt-build-script.tpl: Fixed typos. Add sanity checks

	* melt-build-script.sh: Regenerate.

	* melt-runtime.h (MELT_VERSION_STRING): Bump to 0.9.6-rc4

2012-07-30  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-build-script.tpl: Set nullglob.

	* melt-build-script.sh: Regenerate.

	* melt-module.mk: Test that GCCMELT_CC is not empty.

2012-07-30  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-build-script.tpl: Typo in runtime step.

2012-07-30  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.h (MELT_VERSION_STRING): Bumped to 0.9.6-rc2

	* melt-build-script.tpl: Redirection typo in runtime step.

2012-07-30  Basile Starynkevitch  <basile@starynkevitch.net>
	* Makefile.in (melt-build-param.sh): Emit GCCMELT_RUNTIME_C

	* melt-build-script.tpl: Add check runtime step.

	* melt-build-script.sh: Regenerate.


2012-07-30  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-module.mk (GCCMELT_HEADER_DIR, GCCMELT_PREPROFLAGS): New
	variables.

	* Makefile.in: Use melt-headers/$(melt_version_string).
	(install-melt-mk): Overwrite GCCMELT_HEADER_DIR at installation.

2012-07-30  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-build-script.tpl: Test that GCCMELT_CC1 exists.

	* melt-build-script.sh: Regenerate.

2012-07-30  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (melt_basename): Inline.

2012-07-30  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (melt_flag_debug, melt_flag_bootstrapping): For
	MELT plugin compiled with C++, declare them extern "C" globals.

2012-07-29  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h: Use #elif not #elseif cpp directive.

2012-07-29  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-build-script.tpl: The includeload thing contains the .melt
	suffix.
	* melt-build-script.sh: Regenerate.

2012-07-29  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+02.c: Regenerate.
	* melt/generated/warmelt-base+03.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+02.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+03.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-macro+01.c: Regenerate.
	* melt/generated/warmelt-macro+02.c: Regenerate.
	* melt/generated/warmelt-macro+03.c: Regenerate.
	* melt/generated/warmelt-macro+04.c: Regenerate.
	* melt/generated/warmelt-macro+05.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+01.c: Regenerate.
	* melt/generated/warmelt-normatch+02.c: Regenerate.
	* melt/generated/warmelt-normatch+03.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+01.c: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+03.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2012-07-29  Basile Starynkevitch  <basile@starynkevitch.net>

	* Makefile.in (upgrade-warmelt): Dont indent *+melt* files.

2012-07-29  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/xtramelt-ana-base.melt: Improve.

2012-07-29  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/xtramelt-ana-base.melt (foreach_mapbasicblock): Fix comment.

2012-07-29  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-base.melt (checkval_dbg): Improve.

	* melt/xtramelt-ana-base.melt: Improve C90 compliance.

2012-07-29  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-build-script.tpl: Correct regenerate overall goal.

	* melt-build-script.sh: Regenerate.

2012-07-29  Basile Starynkevitch  <basile@starynkevitch.net>

	* Makefile.in (melt-clean): Typo.

2012-07-29  Basile Starynkevitch  <basile@starynkevitch.net>
	* Makefile.in (melt-clean, melt-translator, melt-applications)
	(melt-modlists, melt-gendoc): New phony targets.
	(install-melt-sources, install-melt-modules)
	(install-melt-default-modules-list): Use them.
	(upgrade-warmelt): Rewritten, using regenerate overall goal.

	* melt-build-script.tpl: Add regenerate overall goal.

	* melt-build-script.sh: Regenerate.

2012-07-29  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-build-script.tpl: Accept an overall goal as first argument.

	* melt-build-script.sh: Regenerate.

2012-07-29  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-build-script.tpl: Fix typos, add modlis generation.

	* melt-build-script.sh: Regenerate.

2012-07-28  Basile Starynkevitch  <basile@starynkevitch.net>
	{{better but still a little buggy}}

	* melt-build-script.def: The stages know their precedent.

	* melt-build-script.tpl: Generate more stamp files.

	* melt-build-script.sh: Regenerate.

2012-07-26  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.c (melt_really_initialize): Better emitted comment
	in list of generated C files, with -fmelt-generated-c-file-list=
	option.
	(melt_output_cfile_decl_impl_secondary_option): Emit changed files
	with a + prefix and kept file with a = prefix.

	* Makefile.in (melt-build-param.sh): Emit
	GCCMELT_RUNTIME_DEPENDENCY.
	(upgrade-bigmelt): Remove target.

	* doc/melt.texi: Mention that MELT runs with GCC 4.6 or 4.7 or later.
	(Invoking MELT): Explain format of list of generated files for
	-fmelt-generated-c-file-list= option.

2012-07-25  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-build-script.tpl: Add symlinking of all MELT
	sources. meltgendoc.texi is generated.

	* melt-build-script.sh: Regenerate.

2012-07-25  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Still buggy}}
	* Makefile.in: Always use new build script.
	(melt.encap): Add more dependencies.
	(melt-built-param.mk): Remove target.
	(melt-build-settings.sh, meltbuild-empty-file.c): New targets.

	* melt-build-script.tpl: Add meltgendoc.texi generation which does
	not work yet.

	* melt-build-script.sh: Regenerate.

2012-07-25  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/xtramelt-ana-base.melt (superloop_tuple)
	(dbgout_boxbasicblock_method, dbgout_boxedge_method)
	(dbgout_boxloop_method, dbgout_mapedge_method): Move these
	functions after loop related primitives.

	* Makefile.in: Remove MELT_NEWBUILD & melt-newbuild.{mk,tpl}...

	* melt-build-script.tpl: Build the application xtramelt* modules,
	but don't avoid useless recompilation yet.

	* melt-build-script.sh: Regenerate.

2012-07-24  Basile Starynkevitch  <basile@starynkevitch.net>
	{{after svn rev 189788 switching to the new build system, still incomplete and instable}}
	* melt-runtime.c (melt_load_module_index): Use BASE.meltmod-MDFIVESUM.FLAVOR.so naming scheme.

	* melt-build-script.tpl: The stages are built using the new
	melt-module.mk but not the xtramelt* modules! INCOMPLETE!!

	* melt-build-script.def: Double-quote the stages.

	* melt-build-script.sh: Regenerate.

	* Makefile.in: Force MELT_NEWBUILDSCRIPT=1.

2012-07-23  Basile Starynkevitch  <basile@starynkevitch.net>
	* Makefile.in (melt-build-param.sh): GCCMELT_MAKE gets also the
	$(MAKEFLAGS).

2012-07-23  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.c (melt_load_module_index): Typo.

2012-07-23  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-build-script.tpl: Generates the stage0 meltbuild.mk, but not working yet.
	* melt-build-script.sh: Regenerate.

	* melt-runtime.c (melt_load_module_index): Inform about GCCMELT_TRACE_MODULE.

2012-07-20  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate all}}

	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+02.c: Regenerate.
	* melt/generated/warmelt-macro+03.c: Regenerate.
	* melt/generated/warmelt-macro+04.c: Regenerate.
	* melt/generated/warmelt-macro+05.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+01.c: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+03.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2012-07-20  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-outobj.melt (output_melt_descriptor): Emit both old
	fashioned and new fashioned module dependencies in generated make
	fragment.

2012-07-20  Basile Starynkevitch  <basile@starynkevitch.net>
	* doc/melt.texi (MELT environments and bindings): Mention
	environment-related macros.
	(translating a MELT module): Improve documentation, mention
	melt_start_this_module.

	* melt-runtime.h: Improve comment for MELT_DYNLOADED_SUFFIX.

	* melt/warmelt-macro.melt: export directives on same line as
	exported name.
	(debug, export_values, export_macro, export_patmacro)
	(export_class, export_synonym)
	(current_module_environment_container, parent_module_environment)
	(update_current_module_environment_container, fetch_predefined)
	(store_predefined): Document these macros.

2012-07-19  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate all}}

	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+02.c: Regenerate.
	* melt/generated/warmelt-base+03.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2012-07-19  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.c (melt_load_module_index): Add tracing into
	melt_trace_module_fil of the base shared object path...

2012-07-19  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-base.melt (generate_debug_melt_module)
	(generate_optimized_melt_module, generate_quickly_melt_module)
	(generate_melt_module): Remove.

2012-07-19  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate all}}

	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+02.c: Regenerate.
	* melt/generated/warmelt-base+03.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2012-07-19  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-base.melt (generate_flavored_melt_module): Move.
	(generate_optimized_melt_module, generate_debug_melt_module)
	(generate_quickly_melt_module): Obsolete primitives.

	* melt/warmelt-modes.melt (runfile_docmd, rundebug_docmd): Use
	generate_flavored_melt_module.

2012-07-19  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.c (melt_find_file_at): Silently continue when the
	directory or path or environment name is null or empty.
	(melt_load_module_index): Better trace message.

2012-07-19  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.c (MELT_FILE_IN_ENVIRON_PATH): Mew macro constant.
	(melt_find_file_at): Handle it.
	(meltgc_read_file, melt_load_module_index)
	(meltgc_load_module_list): Use it.

2012-07-19  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.c (melt_trace_dynlink_fil): Remove and rename as...
	(melt_trace_module_fil): New static variable, see
	GCCMELT_TRACE_MODULE environment variable.
	(melt_trace_source_fil): New static variable, see
	GCCMELT_TRACE_SOURCE environment variable.
	(MELT_FILE_LOG): New macro constant.
	(melt_find_file_at): Handle and use it.
	(meltgc_read_file): Trace source files.
	(melt_load_module_index): Trace module files.
	(meltgc_load_module_list): Trace source files.
	(melt_really_initialize): Trace using GCCMELT_TRACE_MODULE &
	GCCMELT_TRACE_SOURCE environment variables.
	(do_finalize_melt): Close trace files of modules & sources.

2012-07-19  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-run.proto.h (start_module_melt): Remove.

	* melt-runtime.c (melt_trace_dynlink_fil): Declare static
	variable.
	(melt_load_module_index): Use it.
	(melt_really_initialize): Initialize it from GCCMELT_TRACE_DYNLINK
	environment variable.
	(do_finalize_melt): Close it.

2012-07-19  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate all}}

	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+02.c: Regenerate.
	* melt/generated/warmelt-base+03.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+02.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+03.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-macro+01.c: Regenerate.
	* melt/generated/warmelt-macro+02.c: Regenerate.
	* melt/generated/warmelt-macro+03.c: Regenerate.
	* melt/generated/warmelt-macro+04.c: Regenerate.
	* melt/generated/warmelt-macro+05.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+01.c: Regenerate.
	* melt/generated/warmelt-normatch+02.c: Regenerate.
	* melt/generated/warmelt-normatch+03.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+01.c: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+03.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2012-07-19  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-run.proto.h (start_module_melt): Temporary defined as
	melt_start_this_module.

	* melt-runtime.h: Use dash in copyright years.
	Improve comment about gt-melt-runtime.h inclusion.
	(melt_load_module_index): Use melt_start_this_module.
	Improve error messages when failing.
	(melt_output_cfile_decl_impl_secondary_option): Write the main C
	name in the list of generated C files.

	* melt/warmelt-outobj.melt (outpucod_initialroutine): The emitted
	module starting routine is melt_start_this_module.

2012-07-18  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-build-script.tpl: Still buggy, the meltbuild-modules/
	should have files with an md5sum inside.

	* melt-build-script.sh: Regenerate.

2012-07-18  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-build-script.tpl: Compile translator modules in all flavors
	into meltbuild-modules.

	* melt-build-script.sh: Regenerate.

2012-07-18  Basile Starynkevitch  <basile@starynkevitch.net>
	* Makefile.in (melt-build-param.mk, melt-build-param.sh): Emit
	GCCMELT_CC1_PREFIX if defined.

	* melt-build-script.tpl: Define internal variables like
	GCCMELT_STAGE or GCCMELT_SKIPEMITC.  Skip useless stages which
	don't do anything.

	* melt-build-script.sh: Regenerate.

2012-07-18  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-build-script.tpl: More comments. Add meltbuild-sources
	step.

	* melt-build-script.sh: Regenerate.

2012-07-17  Basile Starynkevitch  <basile@starynkevitch.net>
	* Makefile.in (melt-build-param.sh): Better quoting.

	* melt-module.mk: Use GCCMELT_MODULE_DEPENDENCIES as a dependency
	for all compilations.

	* melt-build-script.tpl: Emit it.

	* melt-build-script.sh: Regenerate.

2012-07-17  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-build-script.tpl: Works up to stage3, with fix for typo
	melt-workdir -> meltbuild-workdir twice...
	* melt-build-script.sh: Regenerate.

2012-07-17  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.c (melt_load_module_index): Improve error messages
	when module is not found.

2012-07-17  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-build-script.tpl: Emit the meltbuild_emit command. Still buggy.

	* melt-build-script.sh: New generated file. Still buggy.

2012-07-17  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-build-script.tpl: Emit the meltbuild_emit command. Not
	working yet.

	* melt-build-script.sh: New generated file. Not working yet.

2012-07-16  Basile Starynkevitch  <basile@starynkevitch.net>
	* Makefile.in (melt-build-param.sh): Bettet GCCMELT_STAGE_ZERO.
	* melt-build-script.def: New file.
	* melt-build-script.tpl: New file. Not working yet.
	* melt-build-script.sh: New generated file. Not working yet.

2012-07-16  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.c ...
	(melt_output_cfile_decl_impl_secondary_option): More pretty
	generated C file list.

2012-07-16  Basile Starynkevitch  <basile@starynkevitch.net>

	* common.opt (fmelt-generated-c-file-list=): New option.

	* melt-runtime.c (melt_generated_c_files_list_fil): New static variable.
	(melt_argument): Handle generated-c-file-list.
	(melt_really_initialize): Use it.
	(do_finalize_melt): Close it.
	(melt_output_cfile_decl_impl_secondary_option): Write the
	generated C file list.

	* doc/melt.texi (Invoking MELT): Document
	-fmelt-generated-c-file-list= option.

	* Makefile.in (melt-build-param.sh): New target, a shell sourcable
	file.

2012-07-06  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-build.tpl: Add fromline Guile function to generate unique
	from location...
	Perhaps still issues around MELTGEN_MODULENAME for the plugin?

	* melt-build.mk: Regenerate.

2012-07-06  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.c (melt_probe_stop): Check writing of quit command,
	hence avoiding a compile-time warning.

2012-07-05  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate all}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2012-07-05  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (MELT_VERSION_STRING): Bump to 0.9.6-rc1

2012-07-05  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-newbuild.tpl: Still buggy, perhaps not useful, since
	melt-build.tpl works...

	* melt-newbuild.mk: Regenerate.

	* melt-build.tpl: Add MELT_RUNNER prefix for MELT runs.

	* melt-build.mk: Regenerate.

2012-07-05  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-newbuild.tpl: Still buggy, with memoizing md5sum...

	* melt-newbuild.mk: Regenerate.

2012-07-05  Basile Starynkevitch  <basile@starynkevitch.net>

	* Makefile.in: New build thru melt-build phony target.

	* melt-newbuild.tpl: Using melt-stage*-dir/ directory. But still buggy.

	* melt-newbuild.mk: Regenerate.

2012-07-05  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate all}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2012-07-05  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-outobj.melt (output_melt_descriptor): Add block in
	code chunk.

	* melt-newbuild.tpl: Add melt-new phony target.

	* melt-newbuild.mk: Regenerate.

2012-07-04  Basile Starynkevitch  <basile@starynkevitch.net>

	* Makefile.in: move upper the export of MELTBUILD_MKFILE.

	* melt-newbuild.tpl: Depend more on stamps file. Always rewrite them.
	Still don't work!

	* melt-newbuild.mk: Regenerate.

2012-07-04  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate all}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+04.c: Regenerate.
	* melt/generated/warmelt-macro+05.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2012-07-04  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-macro.melt (mexpand_use_package_from_pkg_config):
	Add block in code chunk.

	* melt-newbuild.tpl: Still buggy, with explicit time stamps...

	* melt-newbuild.mk: Regenerate.

2012-07-03  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-first.melt (option_helper_fun): Use const in code chunk.

2012-07-03  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate all}}

	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+03.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-macro+04.c: Regenerate.
	* melt/generated/warmelt-macro+05.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+01.c: Regenerate.
	* melt/generated/warmelt-normatch+02.c: Regenerate.
	* melt/generated/warmelt-normatch+03.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2012-07-03  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Avoid ungiven secondary results}}
	* melt/warmelt-first.melt (mapobject_sorted_attribute_tuple):
	Return two values.
	* melt/warmelt-macro.melt (mexpand_use_package_from_pkg_config):
	Add block inside codechunk with declarations.
	* melt/warmelt-normal.melt (normexp_multicall): Return two values.
	* melt/warmelt-normatch.melt (normpat_instancepat): Sorting lambda
	return two values.
	* melt/warmelt-genobj.melt (compile_tester): Document; all methods
	return two values.

2012-07-03  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate all}}

	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+02.c: Regenerate.
	* melt/generated/warmelt-base+03.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2012-07-03  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-base.melt (add2out): Loop exits explicitly.

	* melt/warmelt-normal.melt (normexp_multicall): Return secondary
	value.

2012-07-03  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate all}}
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.


2012-07-03  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-first.melt (get_raw_symbol): Cast string to a const
	char* pointer.

2012-07-03  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate all}}

	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2012-07-03  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-normal.melt (normexp_keyword): Return
	two values.

2012-07-03  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate all}}
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2012-07-03  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-normal.melt (normexp_null): Return
	two values.

2012-07-03  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate all}}
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+02.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+03.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2012-07-03  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-outobj.melt: codechunk with declarations made as
	blocks.

2012-07-03  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-normal.melt (normex_symbol, normexp_quote): Return
	two values.

2012-07-03  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-debug.melt: codechunk with declarations made as
	blocks.

2012-07-03  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate all}}

	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2012-07-03  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-newbuild.tpl: Better emitted comment.

	* melt-newbuild.mk: Regenerate.

	* melt/warmelt-normal.melt (normexp_symbol, normexp_defcmatcher)
	(normexp_definstance, normexp_defselector): Return secondary nil.

	* melt/warmelt-outobj.melt: Adding block in codechunk.

	* melt/warmelt-modes.melt: Ditto.

2012-07-03  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate all}}

	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+03.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+03.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2012-07-03  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Avoid some runtime warnings about missing secondary results, and
	some GCC warnings}}
	* melt/warmelt-first.melt (option_helper_fun): Make a block in a chunk.

	* melt/warmelt-normal.melt (normexp_identical)
	(normexp_defprimitive, normexp_defclass, normexp_defciterator)
	(normexp_defun, normexp_parent_module_environment)
	(normexp_fetch_predefined)
	(normexp_current_module_environment_container): Return a secondary result.

	* melt/warmelt-outobj.melt: Avoid warnings in emitted code.

2012-07-03  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate all}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+01.c: Regenerate.
	* melt/generated/warmelt-macro+02.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2012-07-03  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-macro.melt: Add secondary value return when
	appropriate to lower warnings.

2012-07-03  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.c (melt_warn_for_no_expected_secondary_results_at):
	Give at most 8 warnings.

2012-07-03  Basile Starynkevitch  <basile@starynkevitch.net>
	* Makefile.in (melt.encap): Add explicit dependency on
	warmelt-predef.melt & melt-predef.h for the new build.

2012-07-02  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate all}}

	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+02.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+02.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.

2012-07-02  Basile Starynkevitch  <basile@starynkevitch.net>
	* Makefile.in (melt-build-param.mk): filter out optimization and
	debug compiler flags -O and -g.

	* melt-module.mk (%.descr.meltpic.o): Soon obsolete rule.
	(%.descriptor.meltpic.o): New rule.

	* melt/warmelt-first.melt: Code chunks with variable declarations
	need extra braces.

	* melt/warmelt-debug.melt: Ditto.

	* melt/warmelt-normatch.melt (mg_draw_match_graphviz_file): Ditto.

	* melt/warmelt-outobj.melt (output_melt_descriptor): Generate make
	rule for a %.descriptor.meltpic.o.

	* melt-newbuild.tpl: Much more, still buggy.

	* melt-newbuild.mk: Regenerate.

2012-07-02  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate all}}

	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+02.c: Regenerate.
	* melt/generated/warmelt-base+03.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+02.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+03.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-macro+01.c: Regenerate.
	* melt/generated/warmelt-macro+02.c: Regenerate.
	* melt/generated/warmelt-macro+03.c: Regenerate.
	* melt/generated/warmelt-macro+04.c: Regenerate.
	* melt/generated/warmelt-macro+05.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+01.c: Regenerate.
	* melt/generated/warmelt-normatch+02.c: Regenerate.
	* melt/generated/warmelt-normatch+03.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+01.c: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+03.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2012-07-02  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-base.melt (valdesc_routine): Remove gap from
	MELT_ROUTINE_STRUCT, add extra pointer in tabval.

	* melt/warmelt-genobj.melt (compile2obj_initproc): Cast pointer
	for %p in checkfreshenv.

	* melt/warmelt-outobj.melt (output_curframe_declstruct_init): Emit
	cast to (void) to use arguments. Reorder emitted declarations.

2012-07-02  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate all}}
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+01.c: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+03.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2012-07-02  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-newbuild.tpl: Add space after ifeq.
	* melt-newbuild.mk: Regenerate.
	* melt/warmelt-base.melt (valdesc_multiple) The emitted
	MELT_MULTIPLE_STRUCT macro has a never empty array. Remove gap.
	* melt/warmelt-outobj.melt: Replace predefinited by meltpredefinited.
	(outpucod_initialroutine): Use the meltpredefinited in a (void)
	cast.
	* melt/warmelt-genobj.melt (compil_data_and_slots_fill): Use
	meltpredefinited.

2012-07-02  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate all}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+02.c: Regenerate.
	* melt/generated/warmelt-base+03.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+02.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+03.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-macro+01.c: Regenerate.
	* melt/generated/warmelt-macro+02.c: Regenerate.
	* melt/generated/warmelt-macro+03.c: Regenerate.
	* melt/generated/warmelt-macro+04.c: Regenerate.
	* melt/generated/warmelt-macro+05.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+01.c: Regenerate.
	* melt/generated/warmelt-normatch+02.c: Regenerate.
	* melt/generated/warmelt-normatch+03.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+01.c: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+03.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2012-07-02  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.h (melt_warn_for_no_expected_secondary_results):
	Becomes a macro.
	(melt_warn_for_no_expected_secondary_results_at): New function
	declaration.
	* melt-runtime.c (melt_warn_for_no_expected_secondary_results_at):
	New function.
	* melt/warmelt-base.melt (compare_named_alpha): return two values.
	* melt/warmelt-genobj.melt (compilobj_nrep_return): Emit check for
	secondary results..
	* melt/warmelt-outobj.melt (line_and_file_of_location): Always
	return two results.

2012-07-02  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-newbuild.tpl: Still buggy.
	* melt-newbuild.mk: Regenerate, as self contained makefile.
	* Makefile.in (melt-build-param.mk): Better.
	(melt.encap): Don't work yet with MELT_NEWBUILD.
	* melt/warmelt-base.melt (valdesc_closure): Add extra pointer, not
	gap into MELT_CLOSURE_STRUCT.
	* melt-runtime.h (melt_warn_for_no_expected_secondary_results):
	New function.
	* melt/warmelt-genobj.melt (compilobj_nrep_return): Emit it.

2012-07-02  Basile Starynkevitch  <basile@starynkevitch.net>
	* Makefile.in (melt-built-param.mk): New target.
	(melt.encap): Build it.

2012-07-02  Basile Starynkevitch  <basile@starynkevitch.net>
	* Makefile.in (MELT_REVISION_STR): New.

2012-06-29  Basile Starynkevitch  <basile@starynkevitch.net>
	{{melt-newbuild is badly broken}}
	* Makefile.in (MELTBUILD_MKFILE): New variable for include.

	* melt-newbuild.tpl: Using recursive make for substages...
	NOT WORKING YET!

	* melt-newbuild.mk: Regenerate.

2012-06-29  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-newbuild.tpl: Adding more, notably warmelt[123] phony
	targets. Still incomplete.

	* melt-newbuild.mk: Regenerate.

2012-06-28  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-newbuild.tpl: Adding more.  Still incomplete.

	* Makefile.in: adding explicit make warmelt1.

2012-06-28  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-newbuild.tpl: Adding some other stages stuff, still
	incomplete.

	* melt-newbuild.mk: Regenerate.

2012-06-27  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-newbuild.tpl: Improve rules for stage 0, adding some other
	stages stuff, still incomplete.

	* melt-newbuild.mk: Regenerate.

2012-06-26  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-newbuild.tpl: Improve rules for stage 0.

	* melt-newbuild.mk: Regenerate.

2012-06-26  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-module.mk: Add comment for extracting fragment
	melt-module-frag.mk.

	* melt-newbuild.tpl: Add rules for stage 0.

	* melt-newbuild.mk: Regenerate.

2012-06-26  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-module.mk (GCCMELT_QUICKLYBUILT_PREPROFLAGS)
	(GCCMELT_OPTIMIZED_PREPROFLAGS, GCCMELT_DEBUGNOLINE_PREPROFLAGS)
	(GCCMELT_DYNAMIC_PREPROFLAGS, GCCMELT_DESCRIPTOR_PREPROFLAGS): New.
	Use them appropriately.

2012-06-25  Basile Starynkevitch  <basile@starynkevitch.net>
	* Makefile.in: Enable melt-newbuild.* files. when MELT_NEWBUILD
	* melt-newbuild.tpl: New file, incomplete.
	* melt-newbuild.def: New file.
	* melt-newbuild.mk: New generated file, incomplete.

2012-06-25  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-module.mk: Improve slightly.

2012-06-22  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.


2012-06-22  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Adding variants to translateinit modes}}
	* melt/warmelt-modes.melt (translateinit_flavored): New.
	(translateinitmodulequicklybuilt_mode)
	(translateinitmoduledebugnoline_mode)
	(translateinitmoduleoptimized_mode): New.

2012-06-21  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}

	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2012-06-21  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-modes.melt (tranlateinitmodule_mode): New.

2012-06-20  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+03.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-macro+01.c: Regenerate.
	* melt/generated/warmelt-macro+02.c: Regenerate.
	* melt/generated/warmelt-macro+03.c: Regenerate.
	* melt/generated/warmelt-macro+04.c: Regenerate.
	* melt/generated/warmelt-macro+05.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2012-06-20  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-module.mk (GCCMELT_PACKAGES_CFLAGS,GCCMELT_PACKAGES_LIBES):
	Define and use them for package support.
	See https://groups.google.com/d/topic/gcc-melt/c2iPrRJHn88

2012-06-20  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Adding support of use_package_from_pkg_config macro}}

	* melt/warmelt-first.melt (class_module_context): Add
	mocx_packagepclist field.

	* melt/warmelt-macro.melt (class_source_use_package_from_pkg_config): New class.
	(mexpand_use_package_from_pkg_config): New macro expander.
	(use_package_from_pkg_config, use-package-from-pkg-config): New
	synonymous macros.

	* melt/warmelt-normal.melt (normexp_use_package_from_pkg_config):
	New method for normal_exp of
	class_source_use_package_from_pkg_config

	* melt/warmelt-outobj.melt (compile_list_sexpr): Initialize
	the :mocx_packagepclist field.
	(output_melt_descriptor): New modctx argument.
	Emit package information in makefile chunk.

2012-06-20  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-module.mk: Handle appropriate *mdsumed.c symlinks with
	special rules for them, e..g.
	($(GCCMELTGEN_BUILD)%.quicklybuilt.meltmdsumedpic.o): New rules
	($(GCCMELTGEN_BUILD)%.optimized.meltmdsumedpic.o): New rules
	etc...

2012-06-19  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-module.mk: Add rules for various *.meltmod.so and make a
	symlink if MELTGEN_MODULENAME defined.

2012-06-19  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-module.mk: Add rules for various *.meltpic.o

2012-06-19  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-module.mk (GCCMELTGEN_BUILD): Define
	include  $(GCCMELT_MODULE_SOURCEBASE)+meltbuild.mk

2012-06-19  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-outobj.melt (output_melt_descriptor): Emit eof
	comment for FOO+meltbuild.mk generated file.

	{{Regenerate}}
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2012-06-19  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-outobj.melt (output_melt_descriptor): Generated
	dependencies assume all binary object and module files are prefixed
	by $(GCCMELTGEN_BUILD).

2012-06-19  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-outobj.melt (output_melt_descriptor): Generete
	dependency of .descr.pic.o file.

2012-06-19  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}

	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2012-06-19  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-outobj.melt (output_melt_descriptor): Better
	generation of make fragment file.

2012-06-19  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-outobj.melt (output_melt_descriptor): Start adding
	generation of make fragment file FOO+meltbuild.mk ...

2012-06-18  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+02.c: Regenerate.
	* melt/generated/warmelt-base+03.c: New generated file.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+02.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.


2012-06-18  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-module.mk (GCCMELT_SECONDARY_CFILES): Rename
	GCCMELT_SECONDARIES variable.
	(GCCMELT_SECONDARY_MD5SUMS): Rename -GCCMELT_SECONDARIES_MD5
	variable.
	(GCCMELT_PRIMARY_MDSUMED_BASE): Rename GCCMELT_PRIMARY_OBJ
	variable.
	(GCCMELT_SECONDARY_MDSUMED_BASES): Rename GCCMELT_SECONDARIES_OBJ
	variable.
	Updated rules accordingly.
	(melt_module): Use melt_workspace.
	(melt_workspace): New phony target.

	* melt/warmelt-base.melt (string4out): New function.

	* melt/xtramelt-probe.melt (scanprobe_exec): Use it.

2012-06-16  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-build.tpl (meltarg_genworklink):  Define and use it.

	* melt-build.mk: Regenerate.

	* melt/warmelt-base.melt (checkval_dbg): Cast argument to void to
	avoid warnings in generated C file.

2012-06-16  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.c (melt_output_cfile_decl_impl_secondary_option):
	Detect when symlinked work source already exists and is same...

2012-06-16  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.c: Re-indent with both astyle & indent.
	(melt_output_cfile_decl_impl_secondary_option): Initialize
	workdir, add debug..

2012-06-16  Basile Starynkevitch  <basile@starynkevitch.net>

	* common.opt (fmelt-generate-work-link): New flag.

	* doc/melt.texi (Invoking MELT): Explain -fmelt-bootstrapping,
	-fmelt-debugging, -fmelt-generate-work-link.

	* melt-runtime.c (melt_flag_generate_work_link): Declare when
	MELT_IS_PLUGIN.
	(melt_argument): Handle "generate-work-link".
	(melt_string_hex_md5sum_file_to_hexbuf): New static function.
	(meltgc_string_hex_md5sum_file): Use it.
	(melt_output_cfile_decl_impl_secondary_option): Use
	melt_flag_generate_work_link, etc.

2012-06-15  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/xtramelt-ana-base.melt (basicblock_nb_pred)
	(basicblock_nth_pred_edge, basicblock_nth_succ_edge): New
	primitives.

	* melt/xtramelt-probe.melt (scanprobe_exec): Should show edges.

2012-06-15  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/xtramelt-probe.melt (scanprobe_exec): Show gimple number
	in basic blocks.

2012-06-15  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/xtramelt-probe.melt (scanprobe_exec): Show the gimpleseq
	when non-empty.

2012-06-14  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/xtramelt-probe.melt (probe_get_file_of_name)
	(probe_get_interesting_location): Improve typography of commands
	sent to probe.
	(info_location_probe): Title is correctly made.
	(scanprobe_exec): Use output_tree_briefly.

2012-06-13  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-debug.melt (dbgout_integer_method): Output
	specially constant integers.

	* melt/xtramelt-probe.melt (send_command_to_probe): More debug.

2012-06-13  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-base.melt (add2out): Improve error messages.

2012-06-13  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/xtramelt-ana-base.melt (output_tree): New function.

	* melt/xtramelt-ana-gimple.melt (output_gimple, output_gimpleseq):
	New functions.

	* melt/xtramelt-probe.melt (scanprobe_exec): Use them.

2012-06-13  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}

	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+02.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2012-06-13  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-debug.melt (dbgout_bucketlong_method): Emit
	better indentation.
	* melt/xtramelt-ana-probe.melt (probe_get_interesting_location):
	Better.

2012-06-13  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-debug.melt (dbgout_bucketlong_method): New method
	for dbg_out on discr_bucket_longs.

	* melt/xtramelt-ana-probe.melt (probe_get_file_of_name): Better
	debug.

2012-06-12  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/xtramelt-ana-probe.melt (scanprobe_exec): Walk thru the
	gimpleseq and give to probe information on gimples & trees of
	basic blocks.

2012-06-07  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/xtramelt-ana-base.melt (basicblock_index): New primitive.

	* melt/xtramelt-ana-probe.melt (scanprobe_exec): Walk thru the
	gimpleseq, but incomplete.

2012-06-06  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-normal.melt (normexp_return): Check secondary
	result types.
	* melt/warmelt-genobj.melt (compilobj_nrep_return): Use
	foreach_in_multiple not multiple_every.
	* melt/warmelt-outobj.melt (outpucod_objputxtraresult): Issue an
	error when a result has an impossible ctype (e.g. ctype_string).
	* melt/xtramelt-probe.melt (probe_tree_interesting_location)
	(probe_gimple_interesting_location): Cast argument to
	meltgc_new_string in code chunks.
	(info_location_probe): Call the stored closures.
	(scanprobe_exec): Add informer on function declaration.

2012-06-06  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+02.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-macro+01.c: Regenerate.
	* melt/generated/warmelt-macro+02.c: Regenerate.
	* melt/generated/warmelt-macro+04.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+01.c: Regenerate.
	* melt/generated/warmelt-normatch+02.c: Regenerate.
	* melt/generated/warmelt-normatch+03.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+03.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2012-06-06  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.c (melt_raw_sigio_signal): sig can be SIGIO or
	SIGPIPE.

	* melt/warmelt-debug.melt (melt_debug_fun): Use block_signals.

2012-06-05  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/xtramelt-probe.melt (scanprobe_exec): Incomplete.

2012-06-04  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/xtramelt-probe.melt (scanprobe_exec): New stub.
	(install_scanprobe_pass): New function.
	(probe_docmd): Call it.

2012-06-04  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (meltgc_walk_gimple_seq): New declaration.

	* melt-runtime.c (meltgc_walk_gimple_seq): New function.
	(meltgc_walkstmt_cb, meltgc_walktree_cb): New internal functions.

	* melt/xtramelt-ana-gimple.melt (walk_gimple_seq)
	(walk_gimple_seq_unique_tree): New primitives.

	* melt/xtramelt-probe.melt (info_location_probe): New stub function.
	(start_probe): Call it.

2012-06-01  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/xtramelt-probe.melt (probe_gimple_interesting_location):
	New function.

2012-06-01  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/xtramelt-probe.melt (probe_tree_interesting_location): New
	function.

2012-05-31  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-first.melt (foreach_in_multiple): Emit better
	comment.

	* melt/xtramelt-probe.melt (class_probed_file): Add
	probedfile_linesbucket field.
	(class_probed_interesting_location): New class wirh probiloc_* fields.
	(class_probed_data): Add probedata_ilocvec & probedata_nbiloc
	fields.
	(probe_get_interesting_location): New function.
	(start_probe): Export function.

2012-05-30  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}

	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+02.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+03.c: Regenerate.
	* melt/generated/warmelt-macro+04.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+01.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+03.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2012-05-30  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-normatch.melt: Use deref, not content.

2012-05-30  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}

	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+02.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+03.c: Regenerate.
	* melt/generated/warmelt-macro+04.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+01.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+03.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.
	* melt-predef.list (CLASS_CONTAINER): Remove.
	* melt/warmelt-macro.melt: Use set_ref macro instead of
	set_reference function.
	* melt/warmelt-outobj.melt: Ditto.
	* melt/warmelt-modes.melt: Ditto.
	* melt/warmelt-base.melt: Ditto.
	* melt/warmelt-normal.melt: Ditto.
	* melt/warmelt-normatch.melt: Ditto.
	* melt/warmelt-debug.melt: Ditto.
	* melt/xtramelt-opengpu.melt: Ditto.
	* melt/xtramelt-probe.melt: Ditto.

2012-05-30  Basile Starynkevitch  <basile@starynkevitch.net>
	* make-warmelt-predef.awk: Emit comment for lisp emacs mode.
	* melt-predef.list: Comment out CLASS_CONTAINER.

2012-05-30  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-macro+01.c: Regenerate.
	* melt/generated/warmelt-macro+02.c: Regenerate.
	* melt/generated/warmelt-macro+03.c: Regenerate.
	* melt/generated/warmelt-macro+04.c: Regenerate.
        * melt/generated/warmelt-macro+05.c: New generated file.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2012-05-30  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-macro.melt (mexpand_reference)
	(patexpand_reference): New functions renaming of mexpand_container
	& patexpand_container.
	(mexpandobsolete_container, patexpandobsolete_container):
	expansion for obsolete container macro.
	(mexpand_deref, mexppand_set_ref): New functions with
	mexpand_deref renaming mexpand_content.
	(mexpandobsolete_content): expansion for obsolete content macro.

2012-05-29  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.h (melt_container_value, meltgc_new_container)
	(meltgc_container_put, MELTGLOB_CLASS_REFERENCE)
	(MELTFIELD_REFERENCED_VALUE, MELTLENGTH_CLASS_REFERENCE): Remove
	macros.

	* melt-runtime.c (meltfieldoff__CONTAINER_VALUE)
	(meltclasslen__CLASS_CONTAINER): Remove.

2012-05-29  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+02.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+03.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-macro+01.c: Regenerate.
	* melt/generated/warmelt-macro+02.c: Regenerate.
	* melt/generated/warmelt-macro+03.c: Regenerate.
	* melt/generated/warmelt-macro+04.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+01.c: Regenerate.
	* melt/generated/warmelt-normatch+02.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+01.c: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+03.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2012-05-29  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-predef.list (CLASS_REFERENCE): New
	(CLASS_CONTAINER): Obsolete.

	* melt-runtime.c (meltfieldoff__CONTAINER_VALUE)
	(meltclasslen__CLASS_CONTAINER): New, temporarily.

	* melt-runtime.h (MELTGLOB_CLASS_REFERENCE)
	(MELTFIELD_REFERENCED_VALUE,MELTLENGTH_CLASS_REFERENCE): #define-d
	only #ifndef MELT_HAS_PREDEF_CLASS_REFERENCE.

	* melt/warmelt-first.melt (class_reference): New predefined...

	* melt/warmelt-modes.melt (generate_runtypesupport_predef_fields):
	Emit #define MELT_HAS_PREDEF_<predefname>

2012-05-29  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Speak of "references", not "containers"}}
	* melt-runtime.h (MELTGLOB_CLASS_REFERENCE): temporary macro for
	MELTGLOB_CLASS_CONTAINER.
	(MELTFIELD_REFERENCED_VALUE): temporary macro for
	MELTFIELD_CONTAINER_VALUE.
	(MELTLENGTH_CLASS_REFERENCE): temporary macro for
	MELTLENGTH_CLASS_CONTAINER.
	(melt_container_value): macro, for renamed ...
	(melt_reference_value): New function.
	(meltgc_new_container): macro, for renamed ...
	(meltgc_new_reference): New function.
	(meltgc_container_put): macro, for renamed ...
	(meltgc_reference_put): New function.
	Add #warning about temporary renaming.

	* melt-runtime.c (meltgc_new_reference, meltgc_reference_put): New
	function, renaming ...
	(meltgc_new_container, meltgc_reference_put): Renamed functions..
	(meltgc_poll_inputs): Bette debugeprintf.

	* melt/warmelt-genobj.melt (compile2obj_initproc): Emit
	melt_reference_value not melt_container_value.

	* melt/warmelt-macro.melt: Use class_reference instead of
	class_container.
	* melt/warmelt-modes.melt: Ditto.
	* melt/warmelt-normal.melt: Ditto.
	* melt/warmelt-normatch.melt: Ditto.
	* melt/warmelt-outobj.melt: Ditto.
	* melt/xtramelt-ana-simple.melt: Ditto.
	* melt/xtramelt-opengpu.melt: Ditto.
	* melt/xtramelt-probe.melt: Ditto.

2012-05-29  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Speak of "references", not "containers", which was used
	improperly in MELT}}
	* melt/warmelt-first.melt (class_reference): Synonym for
	class_container.
	(referenced_value): Synonym for field container_value.

	* melt/warmelt-base.melt (set_reference): Was set_content.
	(melt_mode_reference): was melt_mode_container
	(set_content, melt_mode_container): Obsolete synonyms

	* melt/warmelt-macro.melt (reference): same as container macro.
	(deref): same as content macro.

	* melt/warmelt-normal.melt: Change names accordingly
	* melt/warmelt-normatch.melt: Ditto
	* melt/warmelt-outobj.melt: Ditto
	* melt/warmelt-modes.melt: Ditto
	* melt/xtramelt-probe.melt: Ditto
	* melt/xtramelt-opengpu.melt: Ditto

2012-05-15  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/xtramelt-probe.melt (probe_start): New function.
	(probe_docmd): Call it.

2012-05-15  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.c (meltgc_poll_inputs): Retrieve the closure
	correctly. Seems to work.

2012-05-15  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.c (meltgc_poll_inputs): On end of input, replace
	the handler with :TRUE.

2012-05-15  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.c (meltgc_poll_inputs): handling end of input for
	POLLHUP etc...

2012-05-14  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.c (meltgc_poll_inputs): Even more debugprintf.

2012-05-14  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.c (meltgc_poll_inputs): Even more debugprintf.

2012-05-14  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.c (meltgc_poll_inputs): More debugprintf.

2012-05-14  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.c (meltgc_poll_inputs): Always calls poll, even when
	nbfd is 0. More debugprintf.

	* melt/xtramelt-probe.melt (probe_at_exit): More debug.

2012-05-14  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-first.melt (foreach_pair, foreach_in_list): Move up.
	(init_exitfinalizer): Add code chunks for debugeprintf.
	Use foreach_in_list instead of list_every.

2012-05-14  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-build.tpl: Always include the warmelt*.c for md5sum.
	* melt-build.mk: Regenerate.

2012-05-14  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-modes.melt: Always register
	child_process_sigchld_handler because it also handles probe
	ending.

2012-05-14  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (melt_interrupted, melt_blocklevel_interrupts)
	(MELT_CHECK_INTERRUPT): Remove compatibility macros.

2012-05-14  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+02.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+02.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+03.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-macro+01.c: Regenerate.
	* melt/generated/warmelt-macro+02.c: Regenerate.
	* melt/generated/warmelt-macro+03.c: Regenerate.
	* melt/generated/warmelt-macro+04.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+01.c: Regenerate.
	* melt/generated/warmelt-normatch+02.c: Regenerate.
	* melt/generated/warmelt-normatch+03.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+01.c: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+03.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2012-05-14  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Use "signal" not "interrupt" in names}}
	* melt-runtime.h (melt_interrupted): Rename as
	(melt_signaled).
	(melt_blocklevel_interrupts): Rename as
	(melt_blocklevel_signals).
	(MELT_CHECK_INTERRUPT): Rename as
	(MELT_CHECK_SIGNAL).
	(melt_interrupted, melt_blocklevel_interrupts)
	(MELT_CHECK_INTERRUPT): Temporary macros for old compatibility.

	* melt-runtime.c:
	Use MELT_CHECK_SIGNAL everywhere instead of MELT_CHECK_INTERRUPT.
	(melt_interrupted): Rename as ...
	(melt_signaled): New.
	(melt_handle_interrupt): Rename as ...
	(melt_handle_signal): New.

	* melt/warmelt-first.melt: Mention MELT_CHECK_SIGNAL in comments

	* melt/warmelt-base.melt (block_signals): Use MELT_CHECK_SIGNAL.

	* melt/warmelt-normal.melt (class_nrep_checkinterrupt): Rename as
	(class_nrep_checksignal): New.

	* melt/warmelt-normatch.melt (normexp_match, normexp_altmatch):
	Use class_nrep_checksignal.

	* melt/warmelt-genobj.melt (compilobj_nrep_checkinterrupt): Rename as
	(compilobj_nrep_checksignal): New, and use class_objchecksignal.

	* melt/warmelt-outobj.melt (outpucod_procroutine): Emit
	current_blocklevel_signals_*_melt and melt_blocklevel_signals.
	(outpucod_objcheckinterrupt): Rename as ...
	(outpucod_objchecksignal): ... emit MELT_CHECK_SIGNAL

2012-05-14  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.h (melt_wait_for_probe): Declare.
	* melt-runtime.c (melt_wait_for_probe): No more static.
	* melt/warmelt-base.melt (block_interrupts): Remove, since renamed
	as ...
	(block_signals): Add.
	* melt/warmelt-modes.melt (unregister_alarm_timer): Done.
	(childproc_bucket_container): New.
	(child_process_sigchld_handler): New.
	(register_child_process_handler): Implement.

2012-05-11  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+02.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+02.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+03.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-macro+01.c: Regenerate.
	* melt/generated/warmelt-macro+02.c: Regenerate.
	* melt/generated/warmelt-macro+03.c: Regenerate.
	* melt/generated/warmelt-macro+04.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+01.c: Regenerate.
	* melt/generated/warmelt-normatch+02.c: Regenerate.
	* melt/generated/warmelt-normatch+03.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+01.c: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+03.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2012-05-11  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.h (melt_blocklevel_interrupts): New declaration.
	(MELT_CHECK_INTERRUPT): Use it.

	* melt-runtime.c (melt_blocklevel_interrupts): New variable.

	* melt/warmelt-base.melt (block_interrupts): New c-interator.

	* melt/warmelt-outobj.melt (outpucod_procroutine): Save and
	restore the melt_blocklevel_interrupts at prologue & epilogue.

	* melt/warmelt-modes.melt (register_alarm_handler)
	(unregister_alarm_timer): Use block_interrupts.

2012-05-11  Basile Starynkevitch  <basile@starynkevitch.net>
	{{for merge with trunk svn 187397, since gimple_seq are
	disappearing in GCC 4.8}}

	* melt-runtime.h (melt_gt_ggc_mx_gimple_seq_d): New declaration
	(gt_ggc_mx_gimple_seq_d): Macro defined when GCC 4.8 only.

	* melt-runtime.c (melt_gt_ggc_mx_gimple_seq_d): New function,
	defined for GCC 4.8 only.

	* melt/warmelt-debug.melt (melt_debug_fun): Add cast in our
	warning diagnostic to avoid a warning.

2012-05-11  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-module.mk (MELT_AUTOHOST_H): New.
	(MELTGCC_BUILD_WITH_CXX): Use it.

2012-05-09  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.h (melt_set_real_timer_millisec): New declaration.
	(melt_longsbucket_nth_key, melt_longsbucket_nth_val): New
	functions.

	* melt-runtime.c (melt_set_real_timer_millisec): New function.

	* melt/warmelt-first.melt (bucketlong_nth_key)
	(bucketlong_nth_val): New primitives.

	* melt/warmelt-base.melt (relative_time_millisec)
	(set_real_timer_millisec): New primitives.

	* melt/warmelt-modes.melt (handle_alarm_signal)
	(register_alarm_handler): New functions.

2012-05-09  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.h (melt_relative_time_millisec): New declaration.
	* melt-runtime.c (melt_relative_time_millisec): New function.
	* melt/warmelt-modes.melt: Improve stubs.

2012-05-09  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-macro.melt (mexpand_defun): Signal error for empty
	body.
	* melt/warmelt-modes.melt (register_alarm_timer)
	(register_child_process_handler, register_input_channel_handler)
	(unregister_alarm_timer, unregister_child_process_handler): New stubs.

	* melt/xtramelt-probe.melt (show_version_probe): Send a
	SETSTATUS_pcd command.

2012-05-09  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}

	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+03.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2012-05-09  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.h (melt_got_sigchld): New volatile variable.
	(melt_argdescr_length): Better cast.
	(melt_probe_start): Return the pid.
	* melt-runtime.c (melt_got_sigchld): New volatile variable.
	(melt_probe_start): Return the pid.
	(melt_raw_sigchld_signal): New.
	(melt_install_signal_handlers): Use it.
	(meltgc_handle_sigalrm): Count them.
	(meltgc_handle_sigchld): New stub.
	(meltgc_handle_interrupt): Deal with SIGCHLD.

	* melt-predef.list (CLASS_ALARM_HANDLER)
	(CLASS_CHILD_PROCESS_HANDLER): New.

	* melt/warmelt-first.melt (class_alarm_handler)
	(class_child_process_handler): New.

2012-05-09  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2012-05-09  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.h (melt_argdescr_length): Handle MELTPAR_MARKGGC ie
	(void*)-1L as null.
	* melt/warmelt-modes.melt (makedoc_genmacro): Add debug.
	(makedoc_genmacro, makedoc_genciterator): Sort correctly.

2012-05-09  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.h (MELT_VERSION_STRING): Bump to 0.9.6-pre

	* Makefile.in (melt-runtime-params-inc.c): Add melt_header_dir.
	(melt_header_dir): New variable.
	(install-plugin): Install the MELT headers separately.
	(melt_version_string): New variable.
	(melt_source_dir, melt_header_dir, melt_module_dir)
	(melt_installed_module_makefile): Use it.

2012-05-07  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/xtramelt-probe.melt (probe_docmd): Initialize the
	probedata_reqhdict slot.

2012-05-07  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-build.tpl (melt-clean): Only remove meltgen*texi files.
	* melt-build.mk: Regenerate.

2012-05-07  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/xtramelt-probe.melt (probe_register_request_verb)
	(probe_register_request_verb): More debug.

2012-05-07  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.c (meltgc_read_from_rawstring): Keep valv in its
	frame slot.

2012-05-07  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.c (melt_skipspace_getc): Skip terminating newline
	in buffers.

2012-05-07  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.h (melt_basename): New function.
	(debugeprint*): Use it in macros.

	* melt-runtime.c: Use it everywhere.

2012-05-07  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.c: indented with astyle -gnu -s2 command.

2012-05-07  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.c (melt_probe_start): Test that the probe did not
	terminate at once...

2012-05-07  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.c (melt_send_command_strbuf_to_probe): Test
	existence of probe process before sending...

2012-05-07  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2012-05-07  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-base.melt (valdesc_bucketlongs): Better copying &
	cloning routines.

2012-05-05  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2012-05-05  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-base (valdesc_bucketlongs): Add asserts
	* melt-runtime.c (melt_check_call_frames_at)
	(meltnbcheckcallframes, meltthresholdcheckcallframes): Only #if
	ENABLE_GC_CHECKING.

2012-05-05  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.c (meltgc_new_longsbucket): Correct allocated &
	cleared size.

2012-05-04  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.c (MELT_PROBE_QUIT_COMMAND): Add newline and delay.

	* melt/xtramelt-probe.melt (probe_register_request_verb)
	(show_version_probe): New
	(probe_docmd): Register VERSION_prq verb.

2012-05-04  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.c: include <wordexp.h>
	(melt_probe_start): Rewritten to use wordexp & wordfree.

2012-05-03  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.c (melt_probe_start): Add exec to command. The file
	descriptors are still probably wrong.

	* melt/xtramelt-probe.melt (probe_docmd): Return true.

2012-05-02  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.c (melt_send_command_strbuf_to_probe): Add debug
	print.

2012-05-02  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.c (meltgc_new_real_accessible_path_string): Add
	cast.
	(melt_probe_start): Move debug messages.
	(melt_send_command_strbuf_to_probe): Add CONST_CAST.

2012-05-02  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+02.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+03.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-macro+01.c: Regenerate.
	* melt/generated/warmelt-macro+02.c: Regenerate.
	* melt/generated/warmelt-macro+03.c: Regenerate.
	* melt/generated/warmelt-macro+04.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2012-05-02  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.c (melt_get_inisysdata): Move out...
	* melt-runtime.h (melt_get_inisysdata): Move to here

	* melt/warmelt-base.melt (poll_all_inputs): New primitive.

	* melt/xtramelt-probe.melt (class_probe_data): Add
	probedata_cmdtoprobefd & probedata_reqfromprobefd fields.
	(probe_request_processor): Clear them on EOF.
	(probe_at_exit): New internal function.
	(probe_docmd): Fill them, and register at exit..

2012-04-27  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-first.melt (class_input_channel_handler): Add
	documentation.

	* melt/warmelt-modes.melt (register_input_channel_handler): Add
	documentation. Set the magic number to the fd.

	* melt/xtramelt-probe.melt (class_probe_data): Add
	probedata_reqhdict & probedata_aux fields.
	(probe_get_data): New function.
	(probe_request_processor): New internal function.
	(probe_docmd): Start the probe and register its input handler.

2012-04-27  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-macro.melt (when,unless): Add macro for syntactic
	sugar.
	(mexpand_when, mexpand_unless): New sugaring macro expanders.

	* melt/xtramelt-probe.melt (class_probed_file, class_probe_data):
	New classes.
	(probe_get_file_of_name, send_command_to_probe)
	(send_object_to_probe): New functions or selector.

2012-04-27  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.h (meltgc_new_real_accessible_path_string): New
	declaration.

	* melt-runtime.c (meltgc_new_real_accessible_path_string): New
	function.

	* melt/warmelt-base.melt (make_string_real_access_path)
	(make_string_real_access_path_value): New primitives.

	* melt/xtramelt-ana-base.melt (main_input_filename): New primitive.

2012-04-26  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.h (melt_send_command_strbuf_to_probe): New
	declaration.
	* melt-runtime.c (melt_send_command_strbuf_to_probe): New
	function.
	* melt/warmelt-base.melt (add2out_cenconst): New primitive.
	* melt/xtramelt-probe.melt (send_object_to_probe): New selector.
	* melt/xtramelt-probe.melt (send_command_to_probe): New function.

2012-04-26  Basile Starynkevitch  <basile@starynkevitch.net>
	* common.opt (-fmelt-probe=): New, using melt_probe_string
	variable.

	* melt-runtime.h (melt_probe_start): Improve comment.

	* melt-runtime.c (melt_argument): Handle "probe".
	(melt_probe_start): Guess the probecmd if none given.
	(melt_really_initialize): When print-settings, output the
	MELTGCCBUILTIN_PROBE.

	* Makefile.in (melt_default_probe): New.
	(melt-runtime-params-inc.c): Use it.

2012-04-26  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.c (melt_wait_for_probe): Add waitopt formal.
	(melt_probe_stop): Use it. The last wait is blocking, but should
	never happen...

2012-04-25  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.h (melt_probe_stop, melt_probe_start): New
	declarations.

	* melt-runtime.c (melt_probe_pid, melt_probe_reqfrom_fd)
	(melt_probe_cmdto_fd, melt_wait_for_probe): New static variables &
	function.
	(melt_probe_stop, melt_probe_start): New function.
	(melt_install_signal_handlers): Handle SIGPIPE like SIGIO.

2012-04-25  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.c (melt_raw_sigio_signal, melt_raw_sigalrm_signal)
	(meltgc_poll_inputs): More comments about signal handling.
	(melt_install_signal_handlers): Handle SIGVTALRM.
	(meltgc_handle_sigalrm): Implement it.

2012-04-25  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}

	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+03.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2012-04-25  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-build.def: Add xtramelt-probe.melt
	* melt-build.mk: Regenerate.

	* melt-runtime.c: Add comments about signal handling.

	* melt/warmelt-first.melt (class_initial_system_data): Add
	comments and sysdata_alarm_hook field.

	* melt/xtramelt-probe.melt: New file.

2012-04-24  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-build.def: Add xtramelt-ana-tree.melt &
	xtramelt-ana-gimple.melt
	* melt-build.mk: Regenerate.

	* melt/warmelt-normal.melt (normexp_export_values): Replace
	multiple_every with foreach_in_multiple.

	* melt/xtramelt-ana-base.melt: Split into several files, that is
	xtramelt-ana-base.melt & xtramelt-ana-tree.melt &
	xtramelt-ana-gimple.melt.

	* melt/xtramelt-ana-tree.melt: New file.

	* melt/xtramelt-ana-gimple.melt: New file.

2012-04-24  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-base.melt (void, variadic_type_code): Less warnings
	in macrostrings.

	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+02.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-macro+01.c: Regenerate.
	* melt/generated/warmelt-macro+02.c: Regenerate.
	* melt/generated/warmelt-macro+03.c: Regenerate.
	* melt/generated/warmelt-macro+04.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+01.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2012-04-24  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-outobj.melt (syntestgen_cmatcher): Emit
	locations...

2012-04-24  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-macro.melt (class_source_defcmatcher): Add
	scmatdef_testloc, scmatdef_fillloc, scmatdef_operloc fields.
	(mexpand_defcmatcher): Fill them.

2012-04-23  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.c (meltgc_new_int, meltgc_new_mixint)
	(meltgc_new_mixloc): Give default discr if passed null.

	* melt/warmelt-first.melt (class_primitive): Better doc.

	* melt/warmelt-macro.melt (class_source_defprimitive): Add
	sprim_exploc field.
	(mexpand_defprimitive): Fill it.
	(class_source_defciterator): Add sciterdef_beforeloc &
	sciterdef_afterloc fields.
	(mexpand_defciterator): Fill them.

	* melt/warmelt-outobj.melt (syntestgen_primitive): Emit precise
	location of chunk.
	(syntestgen_citerator): Likewise.

2012-04-23  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.c (READ_WARNING): Macro renamed as
	(MELT_READ_WARNING): New macro ...
	(enum melt_macrostring_en): New.
	(meltgc_makesexpr): Use it.
	(melt_compile_source, meltgc_readmacrostringsequence)
	(meltgc_readval): Ditto.

2012-04-23  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}

	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+02.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-macro+01.c: Regenerate.
	* melt/generated/warmelt-macro+02.c: Regenerate.
	* melt/generated/warmelt-macro+03.c: Regenerate.
	* melt/generated/warmelt-macro+04.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+01.c: Regenerate.
	* melt/generated/warmelt-normatch+02.c: Regenerate.
	* melt/generated/warmelt-normatch+03.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+03.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2012-04-23  Basile Starynkevitch  <basile@starynkevitch.net>

	{{improvements for merging with GCC 4.8 trunk svn rev 186692}}
	* melt-run.proto.h (MELT_GCC_VERSION): Define, if unknown, in the
	generated melt-run.h file.

	* melt-runtime.c (melt_val2passflag): TODO_dump_func &
	TODO_dump_cgraph don't exist in GCC 4.8.

	* melt-build.tpl: Say flavor, not variant!  Build first the
	quicklybuilt application modules, to catch error in macro C
	strings...

	* melt-build.mk: Regenerate.

	* melt/warmelt-base.melt (valdesc_strbuf): Check for MELT_GCC_VERSION also.

	* melt/warmelt-genobj.melt (compilobj_nrep_citeration): Use
	meltcit prefix in generated citerator names..

	* melt/warmelt-outobj.melt (syntestgen_citerator): Use
	meltcitstate prefix.

	* melt/xtramelt-ana-base.melt (each_cgraph_fun_body)
	(each_cgraph_fun_entryblock, each_cgraph_fun_call_flow_graph)
	(each_bb_cfun, with_cfun_decl): Adapt to GCC 4.8, add
	documentation.
	(each_cgraph_decl): Only for GCC 4.6 & 4.7



2012-04-15  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.c (melt_really_initialize): Don't print null
	strings for print-settings

2012-04-15  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.c (melt_really_initialize):
	For "print-settings" argument print MELTGCCBUILTIN_BUILD_WITH_CXX.

2012-04-15  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.h (MELT_VERSION_STRING): Bumped to 0.9.5+
	(melt_assert_failed,melt_check_failed): Declare even without
	ENABLE_ASSERT_CHECKING

2012-04-12  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.h (MELT_VERSION_STRING): Bumped to 0.9.5 for release.

2012-04-12  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/xtramelt-ana-base.melt: Added a lot of :doc strings.
	(gimple_switch): Also extracting TDEFLAB.
	(foreach_case_of_gimple_switch): New local CASEIX.
	(tree_result_decl_of_name): Extracting more.

2012-04-11  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2012-04-11  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.h (MELT_VERSION_STRING): Bumped to 0.9.5-rc4

2012-04-11  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-modes.melt (translatetomodule_docmd): Pass the
	curenv to translate_to_flavored_module. Fix bug reported in
	0.9.5rc3 by Alexandre Lissy.

2012-04-10  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerated}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+02.c: Regenerate.
	* melt/generated/warmelt-macro+03.c: Regenerate.
	* melt/generated/warmelt-macro+04.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2012-04-10  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/xtramelt-ana-base.melt (gimple_transaction)
	(gimple_eh_else): Define and export only for GCC 4.7.

2012-04-10  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-macro.melt (mexpand_gccif): Accept a list of
	strings as version.

2012-04-10  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.h (MELT_VERSION_STRING): Bumping to 0.9.5rc3

2012-04-10  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/xtramelt-ana-base.melt (gimple_predict): New.

2012-04-10  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/xtramelt-ana-base.melt (gimple_try, gimple_try_catch)
	(gimple_try_finally): New.

2012-04-10  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+02.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+02.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+03.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-macro+01.c: Regenerate.
	* melt/generated/warmelt-macro+02.c: Regenerate.
	* melt/generated/warmelt-macro+03.c: Regenerate.
	* melt/generated/warmelt-macro+04.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+01.c: Regenerate.
	* melt/generated/warmelt-normatch+02.c: Regenerate.
	* melt/generated/warmelt-normatch+03.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+01.c: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+03.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2012-04-10  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-base.melt (variadic_skip): Fictive use of $DELTA
	outside of variadic functions.

	* melt/warmelt-outobj.melt (outpucod_initialroutine): The emitted
	forward_or_mark_module & initialmeltchunk routines are prefixed
	meltmod.

	* melt/warmelt-modes.melt (register_input_channel_handler): Add
	casts in printf.

2012-04-10  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/xtramelt-ana-base.melt (gimple_catch, gimple_eh_dispatch)
	(gimple_eh_else, gimple_eh_filter, gimple_eh_must_not_throw)
	(gimple_resx): New.

2012-04-10  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/xtramelt-ana-base.melt: Add or improve documentation of
	many cmatchers.
	(gimple_transaction): New cmatcher.

2012-04-10  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.h (melt_plugin_gcc_version)
	(melt_gccplugin_version): New declarations.

	* melt-runtime.c (melt_plugin_gcc_version)
	(melt_gccplugin_version): New variable definitions.

	* melt-run.proto.h: Remove include of "plugin-version.h"

2012-04-10  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/xtramelt-ana-base.melt (gimple_cond, gimple_cond_ltgt)
	(gimple_cond_ordered, gimple_cond_uneq, gimple_cond_unge)
	(gimple_cond_ungt, gimple_cond_unle, gimple_cond_unlt)
	(gimple_cond_unordered, gimple_error_mark): New.

2012-04-06  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-module.mk (GCCMELT_QUICKLYBUILT_FLAGS): Add -Wall.

2012-04-06  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2012-04-06  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-first.melt (mapobject_auxput): Typo.
	* melt/warmelt-outobj.melt (syntestgen_cmatcher): Emit code for
	out variables to avoid warnings in C code.

2012-04-06  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2012-04-06  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-outobj.melt (syntestgen_citerator): Emit a useless
	test for each body formal, to avoid warnings on the C code.

2012-04-05  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-module.mk (MELTGCC_BUILD_WITH_CXX): File auto-host.h might
	be in current dir...

2012-04-04  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-outobj.melt (translate_macroexpanded_list): Give
	warnings when outputing huge buffers, above half their limits.

2012-04-04  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+02.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+02.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+03.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-macro+01.c: Regenerate.
	* melt/generated/warmelt-macro+02.c: Regenerate.
	* melt/generated/warmelt-macro+03.c: Regenerate.
	* melt/generated/warmelt-macro+04.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+01.c: Regenerate.
	* melt/generated/warmelt-normatch+02.c: Regenerate.
	* melt/generated/warmelt-normatch+03.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+01.c: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+03.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2012-04-04  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-build.tpl: Translate the xtramelt*melt files with both
	quicklybuilt & optimized flavors of translator.

	* melt-build.mk: Regenerate.

	* melt/warmelt-macro.melt: Ensure that every call to
	expand_pairlist_as_tuple gets its modctx.

	* melt/warmelt-normal.melt (normexp_apply): Better error message
	when applying a non-value...

	* melt/warmelt-outobj.melt (buffer_limit_cont): Increase
	it. 9Mbytes of output is not enough.
	(outpucod_objinielem, output_predef, outcinitfill_objinitobject)
	(outcinitpredef_objinitobject, outcinitfill_objinitmultiple)
	(outcinitfill_objinitclosure, outcinitfill_objinitroutine)
	(outcinitfill_objinitstring, outcinitfill_objinitboxedinteger)
	(outcinitfill_objinitpair, outcinitfill_objinitlist)
	(output_raw_location, output_location, output_curframe_declstruct)
	(outpucod_procroutine, output_curframe_cdat_struct)
	(output_curframe_cdat_fill, outpucod_initialroutine): Add debug
	messages and backtraces for very big strbuffers.

	* melt/xtramelt-ana-base.melt (gimple_seq_alloc)
	(gimple_seq_add_stmt, gimple_seq_boxed_add_stmt)
	(gimple_seq_boxed_add_seq, gimple_seq_boxed_make_fill)
	(gimple_seq_boxed_make_fill): New primitives or function.


2012-04-02  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (MELT_VERSION_STRING): Bumped to 0.9.5rc2

2012-04-02  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-build.tpl (meltframe.args-tmp): Typo.

	* melt-build.mk: Regenerate.

2012-04-02  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (melt_checked_assignmsg_at): Cast argument of
	melt_discr.
	(melt_checked_assign_internal, melt_checked_assignmsg_internal):
	New internal macros.
	(melt_checked_assign, melt_checked_assignmsg): Use them.

	* melt-module.mk (GCCMELT_CC, MELTCC, MELTGCC_BUILD_WITH_CXX):
	New, like in contrib/MELT-Plugin-Makefile.

	* melt-build.tpl (meltframe.args-tmp): Test for include-fixed may
	fail.

	* melt-build.mk: Regenerate.

2012-03-31  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+02.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2012-03-31  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-base.melt (add2sbuf_dynloaded_suffix)
	(make_string_without_dynloaded_suffix, string_dynloaded_suffixed):
	New primitives.
	* melt/warmelt-outobj.melt (translate_macroexpanded_list)
	(translate_to_c_one_or_more_melt_files): Use them.
	* melt/warmelt-modes.melt: Also use them.

2012-03-31  Romain Geissler  <romain.geissler@gmail.com>
	* melt-module.mk (SHARED_LIBRARY_FLAGS): New.
	Use it for all our flavors.

2012-03-31  Basile Starynkevitch  <basile@starynkevitch.net>
	with help from Romain Geissler  <romain.geissler@gmail.com>
	* melt-runtime.h (MELT_DYNLOADED_SUFFIX): New constant macro.
	* melt-runtime.c (meltgc_new_string_generated_c_filename)
	(melt_load_module_index): Use it.
	(meltgc_poll_inputs): Remove test of _POSIX_C_SOURCE.

2012-03-30  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-build.tpl (melt-clean): Don't remove all melt*.c files!
	* melt-build.mk: Regenerate.

2012-03-29  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.h (MELT_VERSION_STRING): Bumped to 0.9.5rc1

2012-03-29  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+02.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+02.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+03.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-macro+01.c: Regenerate.
	* melt/generated/warmelt-macro+02.c: Regenerate.
	* melt/generated/warmelt-macro+03.c: Regenerate.
	* melt/generated/warmelt-macro+04.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+01.c: Regenerate.
	* melt/generated/warmelt-normatch+02.c: Regenerate.
	* melt/generated/warmelt-normatch+03.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+01.c: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+03.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2012-03-29  Basile Starynkevitch  <basile@starynkevitch.net>
	{{all the generated values are declared melt_ptr_t, not void*
	anymore}}

	* melt/warmelt-genobj.melt (compile2obj_initproc): Emit cast for
	getprevenv.
	* melt/warmelt-outobj.melt: Emit melt_ptr_t in all value
	initializers.

2012-03-28  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/xtramelt-ana-base.melt (is_edge, mapgimple_remove)
	(maptree_remove, mapedge_remove, maploop_remove, maptree_remove):
	Add cast for C++.

2012-03-27  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/xtramelt-ana-base.melt (gimple_seq_add_seq)
	(gimple_seq_add_stmt, gimple_seq_boxed_add_seq)
	(gimple_seq_boxed_add_stmt): Remove.

2012-03-27  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/xtramelt-ana-base.melt: More casts for C++.
	* melt/xtramelt-ana-simple.melt: More casts for C++.

2012-03-27  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/xtramelt-ana-base.melt: More casts for C++.

2012-03-27  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/xtramelt-ana-base.melt: More casts for C++.

2012-03-27  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/xtramelt-ana-base.melt: More casts for C++.

2012-03-27  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/xtramelt-ana-base.melt (loop_body_tuple): Typo.

2012-03-27  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/xtramelt-ana-base.melt (each_bb_cfun): Typo.

2012-03-27  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-make-string.c (main): Output extern "C" for C++...

2012-03-27  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2012-03-27  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-outobj.melt (output_melt_descriptor): Emit
	declaration of melt_versionmeltstr as extern "C".

	* melt-runtime.c (melt_load_module_index): Expect the
	melt_versionmeltstr to be long enough.

2012-03-27  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-build.tpl (MELT_ZERO_GENERATED_[+mkvarsuf+]_CUMULMD5): Skip
	line with extern in awk program.
	* melt-build.mk: Regenerate.

	{{Regenerate}}
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2012-03-27  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.c (melt_load_module_index): Ignore descriptive
	lines with extern "C". Expect the cumulated md5 to be not too
	short.

2012-03-27  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-outobj.melt (output_melt_descriptor): Emit extern
	"C" for each descriptor symbol.

2012-03-27  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2012-03-27  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.c (melt_load_module_index): Got additional errorp
	formal. Set it to dlerror () in MELTDESCR_REQUIRED_SYMBOL.

	* melt/warmelt-outobj.melt (output_melt_descriptor): Emit extern
	"C" for each timestamp symbol.

2012-03-27  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-outobj.melt (output_exported_offsets): Wrap with
	extern "C" the generated constant offsets & classlen.

	{{Regenerate}}
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+02.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+02.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+03.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-macro+01.c: Regenerate.
	* melt/generated/warmelt-macro+02.c: Regenerate.
	* melt/generated/warmelt-macro+03.c: Regenerate.
	* melt/generated/warmelt-macro+04.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+01.c: Regenerate.
	* melt/generated/warmelt-normatch+02.c: Regenerate.
	* melt/generated/warmelt-normatch+03.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+01.c: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+03.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2012-03-27  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-outobj.melt (outpucod_initialroutine)
	(output_melt_descriptor): Emit code wrapping extern "C"


2012-03-27  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2012-03-27  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-modes.melt: More casts for C++.

2012-03-27  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-module.mk (GCCMELT_QUICKLYBUILT_FLAGS): Remove -Wc++-compat

2012-03-27  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2012-03-27  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.h (MELT_VERSION_STRING): Bump to 0.9.5rc0

2012-03-27  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-modes.melt:  More casts for C++.

2012-03-27  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+01.c: Regenerate.
	* melt/generated/warmelt-normatch+02.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2012-03-27  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-base.melt: More casts for C++.
	* melt/warmelt-modes.melt: Ditto.

2012-03-27  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.


2012-03-27  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-outobj.melt: More casts for C++.

2012-03-27  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-base.melt (add2sbuf_mixloc): Typo.
	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+02.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+01.c: Regenerate.
	* melt/generated/warmelt-macro+02.c: Regenerate.
	* melt/generated/warmelt-macro+03.c: Regenerate.
	* melt/generated/warmelt-macro+04.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+02.c: Regenerate.
	* melt/generated/warmelt-normatch+03.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+01.c: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+03.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2012-03-27  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-module.mk (GCCMELT_QUICKLYBUILT_FLAGS): Temporarily add -Wc++-compat
	* melt/warmelt-first.melt: Add casts.
	* melt/warmelt-base.melt: Likewise.
	* melt/warmelt-debug.melt: Likewise.
	* melt/warmelt-outobj.melt: Likewise.

2012-03-27  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2012-03-27  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-base.melt: More casts.

2012-03-27  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+02.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.


2012-03-27  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-debug.melt: Add casts.

2012-03-27  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+03.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.



2012-03-27  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-first.melt: Add cast.
	* melt/warmelt-base.melt: Add cast.

2012-03-27  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}

	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.


2012-03-27  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-base.melt (get_globpredef): Cast result.

2012-03-26  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+02.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+03.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+01.c: Regenerate.
	* melt/generated/warmelt-macro+02.c: Regenerate.
	* melt/generated/warmelt-macro+03.c: Regenerate.
	* melt/generated/warmelt-macro+04.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+01.c: Regenerate.
	* melt/generated/warmelt-normatch+02.c: Regenerate.
	* melt/generated/warmelt-normatch+03.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+03.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2012-03-26  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-first.melt: Cast to melt_ptr_t.

2012-03-26  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2012-03-26  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-outobj.melt: Cast to melt_ptr_t.
	* melt/warmelt-modes.melt: Ditto.
	* melt/warmelt-first.melt: Ditto.
	* melt/xtramelt-ana-base.melt: Ditto.

2012-03-26  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+02.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+03.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+01.c: Regenerate.
	* melt/generated/warmelt-outobj+03.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2012-03-26  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-first.melt: Casting to melt_ptr_t. More pretty
	macrostrings.

	* melt/waremelt-base.melt: Ditto.

2012-03-26  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2012-03-26  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-first.melt: Cast value for MELT_STORE_PREDEF.
	* melt/warmelt-genobj.melt: Likewise.

2012-03-26  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2012-03-26  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/xtramelt-ana-base.melt (foreach_argument_in_function_tree):
	Typo in macrostring.

2012-03-26  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-first.melt (initial_system_data): Cast when calling
	meltgc_new_file.

2012-03-26  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.c: Rename READ_ERROR as MELT_READ_ERROR.
	(readsimplename): Renamed as ...
	(melt_readsimplename).
	(readsimplelong): Renamed as ...
	(melt_readsimplelong).

2012-03-26  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.c (meltgc_new_string_tempname_suffixed): Add cast.

2012-03-26  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+02.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+02.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+03.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-macro+01.c: Regenerate.
	* melt/generated/warmelt-macro+02.c: Regenerate.
	* melt/generated/warmelt-macro+03.c: Regenerate.
	* melt/generated/warmelt-macro+04.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+01.c: Regenerate.
	* melt/generated/warmelt-normatch+02.c: Regenerate.
	* melt/generated/warmelt-normatch+03.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+01.c: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+03.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2012-03-26  Basile Starynkevitch  <basile@starynkevitch.net>
	{{better C++ compatibility}}
	* melt-runtime.c (meltgc_add_out_raw_len): Declare eol as const.
	(meltgc_new_string_nakedbasename): Add cast.
	(meltgc_load_one_module): Ditto.
	(meltgc_poll_inputs): Ditto.

	* melt/warmelt-first.melt (bucketlong_setaux): Typo in generating
	chunk.

	* melt/warmelt-outobj.melt (outcinitfill_objinitobject)
	(output_curframe_declstruct_init): Emit more casts.

2012-03-23  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (melt_checked_assignmsg): Revert.

2012-03-23  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+03.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2012-03-23  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (melt_checked_assignmsg_at): Macro expanding to
	statement.
	(melt_checked_assignmsg): Temporary no-op

	* melt/warmelt-base.melt (checkval_dbg): Primitive with void
	result.

2012-03-19  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.h (meltgc_poll_inputs): Add declaration.
	(meltgc_install_polling_channel): Remove declaration.

	* melt-runtime.c (meltgc_poll_inputs): With invalid fds, replace
	their channel handler by :true in bucket.
	(meltgc_install_polling_channel): Remove function.

	* melt/warmelt-mode.melt (register_input_channel_handler): Coded.

2012-03-19  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-first.melt (foreach_in_bucketlong_backward): New
	c-iterator.

2012-03-15  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.c (meltgc_readseqlist): Add check for unexpected }#
	chars.
	(meltgc_readmacrostringsequence): Handled embedded $(sub-sexpr)
	and $[seq expr]


2012-03-14  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (melt_strbuf_consume): New inline function.

	* melt-runtime.c (meltgc_notify_sysdata_passexec_hook): Remove.
	(meltgc_poll_inputs): More.

2012-03-14  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+02.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+03.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2012-03-14  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-predef.list (CLASS_INPUT_CHANNEL_HANDLER): New.

	* melt-runtime.c: Include <poll.h>
	(MELT_BUFSIZE): New macro constant.
	(melt_passexec_callback): Renamed as...
	(meltgc_passexec_callback): renaming, since a GC function.
	(melt_raw_sigio_signal, melt_raw_sigalrm_signal): New short signal handlers.
	(melt_install_signal_handlers): New function to Install them.
	(melt_really_initialize): Call it. Always register a
	PLUGIN_PASS_EXECUTION to ensure interrupts are called.
	(meltgc_notify_sysdata_passexec_hook): Obsolete function.
	(meltgc_poll_inputs): New function, still incomplete.
	(meltgc_notify_inchannel_data): Remove.
	(meltgc_handle_sigio): Most code goes into meltgc_poll_inputs.

	* melt/warmelt-first.melt (class_input_channel_handler): New
	predefined class, moved from warmelt-base.melt:

	* melt/warmelt-base.melt (class_input_channel_handler): Move to
	warmelt-first.melt.

2012-03-14  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.c (meltgc_read_file, meltgc_read_from_rawstring)
	(meltgc_read_from_val): Use MELT_LOCATION...
	(handle_melt_pragma, melt_pragma_callback)
	(melt_handle_melt_pragma, melt_pre_genericize_callback)
	(melt_startunit_callback, melt_finishunit_callback)
	(melt_passexec_callback, meltgc_run_meltpass_after_hook)
	(meltgc_gimple_gate, meltgc_gimple_execute, meltgc_rtl_gate)
	(meltgc_rtl_execute, meltgc_simple_ipa_gate)
	(meltgc_simple_ipa_execute, meltgc_register_pass)
	(meltgc_finishtype_callback, meltgc_finishdecl_callback)
	(meltgc_notify_sysdata_passexec_hook, meltgc_usedef_internalfun)
	(meltgc_walk_use_def_chain, melt_handle_melt_attribute):
	Likewise. Also do MELT_CHECK_INTERRUPT.

2012-03-13  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-base.melt (register_input_channel_handler): Move it
	to .....
	* melt/warmelt-modes.melt (register_input_channel_handler): Moved
	here.

2012-03-13  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (meltgc_handle_interrupt): Renamed to
	(melt_handle_interrupt).
	(melt_got_sigio, melt_got_sigalrm): New volatile variables.
	(MELT_CHECK_INTERRUPT): Call melt_handle_interrupt.
	(meltgc_notify_inchannel_data): New function.

	* melt-runtime.c (meltgc_new_longsbucket): Default DISCR_BUCKET_LONGS.
	(melt_raw_sigio_signal, melt_raw_sigalrm_signal)
	(meltgc_notify_inchannel_data, meltgc_handle_sigio, meltgc_handle_sigalrm): New functions. 
	(meltgc_handle_interrupt): Renamed to
	(melt_handle_interrupt).

	* melt/warmelt-base.melt (class_input_channel_handler): New.
	(register_input_channel_handler): New stub.

2012-03-13  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+03.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2012-03-13  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-predef.list (DISCR_BUCKET_LONGS): New.

	* melt-runtime.h (melt_longsbucket_count): Add assert.

	* melt-runtime.c (meltgc_new_longsbucket): Should default DISR_BUCKET_LONGS.

	* melt/warmelt-first.melt (class_system_data): Adding sysdata_inchannel_data slot.
	(is_bucketlong, make_bucketlong, bucketlong_get, bucketlong_aux)
	(bucketlong_xnum, bucketlong_setxnum, bucketlong_setaux)
	(bucketlong_count, bucketlong_size, bucketlong_replace)
	(bucketlong_put, bucketlong_remove): New primitives.
	(foreach_in_bucketlong): New citerator.
	(discr_bucket_longs): New predefined discriminant.

2012-03-13  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2012-03-13  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-base.melt (valdesc_bucketlongs): Typos.

2012-03-13  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (meltgc_longsbucket_set_xnum): Remove, replaced
	by...
	(melt_longsbucket_set_xnum): New inline function.
	(meltgc_longsbucket_remove): Correct signature.

	* melt-runtime.c (meltgc_handle_interrupt): Avoid warning in stub code.
	(meltgc_new_longsbucket, meltgc_longsbucket_replace): Improve.
	(meltgc_longsbucket_put, meltgc_longsbucket_remove)
	(meltgc_longsbucket_set_aux): New functions.

2012-03-13  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (melt_longsbucket_get, melt_longsbucket_aux)
	(melt_longsbucket_xnum, melt_longsbucket_count)
	(melt_longsbucket_size): New inlined functions.
	(meltgc_longsbucket_replace, meltgc_longsbucket_put)
	(meltgc_longsbucket_remove, meltgc_longsbucket_set_aux)
	(meltgc_longsbucket_set_xnum): New declarations.

	* melt-runtime.c (meltgc_new_longsbucket)
	(meltgc_longsbucket_replace): New functions.

	* melt/warmelt-base.melt (valdesc_bucketlongs): Add cloning.

2012-03-12  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.h (FLEXIBLE_DIM, HAVE_FLEXIBLE_DIM): Remove, since
	use MELT_FLEXIBLE_DIM & MELT_HAVE_FLEXIBLE_DIM instead.
	* melt-runtime.c (struct meltmappointers_st): Use
	MELT_FLEXIBLE_DIM.

2012-03-12  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}
	* melt-build.mk: Regenerate.
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2012-03-12  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-base.melt (valdesc_hashlongs): Remove.

2012-03-12  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-base.melt (valdesc_hashlongs): Got
	hashl_bucktab....

2012-03-12  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-base.melt (valdesc_hashlongs): Typos.

2012-03-12  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-build.tpl ([+melt_stage+]-fullstage.stamp): Depends upon
	[+melt_stage+]/[+base+].c ...

	* melt-build.mk: Regenerate.

	* melt/warmelt-base.melt (valdesc_hashlongs): Typos.

2012-03-12  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (FLEXIBLE_DIM, HAVE_FLEXIBLE_DIM): Obsolete,
	replaced by
	(MELT_FLEXIBLE_DIM, MELT_HAVE_FLEXIBLE_DIM): New macros.
	(struct melt_bucketlongentry_st): New.
	(meltgc_new_longsbucket, meltgc_new_longshash): New declarations.
	(meltgc_install_polling_channel): New declaration.

	* melt-runtime.h (meltgc_handle_interrupt): Add comment.
	(meltgc_install_polling_channel, meltgc_new_longsbucket)
	(meltgc_new_longshash): New function stubs.

	* melt/warmelt-base.melt (valdesc_bucketlongs, valdesc_hashlongs):
	New value descriptor.

2012-03-12  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-build.tpl (MELT_MAKE_MODULE_XTRAMAKEFLAGS): Export it.

	* melt-build.mk: Regenerate.

	* Makefile.in (MELT_MAKE_MODULE_XTRAMAKEFLAGS): Default  to -j2.
	(melt.encap): Don't build explicitly warmelt1

2012-03-09  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2012-03-09  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-predef.list (CLASS_INFIX_ADDITIVE_SYMBOL)
	(CLASS_INFIX_DELIMITER, CLASS_INFIX_INTEGER_LITERAL)
	(CLASS_INFIX_LEXEME): Remove.

2012-03-09  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-predef.list (CLASS_INFIX_KEYWORD)
	(CLASS_INFIX_MULTIPLICATIVE_SYMBOL, CLASS_INFIX_RELATIONAL_SYMBOL)
	(CLASS_INFIX_STRING_LITERAL, CLASS_INFIX_SYMBOL): Remove.

	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2012-03-09  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}

	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2012-03-09  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-predef.list: Use @POISON, not POISON.
	* make-warmelt-predef.awk: Better error message.

2012-03-09  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}

	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+03.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2012-03-09  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-first.melt (class_infix_additive_symbol)
	(class_infix_any_symbol, class_infix_delimiter)
	(class_infix_integer_literal, class_infix_keyword)
	(class_infix_lexeme, class_infix_multiplicative_symbol)
	(class_infix_relational_symbol, class_infix_string_literal)
	(class_infix_symbol): Remove.

2012-03-09  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.h (melt_open_infix_file, meltgc_infix_lexeme):
	Remove declaration.

	* melt-runtime.c (enum commenthandling_en): Remove COMMENT_INFIX.
	(skipspace_getc): Renamed as...
	(melt_skipspace_getc): Rename of skipspace_getc.
	Remove all infix related code.
	(melt_compile_source): Update calls to melt_skipspace_getc.
	(struct infixreading_st): Remove.
	(melt_open_infix_file, meltgc_infix_lexeme)
	(melt_close_infix_file): Remove function.
	(meltgc_intern_keyword, melt_compile_source, meltgc_read_file)
	(meltgc_read_from_rawstring, meltgc_read_from_val): Update calls
	to melt_skipspace_getc.

	* melt-predef.list (CLASS_INFIX_ADDITIVE_SYMBOL)
	(CLASS_INFIX_DELIMITER, CLASS_INFIX_INTEGER_LITERAL)
	(CLASS_INFIX_LEXEME, CLASS_INFIX_KEYWORD)
	(CLASS_INFIX_MULTIPLICATIVE_SYMBOL, CLASS_INFIX_RELATIONAL_SYMBOL)
	(CLASS_INFIX_STRING_LITERAL, CLASS_INFIX_SYMBOL): Poison them.

2012-03-09  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Alternative infix syntax abandonned}}
	* melt/xtramelt-parse-infix-syntax.melt: Remove file
	* melt-build.def: Remove reference to above file
	* melt-build.mk: Regenerate.

2012-03-08  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-build.tpl (meltframe.args): Add -Iinclude-fixed if it exists.

	* melt-build.mk: Regenerate.

2012-03-07  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate, with interrupt checks}}
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+02.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+02.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+03.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-macro+01.c: Regenerate.
	* melt/generated/warmelt-macro+02.c: Regenerate.
	* melt/generated/warmelt-macro+03.c: Regenerate.
	* melt/generated/warmelt-macro+04.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+01.c: Regenerate.
	* melt/generated/warmelt-normatch+02.c: Regenerate.
	* melt/generated/warmelt-normatch+03.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+01.c: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+03.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2012-03-07  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-normal.melt (normexp_apply): Change message when
	non-value first argument.  Add void binding to check interrupts.
	(normexp_msend, normexp_return, normexp_if, normexp_ifelse)
	(normexp_forever, normexp_citeration, normexp_unsafe_put_fields)
	(normexp_put_fields, normexp_instance): Add void binding to check
	interrupts.

	* melt/warmelt-normatch.melt (normexp_match, normexp_altmatch):
	Add void binding to check interrupts.

2012-03-07  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-normal.melt (wrap_normal_letseq): Handle non-tuple,
	1-tuple, and put an interrupt check for tuples of degree >= 2.

2012-03-07  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+01.c: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+03.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2012-03-07  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-genobj.melt (class_objcheckinterrupt): New class.
	(compilobj_nrep_checkinterrupt): Use it.
	* melt/warmelt-outobj.melt (outpucod_objcheckinterrupt): New
	method for output_c_code of class_objcheckinterrupt.

2012-03-07  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2012-03-07  Basile Starynkevitch  <basile@starynkevitch.net>
	(MELT_UNLIKELY): Remove redefinition.

2012-03-07  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.h (melt_interrupted, meltgc_handle_interrupt): New
	declarations.
	(MELT_UNLIKELY, MELT_CHECK_INTERRUPT): New macros.

	* melt-runtime.c (melt_interrupted): New definition.
	(meltgc_handle_interrupt): Unimplemented routine.

	* melt/warmelt-normal.melt (class_nrep_checkinterrupt): New class.

	* melt/warmelt-genobj.melt (compilobj_nrep_checkinterrupt): New
	method for compile_obj on class_nrep_checkinterrupt.

2012-03-06  Basile Starynkevitch  <basile@starynkevitch.net>
	{{much faster build, when useless...; a second make after a first
	one take only 30sec instead of 3 min..}}

	* melt-build.tpl: More touch operation, notably for
	melt-stage0-*/*.so. All touches are suitably echoed...

	* melt-build.mk: Regenerate.

2012-03-05  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/xtramelt-opengpu.melt: More debugging.

	* testsuite/melt/topengpu-vecmuls.c: Better comment.

2012-03-05  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.c (meltgc_ppout_basicblock): Show a _ for empty basic blocks.

	* melt/xtramelt-ana-base.melt (==bb): New primitive.
	Improved some documentation of primitives or citerators.
	(each_cgraph_decl, with_cfun_decl, each_bb_cfun)
	(each_local_decl_cfun): Slightly improved.
	(debugtree, debugedge, debuggimple, debuggimpleseq)
	(debugbasicblock, debugtreecodenum): Removed.

	* melt/xtramelt-ana-simple.melt (smallana_gimple): Don't use
	debugtreecodenum.

	* melt/xtramelt-opengpu.melt: More debugging.

	* testsuite/melt/topengpu-vecmuls.c: New file.

2012-03-05  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-modes.melt (make_docgenfunction): Sort defun-s by
	symbol names.

2012-03-04  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate for 0.9.4.b release}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+02.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-macro+01.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2012-03-04  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.h (MELT_VERSION_STRING): Bumped to 0.9.4.b

	* melt/warmelt-macro.melt (macroexpand_toplevel_list): Better
	debug & asserts.

	* melt/warmelt-debug.melt (dbgout_closure_method): More pretty
	output.

	* melt/warmelt-modes.melt (makedoc_docmd): Check program
	arguments. Count output. Fail if not significant output.

2012-03-04  Basile Starynkevitch  <basile@starynkevitch.net>
	* testsuite/melt/tmakedoc.melt: New.

	* melt/warmelt-modes.melt (class_makedoc_info): Add
	mkdoc_boxcounter field.
	(increment_mkdoc_counter): New function.
	Call it appropriately.
	(makedoc_docmd): Test it.

2012-03-02  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2012-03-02  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.h: Include "hwint.h" explicitly.
	* melt-module.mk: Add GCCMELT_MODULE_EXTRALIBES.

2012-03-02  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/xtramelt-opengpu.melt: More debug.
	* melt-runtime.h (MELT_VERSION_STRING): Bumped to 0.9.4

2012-03-01  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/xtramelt-opengpu.melt: More debug.

2012-03-01  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.h (MELT_VERSION_STRING): Bumped to 0.9.4-rc1+

2012-03-01  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.h (MELT_VERSION_STRING): Bumped to 0.9.4-rc1

2012-03-01  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2012-03-01  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.h (MELT_VERSION_STRING): Bumped to 0.9.4-

2012-03-01  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.h (melt_basicblock_gimpleseq): New function.

	* melt/warmelt-outobj.melt (syntestgen_primitive): Emit spaces.

	* melt/xtramelt-ana-base.melt (tree_offset_type): Use
	TYPE_OFFSET_BASETYPE, not TREE_OFFSET_BASETYPE which never
	existed.

2012-02-25  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+02.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+02.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+03.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-macro+01.c: Regenerate.
	* melt/generated/warmelt-macro+02.c: Regenerate.
	* melt/generated/warmelt-macro+03.c: Regenerate.
	* melt/generated/warmelt-macro+04.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+01.c: Regenerate.
	* melt/generated/warmelt-normatch+02.c: Regenerate.
	* melt/generated/warmelt-normatch+03.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+01.c: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+03.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+05.c: New file.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2012-02-25  Basile Starynkevitch  <basile@starynkevitch.net>
	{{syntax-check C emission passing.}}
	* melt/warmelt-first.melt (discrim, the_meltcallcount)
	(the_callcount, is_mapobject, mapobject_size, mapobject_nth_attr)
	(mapobject_nth_val, foreach_in_mapobject, foreach_in_mapstring)
	(is_routine, routine_descr): Improve generated C code.

	* melt/warmelt-base.melt (zerop, longbacktrace_dbg, checkval_dbg)
	(make_strbuf, add2out_cencstrbuf, add2out_ccomstrbuf): Improve
	generated code.

	* melt/warmelt-macro.melt (macroexpand_toplevel_list): Warn only
	when an s-expr is macroexpanded into null at top-level.

	* melt/warmelt-outobj.melt (syntestgen_cmatcher): Emit semi-colon.
	(emit_syntax_testing_routine): Remove #if 0 from emitted C code,
	now compiled when MELT_HAVE_DEBUG...

	* melt/xtramelt-ana-base.melt: Improve generated C code.

	* melt/xtramelt-parse-infix-syntax.melt: Improve generated C code.

2012-02-25  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-outobj.melt (syntestgen_citerator)
	(syntestgen_cmatcher): Better.

2012-02-25  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-outobj.melt (syntestgen_cmatcher): Code.

2012-02-24  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-outobj.melt (substitute_formals_for_syntest)
	(expand_tuple_for_syntest): New utilities functions.
	(syntestgen_citerator): Don't work.

2012-02-24  Basile Starynkevitch  <basile@starynkevitch.net>
	* testsuite/melt/test0.melt: Improved.
	* testsuite/melt/tmacrostring.melt: Improve.
	* melt/warmelt-outobj.melt (syntestgen_primitive): Better.
	(syntestgen_citerator, syntestgen_cmatcher): Stub.
	(emit_syntax_testing_routine): Don't need modnamstr formal.
	(translate_macroexpanded_list): Call emit_syntax_testing_routine
	at better place.

2012-02-24  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-first.melt (class_module_context): Add
	mocx_gendevlist field.

	* melt/warmelt-macro.melt (register_generator_device): New function.
	(mexpand_defprimitive, mexpand_defciterator, mexpand_defcmatcher):
	Use it.

	* melt/warmelt-outobj.melt (syntax_test_generator): New selector.
	(syntestgen_any): Catch-all method for it.
	(syntestgen_primitive): Method for it on class_primitive.
	(syntestgen_citerator): New method stub for it on class_citerator.
	(syntestgen_cmatcher): New method stub for it on class_matcher.

2012-02-24  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+01.c: Regenerate.
	* melt/generated/warmelt-macro+02.c: Regenerate.
	* melt/generated/warmelt-macro+03.c: Regenerate.
	* melt/generated/warmelt-macro+04.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2012-02-24  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.c (melt_dbgshortbacktrace): More pretty output.

	* melt/warmelt-macro.melt: All macro-expanders get an object
	modctx and use the mexpander argument, not macroexpand_1...

2012-02-23  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerated}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-macro+01.c: Regenerate.
	* melt/generated/warmelt-macro+02.c: Regenerate.
	* melt/generated/warmelt-macro+03.c: Regenerate.
	* melt/generated/warmelt-macro+04.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2012-02-23  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Should generate useless C code for every generating device
	-defprimitive defciterator etc... to test the syntactic
	correctnees of its generated C code.}}
	* melt/warmelt-macro.melt (class_source_generator_device): New
	class.
	All the macro expansion functions take a module context as fourth arguments.

	* melt/warmelt-outobj.melt (translate_macroexpanded_list): Pass
	the modctx to macro expansion. Warn for short number of
	expressions.

	* melt/warmelt-modes.melt (makedoc_docmd): Pass the makedoc info
	as module context to macroexpand_toplevel_list...

	* melt/xtramelt-ana-base.melt: Improved citerators &
	primitives. Some might generate syntactically wrong C code...

	* melt/xtramelt-opengpu.melt: More debug...

2012-02-22  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/xtramelt-opengpu.melt: More...

2012-02-22  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+02.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+03.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2012-02-22  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-first.melt (mapobject_aux, mapobject_auxput)
	(mapstring_aux, mapstring_auxput): New primitives.

	* melt/warmelt-debug.melt (dbgout_mapobject_method)
	(dbgout_mapstring_method): Display the auxiliary data if depth is
	0 or 1...

	* melt/xtramelt-ana-base.melt (mapbasicblock_aux)
	(mapbasicblock_auxput, mapedge_aux, mapedge_auxput, mapgimple_aux)
	(mapgimple_auxput, maptree_aux, maptree_auxput): New primitives.
	More :doc strings.
	(dbgout_boxedge_method, dbgout_mapedge_method): Display auxiliary
	data...

2012-02-22  Basile Starynkevitch  <basile@starynkevitch.net>
	{{adding auxiliary data inside MELT maps}}
	* melt-runtime.h (meltgc_touch_dest, meltgc_touch): Pre declared
	before include of meltrunsup.h.
	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2012-02-22  Basile Starynkevitch  <basile@starynkevitch.net>
	{{adding auxiliary data inside MELT maps}}
	* melt-runtime.h (melt_auxdata_mapobjects, melt_auxput_mapobjects)
	(melt_auxdata_mapstrings, melt_auxput_mapstrings): New functions.

	* melt/warmelt-mode.melt (generate_runtypesupport_mapfun):
	Generate auxiliary data accessor & setter functions.

2012-02-22  Basile Starynkevitch  <basile@starynkevitch.net>
	{{adding auxiliary data inside MELT maps}}
	* melt-runtime.c (meltgc_new_mapobjects, meltgc_new_mapstrings)
	(meltgc_raw_new_mappointers): Clear the meltmap_aux field.
	(struct meltmappointers_st): New meltmap_aux field.
	* melt/generated/meltrunsup.h: temporarily hand-edited to add the
	meltmap_aux field.
	* melt/generated/meltrunsup-inc.c: temporarily hand-edited to add
	the meltmap_aux field.
	{{Then regenenerated}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+03.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+01.c: Regenerate.
	* melt/generated/warmelt-normatch+02.c: Regenerate.
	* melt/generated/warmelt-normatch+03.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

	* melt/warmelt-first.melt (class_ctype_gty): Add
	ctypg_mapauxdatafun & ctypg_mapauxputfun fields.
	(ctype_tree, ctype_gimple, ...): Fill them.

	* melt/warmelt-base.melt (valdesc_mapobjects, valdesc_mapstrings):
	mention meltmap_aux.
	* melt/warmelt-modes.melt (generate_runtypesupport_gty): Likewise.

2012-02-21  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/xtramelt-ana-base.melt (dbgout_maptree_method): Typo.

	* melt/xtramelt-opengpu.melt (opengpu_affine_accessed_array):
	Better... Added lots of assert for unhandled cases.

	* testsuite/melt/topengpu-vecsum.c: Better indentation.

2012-02-21  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/xtramelt-opengpu.melt (opengpu_affine_accessed_array):
	Typos..

2012-02-20  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/xtramelt-opengpu.melt (opengpu_affine_accessed_array):
	More, but code should be factored out...

2012-02-20  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-normatch.melt (normpat_instancepat)
	(normpat_tuplepat, normpat_anymatchpat, normexp_match): Better debug.
	(normbind_matchbind): write a binding to be overwritten in
	normstep_msuccwhenflag.
	(normstep_msuccwhenflag): Better. Also normalize the data.
	(normexp_altmatch): Still incomplete.

2012-02-17  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-normatch.melt (normbind_matchbind): Might be wrong.
	(translpat_varpat): Better debug.
	(translate_matchcase): Ditto.
	(normstep_msuccwhenflag): Likewise.

2012-02-16  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-normatch.melt (normbind_matchbind): Perhaps incorrect.

2012-02-16  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-genobj.melt (compilobj_nrep_altmatch): Initialize
	odatamap.
	(compilobj_nrep_matchdatainit, compilobj_nrep_matchedata):
	Complete.

2012-02-16  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-normatch.melt (altmatch_normalize_mdata): Improve,
	but not making instance oc class_nrep_matched_data for the
	originally matched normal thing.
	(normexp_altmatch): Compute also the datamap to fill the
	namatch_mdatas of the result.

	* testsuite/melt/tmatch-tuple.melt: Add one more argument to
	tuple.

2012-02-15  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+02.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+03.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-macro+01.c: Regenerate.
	* melt/generated/warmelt-macro+02.c: Regenerate.
	* melt/generated/warmelt-macro+03.c: Regenerate.
	* melt/generated/warmelt-macro+04.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+05.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2012-02-15  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-first.melt (class_module_context): New field
	mocx_cheaderlist.
	* melt/warmelt-normexp.melt (normexp_cheader): Done.
	* melt/warmelt-outobj.melt (compile_list_sexpr): Add cheader
	emission.

2012-02-15  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-debug.melt (dbgout_strbuf_method): Better.
	* melt/warmelt-macro.melt (mexpand_cheader): Ok.

2012-02-15  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-macro.melt (class_source_cheader): new class.
	(mexpand_cheader): New macro expander for it.

	* melt/warmelt-normexp.melt (normexp_cheader): New incomplete
	method for normal_exp on class_source_cheader.

	* melt/warmelt-normatch.melt (class_nrep_altmatch): New
	namatch_mdatas field.
	(altmatch_normalize_mdata, normexp_altmatch): Better debug.

	* melt/warmelt-genobj.melt (class_alternate_match_nrep_data): New
	altmatchn_datamap field.
	(compilobj_nrep_altmatch): Initialize it.

	* testsuite/melt/tcheader.melt: New test file.

	* testsuite/melt/tmatch-tuple.melt: Improve comment.

2012-02-15  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-macro+01.c: Regenerate.
	* melt/generated/warmelt-macro+03.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+01.c: Regenerate.
	* melt/generated/warmelt-normatch+02.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.


2012-02-15  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-first.melt (shortbacktrace_dbg): Use
	melt_need_debug to skip backtraces...

	* melt/warmelt-genobj.melt (class_objflag): Inherit from
	class_objpurevalue not class_generated_c_code.
	(compile2obj_procedure, compile2obj_initproc): Add long ~~~ line
	in first debug message.
	(putobjdest_objvalue, putobjdest_integer, putobjdest_string)
	(putobjdest_null, putobjdest_objanyblock, putobjdest_objloop)
	(putobjdest_objexit, putobjdest_objcond, putobjdest_objcppif):
	Check that desto is just a class_objpurevalue.

2012-02-14  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-genobj.melt (class_objflag): New class.
	(class_objflagblock) Renamed as...
	(class_objmatchflagblock): New.
	(class_alternate_match_nrep_data): Add altmatchn_flagmap field.
	(compilobj_nrep_altmatch): More.
	(compilobj_nrep_matchflag): Coded. update the altmatchn_flagmap

	* testsuite/melt/tmatch-tuple.melt: Update comment.

2012-02-14  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+01.c: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+03.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2012-02-14  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-outobj.melt (buffer_limit_cont): New private
	container.
	(get_code_buffer_limit, put_code_buffer_limit): New functions.
	(code_buffer_limit_optset): New option setter.
	(code_buffer_limit): New option.
	Add check of the code limit at many places.

2012-02-15  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-build.tpl: Don't use order only prerequisite for
	melt-stag*-fullstage.stamp.
	* melt-build.mk: Regenerate.

2012-02-15  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2012-02-14  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-genobj.melt (class_objcompute): Add obcpt_type
	field.
	(make_objcompute): Add ctyp formal.
	(compile2obj_initproc, compilobj_nrep_exit)
	(compilobj_nrep_unsafe_nth_component, putobjdest_objvalue)
	(putobjdest_integer, putobjdest_string)
	(compilobj_nrep_update_current_module_environment_container)
	(compilobj_nrep_matchlabel, compilobj_nrep_matchflag)
	(compilobj_nrep_matchedata, compilobj_nrep_matchjump): update accordingly.

2012-02-14  Basile Starynkevitch  <basile@starynkevitch.net>

	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+02.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+02.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-macro+01.c: Regenerate.
	* melt/generated/warmelt-macro+02.c: Regenerate.
	* melt/generated/warmelt-macro+03.c: Regenerate.
	* melt/generated/warmelt-macro+04.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+01.c: Regenerate.
	* melt/generated/warmelt-normatch+02.c: Regenerate.
	* melt/generated/warmelt-normatch+03.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+05.c: New generated file.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+01.c: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+03.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2012-02-14  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt-runtime.c (meltgc_strbuf_reserve) Improve big buffer debugging.
	(READ_ERROR): Untabify.
	(meltgc_readsexpr, meltgc_readmacrostringsequence)
	(meltgc_read_file): Use MELT_LOCATION_HERE_PRINTF...
	* melt/warmelt-base.melt (increment): New primitive.
	* melt/warmelt-debug.melt (dbgout_strbuf_method): New method for
	dbg_output on discr_strbuf.

2012-02-13  Basile Starynkevitch  <basile@starynkevitch.net>

	* melt/warmelt-normatch.melt (class_nrep_match_data_initializer):
	Improve doc.
	(complete_normstep_if_last): More debug.
	(mg_altdraw_graphviz): More nice.

2012-02-13  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.h (MELT_BIGLEN): New constant
	* melt-runtime.c (meltgc_strbuf_reserve): Display debug messages
	when reaching it.

2012-02-10  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-debug.melt (dbgout_fields): Force indentation and
	output for fields of depth 0 or 1, to produce prettier output.

	* melt/warmelt-normatch.melt (mgaltstep_steptestmult): Better color.

	* melt/warmelt-genobj.melt (compilobj_nrep_altmatch): Better debug.
	(compilobj_nrep_matchlabel) Safer field access.
	(compilobj_nrep_matchflag): New fake method for compile_obj on
	class_nrep_match_flag.
	(compilobj_nrep_matchedata): New fake method for compile_obj on
	class_nrep_matched_data.
	(compilobj_nrep_matchjump): New fake method for compile_obj on
	class_nrep_match_jump.

2012-02-10  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-normatch.melt (class_nrep_matched_data): Typo in
	doc-string.

	* melt/warmelt-genobj.melt (compilobj_nrep_ifisa): Use
	make_objlocatedexp.
	(compilobj_nrep_iftuplesized): New method for compile_obj on
	class_nrep_iftuplesized
	(compilobj_nrep_matchlabel): Incomplete, but generate #error.
	(compilobj_nrep_matchdatainit): Likewise.

2012-02-10  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-normatch.melt (mgaltstep_steptestmult): Typo in
	generated label.

	* melt/warmelt-genobj.melt (compilobj_nrep_matchdatainit): More
	debug.

2012-02-10  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-normatch.melt (scanstepdata_testins): More debug.
	(scanstepdata_testtuple): New method for scan_step_data on
	class_match_step_test_multiple.
	(scanstepdata_testwithflag): New no-op method for scan_step_data
	on class_match_step_with_flag

2012-02-09  Basile Starynkevitch  <basile@starynkevitch.net>

	* testsuite/melt/tmatch-tuple.melt: New file.

2012-02-09  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-normatch.melt (mglabel_any, scanstepdata_anyrecv)
	(scanstepflag_anyrecv): Add catchall erroring methods for
	matchgraphic_label, scan_step_data, scan_step_flag.
	(mg_altdraw_graphviz): Add assertion for mdata.

2012-02-08  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-normatch.melt (mg_altdraw_graphviz)
	(altmatch_normalize_mdata): More debug.

2012-02-08  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-normatch.melt (putthen_matchany): New
	error-catch-all method for put_then_match on class_root.
	(putthen_matchany): New error-catch-all method for put_else_match
	on class_root.
	(translpat_tuplepat): More debugging messages.
	(mgaltstep_any): New error-catch-all method for
	matchgraphic_altstep on class_root.

2012-02-07  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt//warmelt-normatch.melt (scansubpat_construct): Remove
	duplicate.
	(mgaltstep_steptestmult): Add check.
	(fill_matchcase): Improve recursion on varpatscanner.

2012-02-07  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt//warmelt-normatch.melt (normstep_mtestmultiple): Done.

2012-02-07  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt//warmelt-normatch.melt (normstep_mtestmultiple): More.

2012-02-07  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}

	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+03.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.


2012-02-07  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-normal.melt (class_nrep_ifisa): Remove nifa_val
	field.
	(normexp_get_field,normexp_put_fields): Don't use nifa_val field.

	* melt/warmelt-normatch.melt (normstep_mtestinstance)
	(normstep_mtestmultiple): Ditto.

2012-02-07  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}

	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+01.c: Regenerate.
	* melt/generated/warmelt-normatch+02.c: Regenerate.
	* melt/generated/warmelt-normatch+03.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2012-02-07  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-normal.melt (class_nrep_iftestvalue): New class
	with nif_testval field.
	(class_nrep_ifisa): Inherit from above. Its field nifa_val is
	obsolete.
	(class_nrep_iftuplesized): New class.
	(normexp_get_field,normexp_put_fields): Temporarily fill both
	nifa_val and nif_testval fields.

	* melt/warmelt-normatch.melt (normstep_mtestinstance)
	(normstep_mtestmultiple): Temporarily fill both nifa_val and
	nif_testval fields.

	* melt/warmelt-genobj.melt (compilobj_nrep_ifisa): Use nif_testval
	field.

2012-02-06  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-normatch.melt (normstep_mtestmultiple): More.

2012-02-06  Basile Starynkevitch  <basile@starynkevitch.net>
	* toplev.c (announce_function): Emit newline periodically.

	* melt/warmelt-normatch.melt (normstep_mtestmultiple): New
	incomplete method for normalize_step in
	class_match_step_test_multiple.

2012-02-06  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-normatch.melt (translpat_tuplepat): Done.

2012-02-06  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-normatch.melt (translpat_tuplepat): More

2012-02-03  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-normatch.melt (class_match_step_test_multiple): New
	class.
	(scansubpat_composite) renamed as..
	(scansubpat_construct) ..
	(translpat_tuplepat): More, but not yet complete...
	(mgaltstep_steptestmult) New method for matchgraphic_altstep on
	class_match_step_test_multiple.

2012-02-03  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.h (melt_set_flag_debug, melt_clear_flag_debug): New
	declarations.
	* melt-runtime.c (meltgc_do_initial_mode): Better debug printf.
	(meltgc_set_user_options): New function.
	(meltgc_load_modules_and_do_mode): Call it.
	(melt_set_flag_debug, melt_clear_flag_debug): New functions.
	* testsuite/melt/tmatch-1.melt: improve comment.

2012-02-02  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.c (melt_passexec_callback): Bigger location buf.
	(meltgc_do_initial_mode): Verbose debugging of exit builtin mode,
	and of failed modes.
	(meltgc_load_modules_and_do_mode): Moved handling of options.
	(meltgc_gimple_gate, meltgc_rtl_gate, meltgc_simple_ipa_gate)
	(meltgc_simple_ipa_execute, melt_handle_melt_attribute): Bigger
	location buf.
	* testsuite/melt/tmatch-2.melt: Improve comment.

2012-02-02  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-genobj.melt (compilobj_nrep_unsafe_nth_component)
	(compiltst_normtester_tuple): Generate meltmultiple_ptr_t with
	good spelling..
	{{tmatch-1.melt passes}}

2012-02-02  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+01.c: Regenerate.
	* melt/generated/warmelt-normatch+02.c: Regenerate.
	* melt/generated/warmelt-normatch+03.c: Regenerate.
	* melt/generated/warmelt-normatch+04.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+01.c: Regenerate.
	* melt/generated/warmelt-outobj+02.c: Regenerate.
	* melt/generated/warmelt-outobj+03.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2012-02-02  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-normatch.melt (normpat_tuplepat): Implemented.
	* melt/warmelt-genobj.melt (make_objcompute): New function.
	(compile2obj_initproc): Use it.
	(compilobj_nrep_unsafe_nth_component): New method for compile_obj
	of class_nrep_unsafe_nth_component.
	(compilobj_nrep_store_predefined): Use make_objcompute.
	(compiltst_normtester_tuple): Done.
	* melt/warmelt-outobj.melt (outpucod_procroutine) generate #undef
	of melt_variadic_length & melt_variadic_index

2012-02-02  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-normatch.melt (normpat_tuplepat): Skip joker subpatterns.
	* melt/warmelt-genobj.melt (make_objlocatedexp): New function.
	(compiltst_normtester_instance, compiltst_normtester_tuple): Use it.

2012-02-01  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-genobj.melt (compiltst_normtester_tuple): New
	incomplete method for compile_tester on class_normtester_tuple.

2012-01-30  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-normal.melt (class_nrep_unsafe_nth_component): New,
	with fields nunth_tuple & nunth_index
	* melt/warmelt-normatch.melt (class_normtester_tuple): New, with
	nttuple_components
	(normpat_instancepat): Sort the fields according to their pattern weight.
	(class_tuple_component_pattern): New, with tupcp_pattern & tupcp_index
	(normpat_tuplepat): New method for normal_pattern of
	class_source_pattern_tuple

2012-01-30  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.h (MELTDBG_MAXDEPTH): Remove dual definition when
	optimized...

2012-01-30  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-normatch.melt (scanpat_srcpatconst): Renamed as
	(scanpat_srcpatconstant).
	(scanpat_srcpatconstruct): New method

2012-01-30  Basile Starynkevitch  <basile@starynkevitch.net>
	* testsuite/melt/tmatch-1.melt: Improve comment about running it.

2012-01-30  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/xtramelt-opengpu.melt (opengpu_affine_accessed_array):
	Incomplete, trigger a MELT bad translation bug...

2012-01-27  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/xtramelt-opengpu.melt (opengpu_affine_accessed_array):
	Incomplete. Begin handling cast of induction variables.

2012-01-27  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/xtramelt-opengpu.melt: More Use of dbg_tree_briefly.

2012-01-27  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/xtramelt-ana-base.melt (dbgout_boxtree_method): Output
	briefly the tree content.
	* melt/xtramelt-opengpu.melt: Use dbg_tree_briefly in debug...

2012-01-27  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.h (MELT_VERSION_STRING): Bumped to 0.9.3+

2012-01-27  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+02.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2012-01-27  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.h (MELTDBG_MAXDEPTH, melt_need_debug)
	(melt_need_debug_limit): Defined significantly even without
	MELT_HAVE_DEBUG!

2012-01-26  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-debug.melt (dbg_out): Compute maxdepth. Use a cond.

2012-01-26  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.h (melt_is_plugin): Declare new extern variable.

	* melt-runtime.c (melt_is_plugin): Define.
	(melt_print_version_info): Use it.

2012-01-23  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerated}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+01.c: Regenerate.
	* melt/generated/warmelt-debug+02.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+01.c: Regenerate.
	* melt/generated/warmelt-first+02.c: Regenerate.
	* melt/generated/warmelt-first+03.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+03.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2012-01-23  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.c (melt_debug_depth): Don't test melt_flag_debug.

2012-01-23  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-debug.melt (melt_has_flag_debug_set): New primitive.

2012-01-23  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.c (melt_apply): Add more checks with fatal error on
	closure and routine.

2012-01-23  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.h (melt_flag_debug, melt_flag_bootstrapping): Declare for plugin.
	* melt-runtime.c (melt_flag_debug, melt_flag_bootstrapping): Define for plugin.
	* melt/warmelt-first.melt (melt_need_dbg, melt_need_dbglim):
	Improve documentation.
	* melt/warmelt-debug.melt (melt_really_need_debug)
	(melt_really_need_dbglim): News primitives which are non trivial
	even in optimized flavor.
	Use them everywhere.

2012-01-22  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-build.tpl: Missing space for generation of *-module.stamp
	* melt-build.mk: Regenerate.

2012-01-22  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2012-01-22  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.c (meltgc_gimple_gate, meltgc_rtl_gate)
	(meltgc_simple_ipa_gate): Initialize ok to TRUE so that a lack of
	gate closure don't fail the pass.

	* testsuite/melt/tpassexec.melt: New file.
	* testsuite/melt/tpassexec-c.c: New file.

2012-01-22  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.c (meltgc_do_initial_mode): Warn when mode failed.
	(meltgc_notify_sysdata_passexec_hook): More debug.
	* melt-run.proto.h: include "plugin-version.h".
	* melt/warmelt-modes.melt: Add a return :true in all our modes.

2012-01-22  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.c (melt_passexec_callback): Improve debug.
	* melt/xtramelt-c-generator.melt: Don't use debugtree.

2012-01-22  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.c (melt_flavors_array): New.
	(melt_load_module_index): Try other flavors when asked for default.

2012-01-21  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.h (MELT_VERSION_STRING): bumped to 0.9.3

2012-01-21  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2012-01-21  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-module.mk: Share the *+meltdesc.pic.o for all flavors.

2012-01-21  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-outobj.melt (translate_macroexpanded_list): Count
	the number of real secondary files generated, and backup the old
	extra ones.
	* melt/xtramelt-ana-simple.melt: install_melt_mode has one argument!

2012-01-21  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.c (melt_compile_source): More tests.
	* melt/xtramelt-c-generator.melt: Don't use debugtree.

2012-01-20  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-outobj.melt
	(translate_to_c_one_or_more_melt_files): More debug.
	* melt/warmelt-modes.melt (runfile_docmd): More debug.

2012-01-19  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.c (meltgc_load_flavored_module): Always find in
	current directory. Inform about all the directories and paths
	searched.

2012-01-18  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.h (MELT_VERSION_STRING): bumped to 0.9.3-

2012-01-18  Basile Starynkevitch  <basile@starynkevitch.net>
	* warmelt-base.melt (clone_with_discriminant): Better casts in
	macrostrings.
	* melt/xtramelt-ana-base.melt (tree_function_decl_named)
	(function_decl_of_name, tree_function_decl, tree_var_decl_named)
	(tree_var_decl, tree_var_decl_of_name, tree_const_decl_of_name)
	(tree_const_decl_named, tree_parm_decl_named)
	(tree_parm_decl_of_name, tree_parm_decl, tree_result_decl_named)
	(tree_result_decl, tree_result_decl_of_name): Improve or add or
	change.
	* melt/xtramelt-ana-simple.melt (meltframe_exec)
	(smaninterp_gimple, ...): Adapt to previous changes.
	* melt/xtramelt-c-generator.melt: Likewise.

2012-01-17  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/xtramelt-ana-base.melt (tree_complex_type, tree_const_decl)
	(tree_const_decl_named, tree_parm_decl, tree_parm_decl_named)
	(tree_type_decl, tree_type_decl_named, tree_fixed_point_type)
	(tree_nullptr_type, tree_result_decl, tree_result_decl_named): New

2012-01-17  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/xtramelt-ana-base.melt (tree_offset_type)
	(tree_enumeral_type, tree_boolean_type, tree_pointer_type)
	(tree_reference_type): New.

2012-01-17  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-build.tpl: Force with -f most occurrences of $(LN_S)
	* melt-build.mk: Regenerate.

2012-01-17  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerate}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+01.c: Regenerate.
	* melt/generated/warmelt-modes+02.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2012-01-17  Basile Starynkevitch  <basile@starynkevitch.net>
	{{tdefine.melt test works!}}
	* melt/warmelt-normal.melt (normexp_define): Remove duplicate
	newenv binding. Remove the cached normalization.
	(normbind_anybind, normbind_formalbind, normbind_letbind)
	(normbind_fixbind, normbind_definedvalbind)
	(normbind_constructbind, normexp_symbol, normexp_let)
	(normexp_citeration): Added more debug messages

2012-01-16  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-normal.melt (normexp_define): More debug.
	make a tuple with two additional normal components.
	* melt/warmelt-genobj.melt (dispose_objloc)
	(compilobj_nrep_locsymocc): More debug.
	* testsuite/melt/tdefine.melt: Use plus1 function.

2012-01-16  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Better build machinery... work in progress}}
	* melt-build.tpl (WARMELT_LAST_STAGESTAMP): New. Use it at many
	occasions.
	* melt-build.mk: Regenerate.
2012-01-16  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Better build machinery... work in progress}}
	* melt-build.tpl: Use the melt-sourceS/*melttime.h timestamps.
	* melt-build.mk: Regenerate.

2012-01-16  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Better build machinery... work in progress}}
	* Makefile.in (melt.encap): Also depends upon
	$(srcdir)/melt-build.mk.
	* melt-build.tpl: Always use $(MD5SUM).
	Better dependencies on directory and stage stamp files.
	* melt-build.mk: Regenerate.

2012-01-15  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Better build machinery... work in progress}}
	* Makefile.in (melt_make_move): Rename as ...
	(melt_move_if_change): New variable
	(melt-runtime.o): Don't rebuilt everytime because of
	melt-runtime.args.
	* melt-build.tpl: Improve. Use melt_move_if_change...
	* melt-build.mk: Regenerate.

2012-01-13  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Unoptimal build machinery... work in progress}}
	* melt/warmelt-modes.melt: Issue a warning when translating a file
	not named *.melt.
	* melt-build.tpl: Improve. Use directory stamp files *-directory.stamp.
	* melt-build.mk: Regenerate.

2012-01-12  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Unstable build machinery... work in progress}}
	* Makefile.in (melt_xtra_cflags): Non empty.
	* melt-module.mk: Add debugging echo.
	* melt-build.tpl: Partially improved, but very probably
	non-optimal.
	* melt-build.mk: Regenerate.

2012-01-10  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-module.mk (melt_module): Add intermediate dependency to
	symlink it forcibly.
	($(GCCMELT_MODULE_BINARYBASE).$(GCCMELT_MODULE_FLAVOR).so): New
	intermediate target.
	* melt-build.tpl: Move and improve, notably vpath.
	* melt-build.mk: Regenerate.

2012-01-09  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-build.tpl: Add explicit rules for stage zero
	*meltdesc.c etc...
	Add rule for melttime.h headers.
	* melt-build.mk: Regenerate.

2012-01-06  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerated.}}
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.

2012-01-06  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-build.tpl: With make timestamp files melt-stage*-warmelt-*.stamp.
	* melt-build.mk: Regenerate.

2012-01-06  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-build.tpl: The gernerated warmelt*.c don't explicitly
	depend upon all the $(MELT_TRANSLATOR_SOURCE) but only on *.stamp
	files...
	* melt-build.mk: Regenerate.
	* Makefile.in (check-melt-runtime): Use $(MELT_RUNTIME_C).

2012-01-05  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerated. The warmelt*+melttime.h are added.}}
	* melt/generated/warmelt-base+melttime.h: Regenerate.
	* melt/generated/warmelt-debug+melttime.h: Regenerate.
	* melt/generated/warmelt-first+melttime.h: Regenerate.
	* melt/generated/warmelt-genobj+melttime.h: Regenerate.
	* melt/generated/warmelt-macro+melttime.h: Regenerate.
	* melt/generated/warmelt-modes+melttime.h: Regenerate.
	* melt/generated/warmelt-normal+melttime.h: Regenerate.
	* melt/generated/warmelt-normatch+melttime.h: Regenerate.
	* melt/generated/warmelt-outobj+melttime.h: Regenerate.
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+01.c: Regenerate.
	* melt/generated/warmelt-base+02.c: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-base.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-modes.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+03.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normatch.c: Regenerate.
	* melt/generated/warmelt-outobj+04.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj.c: Regenerate.

2012-01-05  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-outobj.melt (output_melt_descriptor): Don't use
	path for the included timestamp file. Generate comment in that
	timestamp file.

2012-01-05  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-build.tpl (warmelt-upgrade-translator): Also copy the
	FOO+melttime.h melt timestamp files.
	* melt-build.mk: Regenerate.
	* melt-runtime.h (melt_compile_source): Mention Melt timestamp file.
	* melt-runtime.c (melt_compile_source): Mention Melt timestamp
	file and warn when missing.
	* melt-module.mk (CCMELT_TIMEF): Variable for Melt timestamp file.
	Warn when missing. Add dependency on it.
	* melt/warmelt-outobj.melt (output_melt_descriptor): Use the naked
	basename for the unique macroname related to inclusion of Melt
	timestamp file.

2012-01-04  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt-runtime.h (melt_output_strbuf_to_file_no_overwrite):  New declaration.
	* melt-runtime.c (melt_output_strbuf_to_file_no_overwrite):  New function.
	* melt/warmelt-base.melt (output_sbuf_no_overwrite_strconst)
	(output_sbuf_no_overwrite_strval): New primitives.
	* melt/warmelt-outobj.melt (output_melt_descriptor): Generate a
	separate FOO+melttime.h file included in FOO+meltdesc.c.

2012-01-04  Basile Starynkevitch  <basile@starynkevitch.net>
	* melt/warmelt-outobj.melt (output_melt_descriptor): Move the time
	stamp values to end of generated *-meltdesc.c file.

2012-01-04  Basile Starynkevitch  <basile@starynkevitch.net>
	{{Regenerated, even if `tdefine.melt` test don't work}}
	* melt/generated/meltrunsup-inc.c: Regenerate.
	* melt/generated/meltrunsup.h: Regenerate.
	* melt/generated/warmelt-base+meltdesc.c: Regenerate.
	* melt/generated/warmelt-debug+meltdesc.c: Regenerate.
	* melt/generated/warmelt-first+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj+01.c: Regenerate.
	* melt/generated/warmelt-genobj+02.c: Regenerate.
	* melt/generated/warmelt-genobj+03.c: Regenerate.
	* melt/generated/warmelt-genobj+04.c: Regenerate.
	* melt/generated/warmelt-genobj+05.c: Regenerate.
	* melt/generated/warmelt-genobj+meltdesc.c: Regenerate.
	* melt/generated/warmelt-genobj.c: Regenerate.
	* melt/generated/warmelt-macro+01.c: Regenerate.
	* melt/generated/warmelt-macro+02.c: Regenerate.
	* melt/generated/warmelt-macro+03.c: Regenerate.
	* melt/generated/warmelt-macro+04.c: Regenerate.
	* melt/generated/warmelt-macro+meltdesc.c: Regenerate.
	* melt/generated/warmelt-macro.c: Regenerate.
	* melt/generated/warmelt-modes+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal+01.c: Regenerate.
	* melt/generated/warmelt-normal+02.c: Regenerate.
	* melt/generated/warmelt-normal+03.c: Regenerate.
	* melt/generated/warmelt-normal+04.c: Regenerate.
	* melt/generated/warmelt-normal+05.c: Regenerate.
	* melt/generated/warmelt-normal+meltdesc.c: Regenerate.
	* melt/generated/warmelt-normal.c: Regenerate.
	* melt/generated/warmelt-normatch+meltdesc.c: Regenerate.
	* melt/generated/warmelt-outobj+meltdesc.c: Regenerate.

2012-01-03  Basile Starynkevitch  <basile@starynkevitch.net>
	{{ tdefine.melt test still failing, translated incorrectly, so
	xtramelt-ana-base.melt still incorrectly translated. }}
	* melt/warmelt-macro.melt: Update comment & copyright year.
	* melt/warmelt-normal.melt: Likewise.
	(normexp_symbol): More debug.
	(normexp_define): Wrap in a letseq the normalized body of the
	define. Remove from the symbol cache..
	* melt/warmelt-genobj.melt: Update comment & copyright year.
	(compilobj_nrep_definedconstant): New function, perhaps buggy.
	(compilobj_nrep_if): More debug.


{{{{previous changelog entries for MELT in gcc/ are in file ChangeLog.MELT-2008-2011}}}}


Copyright (C) 2012-2013 Free Software Foundation, Inc.

Copying and distribution of this file, with or without modification,
are permitted in any medium without royalty provided the copyright
notice and this notice are preserved.

/// Local Variables:
/// mode: change-log
/// End:
