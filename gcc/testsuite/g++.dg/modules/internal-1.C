// { dg-additional-options "-fmodules-ts" }

export module frob;
// { dg-module-bmi !frob }

namespace {
class X 
{
};

}

static int frob () 
{
  return 1;
}

export int f (int = frob ()); // { dg-error "references internal linkage" }
int goof (X &); // { dg-error "references internal linkage" }
// { dg-prune-output "failed to write" }
