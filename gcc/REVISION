sfgpr branch, based on subversion id 248902.
