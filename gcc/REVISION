power7-target branch, based off of r165524.
