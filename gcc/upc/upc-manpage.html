<HTML><HEAD><TITLE>GCC UPC Manual Page</TITLE>
</HEAD><BODY>
<H1>
<center>
GCC UPC
<br> A Unified Parallel C (UPC)
<br> Compilation and Execution Environment
<br> Based on the GNU C Compiler (GCC)
</center>
</H1>
<A NAME="lbAB">&nbsp;</A>
<H2>NAME</H2>

upc - UPC compiler for parallel computers.
<A NAME="lbAC">&nbsp;</A>
<H2>SYNOPSIS</H2>

<B>upc</B>

[ <I>option</I> | <I>filename</I> ]...

<A NAME="lbAD">&nbsp;</A>
<H2>DESCRIPTION</H2>

UPC is an extension to the GNU C compiler from the Free
Software Foundation.  In addition to the options specified here, all of
the normal GCC options listed in the man pages for
<I>gcc(1)</I>

are available.
The UPC compiler is integrated with the GCC compiler.  UPC processes input files
through one or more of four stages: preprocessing, compilation,
assembly, and linking.
<DL COMPACT>
<DT></DL>
<P>

<DD>
Suffixes of source file names indicate the language and kind of
processing to be done:

<P>



<PRE>

<B>.upc</B>     UPC source; preprocess, compile, assemble
<B>.upci</B>    Preprocessed UPC; compile, assemble
<B>.h</B>       Preprocessor file; not usually named on command line
<B>.c,.i,.s</B> C, preprocessed C, and assembler source files, and are processed by the C compiler and assembler. The resulting object files can be linked with UPC source code.


</PRE>

Files with other suffixes are passed to the linker.  Common cases include:

<P>



<PRE>
<B>.o</B>      Object file
<B>.a</B>      Archive file
<BR>
</PRE>


<P>



Linking is always the last stage unless you use one of the
<B>-c</B>,

<B>-S</B>,

or
<B>-E</B>

options to avoid linking (or unless compilation errors stop the whole
process).  For the link stage, all
<B>.o</B>

files corresponding to source files,
<B>-l</B>

libraries, unrecognized filenames (including named
<B>.o</B>

object files and
<B>.a</B>

archives)
are passed to the linker in command-line order.
<A NAME="lbAE">&nbsp;</A>
<H2>OPTIONS</H2>

Here is a summary of all the UPC-specific options.
<DL COMPACT>
<DT><B>Information Options</B>

<DD>
-v
<DT><B>Language Options</B>

<DD>
-fupc-threads-n
<BR>

-x upc
<BR>

<DT><DT><B>Debugging Options</B>

<DD>
<DD>
-g
<DT><B>Optimization Options</B>

<DD>
-O1, -O2, -O3
</DL>
<A NAME="lbAF">&nbsp;</A>
<H2>INFORMATION OPTIONS</H2>

<DL COMPACT>
<DT><B>-v</B>

<DD>
Identifies the version of UPC currently in use, with a path name to a
specification file that is in the same directory as include directories
and other version-specific directories and files.  Can be invoked without
a source file name.  When invoked with files, gives include and library
directory paths in the order that they are searched.
</DL>
<A NAME="lbAG">&nbsp;</A>
<H2>LANGUAGE OPTIONS</H2>

All source files ending in .upc or .upci will be compiled by the UPC compiler. The
<B>-x upc</B>

switch tells the compiler to process all of the following file
names as UPC source code, ignoring the default language typically
associated with filename extensions.
<DL COMPACT>
<DT><B>-fupc-threads-n</B>

<DD>
Compile for
<B>n</B>

threads.  The special symbol THREADS will be set to
<B>n</B>

and can be used both in
data declarations (as a constant for array dimensions) and in expressions.
On each thread the special symbol MYTHREAD refers to the thread number.
</DL>
<A NAME="lbAH">&nbsp;</A>
<H2>DEBUGGING OPTIONS</H2>

<DL COMPACT>
<DT><B>-g</B>

<DD>
Produce symbolic debugging information
</DL>
<A NAME="lbAI">&nbsp;</A>
<H2>OPTIMIZATION OPTIONS</H2>

<DL COMPACT>
<DT><B>-O2</B>

<DD>
This optimization level is one of GCC's standard options.  It is especially
important for UPC because it enables instruction scheduling, which increases
performance dramatically for distributed data access.  Nearly all supported
optimizations that do not involve a space-speed tradeoff are performed.  Loop
unrolling and function inlining are not done, for example.
<P>
</DL>
<A NAME="lbAJ">&nbsp;</A>
<H2>EXECUTION (RUNTIME) OPTIONS</H2>

<P>
The number of THREADS in an UPC application can be specified
statically at compile-time, or dynamically at execution time.
In the static compilation environment THREADS is a constant,
and can be used freely in contexts where a constant is required by
the C language specification (for example in an array declaration).
In a dynamic compilation environment, the value of THREADS is given at
runtime, and THREADS can be used in array declarations only if the
array is qualified as
<I>shared</I>

and in contexts where one and only one of the shared array's dimensions
is specified as an integral multiple of THREADS.
<P>
<DL COMPACT>
<DT><B>&lt;UPC_program&gt; [-fupc-threads-n] [-fupc-heap-n[K|M|G]] [program-specific-arguments and switches]</B>

<DD>
</DL>
<P>

If the UPC program was not compiled with the -fupc-threads-n
option, then the number of THREADS must be specified 
explicitly on the command line when the
program is executed. The UPC runtime recognizes the
<I>-fupc-threads-n</I>

command line switch, and establishes the number of parallel execution
threads given by the value `n'. Generally, `n' should not exceed the
number of physical central processing units. The implementation-imposed
maximum value of `n' is 256.
<P>

The size of the heap used by the UPC program is established with the
specificaion of the
<I>-fupc-heap-n</I>

command line switch. The value of `n' is the size of the heap available
to each thread, specified in bytes.
A suffix of `K', indicates that the value `n' is expressed in kilobytes (2^10 bytes);
a suffix of `M' indicates that `n' is expressed in megabytes (2^20 bytes);
and `G' indicates the value is given in gigabytes (2^30 bytes).
If the -fupc-heap-n switch is not supplied, then the runtime system
will choose a default heap size of 10 megabytes per thread.
<P>

The UPC runtime will remove all switches that begin with the prefix
<I>-fupc-</I>

and that immediately follow the UPC program name on the command line,
before calling the UPC program's `main()' routine.
<P>
<A NAME="lbAK">&nbsp;</A>
<H2>FILES</H2>

<PRE>

file.upc           UPC source file
file.upci          preprocessed UPC source file
file.c             C source file
file.h             C header (preprocessor) file
file.i             preprocessed C source file
file.s             assembly language file
file.o             object file
a.out              link edited output
<I>TMPDIR</I>/cc*         temporary files
<I>LIBDIR</I>/cpp         preprocessor
<I>LIBDIR</I>/cc1upc      compiler for UPC
<I>LIBDIR</I>/cc1         compiler for C
<I>LIBDIR</I>/collect2    linker front end needed on some machines
<I>LIBDIR</I>/libupc.a    UPC runtime library
<I>LIBDIR</I>/libgcc.a    GCC subroutine library
/lib/crt[01n].o    start-up routine
/lib/libc.a        standard C library, see
<I>intro</I>(3)
/usr/include       standard directory for #include files
<I>LIBDIR</I>/include     standard gcc directory for #include files


</PRE>

<I>LIBDIR</I>

should be found by using
<I>upc -v</I>

<BR>

<I>TMPDIR</I>

comes from the environment variable
<B>TMPDIR</B>

(default
<B>/usr/tmp</B>

if available, else
<B>/tmp</B>).
<A NAME="lbAL">&nbsp;</A>
<H2>SEE ALSO</H2>
gcc(1), cpp(1), as(1), ld(1), gdb(1), adb(1), dbx(1), sdb(1).
<p>
<I><A HREF="http://projects.seas.gwu.edu/~hpcl/upcdev/upctr.pdf">
Introduction to UPC and Language Specification</A>,</I>
William W. Carlson et al., LLNL, CCS-TR-99-157, May 13, 1999
<p>
<I><A HREF="ftp://ftp.seas.gwu.edu/pub/upc/downloads/upc_specs.pdf">
UPC Language Specifications</A></I>
Tarek A. El-Ghazawi et al, February 25, 2001
<P>
The 
<I><A HREF="http://www.gwu.edu/~upc/software/gnu-upc-ml.html">
GCC UPC Mailing List</A></I>
is an electronic forum for discussing
news announcements, bug reports, planned developments,
and other topics of interest to GCC UPC developers and users.

<A NAME="lbAM">&nbsp;</A>
<H2>BUGS</H2>

Report bugs to
<I><A HREF="mailto:upc@intrepid.com">upc@intrepid.com</A></I>.
<A NAME="lbAN">&nbsp;</A>
<H2>AUTHORS</H2>

Original Implementation by
Jesse M. Draper &lt;<A HREF="mailto:jdraper@super.org">jdraper@super.org</A>&gt; and William W. Carlson &lt;<A HREF="mailto:wwc@super.org">wwc@super.org</A>&gt;.
<BR>

Ported to SGI Irix 6.5 and the gcc 2.95.2 baseline by Gary Funck &lt;<A HREF="mailto:gary@intrepid.com">gary@intrepid.com</A>&gt; and Nenad Vukicevic &lt;<A HREF="mailto:nenad@intrepid.com">nenad@intrepid.com</A>&gt;.
<P>

<HR>
<small>
Last modified: Wed Oct 22 15:52:59 PDT 2003
</small>
</BODY>
</HTML>
