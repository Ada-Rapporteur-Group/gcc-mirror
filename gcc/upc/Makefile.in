# Makefile.in: GNU UPC front-end Makefile

#    Copyright (C) 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009,
#    2010, 2011
#    Free Software Foundation, Inc.
#    Contributed by Gary Funck <gary@intrepid.com>
#      and Nenad Vukicevic <nenad@intrepid.com>.
#    Based on original implementation
#      by Jesse M. Draper <jdraper@super.org>
#      and William W. Carlson <wwc@super.org>.
#    Derived from objc/Makefile.in

# This file is part of GCC.

# GCC is free software; you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation; either version 3, or (at your option)
# any later version.

# GCC is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.

# You should have received a copy of the GNU General Public License
# along with GCC; see the file COPYING3.  If not see
# <http://www.gnu.org/licenses/>.

#  The Makefile built from this file lives in the upc language subdirectory.
#  Its purpose is to provide support for:
#
#  1. recursion where necessary, and only then (building .o's), and
#  2. building and debugging cc1upcc from the language subdirectory.
#
#  The parent Makefile handles all other chores, with help from the language
#  Makefile fragment.
#
#  The targets for external use are `all' and `mostlyclean'.

SHELL=/bin/sh

OPTIMIZE= -O

srcdir = .
VPATH = $(srcdir)

AR = ar
AR_FLAGS = rc

# Define this as & to perform parallel make on a Sequent.
# Note that this has some bugs, and it seems currently necessary 
# to compile all the gen* files first by hand to avoid erroneous results.
P =

# Definition of `all' is here so that new rules inserted by sed
# do not specify the default target.
all: all.indirect

# sed inserts variable overrides after the following line.
####target overrides
####host overrides
####cross overrides
####build overrides
#

# Now figure out from those variables how to compile and link.
all.indirect: Makefile frontend

frontend:
	cd ..; $(MAKE) cc1upc$(exeext)

Makefile: $(srcdir)/Makefile.in $(srcdir)/../configure
	cd ..; $(SHELL) config.status

mostlyclean:
	-rm -f *.o xforward fflags
clean: mostlyclean
distclean: mostlyclean
extraclean: mostlyclean

# For Sun VPATH.

