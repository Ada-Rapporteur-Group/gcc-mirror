2011-09-21  Michael Meissner  <meissner@linux.vnet.ibm.com>

	* tree.c (build_common_tree_nodes): Initialize
	builtin_func_no_init_node.
	(builtin_function_init): New function to cal lang_hooks
	builtin_function_init hook.

	* tree.h (builtin_function_init): New declaration.
	(enum tree_index): Add TI_BUILTIN_FUNC_NO_INIT.
	(builtin_func_no_init_node): New global tree node to use to
	indicate builtin functions that need to be created.
	(built_in_decls): Move later in the file, add debugging support.
	(implicit_built_in_decls): Ditto.
	(built_in_decls_add): Ditto.
	(built_in_set_decl): Ditto.
	(built_in_copy_decl): Ditto.
	(built_in_no_implicit): Ditto.

	* c-objc-common.h (LANG_HOOKS_BUILTIN_FUNCTION_INIT): Define hook.

	* langhooks.c (lhd_builtin_function_init): Add default hook for
	initializing a builtin function after the fact.

	* langhooks.h (struct lang_hooks): Add builtin_function_init
	hook.

	* common.opt (-fmeissner-debug): Add temporary debug switch.
	(-fmeissner-builtin): Ditto.

	* config/spu/spu-c.c (spu_cpu_cpp_builtins): Change name of the
	macro to expand hook.
	* config/rs6000/rs6000-c.c (rs6000_cpu_cpp_builtins): Ditto.

	* langhooks-def.h (lhd_builtin_function_init): Add declaration.
	(LANG_HOOKS_BUILTIN_FUNCTION_INIT): Define new hook.
	(LANG_HOOKS_INITIALIZER): Add builtin_function_init initialize.

2011-09-19  Michael Meissner  <meissner@linux.vnet.ibm.com>

	Merge up to 178985.
	* REVISION: Update subversion id.

2011-09-19  Michael Meissner  <meissner@linux.vnet.ibm.com>

	* tree.h (built_in_decls): Change builtin interface from being an
	array to an inline function for both normal and implicit builtin
	functions.  Change all read references to built_in_decls and
	implicit_built_in_decls arrays to functions, and change write
	references to call built_in_set_decl, built_in_decls_add,
	built_in_decls_copy, or built_in_decls_no_implicit.
	(implicit_built_in_decls): Ditto.
	(struct built_in_decl_info): Ditto.
	(built_in_info): Ditto.
	(built_in_get_decl): Ditto.
	(built_in_set_decl): Ditto.
	(built_in_copy_decl): Ditto.
	(built_in_no_implicit): Ditto.
	* tree-complex.c (expand_complex_libcall): Ditto.
	* tree-loop-distribution.c (generate_memset_zero): Ditto.
	* tree.c (iterative_hash_expr): Ditto.
	(build_common_builtin_nodes): Ditto.
	* builtins.c (built_in_decls): Ditto.
	(implicit_built_in_decls): Ditto.
	(mathfn_built_in_1): Ditto.
	(expand_builtin_cexpi): Ditto.
	(expand_builtin_mempcpy_args): Ditto.
	(expand_builtin_stpcpy): Ditto.
	(gimplify_va_arg_expr): Ditto.
	(expand_builtin_sync_operation): Ditto.
	(build_builtin_expect_predicate): Ditto.
	(fold_builtin_memory_op): Ditto.
	(fold_builtin_strcpy): Ditto.
	(fold_builtin_strncpy): Ditto.
	(fold_builtin_interclass_mathfn): Ditto.
	(fold_builtin_classify): Ditto.
	(fold_builtin_2): Ditto.
	(fold_builtin_strstr): Ditto.
	(fold_builtin_strpbrk): Ditto.
	(fold_builtin_strcat): Ditto.
	(fold_builtin_strncat): Ditto.
	(fold_builtin_strcspn): Ditto.
	(fold_builtin_fputs): Ditto.
	(fold_builtin_sprintf): Ditto.
	(fold_builtin_snprintf): Ditto.
	(expand_builtin_memory_chk): Ditto.
	(fold_builtin_stxcpy_chk): Ditto.
	(fold_builtin_strncpy_chk): Ditto.
	(fold_builtin_strcat_chk): Ditto.
	(fold_builtin_strncat_chk): Ditto.
	(fold_builtin_sprintf_chk_1): Ditto.
	(fold_builtin_printf): Ditto.
	(fold_builtin_fprintf): Ditto.
	(fold_call_stmt): Ditto.
	(set_builtin_user_assembler_name): Ditto.
	* tree-emults.c (emutls_common_1): Ditto.
	(lower_emutls_function_body): Ditto.
	* omp-low.c (scan_omp): Ditto.
	(lower_rec_input_clauses): Ditto.
	(lower_reduction_clauses): Ditto.
	(expand_parallel_call): Ditto.
	(expand_task_call): Ditto.
	(maybe_catch_exception): Ditto.
	(optimize_omp_library_calls): Ditto.
	(expand_omp_for_generic): Ditto.
	(expand_omp_for_static_chunk): Ditto.
	(expand_omp_sections): Ditto.
	(expand_omp_atomic_pipeline): Ditto.
	(expand_omp_atomic_mutex): Ditto.
	(lower_omp_single_simple): Ditto.
	(lower_omp_single_copy): Ditto.
	(lower_omp_single): Ditto.
	(lower_omp_master): Ditto.
	(lower_omp_ordered): Ditto.
	(lower_omp_critical): Ditto.
	* tree-ssa-ccp.c (optimize_stdarg_builtin): Ditto.
	* tree-ssa-math-opts.c (execute_optimize_bswap): Ditto.
	* gimple-low.c (lower_function_body): Ditto.
	(lower_builtin_setjmp): Ditto.
	* c-decl.c (finish_decl): Ditto.
	* tree-eh.c (lower_resx): ditto.
	(lower_eh_dispatch): Ditto.
	* function.c (gimplify_parameters): Ditto.
	* c-typeck.c (build_function_call_vec): Ditto.
	* gimplify.c (build_stack_save_restore): Ditto.
	(gimplify_vla_decl): Ditto.
	(gimplify_modify_expr_to_memcpy): Ditto.
	(gimplify_modify_expr_to_memset): Ditto.
	(gimplify_variable_sized_compare): Ditto.
	(gimplify_function_tree): Ditto.
	* calls.c (emit_call_1): Ditto.
	* tree-nested.c (convert_nl_goto_reference): Ditto.
	(convert_tramp_reference_op): Ditto.
	(finalize_nesting_tree_1): Ditto.
	* tree-ssa-loop-prefetch.c (issue_prefetch_ref): Ditto.
	(tree_ssa_prefetch_arrays): Ditto.
	* tree-streamer-in.c (streamer_get_builtin_tree): Ditto.
	* config/sparc/sparc.c (sparc_gimplify_va_arg): Ditto.
	* config/i386/i386.c (ix86_gimplify_va_arg): Ditto.
	(ix86_veclibabi_svml): Ditto.
	(ix86_veclibabi_acml): Ditto.
	* config/vms/vms.c (vms_patch_builtins): Ditto.
	* config/ia64/ia64.c (ia64_init_builtins): Ditto.
	* config/rs6000/rs6000.c (rs6000_builtin_vectorized_libmass): Ditto.
	(rs6000_gimplify_va_arg): Ditto.
	(rs6000_init_builtins): Ditto.
	* config/darwin.c (darwin_override_options): Ditto.
	(darwin_patch_builtin): Ditto.
	(darwin_rename_builtins): Ditto.
	* config/pa/pa.c (pa_init_builtins): Ditto.

	* builtins.def (BUILT_IN_NONE): Make sure 0 is not a legitimate
	builtin function index.

2011-09-15  Michael Meissner  <meissner@linux.vnet.ibm.com>

	Merge up to 178893.
	* REVISION: Update subversion id.

2011-09-13  Michael Meissner  <meissner@linux.vnet.ibm.com>

	Merge up to 178819.
	* REVISION: Update subversion id.

2011-09-12  Michael Meissner  <meissner@linux.vnet.ibm.com>

	Merge up to 178795.
	* REVISION: Update subversion id.

2011-09-08  Michael Meissner  <meissner@linux.vnet.ibm.com>

	Merge up to 178698.
	* REVISION: Update subversion id.

2011-09-07  Michael Meissner  <meissner@linux.vnet.ibm.com>

	Merge up to 178641.
	* REVISION: Update subversion id.

2011-09-02  Michael Meissner  <meissner@linux.vnet.ibm.com>

	* builtin-attrs.def: Undo meissner changes.
	* builtins.def: Ditto.
	* builtin-types.def: Ditto.
	* config.gcc: Ditto.
	* config/rs6000/rs6000-builtin.def: Ditto.
	* config/rs6000/rs6000.c: Ditto.
	* config/rs6000/rs6000-c.c: Ditto.
	* config/rs6000/rs6000.h: Ditto.
	* config/rs6000/rs6000-protos.h: Ditto.
	* configure: Ditto.
	* configure.ac: Ditto.
	* doc/configfiles.texi: Ditto.
	* Makefile.in: Ditto.
	* tree.h: Ditto.

	Subversion id r178490 is the revision that holds the previous
	changes.

2011-09-02  Michael Meissner  <meissner@linux.vnet.ibm.com>

	Merge up to 178488.
	* REVISION: Update subversion id.

2011-08-23  Michael Meissner  <meissner@linux.vnet.ibm.com>

	* doc/configfiles.texi (tm_p.h): Document why tm_p.h is needed.
	(tm-bu-funcs.def): Document the include file that includes the
	machine dependent builtin functions.

2011-08-22  Michael Meissner  <meissner@linux.vnet.ibm.com>

	* builtin-types.def (toplevel): Delete MD defined builtin
	attributes and types.
	* builtin-attrs.def (toplevel): Ditto.

	* configure.ac (tm_builtin_{attrs,types}): Delete, don't allow MD
	builtin attributes or types.
	* config.gcc (tm_builtin_{attrs,types}): Ditto.
	* Makefile.in (BUILTIN_{ATTRS,TYPES}_{DEF,MD}): Ditto.
	(tm-bu-{attrs,types}.def): Ditto.
	(c-family/c-common.o): Ditto.
	(mostlyclean): Ditto.
	* configure: Regenerate.

	* config/rs6000/rs6000.c (rs6000_builtin_decl): Fix thinko.

	Merge up to 177964.
	* REVISION: Update subversion id.

2011-08-19  Michael Meissner  <meissner@linux.vnet.ibm.com>

	Merge up to 177912.
	* REVISION: Update subversion id.

	* tree.h (struct tree_function_decl): Grow function code field by
	1 bit to allow for machines with lots of builtins.

	* builtins.def (BUILT_IN_NONE): Reserve builtin index 0 so it is
	not a legitimate builtin.

	* config/rs6000/rs6000-builtin.def: Use #defines for FIRST, LAST
	markers instead allocating dummy builtin slots.

	* config/rs6000/rs6000.c (def_builtin): Skip previously defined
	builtins instead of raising an error.
	(altivec_expand_builtin): Use OVERLOADED_BUILTIN_P.
	(altivec_init_builtin): Ditto.
	(rs6000_init_builtin_types): Split initializing types from the
	rest of the builtin support.  Add initial steps to making
	rs6000_init_builtins be called more than one.
	(rs6000_init_builtins): Ditto.
	(rs6000_common_init_builtins): Ditto.

	* config/rs6000/rs6000.h (*_BUILTIN_P): New macros to classify
	builtins.

2011-08-18  Michael Meissner  <meissner@linux.vnet.ibm.com>

	* builtins.def (DEF_BUILTIN_MD): Define new macro for machine
	dependent builtins added to the built_in_function enum.

	* config.gcc (rs6000*, powerpc*): Drop rs6000-bu-*.def, add
	rs6000-builtin.def which holds the powerpc builtins.

	* config/rs6000/rs6000-protos.h (rs6000_builtin_types): Move
	declaration here from rs6000.h.  Conditionalize on whether tree.h
	has been included.  Merge rs6000 builtins into standard builtins.
	(rs6000_builtin_decls): Ditto.

	* config/rs6000/rs6000-bu-attrs.def: Delete.
	* config/rs6000/rs6000-bu-funcs.def: Ditto.
	* config/rs6000/rs6000-bu-types.def: Ditto.

	* config/rs6000/rs6000-c.c (struct altivec_builtin_types): Merge
	rs6000 builtins into standard builtin enum.
	(altivec_overloaded_builtins): Ditto.

	* config/rs6000/rs6000-builtin.def: Drop RS6000_BUILTIN_EQUATE,
	and create marker enums for beginning/end enumerations.  Add
	support for being included from builtins.def to merge the rs6000
	builtin enums with the standard builtin enums.

	* config/rs6000/rs6000.c (rs6000_builtin_decls): Merge rs6000
	builtins with standard builtins.
	(struct builtin_description): Ditto.
	(builtin_classify): Ditto.
	(builtin_function_type): Ditto.
	(enable_mask_for_builtins): Ditto.
	(rs6000_builtin_vectorized_function): Ditto.
	(def_builtin): Ditto.
	(rs6000_builtin_decl): Ditto.
	(builtin_hash_eq): Ditto.

	* config/rs6000/rs6000.h (enum rs6000_btc): Add RS6000_BTC_NONE
	for markers.
	(enum rs6000_builtins): Delete, merge rs6000 builtins into
	standard builtins.
	(rs6000_builtin_types): Move to rs6000-protos.h.
	(rs6000_builtin_decl): Ditto.

	* doc/tm.texi: Undo 8/17 change.
	* doc/tm.texi.in: Ditto.
	* target.def: Ditto.

	* config/rs600/rs6000.c (rs6000_init_builtins): Undo 8/17 change
	splitting into two functions, and adding init builtin type target
	hook, but keep the change where we no longer test for TARGET_VSX
	before creating the basic VSX types.

2011-08-17  Michael Meissner  <meissner@linux.vnet.ibm.com>

	* doc/tm.texi (TARGET_INIT_BUILTIN_TYPES): Document new hook.
	* doc/tm.texi.in (TARGET_INIT_BUILTIN_TYPES): Ditto.

	* target.def (init_builtin_types): New target hook to allow
	backend to initialize types needed for builtin functions.

	* builtin-attrs.def: Include tm-bu-attrs.def.
	* builtin_types.def: Include tm-bu-types.def.
	* builtins.def: Include tm-bu-funcs.def.

	* configure.ac (tm_builtin_attrs): New autoconf substitution
	variable for backend builtin functions.
	(tm_builtin_funcs): Ditto.
	(tm_builtin_types): Ditto.
	* configure: Regenerate.
	* config.gcc (powerpc*, rs6000*): Add rs6000 builtin files.

	* Makefile.in (BUILTINS_DEF): Add support for backend defined
	builtin attributes, types, and functions.
	(BUILTIN_FUNCS_MD): Ditto.
	(BUILTIN_ATTRS_MD): Ditto.
	(BUILTIN_ATTRS_DEF): Ditto.
	(BUILTIN_TYPES_MD): Ditto.
	(BUILTIN_TYPES_DEF): Ditto.
	(tm-bu-attrs.def): Build file to include the back end builtin
	attributes, types, and functions files.
	(tm-bu-funcs.def): Ditto.
	(tm-bu-types.def): Ditto.
	(c-family/c-common.o): Adjust dependencies for back end builtins
	being merged with the standard builtins.
	(mostlyclean): Delete generated builtin include files.

	* config/rs6000/rs6000-bu-funcs.def: Stub file for now.
	* config/rs6000/rs6000-bu-attrs.def: Ditto.

	* config/rs6000/rs6000-bu-types.def: Add basic types needed for
	rs6000 builtins.

	* config/rs6000/rs6000.c (rs6000_init_builtin_types): New
	function, split type initialization from rs6000_init_builtins.
	Always generate the VSX vector types, just like we do for Altivec
	and SPE.
	(rs6000_init_builtins): Ditto.
	(TARGET_INIT_BUILTIN_TYPES): Define target hook.

2011-08-17  Michael Meissner  <meissner@linux.vnet.ibm.com>

	* Delete previous changes (subversion id 177834).

2011-08-16  Michael Meissner  <meissner@linux.vnet.ibm.com>

	* tree.h (toplevel): Include builtin-funcs.h instead of
	builtins.def.
	* builtins.c (toplevel): Ditto.

	* configure.ac (md_builtin_attrs_def): New configure variable
	passed to the Makefile to hold machine dependent builtin
	includes.
	(md_builtin_funcs_def): Ditto.
	(md_builtin_types_def): Ditto.
	* config.gcc (md_builtin_types_def): Ditto.
	(md_builtin_funcs_def): Ditto.
	(md_builtin_types_def): Ditto.
	(powerpc*, rs6000*): Add rs6000 builtin includes.

	* configure: Regenerate.

	* Makefile.in (BUILTINS_DEF): Delete.
	(BUILTIN_FUNCS_DEF): New macro to allow backend to define new
	builtins.
	(BUILTIN_ATTRS_DEF): Ditto.
	(BUILTIN_TYPES_DEF): Ditto.
	(BUILTIN_FUNCS_H): Ditto.
	(BUILTIN_ATTRS_H): Ditto.
	(BUILTIN_FUNCS_H): Ditto.
	(builtin-attrs.h): New include file that includes the standard and
	machine dependent builtins.
	(builtin-funcs.h): Ditto.
	(builtin-types.h): Ditto.
	(c-family/c-common.o): Change dependencies to allow backend to
	define new builtins.
	(mostlyclean): Delete generated builtin include files.

	* doc/tm.texi (TARGET_BUILTIN_ATTRS_INIT): New target hook.
	(TARGET_BUILTIN_TYPES_INIT): Ditto.
	* doc/tm.texi.in (TARGET_BUILTIN_ATTRS_INIT): Ditto.
	(TARGET_BUILTIN_TYPES_INIT): Ditto.
	* target.def (builtin_attrs_init): Ditto.
	(builtin_types_init): Ditto.

	* config/rs6000/rs6000-builtin-funcs.def: Stub file for now.

	* config/rs6000/rs6000-builtin-types.def: Add rs6000 builtin
	types.

	* config/rs6000.c (rs6000_builtin_attrs_init): New target hook for
	initialize builtin types and attributes.  Move in type handling
	from rs6000_init_builtins.
	(rs6000_builtin_types_init): Ditto.
	(TARGET_BUILTIN_ATTRS_INIT): Define.
	(TARGET_BUILTIN_TYPES_INIT): Ditto.
	(rs6000_init_builtins): Move type initialization to
	rs6000_builtin_types_init.

2011-08-16  Michael Meissner  <meissner@linux.vnet.ibm.com>

	Clone branch from FSF branch 177785.
	* REVISION: New file.

	Older branches:
	svn+ssh://meissner@gcc.gnu.org/svn/gcc/branches/ibm/gcc-4_7-meissner, id 177834, August 17, 2011
	svn+ssh://meissner@gcc.gnu.org/svn/gcc/branches/ibm/gcc-4_7-meissner, id 177804, August 16, 2011
	svn+ssh://meissner@gcc.gnu.org/svn/gcc/branches/ibm/power7-meissner,  id 173579, March   9, 2011
